<?xml version="1.0" encoding="UTF-8"?>

<!--
  Licensed Materials - Property of IBM
 
  Copyright IBM Corporation 2012. All Rights Reserved.

  US Government Users Restricted Rights - Use, duplication or disclosure 
  restricted by GSA ADP Schedule Contract with IBM Corp.
-->
<!--  BEGIN CR00214630 , LP-->
<!--  BEGIN CR00168004 , AK-->
<workflow-process category="PC5" createdBy="admin" creationDate="20090518T095946" id="110" language-version="1.0" process-version="2" released="true"> 
  <!-- END CR00168004 -->  
  <!-- END CR00214630 -->  
  <name>APPROVEPLANNEDITEM</name>  
  <!--BEGIN, CR00361282, CL -->  
  <process-display-name> 
    <localized-text> 
      <locale language="fr">Approuver un élément planifié</locale>  
      <locale language="en">Approve Planned Item</locale>
    </localized-text> 
  </process-display-name>  
  <!--END, CR00361282 -->  
  <!-- BEGIN, CR00248295, NS -->  
  <description> 
    <localized-text> 
      <locale language="fr">Avertit le propriétaire d'un élément planifié et le propriétaire d'un plan de service que l'élément planifié a été soumis pour approbation, et approuvé. Les propriétaires sont uniquement avertis s'ils n'ont pas soumis l'élément planifié pour approbation ou approuvé l'élément planifié. Lorsque le propriétaire est le même pour l'élément planifié et le plan de service, seule une notification est envoyée. Ce processus de flux de travaux est également responsable de la création d'un dossier de distribution de produits lorsque le type d'élément planifié en cours d'approbation est administrativement associé à une distribution de produits.</locale>  
      <locale language="en">Notifies the owner of a planned item and owner of the service plan that the planned item has been submitted for approval, as well as approved. The owners are only notified if they did not submit the planned item for approval or approve the planned item. If the owner is the same for both the planned item and service plan only one notification is sent. This workflow process is also responsible for the creation of a Product Delivery case if the type of planned item being approved is administratively associated with a Product Delivery.</locale>
    </localized-text> 
  </description>  
  <!-- END, CR00248295 -->  
  <enactment-mappings> 
    <mapping> 
      <source-attribute name="plannedItemID" struct-name="curam.serviceplans.sl.entity.struct.PlannedItemIDKey"/>  
      <target-attribute name="plannedItemID" wdo-name="SPProductDeliveryPI"/> 
    </mapping> 
  </enactment-mappings>  
  <wdos> 
    <wdo initialize-attributes="false" is-list-wdo="false"> 
      <wdo-name>SPProductDeliveryPI</wdo-name>  
      <display-name> 
        <localized-text> 
          <locale language="fr">SPProductDeliveryPI</locale>  
          <locale language="en">SPProductDeliveryPI</locale>
        </localized-text> 
      </display-name>  
      <attributes> 
        <attribute> 
          <attribute-name>plannedItemID</attribute-name>  
          <display-name> 
            <localized-text> 
              <locale language="fr">plannedItemID</locale>  
              <locale language="en">plannedItemID</locale>
            </localized-text> 
          </display-name>  
          <type>INT64</type>  
          <required-at-enactment>true</required-at-enactment>  
          <process-output>false</process-output> 
        </attribute>  
        <attribute> 
          <attribute-name>planItemID</attribute-name>  
          <display-name> 
            <localized-text> 
              <locale language="fr">planItemID</locale>  
              <locale language="en">planItemID</locale>
            </localized-text> 
          </display-name>  
          <type>INT64</type>  
          <required-at-enactment>false</required-at-enactment>  
          <process-output>false</process-output> 
        </attribute>  
        <attribute> 
          <attribute-name>typeCode</attribute-name>  
          <display-name> 
            <localized-text> 
              <locale language="fr">typeCode</locale>  
              <locale language="en">typeCode</locale>
            </localized-text> 
          </display-name>  
          <type>STRING</type>  
          <required-at-enactment>false</required-at-enactment>  
          <process-output>false</process-output> 
        </attribute>  
        <attribute> 
          <attribute-name>BenefitSampleType</attribute-name>  
          <display-name> 
            <localized-text> 
              <locale language="fr">BenefitSampleType</locale>  
              <locale language="en">BenefitSampleType</locale>
            </localized-text> 
          </display-name>  
          <type>STRING</type>  
          <required-at-enactment>false</required-at-enactment>  
          <process-output>false</process-output>  
          <constant-value>AT4</constant-value> 
        </attribute>  
        <attribute> 
          <attribute-name>planItemTaskConfigurationID</attribute-name>  
          <display-name> 
            <localized-text> 
              <locale language="fr">planItemTaskConfigurationID</locale>  
              <locale language="en">planItemTaskConfigurationID</locale>
            </localized-text> 
          </display-name>  
          <type>INT64</type>  
          <required-at-enactment>false</required-at-enactment>  
          <process-output>false</process-output> 
        </attribute>  
        <attribute> 
          <attribute-name>subjectText</attribute-name>  
          <display-name> 
            <localized-text> 
              <locale language="fr">Texte de l'objet</locale>  
              <locale language="en">subjectText</locale>
            </localized-text> 
          </display-name>  
          <type>STRING</type>  
          <required-at-enactment>false</required-at-enactment>  
          <process-output>false</process-output> 
        </attribute>  
        <attribute> 
          <attribute-name>actionLink</attribute-name>  
          <display-name> 
            <localized-text> 
              <locale language="fr">actionLink</locale>  
              <locale language="en">actionLink</locale>
            </localized-text> 
          </display-name>  
          <type>STRING</type>  
          <required-at-enactment>false</required-at-enactment>  
          <process-output>false</process-output> 
        </attribute>  
        <attribute> 
          <attribute-name>actionText</attribute-name>  
          <display-name> 
            <localized-text> 
              <locale language="fr">actionText</locale>  
              <locale language="en">actionText</locale>
            </localized-text> 
          </display-name>  
          <type>STRING</type>  
          <required-at-enactment>false</required-at-enactment>  
          <process-output>false</process-output> 
        </attribute>  
        <attribute> 
          <attribute-name>priority</attribute-name>  
          <display-name> 
            <localized-text> 
              <locale language="fr">priorité</locale>  
              <locale language="en">priority</locale>
            </localized-text> 
          </display-name>  
          <type>STRING</type>  
          <required-at-enactment>false</required-at-enactment>  
          <process-output>false</process-output> 
        </attribute> 
      </attributes> 
    </wdo> 
  </wdos>  
  <activities> 
    <start-process-activity id="29710"> 
      <name> 
        <localized-text> 
          <locale language="fr">Activité de processus de démarrage</locale>  
          <locale language="en">StartProcessActivity</locale>
        </localized-text> 
      </name>  
      <description> 
        <localized-text> 
          <locale language="fr">Activité du processus de début</locale>  
          <locale language="en">The start process activity</locale>
        </localized-text> 
      </description>  
      <split type="none"> 
        <transition-id idref="30266"/> 
      </split> 
    </start-process-activity>  
    <end-process-activity id="29711"> 
      <name> 
        <localized-text> 
          <locale language="fr">Activité de processus de fin</locale>  
          <locale language="en">EndProcessActivity</locale>
        </localized-text> 
      </name>  
      <description> 
        <localized-text> 
          <locale language="fr">Activité du processus de fin</locale>  
          <locale language="en">The end process activity</locale>
        </localized-text> 
      </description>  
      <join type="none"/> 
    </end-process-activity>  
    <automatic-activity id="29712"> 
      <name> 
        <localized-text> 
          <locale language="fr">CreatePlanItemProductDeliveryCase</locale>  
          <locale language="en">CreatePlanItemProductDeliveryCase</locale>
        </localized-text> 
      </name>  
      <join type="none"/>  
      <split type="none"> 
        <transition-id idref="30294"/> 
      </split>  
      <bpo-mapping interface-name="curam.sample.facade.intf.SampleBenefit" method-name="createAssociatedProductDeliveryForPlannedItem"> 
        <formal-parameters> 
          <formal-parameter index="0"> 
            <struct type="curam.sample.facade.struct.SampleBenefitPlanItemKey"> 
              <field name="key"> 
                <struct type="curam.serviceplans.sl.struct.PlannedItemIDKey"> 
                  <field name="plannedItemIDKey"> 
                    <struct type="curam.serviceplans.sl.entity.struct.PlannedItemIDKey"> 
                      <field name="plannedItemID"> 
                        <base-type type="INT64"> 
                          <wdo-attribute name="plannedItemID" wdo-name="SPProductDeliveryPI"/> 
                        </base-type> 
                      </field> 
                    </struct> 
                  </field> 
                </struct> 
              </field> 
            </struct> 
          </formal-parameter> 
        </formal-parameters> 
      </bpo-mapping> 
    </automatic-activity>  
    <automatic-activity id="30193"> 
      <name> 
        <localized-text> 
          <locale language="fr">ReadPlannedItem</locale>  
          <locale language="en">ReadPlannedItem</locale>
        </localized-text> 
      </name>  
      <join type="none"/>  
      <split type="none"> 
        <transition-id idref="30286"/> 
      </split>  
      <bpo-mapping interface-name="curam.serviceplans.sl.intf.PlannedItem" method-name="readDetailsForProductDeliveryCreation"> 
        <formal-parameters> 
          <formal-parameter index="0"> 
            <struct type="curam.serviceplans.sl.struct.PlannedItemIDKey"> 
              <field name="plannedItemIDKey"> 
                <struct type="curam.serviceplans.sl.entity.struct.PlannedItemIDKey"> 
                  <field name="plannedItemID"> 
                    <base-type type="INT64"> 
                      <wdo-attribute name="plannedItemID" wdo-name="SPProductDeliveryPI"/> 
                    </base-type> 
                  </field> 
                </struct> 
              </field> 
            </struct> 
          </formal-parameter> 
        </formal-parameters>  
        <return> 
          <struct> 
            <field name="planItemID"> 
              <base-type> 
                <wdo-attribute name="planItemID" wdo-name="SPProductDeliveryPI"/> 
              </base-type> 
            </field> 
          </struct> 
        </return> 
      </bpo-mapping> 
    </automatic-activity>  
    <automatic-activity id="30194"> 
      <name> 
        <localized-text> 
          <locale language="fr">ReadPlanItem</locale>  
          <locale language="en">ReadPlanItem</locale>
        </localized-text> 
      </name>  
      <join type="none"/>  
      <split type="and"> 
        <transition-id idref="30288"/>  
        <transition-id idref="30287"/> 
      </split>  
      <bpo-mapping interface-name="curam.serviceplans.sl.intf.PlanItem" method-name="read"> 
        <formal-parameters> 
          <formal-parameter index="0"> 
            <struct type="curam.serviceplans.sl.struct.PlanItemKey"> 
              <field name="key"> 
                <struct type="curam.serviceplans.sl.entity.struct.PlanItemKey"> 
                  <field name="planItemID"> 
                    <base-type type="INT64"> 
                      <wdo-attribute name="planItemID" wdo-name="SPProductDeliveryPI"/> 
                    </base-type> 
                  </field> 
                </struct> 
              </field> 
            </struct> 
          </formal-parameter> 
        </formal-parameters>  
        <return> 
          <struct> 
            <field name="dtls"> 
              <struct> 
                <field name="typeCode"> 
                  <base-type> 
                    <wdo-attribute name="typeCode" wdo-name="SPProductDeliveryPI"/> 
                  </base-type> 
                </field> 
              </struct> 
            </field>  
            <field name="taskConfigDtls"> 
              <struct> 
                <field name="taskConfigurationID"> 
                  <base-type> 
                    <wdo-attribute name="planItemTaskConfigurationID" wdo-name="SPProductDeliveryPI"/> 
                  </base-type> 
                </field>  
                <field name="subject"> 
                  <base-type> 
                    <wdo-attribute name="subjectText" wdo-name="SPProductDeliveryPI"/> 
                  </base-type> 
                </field>  
                <field name="actionText"> 
                  <base-type> 
                    <wdo-attribute name="actionText" wdo-name="SPProductDeliveryPI"/> 
                  </base-type> 
                </field>  
                <field name="priority"> 
                  <base-type> 
                    <wdo-attribute name="priority" wdo-name="SPProductDeliveryPI"/> 
                  </base-type> 
                </field> 
              </struct> 
            </field> 
          </struct> 
        </return> 
      </bpo-mapping> 
    </automatic-activity>  
    <manual-activity id="30198"> 
      <name> 
        <localized-text> 
          <locale language="fr">RaiseTaskForPlannedItem</locale>  
          <locale language="en">RaiseTaskForPlannedItem</locale>
        </localized-text> 
      </name>  
      <join type="none"/>  
      <split type="none"> 
        <transition-id idref="30292"/> 
      </split>  
      <task> 
        <message> 
          <message-text> 
            <localized-text> 
              <locale language="fr">%1s</locale>  
              <locale language="en">%1s</locale>
            </localized-text> 
          </message-text>  
          <message-parameters> 
            <wdo-attribute name="subjectText" wdo-name="SPProductDeliveryPI"/> 
          </message-parameters> 
        </message>  
        <actions> 
          <action page-id="ServicePlanAdmin_resolveActionLink" principal-action="false"> 
            <message> 
              <message-text> 
                <localized-text> 
                  <locale language="fr">%1s</locale>  
                  <locale language="en">%1s</locale>
                </localized-text> 
              </message-text>  
              <message-parameters> 
                <wdo-attribute name="actionText" wdo-name="SPProductDeliveryPI"/> 
              </message-parameters> 
            </message>  
            <link-parameter name="plannedItemID"> 
              <wdo-attribute name="plannedItemID" wdo-name="SPProductDeliveryPI"/> 
            </link-parameter> 
          </action> 
        </actions>  
        <task-priority> 
          <mapped-priority> 
            <wdo-attribute name="priority" wdo-name="SPProductDeliveryPI"/> 
          </mapped-priority> 
        </task-priority>  
        <allow-deadline-override>false</allow-deadline-override>  
        <allow-task-forwarding>true</allow-task-forwarding> 
      </task>  
      <allocation-strategy identifier="curam.core.sl.intf.WorkflowAllocationFunction.allocateTaskForPlannedItemTaskType" type="function"> 
        <function-mappings> 
          <formal-parameters> 
            <formal-parameter index="0"> 
              <struct type="curam.serviceplans.facade.struct.PlannedItemIDKey"> 
                <field name="plannedItemIDKey"> 
                  <struct type="curam.serviceplans.sl.struct.PlannedItemIDKey"> 
                    <field name="plannedItemIDKey"> 
                      <struct type="curam.serviceplans.sl.entity.struct.PlannedItemIDKey"> 
                        <field name="plannedItemID"> 
                          <base-type type="INT64"> 
                            <wdo-attribute name="plannedItemID" wdo-name="SPProductDeliveryPI"/> 
                          </base-type> 
                        </field> 
                      </struct> 
                    </field> 
                  </struct> 
                </field> 
              </struct> 
            </formal-parameter> 
          </formal-parameters> 
        </function-mappings> 
      </allocation-strategy>  
      <event-wait wait-on-all-events="false"> 
        <events> 
          <event event-class="TASK" event-type="CLOSED" identifier="1"> 
            <event-match-attribute name="taskID" wdo-name="Context_Task"/> 
          </event> 
        </events> 
      </event-wait> 
    </manual-activity>  
    <route-activity id="30195"> 
      <name> 
        <localized-text> 
          <locale language="fr">Route1</locale>  
          <locale language="en">Route1</locale>
        </localized-text> 
      </name>  
      <join type="none"/>  
      <split type="xor"> 
        <transition-id idref="30290"/>  
        <transition-id idref="30289"/> 
      </split> 
    </route-activity>  
    <route-activity id="30196"> 
      <name> 
        <localized-text> 
          <locale language="fr">Route2</locale>  
          <locale language="en">Route2</locale>
        </localized-text> 
      </name>  
      <join type="xor"/>  
      <split type="none"> 
        <transition-id idref="30291"/> 
      </split> 
    </route-activity>  
    <route-activity id="30197"> 
      <name> 
        <localized-text> 
          <locale language="fr">RouteEnd</locale>  
          <locale language="en">RouteEnd</locale>
        </localized-text> 
      </name>  
      <join type="and"/>  
      <split type="none"> 
        <transition-id idref="30293"/> 
      </split> 
    </route-activity> 
  </activities>  
  <transitions> 
    <transition from-activity-idref="29710" id="30266" to-activity-idref="30193"/>  
    <transition from-activity-idref="30193" id="30286" to-activity-idref="30194"/>  
    <transition from-activity-idref="30194" id="30287" to-activity-idref="30195"/>  
    <transition from-activity-idref="30194" id="30288" to-activity-idref="30198"> 
      <condition> 
        <expression conjunction="and" data-item-lhs="SPProductDeliveryPI.planItemTaskConfigurationID" data-item-rhs="0" id="1" operation="!="/> 
      </condition> 
    </transition>  
    <transition from-activity-idref="30195" id="30289" to-activity-idref="30196"/>  
    <transition from-activity-idref="30195" id="30290" to-activity-idref="29712"> 
      <condition> 
        <expression conjunction="and" data-item-lhs="SPProductDeliveryPI.typeCode" data-item-rhs="SPProductDeliveryPI.BenefitSampleType" id="1" operation="=="/> 
      </condition> 
    </transition>  
    <transition from-activity-idref="30196" id="30291" to-activity-idref="30197"/>  
    <transition from-activity-idref="30198" id="30292" to-activity-idref="30197"/>  
    <transition from-activity-idref="30197" id="30293" to-activity-idref="29711"/>  
    <transition from-activity-idref="29712" id="30294" to-activity-idref="30196"/> 
  </transitions> 
</workflow-process>
