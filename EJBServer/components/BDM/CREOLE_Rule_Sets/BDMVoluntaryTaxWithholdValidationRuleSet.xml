<?xml version="1.0" encoding="UTF-8"?>
<!-- Feature 99661 : Implement Manage VTW Evidence -->
<RuleSet name="BDMVoluntaryTaxWithholdValidationRuleSet"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="http://www.curamsoftware.com/CreoleRulesSchema.xsd">
	<Class extends="DefaultEvidenceValidationResult"
		extendsRuleSet="EvidenceValidationRuleSet" name="ValidationResult">

		<!-- Setting rule class to BDMVoluntaryTaxWithhold -->
		<Attribute name="evidence">
			<type>
				<ruleclass name="BDMVoluntaryTaxWithhold"
					ruleset="BDMVoluntaryTaxWithholdRuleSet" />
			</type>
			<derivation>
				<specified />
			</derivation>
		</Attribute>
		<Attribute name="evidenceSuccessionID">
			<type>
				<javaclass name="Number" />
			</type>
			<derivation>
				<reference attribute="successionID">
					<reference attribute="evidence" />
				</reference>
			</derivation>
		</Attribute>

		<Attribute name="caseID">
			<type>
				<javaclass name="Number" />
			</type>
			<derivation>
				<reference attribute="caseID">
					<reference attribute="evidence" />
				</reference>
			</derivation>
		</Attribute>
		
		<Attribute name="integratedCaseHeaderRecord">
			<type>
				<ruleclass name="CaseHeader"
						ruleset="CaseEntitiesRuleSet" />
			</type>
			<derivation>
				<singleitem onMultiple="returnFirst" onEmpty="returnNull">
					<filter>
						<list>
							<readall ruleclass="CaseHeader" ruleset="CaseEntitiesRuleSet">
								<match retrievedattribute="caseID">
									<reference attribute="caseID" />
								</match>
							</readall>
						</list>
						<listitemexpression>
							<equals>
								<reference attribute="caseTypeCode">
									<current />
								</reference>
								<Code table="CaseTypeCode">
									<String value="CT5" />
								</Code>
							</equals>
						</listitemexpression>
					</filter>
				</singleitem>
			</derivation>
		</Attribute>

		<Attribute name="concernRoleRecord">
		<type>
			<ruleclass name="ConcernRole"
				ruleset="ParticipantEntitiesRuleSet" />
		</type>
		<derivation>
			<singleitem onMultiple="returnFirst" onEmpty="returnNull">
				<readall ruleclass="ConcernRole"
					ruleset="ParticipantEntitiesRuleSet">
					<match retrievedattribute="concernRoleID">
						<reference attribute="participantRoleID">
							<reference attribute="related_caseParticipant">
								<reference attribute="evidence" />
							</reference>
						</reference>
					</match>
				</readall>
			</singleitem>
		</derivation>
		</Attribute>
								
		<!--OOTB Attribute that needs to be initialized -->
		<Attribute name="standardValidations">
			<type>
				<javaclass name="List">
					<ruleclass name="Validation"
						ruleset="EvidenceValidationRuleSet" />
				</javaclass>
			</type>
			<derivation>
				<reference attribute="voluntaryTaxWithHoldValidations" />
			</derivation>
		</Attribute>

		<Attribute name="voluntaryTaxWithHoldValidations">
			<type>
				<javaclass name="List">
					<ruleclass name="Validation"
						ruleset="EvidenceValidationRuleSet" />
				</javaclass>
			</type>
			<derivation>
				<fixedlist>
					<listof>
						<ruleclass name="Validation"
							ruleset="EvidenceValidationRuleSet" />
					</listof>
					<members>
						<reference attribute="validateIsApplicantPrimaryCaseParticipantOfIntegratedCase"/>
						<reference
							attribute="validateAmountAndPercentageNotEntered" />
						<reference attribute="validateVTWPercentageEntered" />
						<reference attribute="validateVTWAmountEntered">
						</reference>
						<reference
							attribute="validateAmountAndPercentageEntered" />

						<reference attribute="validateVTWStartDate" />

						<reference attribute="validateVTWEndDate" />

						<reference attribute="validateTaxWithholdType"/>
						
					</members>
				</fixedlist>
			</derivation>
		</Attribute>
		
		<Attribute
			name="validateIsApplicantPrimaryCaseParticipantOfIntegratedCase">
			<type>
				<ruleclass name="Validation"
					ruleset="EvidenceValidationRuleSet" />
			</type>
			<derivation>
				<create ruleclass="Validation"
					ruleset="EvidenceValidationRuleSet">
					<reference
						attribute="isApplicantPrimaryCaseParticipantOfIntegratedCaseValidation" />
					<ResourceMessage
						key="ERR_NOT_THE_PRIMARY_CLIENT_OF_IC"
						resourceBundle="curam.ca.gc.bdm.evidence.BDMVoluntaryTaxWithholdValidationRuleSet">
						<reference attribute="vtwMaxPercentageValue">
						</reference>
					</ResourceMessage>
				</create>
			</derivation>
		</Attribute>
		
		<Attribute name="isApplicantPrimaryCaseParticipantOfIntegratedCaseValidation">
			<type>
				<javaclass name="Boolean" />
			</type>
			<derivation>
			<choose>
					<type>
						<javaclass name="Boolean" />
					</type>
					<when>
						<condition>
							<not>
								<equals>
									<reference attribute="integratedCaseHeaderRecord"/>
									<null/>
								</equals>
							</not>
						</condition>
						<value>
						<not>
						 	<equals>
								<reference attribute="concernRoleID">
									<reference attribute="integratedCaseHeaderRecord" />
								</reference>
								<reference attribute="concernRoleID">
									<reference attribute="concernRoleRecord" />
								</reference>
							</equals>
						</not>
						</value>
					</when>
					<otherwise>
						<value>
							<false />
						</value>
					</otherwise>
				</choose>
			</derivation>
		</Attribute>
		

		<Attribute name="validateVTWPercentageEntered">
			<type>
				<ruleclass name="Validation"
					ruleset="EvidenceValidationRuleSet" />
			</type>
			<derivation>
				<create ruleclass="Validation"
					ruleset="EvidenceValidationRuleSet">
					<reference
						attribute="isValidVTWPercentageEnteredValidation" />
					<ResourceMessage
						key="ERR_VTW_PERCENTAGE_VALUE_NOT_VALID"
						resourceBundle="curam.ca.gc.bdm.evidence.BDMVoluntaryTaxWithholdValidationRuleSet">
						<reference attribute="vtwMaxPercentageValue">
						</reference>
					</ResourceMessage>
				</create>
			</derivation>
		</Attribute>

		<Attribute name="isValidVTWPercentageEnteredValidation">
			<type>
				<javaclass name="Boolean" />
			</type>
			<derivation>
				<choose>
					<type>
						<javaclass name="Boolean" />
					</type>
					<when>
						<condition>
							<equals>
								<reference attribute="voluntaryTaxWithholdPercentage">
									<reference attribute="evidence" />
								</reference>
								<Number value="0" />
							</equals>
						</condition>
						<value>
						 	<false/>
						</value>
					</when>
					<when>
						<condition>
							<all>
								<fixedlist>
									<listof>
										<javaclass name="Boolean" />
									</listof>
									<members>
										<equals>
											<reference attribute="voluntaryTaxWithholdType">
												<reference attribute="evidence" />
											</reference>
											<!-- VTW Federal -->
											<Code table="BDMVTWType">
												<String value="VTW0001" />
											</Code>
										</equals>
										<compare comparison="&gt;=">
											<reference
												attribute="voluntaryTaxWithholdPercentage">
												<reference attribute="evidence" />
											</reference>
											<Number value="1" />
										</compare>
										<compare comparison="&lt;=">
											<reference
												attribute="voluntaryTaxWithholdPercentage">
												<reference attribute="evidence" />
											</reference>
											<reference attribute="vtwFedaralDeductionConfiguredMaxPercentage">
											</reference>
										</compare>
									</members>
								</fixedlist>
							</all>
						</condition>
						<value>
							<false />
						</value>
					</when>
					<when>
						<condition>
							<all>
								<fixedlist>
									<listof>
										<javaclass name="Boolean" />
									</listof>
									<members>
										<equals>
											<reference attribute="voluntaryTaxWithholdType">
												<reference attribute="evidence" />
											</reference>
											<!-- VTW Provincial -->
											<Code table="BDMVTWType">
												<String value="VTW0002" />
											</Code>
										</equals>
										<compare comparison="&gt;=">
											<reference
												attribute="voluntaryTaxWithholdPercentage">
												<reference attribute="evidence" />
											</reference>
											<Number value="1" />
										</compare>
										<compare comparison="&lt;=">
											<reference
												attribute="voluntaryTaxWithholdPercentage">
												<reference attribute="evidence" />
											</reference>
											<reference attribute="vtwProvincialDeductionConfiguredMaxPercentage">
											</reference>
										</compare>
									</members>
								</fixedlist>
							</all>
						</condition>
						<value>
							<false />
						</value>
					</when>
					<otherwise>
						<value>
							<true />
						</value>
					</otherwise>
				</choose>
			</derivation>
		</Attribute>

		<Attribute name="validateAmountAndPercentageNotEntered">
			<type>
				<ruleclass name="Validation"
					ruleset="EvidenceValidationRuleSet" />
			</type>
			<derivation>
				<create ruleclass="Validation"
					ruleset="EvidenceValidationRuleSet">
					<reference
						attribute="isAmountAndPercentageNotEnteredValidation" />
					<ResourceMessage
						key="ERR_PERCENTAGE_OR_AMOUNT_SHOULD_BE_ENTERED"
						resourceBundle="curam.ca.gc.bdm.evidence.BDMVoluntaryTaxWithholdValidationRuleSet">
						<reference attribute="vtwMaxPercentageValue" />
						<reference attribute="vtwMinAmountValue" />
						<reference attribute="vtwMaxAmountValue" />
					</ResourceMessage>
				</create>
			</derivation>
		</Attribute>

		<Attribute name="vtwMaxPercentageValue">
			<type>
				<javaclass name="java.lang.Number" />
			</type>
			<derivation>
				<choose>
					<type>
						<javaclass name="java.lang.Number" />
					</type>
					<when>
						<condition>
							<equals>
								<reference attribute="voluntaryTaxWithholdType">
									<reference attribute="evidence" />
								</reference>
								<!-- VTW Federal -->
								<Code table="BDMVTWType">
									<String value="VTW0001" />
								</Code>
							</equals>
						</condition>
						<value>
							<reference attribute="vtwFedaralDeductionConfiguredMaxPercentage">
							</reference>
						</value>
					</when>
					<otherwise>
						<value>
							<reference attribute="vtwProvincialDeductionConfiguredMaxPercentage">
							</reference>
						</value>
					</otherwise>
				</choose>
			</derivation>
		</Attribute>

		<Attribute name="vtwMinAmountValue">
			<type>
				<javaclass name="java.lang.Number" />
			</type>
			<derivation>
				<choose>
					<type>
						<javaclass name="java.lang.Number" />
					</type>
					<when>
						<condition>
							<equals>
								<reference attribute="voluntaryTaxWithholdType">
									<reference attribute="evidence" />
								</reference>
								<!-- VTW Federal -->
								<Code table="BDMVTWType">
									<String value="VTW0001" />
								</Code>
							</equals>
						</condition>
						<value>
							<reference attribute="vtwFedaralDeductionConfiguredMinimumAmount"/>
						</value>
					</when>
					<otherwise>
						<value>
							<reference attribute="vtwProvincialDeductionConfiguredMinimumAmount"/>
						</value>
					</otherwise>
				</choose>
			</derivation>
		</Attribute>

		<Attribute name="vtwMaxAmountValue">
			<type>
				<javaclass name="java.lang.Number" />
			</type>
			<derivation>
				<choose>
					<type>
						<javaclass name="java.lang.Number" />
					</type>
					<when>
						<condition>
							<equals>
								<reference attribute="voluntaryTaxWithholdType">
									<reference attribute="evidence" />
								</reference>
								<!-- VTW Federal -->
								<Code table="BDMVTWType">
									<String value="VTW0001" />
								</Code>
							</equals>
						</condition>
						<value>
							<reference attribute="vtwFedaralDeductionConfiguredMaxAmount">
							</reference>
						</value>
					</when>
					<otherwise>
						<value>
							<reference attribute="vtwProvincialDeductionConfiguredMaxAmount">
							</reference>
						</value>
					</otherwise>
				</choose>
			</derivation>
		</Attribute>

		<!-- validation message when amount and percentage is not entered -->
		<Attribute name="isAmountAndPercentageNotEnteredValidation">
			<type>
				<javaclass name="Boolean" />
			</type>
			<derivation>
				<choose>
					<type>
						<javaclass name="Boolean" />
					</type>
					<when>
						<condition>
							<all>
								<fixedlist>
									<listof>
										<javaclass name="Boolean" />
									</listof>
									<members>
										<equals>
											<reference attribute="voluntaryTaxWithholdAmount">
												<reference attribute="evidence" />
											</reference>
											<Number value="0.00" />
										</equals>
										<equals>
											<reference
												attribute="voluntaryTaxWithholdPercentage">
												<reference attribute="evidence" />
											</reference>
											<Number value="0" />
										</equals>
									</members>
								</fixedlist>
							</all>
						</condition>
						<value>
							<true />
						</value>
					</when>
					<otherwise>
						<value>
							<false />
						</value>
					</otherwise>
				</choose>
			</derivation>
		</Attribute>


		<Attribute name="validateAmountAndPercentageEntered">
			<type>
				<ruleclass name="Validation"
					ruleset="EvidenceValidationRuleSet" />
			</type>
			<derivation>
				<create ruleclass="Validation"
					ruleset="EvidenceValidationRuleSet">
					<reference
						attribute="isAmountAndPercentageEnteredValidation" />
					<ResourceMessage
						key="ERR_PERCENTAGE_AMOUNT_BOTH_CANNOT_BE_ENTERED"
						resourceBundle="curam.ca.gc.bdm.evidence.BDMVoluntaryTaxWithholdValidationRuleSet">
					</ResourceMessage>
				</create>
			</derivation>
		</Attribute>

		<!-- validation message when amount and percentage is entered -->
		<Attribute name="isAmountAndPercentageEnteredValidation">
			<type>
				<javaclass name="Boolean" />
			</type>
			<derivation>
				<choose>
					<type>
						<javaclass name="Boolean" />
					</type>
					<when>
						<condition>
							<all>
								<fixedlist>
									<listof>
										<javaclass name="Boolean" />
									</listof>
									<members>
										<not>
											<equals>
												<reference attribute="voluntaryTaxWithholdAmount">
													<reference attribute="evidence" />
												</reference>
												<Number value="0.00" />
											</equals>
										</not>
										<not>
											<equals>
												<reference
													attribute="voluntaryTaxWithholdPercentage">
													<reference attribute="evidence" />
												</reference>
												<Number value="0" />
											</equals>
										</not>
									</members>
								</fixedlist>
							</all>
						</condition>
						<value>
							<true />
						</value>
					</when>
					<otherwise>
						<value>
							<false />
						</value>
					</otherwise>
				</choose>
			</derivation>
		</Attribute>



		<Attribute name="validateVTWStartDate">
			<type>
				<ruleclass name="Validation"
					ruleset="EvidenceValidationRuleSet" />
			</type>
			<derivation>
				<create ruleclass="Validation"
					ruleset="EvidenceValidationRuleSet">
					<reference attribute="vtwStartDateValidation" />
					<ResourceMessage key="ERR_VTW_START_DATE"
						resourceBundle="curam.ca.gc.bdm.evidence.BDMVoluntaryTaxWithholdValidationRuleSet">
					</ResourceMessage>
				</create>
			</derivation>
		</Attribute>


		<Attribute name="vtwStartDateValidation">
			<type>
				<javaclass name="Boolean" />
			</type>
			<derivation>
				<choose>
					<type>
						<javaclass name="Boolean" />
					</type>
					<when>
						<condition>
							<compare comparison="&gt;">
								<reference attribute="startDate">
									<reference attribute="evidence" />
								</reference>
								<call class="curam.ca.gc.bdm.creole.impl.Statics"
									method="addMonthsToDate">
									<type>
										<javaclass name="curam.util.type.Date" />
									</type>
									<arguments>
										<call class="curam.ca.gc.bdm.creole.impl.Statics"
											method="getCurrentDate">
											<type>
												<javaclass name="curam.util.type.Date" />
											</type>
											<arguments>
											</arguments>
										</call>
										<Number value="12" />
									</arguments>
								</call>
							</compare>
						</condition>
						<value>
							<true />
						</value>
					</when>
					<otherwise>
						<value>
							<false />
						</value>
					</otherwise>
				</choose>
			</derivation>
		</Attribute>


		<Attribute name="validateVTWEndDate">
			<type>
				<ruleclass name="Validation"
					ruleset="EvidenceValidationRuleSet" />
			</type>
			<derivation>
				<create ruleclass="Validation"
					ruleset="EvidenceValidationRuleSet">
					<reference attribute="vtwEndDateValidation" />
					<ResourceMessage key="ERR_VTW_END_DATE"
						resourceBundle="curam.ca.gc.bdm.evidence.BDMVoluntaryTaxWithholdValidationRuleSet">
					</ResourceMessage>
				</create>
			</derivation>
		</Attribute>


		<Attribute name="vtwEndDateValidation">
			<type>
				<javaclass name="Boolean" />
			</type>
			<derivation>
				<choose>
					<type>
						<javaclass name="Boolean" />
					</type>
					<when>
						<condition>
							<all>
								<fixedlist>
									<listof>
										<javaclass name="Boolean" />
									</listof>
									<members>
									<not>
										<equals>
											<reference attribute="endDate">
												<reference attribute="evidence" />
											</reference>		
											<null/>						
										</equals>
									</not>
									<compare comparison="&gt;">
										<reference attribute="endDate">
											<reference attribute="evidence" />
										</reference>
										<call class="curam.ca.gc.bdm.creole.impl.Statics"
											method="addMonthsToDate">
											<type>
												<javaclass name="curam.util.type.Date" />
											</type>
											<arguments>
												<call class="curam.ca.gc.bdm.creole.impl.Statics"
													method="getCurrentDate">
													<type>
														<javaclass name="curam.util.type.Date" />
													</type>
													<arguments>
													</arguments>
												</call>
												<Number value="23" />
											</arguments>
										</call>
									</compare>
									</members>
								</fixedlist>
							</all>
						</condition>
						<value>
							<true />
						</value>
					</when>
					<otherwise>
						<value>
							<false />
						</value>
					</otherwise>
				</choose>
			</derivation>
		</Attribute>


		<Attribute name="validateVTWAmountEntered">
			<type>
				<ruleclass name="Validation"
					ruleset="EvidenceValidationRuleSet" />
			</type>
			<derivation>
				<create ruleclass="Validation"
					ruleset="EvidenceValidationRuleSet">
					<reference attribute="isValidVTWAmountEnteredValidation" />
					<ResourceMessage
						key="ERR_VTW_AMOUNT_VALUE_NOT_VALID"
						resourceBundle="curam.ca.gc.bdm.evidence.BDMVoluntaryTaxWithholdValidationRuleSet">
						<reference attribute="vtwMaxAmountValue" />
					</ResourceMessage>
				</create>
			</derivation>
		</Attribute>

		<Attribute name="isValidVTWAmountEnteredValidation">
			<type>
				<javaclass name="Boolean" />
			</type>
			<derivation>
				<choose>
					<type>
						<javaclass name="Boolean" />
					</type>
					<when>
						<condition>
							<equals>
								<reference attribute="voluntaryTaxWithholdAmount">
									<reference attribute="evidence" />
								</reference>
								<Number value="0.00" />
							</equals>
						</condition>
						<value>
						 	<false/>
						</value>
					</when>
					<when>
						<condition>
							<all>
								<fixedlist>
									<listof>
										<javaclass name="Boolean" />
									</listof>
									<members>
										<equals>
											<reference attribute="voluntaryTaxWithholdType">
												<reference attribute="evidence" />
											</reference>
											<!-- VTW Federal -->
											<Code table="BDMVTWType">
												<String value="VTW0001" />
											</Code>
										</equals>
										<compare comparison="&lt;=">
											<reference attribute="voluntaryTaxWithholdAmount">
												<reference attribute="evidence" />
											</reference>
											<reference attribute="vtwFedaralDeductionConfiguredMaxAmount"/>
										</compare>
									</members>
								</fixedlist>
							</all>
						</condition>
						<value>
							<false />
						</value>
					</when>
					<when>
						<condition>
							<all>
								<fixedlist>
									<listof>
										<javaclass name="Boolean" />
									</listof>
									<members>
										<equals>
											<reference attribute="voluntaryTaxWithholdType">
												<reference attribute="evidence" />
											</reference>
											<!-- VTW Provincial -->
											<Code table="BDMVTWType">
												<String value="VTW0002" />
											</Code>
										</equals>
										<compare comparison="&lt;=">
											<reference attribute="voluntaryTaxWithholdAmount">
												<reference attribute="evidence" />
											</reference>
											<reference attribute="vtwProvincialDeductionConfiguredMaxAmount"/>
										</compare>
									</members>
								</fixedlist>
							</all>
						</condition>
						<value>
							<false />
						</value>
					</when>
					<otherwise>
						<value>
							<true />
						</value>
					</otherwise>
				</choose>
			</derivation>
		</Attribute>


		<Attribute name="validateTaxWithholdType">
			<type>
				<ruleclass name="Validation"
					ruleset="EvidenceValidationRuleSet" />
			</type>
			<derivation>
				<create ruleclass="Validation"
					ruleset="EvidenceValidationRuleSet">
					<reference attribute="isvalidTaxWithholdType" />
					<ResourceMessage
						key="ERR_INVALID_TAX_WITHHOLD_TYPE"
						resourceBundle="curam.ca.gc.bdm.evidence.BDMVoluntaryTaxWithholdValidationRuleSet">
					</ResourceMessage>
				</create>
			</derivation>
		</Attribute>

		<Attribute name="isvalidTaxWithholdType">
			<type>
				<javaclass name="Boolean" />
			</type>
			<derivation>
				<choose>
					<type>
						<javaclass name="Boolean" />
					</type>
					<when>
						<condition>
							<equals>
								<reference attribute="voluntaryTaxWithholdType">
									<reference attribute="evidence" />
								</reference>
								<Code table="BDMVTWType">
									<String value="VTW0002" />
								</Code>
							</equals>
						</condition>
						<value>
							<choose>
								<type>
									<javaclass name="Boolean" />
								</type>
								<when>
									<condition>
										<reference attribute="isQuebecResident" />
									</condition>
									<value>
										<false />
									</value>
								</when>
								<otherwise>
									<value>
										<true />
									</value>
								</otherwise>
							</choose>
						</value>
					</when>
					<otherwise>
						<value>
							<false />
						</value>
					</otherwise>
				</choose>
			</derivation>
		</Attribute>
		
		
		<Attribute name="vtwFedaralDeductionConfiguredMaxAmount">
			<type>
				<javaclass name="java.lang.Number" />
			</type>
			<derivation>
				<call class="curam.ca.gc.bdm.creole.impl.Statics"
					method="readMaxAmountForDeduction">
					<type>
						<javaclass name="java.lang.Number" />
					</type>
					<arguments>
						<Code table="DeductionName">
							<String value="BDMDN0001" />
						</Code>
					</arguments>
				</call>
			</derivation>
		</Attribute>
		
		<Attribute name="vtwFedaralDeductionConfiguredMinimumAmount">
			<type>
				<javaclass name="java.lang.Number" />
			</type>
			<derivation>
				<call class="curam.ca.gc.bdm.creole.impl.Statics"
					method="readMinimumAmountForDeduction">
					<type>
						<javaclass name="java.lang.Number" />
					</type>
					<arguments>
						<Code table="DeductionName">
							<String value="BDMDN0001" />
						</Code>
					</arguments>
				</call>
			</derivation>
		</Attribute>
		
		<Attribute name="vtwFedaralDeductionConfiguredMaxPercentage">
			<type>
				<javaclass name="java.lang.Number" />
			</type>
			<derivation>
				<call class="curam.ca.gc.bdm.creole.impl.Statics"
					method="readMaxPercentageForDeduction">
					<type>
						<javaclass name="java.lang.Number" />
					</type>
					<arguments>
						<Code table="DeductionName">
							<String value="BDMDN0001" />
						</Code>
					</arguments>
				</call>
			</derivation>
		</Attribute>
		
		
		<Attribute name="vtwProvincialDeductionConfiguredMaxAmount">
			<type>
				<javaclass name="java.lang.Number" />
			</type>
			<derivation>
				<call class="curam.ca.gc.bdm.creole.impl.Statics"
					method="readMaxAmountForDeduction">
					<type>
						<javaclass name="java.lang.Number" />
					</type>
					<arguments>
						<Code table="DeductionName">
							<String value="BDMDN0002" />
						</Code>
					</arguments>
				</call>
			</derivation>
		</Attribute>
		
		<Attribute name="vtwProvincialDeductionConfiguredMinimumAmount">
			<type>
				<javaclass name="java.lang.Number" />
			</type>
			<derivation>
				<call class="curam.ca.gc.bdm.creole.impl.Statics"
					method="readMinimumAmountForDeduction">
					<type>
						<javaclass name="java.lang.Number" />
					</type>
					<arguments>
						<Code table="DeductionName">
							<String value="BDMDN0002" />
						</Code>
					</arguments>
				</call>
			</derivation>
		</Attribute>
		
		<Attribute name="vtwProvincialDeductionConfiguredMaxPercentage">
			<type>
				<javaclass name="java.lang.Number" />
			</type>
			<derivation>
				<call class="curam.ca.gc.bdm.creole.impl.Statics"
					method="readMaxPercentageForDeduction">
					<type>
						<javaclass name="java.lang.Number" />
					</type>
					<arguments>
						<Code table="DeductionName">
							<String value="BDMDN0002" />
						</Code>
					</arguments>
				</call>
			</derivation>
		</Attribute>

		<Attribute name="isQuebecResident">
			<type>
				<javaclass name="Boolean" />
			</type>
			<derivation>
				<call class="curam.ca.gc.bdm.creole.impl.Statics"
					method="hasValidAddressForPVTW">
					<type>
						<javaclass name="Boolean" />
					</type>
					<arguments>
						<reference attribute="participantRoleID">
							<reference attribute="related_caseParticipant">
								<reference attribute="evidence" />
							</reference>
						</reference>
						<String value="QC" />
						<reference attribute="startDate">
							<reference attribute="evidence" />
						</reference>
						<reference attribute="endDate">
							<reference attribute="evidence" />
						</reference>
					</arguments>
				</call>
			</derivation>
		</Attribute>

	</Class>
</RuleSet>
