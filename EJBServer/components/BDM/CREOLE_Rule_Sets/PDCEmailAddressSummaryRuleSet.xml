<?xml version="1.0" encoding="UTF-8"?>

<RuleSet
  name="PDCEmailAddressSummaryRuleSet"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:noNamespaceSchemaLocation="http://www.curamsoftware.com/CreoleRulesSchema.xsd"
>
  <Class
    extends="DefaultEvidenceSummary"
    extendsRuleSet="EvidenceSummaryRuleSet"
    name="PDCEmailAddressSummary"
  >
    <Attribute name="evidence">
      <type>
        <ruleclass
          name="PDCEmailAddress"
          ruleset="PDCEmailAddressRuleSet"
        />
      </type>
      <derivation>
        <specified/>
      </derivation>
    </Attribute>



		<Attribute name="summary">
			<type>
				<javaclass name="curam.creole.value.Message" />
			</type>
			<derivation>
				<choose>
					<type>
						<javaclass name="curam.creole.value.Message" />
					</type>
					<when>
						<condition>
							<reference attribute="hasAlertInd" />
						</condition>
						<value>
             				 <ResourceMessage
					                key="PDCEmailAddress.summaryMessage2"
					                resourceBundle="curam.bdm.pdc.rules.DynEvd_PDCPhoneNumber_Summary"
					              >
					                <reference attribute="emailAddressType">
					                  <reference attribute="evidence"/>
					                </reference>
					                <reference attribute="emailAddress">
					                  <reference attribute="evidence"/>
					                </reference>
             				</ResourceMessage>
             			</value>
					</when>
					
					<otherwise>
						<value>
             				 <ResourceMessage
					                key="PDCEmailAddress.summaryMessage1"
					               resourceBundle="curam.bdm.pdc.rules.DynEvd_PDCPhoneNumber_Summary"
					              >
					                <reference attribute="emailAddressType">
					                  <reference attribute="evidence"/>
					                </reference>
					                <reference attribute="emailAddress">
					                  <reference attribute="evidence"/>
					                </reference>
             				</ResourceMessage>
             			</value>
					</otherwise>
				</choose>
			</derivation>
		</Attribute>

    <Attribute name="hasAlertInd">
      <type>
        <javaclass name="Boolean"/>
      </type>
      <derivation>
     	   <reference attribute="useForAlertsInd">
              <reference attribute="evidence"/>
            </reference>
      </derivation>
    </Attribute>
    

  </Class>
</RuleSet>
