<?xml version="1.0" encoding="UTF-8"?>
<!-- 64630 DEV: Implement 387-01 Add Residence based Creditable details to Foreign Engagement Case -->
<RuleSet name="BDMForeignResidencePeriodCalculatedAttributesRuleSet"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:noNamespaceSchemaLocation="http://www.curamsoftware.com/CreoleRulesSchema.xsd">
  <Class name="CalculateOnCreateAttributes"
    extends="DefaultCalculateOnCreateAttributes" extendsRuleSet="EvidenceCalculatedAttributesRuleSet">
    <Attribute name="description">
      <type>
        <javaclass name="curam.creole.value.Message" />
      </type>
      <derivation>
        <XmlMessage>Calculate on create attributes class for BDMForeignResidencePeriod Evidence</XmlMessage>
      </derivation>
    </Attribute>
    <Attribute name="evidence">
      <type>
        <ruleclass name="BDMForeignResidencePeriod" ruleset="BDMForeignResidencePeriodRuleSet"/>
      </type>
      <derivation>
        <specified />
      </derivation>
    </Attribute>
    <Attribute name="countryCalc">
      <type>
        <codetableentry table="BDMSourceCountry"/>
      </type>
      <derivation>
        <call class="curam.ca.gc.bdm.creole.impl.Statics" method="getFecCountry">
          <type>
            <codetableentry table="BDMSourceCountry"/>
          </type>
          <arguments>
            <reference attribute="caseID" />
          </arguments>
        </call>
      </derivation>
    </Attribute>
    
    <Attribute name="caseID">
      <type>
        <javaclass name="java.lang.Number" />
      </type>
      <derivation>
        <reference attribute="caseID">
          <reference attribute="related_caseParticipantRole">
            <reference attribute="evidence" />
          </reference>
        </reference>
      </derivation>
    </Attribute>
  </Class>
</RuleSet>