<?xml version="1.0" encoding="UTF-8"?>
<!-- Task 94324 DEV: Manage Third Party Evidence configuration -->
<RuleSet name="BDMThirdPartyContactValidationRuleSet"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="../../../build/svr/creole.gen/schema/RuleSet.xsd">

    <Class name="ValidationResult"
        extends="DefaultEvidenceValidationResult"
        extendsRuleSet="EvidenceValidationRuleSet">

        <Attribute name="description">
            <type>
                <javaclass name="curam.creole.value.Message" />
            </type>
            <derivation>
                <ResourceMessage key="Description"
                    resourceBundle="curam.ca.gc.bdm.evidence.BDMThirdPartyContactValidationRuleSet" />
            </derivation>
        </Attribute>

        <Attribute name="evidence">
            <type>
                <ruleclass name="BDMThirdPartyContact"
                    ruleset="BDMThirdPartyContactRuleSet" />
            </type>
            <derivation>
                <specified />
            </derivation>
        </Attribute>

        <Attribute name="standardValidations">
            <type>
                <javaclass name="java.util.List">
                    <ruleclass name="Validation"
                        ruleset="EvidenceValidationRuleSet" />
                </javaclass>
            </type>
            <derivation>
                <fixedlist>
                    <listof>
                        <ruleclass name="Validation"
                            ruleset="EvidenceValidationRuleSet" />
                    </listof>
                    <members>
                        <reference attribute="mandatorySourceFieldValidation" />
                        <reference attribute="disallowedSourceFieldValidation" />
                        <!-- <reference attribute="restrictedCountryValidation" /> -->
                    </members>
                </fixedlist>
            </derivation>
        </Attribute>

        <Attribute name="foreignCountryValidationHelper">
            <type>
                <ruleclass name="ForeignCountryValidationHelper"
                    ruleset="BDMForeignCountryValidationHelperRuleSet" />
            </type>
            <derivation>
                <create ruleclass="ForeignCountryValidationHelper"
                    ruleset="BDMForeignCountryValidationHelperRuleSet">
                    <reference attribute="bdmReceivedFrom">
                        <reference attribute="evidence" />
                    </reference>
                    <reference attribute="bdmReceivedFromCountry">
                        <reference attribute="evidence" />
                    </reference>
                    <reference attribute="bdmModeOfReceipt">
                        <reference attribute="evidence" />
                    </reference>
                </create>
            </derivation>
        </Attribute>

        <Attribute name="mandatorySourceFieldValidation">
            <type>
                <ruleclass name="Validation"
                    ruleset="EvidenceValidationRuleSet" />
            </type>
            <derivation>
                <create ruleclass="Validation"
                    ruleset="EvidenceValidationRuleSet">
                    <reference attribute="mandatorySourceFieldFailure" />
                    <reference attribute="mandatorySourceFieldFailureMessage" />
                </create>
            </derivation>
        </Attribute>

        <Attribute name="mandatorySourceFieldFailure">
            <type>
                <javaclass name="java.lang.Boolean" />
            </type>
            <derivation>
                <reference attribute="mandatorySourceFieldFailure">
                    <reference attribute="foreignCountryValidationHelper" />
                </reference>
            </derivation>
        </Attribute>

        <Attribute name="mandatorySourceFieldFailureMessage">
            <type>
                <javaclass name="curam.creole.value.Message" />
            </type>
            <derivation>
                <ResourceMessage
                    key="ERR_FOREIGN_GOVT_REQUIRED_FIELDS"
                    resourceBundle="curam.ca.gc.bdm.evidence.BDMMaritalStatusValidationRuleSet" />
            </derivation>
        </Attribute>

        <Attribute name="disallowedSourceFieldValidation">
            <type>
                <ruleclass name="Validation"
                    ruleset="EvidenceValidationRuleSet" />
            </type>
            <derivation>
                <create ruleclass="Validation"
                    ruleset="EvidenceValidationRuleSet">
                    <reference attribute="disallowedSourceFieldFailure" />
                    <reference
                        attribute="disallowedSourceFieldFailureMessage" />
                </create>
            </derivation>
        </Attribute>

        <Attribute name="disallowedSourceFieldFailure">
            <type>
                <javaclass name="java.lang.Boolean" />
            </type>
            <derivation>
                <reference attribute="disallowedSourceFieldFailure">
                    <reference attribute="foreignCountryValidationHelper" />
                </reference>
            </derivation>
        </Attribute>

        <Attribute name="disallowedSourceFieldFailureMessage">
            <type>
                <javaclass name="curam.creole.value.Message" />
            </type>
            <derivation>
                <ResourceMessage
                    key="ERR_FOREIGN_GOVT_EXCLUSIVE_FIELDS"
                    resourceBundle="curam.ca.gc.bdm.evidence.BDMMaritalStatusValidationRuleSet" />
            </derivation>
        </Attribute>

        <Attribute name="restrictedCountryValidation">
            <type>
                <ruleclass name="Validation"
                    ruleset="EvidenceValidationRuleSet" />
            </type>
            <derivation>
                <create ruleclass="Validation"
                    ruleset="EvidenceValidationRuleSet">
                    <reference attribute="restrictedCountryFailure" />
                    <reference attribute="restrictedCountryFailureMessage" />
                </create>
            </derivation>
        </Attribute>

        <Attribute name="restrictedCountryFailure">
            <type>
                <javaclass name="java.lang.Boolean" />
            </type>
            <derivation>
                <reference attribute="restrictedCountryFailure">
                    <reference attribute="foreignCountryValidationHelper" />
                </reference>
            </derivation>
        </Attribute>

        <Attribute name="restrictedCountryFailureMessage">
            <type>
                <javaclass name="curam.creole.value.Message" />
            </type>
            <derivation>
                <ResourceMessage key="ERR_RESTRICTED_COUNTRY"
                    resourceBundle="curam.ca.gc.bdm.evidence.BDMMaritalStatusValidationRuleSet" />
            </derivation>
        </Attribute>

    </Class>

</RuleSet>