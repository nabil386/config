<?xml version="1.0" encoding="UTF-8"?>
<RuleSet
  internalID="id1353074680953"
  name="PDCIdentificationValidationRuleSet"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="../../../build/svr/creole.gen/schema/RuleSet.xsd"
>
  <Annotations internalID="id1354465229597">
    <EditorMetadata internalID="id1354465229747">
      <folders internalID="PDCIdentificationValidationRuleSet1354465255892">
        <diagram
          id="ValidationResult.postCreateValidations"
          internalID="PDCIdentificationValidationRuleSet1354465256770"
        >
          <Annotations internalID="PDCIdentificationValidationRuleSet1354465256769">
            <Label
              internalID="PDCIdentificationValidationRuleSet1354465256768"
              label-id="PDCIdentificationValidationRuleSetlabelID_1354465256767"
              name=""
            />
          </Annotations>
          <Attributes internalID="PDCIdentificationValidationRuleSet1354465257713">
            <Attribute
              id="ValidationResult.postCreateValidations"
              internalID="PDCIdentificationValidationRuleSet1354465257714"
            />
          </Attributes>
        </diagram>
        <diagram
          id="ValidationResult.identificationEvidence"
          internalID="PDCIdentificationValidationRuleSet1354465314036"
        >
          <Annotations internalID="PDCIdentificationValidationRuleSet1354465314035">
            <Label
              internalID="PDCIdentificationValidationRuleSet1354465314034"
              label-id="PDCIdentificationValidationRuleSetlabelID_1354465314033"
              name=""
            />
          </Annotations>
          <Attributes internalID="PDCIdentificationValidationRuleSet1354465314351">
            <Attribute
              id="ValidationResult.identificationEvidence"
              internalID="PDCIdentificationValidationRuleSet1354465314352"
            />
          </Attributes>
        </diagram>
        <diagram
          id="ValidationResult.identificationEvidenceForClientByType"
          internalID="PDCIdentificationValidationRuleSet1354465841029"
        >
          <Annotations internalID="PDCIdentificationValidationRuleSet1354465841028">
            <Label
              internalID="PDCIdentificationValidationRuleSet1354465841027"
              label-id="PDCIdentificationValidationRuleSetlabelID_1354465841026"
              name=""
            />
          </Annotations>
          <Attributes internalID="PDCIdentificationValidationRuleSet1354465841470">
            <Attribute
              id="ValidationResult.identificationEvidenceForClientByType"
              internalID="PDCIdentificationValidationRuleSet1354465841471"
            />
          </Attributes>
        </diagram>
        <diagram
          id="ValidationResult.ssnMedOverlapValidation"
          internalID="PDCIdentificationValidationRuleSet1354645347494"
        >
          <Annotations internalID="PDCIdentificationValidationRuleSet1354645347493">
            <Label
              internalID="PDCIdentificationValidationRuleSet1354645347492"
              label-id="PDCIdentificationValidationRuleSetlabelID_1354645347491"
              name=""
            />
          </Annotations>
          <Attributes internalID="PDCIdentificationValidationRuleSet1354645350112">
            <Attribute
              id="ValidationResult.ssnMedOverlapValidation"
              internalID="PDCIdentificationValidationRuleSet1354645359218"
            />
          </Attributes>
        </diagram>
        <diagram
          id="ValidationResult.effectiveDateAfterDOBValidation"
          internalID="PDCIdentificationValidationRuleSet1355226637798"
        >
          <Annotations internalID="PDCIdentificationValidationRuleSet1355226637781">
            <Label
              internalID="PDCIdentificationValidationRuleSet1355226637780"
              label-id="PDCIdentificationValidationRuleSetlabelID_1355226637779"
              name=""
            />
          </Annotations>
          <Attributes internalID="PDCIdentificationValidationRuleSet1355226638048">
            <Attribute
              id="ValidationResult.effectiveDateAfterDOBValidation"
              internalID="PDCIdentificationValidationRuleSet1355226638763"
            />
          </Attributes>
        </diagram>
        <diagram
          id="ValidationResult.standardValidations"
          internalID="PDCIdentificationValidationRuleSet1355226645513"
        >
          <Annotations internalID="PDCIdentificationValidationRuleSet1355226645512">
            <Label
              internalID="PDCIdentificationValidationRuleSet1355226645511"
              label-id="PDCIdentificationValidationRuleSetlabelID_1355226645510"
              name=""
            />
          </Annotations>
          <Attributes internalID="PDCIdentificationValidationRuleSet1355226645550">
            <Attribute
              id="ValidationResult.standardValidations"
              internalID="PDCIdentificationValidationRuleSet1355226646213"
            />
          </Attributes>
        </diagram>
        <diagram
          id="ValidationResult.detailsValidations"
          internalID="PDCIdentificationValidationRuleSet1355226649620"
        >
          <Annotations internalID="PDCIdentificationValidationRuleSet1355226649619">
            <Label
              internalID="PDCIdentificationValidationRuleSet1355226649618"
              label-id="PDCIdentificationValidationRuleSetlabelID_1355226649617"
              name=""
            />
          </Annotations>
          <Attributes internalID="PDCIdentificationValidationRuleSet1355226649685">
            <Attribute
              id="ValidationResult.detailsValidations"
              internalID="PDCIdentificationValidationRuleSet1355226649686"
            />
          </Attributes>
        </diagram>
        <diagram
          id="ValidationResult.preCreateValidations"
          internalID="PDCIdentificationValidationRuleSet1355226651095"
        >
          <Annotations internalID="PDCIdentificationValidationRuleSet1355226651094">
            <Label
              internalID="PDCIdentificationValidationRuleSet1355226651093"
              label-id="PDCIdentificationValidationRuleSetlabelID_1355226651092"
              name=""
            />
          </Annotations>
          <Attributes internalID="PDCIdentificationValidationRuleSet1355226651144">
            <Attribute
              id="ValidationResult.preCreateValidations"
              internalID="PDCIdentificationValidationRuleSet1355226651145"
            />
          </Attributes>
        </diagram>
        <diagram
          id="ValidationResult.preModifyValidations"
          internalID="PDCIdentificationValidationRuleSet1355226654428"
        >
          <Annotations internalID="PDCIdentificationValidationRuleSet1355226654427">
            <Label
              internalID="PDCIdentificationValidationRuleSet1355226654426"
              label-id="PDCIdentificationValidationRuleSetlabelID_1355226654425"
              name=""
            />
          </Annotations>
          <Attributes internalID="PDCIdentificationValidationRuleSet1355226654496">
            <Attribute
              id="ValidationResult.preModifyValidations"
              internalID="PDCIdentificationValidationRuleSet1355226654497"
            />
          </Attributes>
        </diagram>
        <diagram
          id="ValidationResult.postModifyValidations"
          internalID="PDCIdentificationValidationRuleSet1355226658176"
        >
          <Annotations internalID="PDCIdentificationValidationRuleSet1355226658175">
            <Label
              internalID="PDCIdentificationValidationRuleSet1355226658174"
              label-id="PDCIdentificationValidationRuleSetlabelID_1355226658173"
              name=""
            />
          </Annotations>
          <Attributes internalID="PDCIdentificationValidationRuleSet1355226658213">
            <Attribute
              id="ValidationResult.postModifyValidations"
              internalID="PDCIdentificationValidationRuleSet1355226659730"
            />
          </Attributes>
        </diagram>
        <diagram
          id="ValidationResult.doesIDTypeExistForConcernType"
          internalID="PDCIdentificationValidationRuleSet1376570158727"
        >
          <Annotations internalID="PDCIdentificationValidationRuleSet1376570158726">
            <Label
              internalID="PDCIdentificationValidationRuleSet1376570158724"
              label-id="PDCIdentificationValidationRuleSetlabelID_1376570158723"
              name=""
            />
          </Annotations>
          <Attributes internalID="PDCIdentificationValidationRuleSet1376570158801">
            <Attribute
              id="ValidationResult.doesIDTypeExistForConcernType"
              internalID="PDCIdentificationValidationRuleSet1376570158802"
            />
          </Attributes>
        </diagram>
        <diagram
          id="ValidationResult.fromDateAfterDOBValidation"
          internalID="PDCIdentificationValidationRuleSet1376570304158"
        >
          <Annotations internalID="PDCIdentificationValidationRuleSet1376570304157">
            <Label
              internalID="PDCIdentificationValidationRuleSet1376570304156"
              label-id="PDCIdentificationValidationRuleSetlabelID_1376570304154"
              name=""
            />
          </Annotations>
          <Attributes internalID="PDCIdentificationValidationRuleSet1376570304398">
            <Attribute
              id="ValidationResult.fromDateAfterDOBValidation"
              internalID="PDCIdentificationValidationRuleSet1376570304652"
            />
          </Attributes>
        </diagram>
        <diagram
          id="ValidationResult.duplicateIDTypeValidation"
          internalID="PDCIdentificationValidationRuleSet1376570484089"
        >
          <Annotations internalID="PDCIdentificationValidationRuleSet1376570484088">
            <Label
              internalID="PDCIdentificationValidationRuleSet1376570484087"
              label-id="PDCIdentificationValidationRuleSetlabelID_1376570484086"
              name=""
            />
          </Annotations>
          <Attributes internalID="PDCIdentificationValidationRuleSet1376570484129">
            <Attribute
              id="ValidationResult.duplicateIDTypeValidation"
              internalID="PDCIdentificationValidationRuleSet1376570484130"
            />
          </Attributes>
        </diagram>
        <diagram
          id="ValidationResult.toDateAfterDateOfDeath"
          internalID="PDCIdentificationValidationRuleSet1376570542681"
        >
          <Annotations internalID="PDCIdentificationValidationRuleSet1376570542679">
            <Label
              internalID="PDCIdentificationValidationRuleSet1376570542678"
              label-id="PDCIdentificationValidationRuleSetlabelID_1376570542677"
              name=""
            />
          </Annotations>
          <Attributes internalID="PDCIdentificationValidationRuleSet1376570542717">
            <Attribute
              id="ValidationResult.toDateAfterDateOfDeath"
              internalID="PDCIdentificationValidationRuleSet1376570543011"
            />
          </Attributes>
        </diagram>
        <diagram
          id="ValidationResult.fromDateBeforeDODValidation"
          internalID="PDCIdentificationValidationRuleSet1376570855022"
        >
          <Annotations internalID="PDCIdentificationValidationRuleSet1376570855020">
            <Label
              internalID="PDCIdentificationValidationRuleSet1376570855019"
              label-id="PDCIdentificationValidationRuleSetlabelID_1376570855018"
              name=""
            />
          </Annotations>
          <Attributes internalID="PDCIdentificationValidationRuleSet1376570855452">
            <Attribute
              id="ValidationResult.fromDateBeforeDODValidation"
              internalID="PDCIdentificationValidationRuleSet1376570855744"
            />
          </Attributes>
        </diagram>
      </folders>
      <config internalID="id1354645032070">
        <faconfig internalID="id1354645032071"/>
      </config>
    </EditorMetadata>
  </Annotations>
  <Class
    extends="DefaultEvidenceValidationResult"
    extendsRuleSet="EvidenceValidationRuleSet"
    internalID="id1353074680954"
    name="ValidationResult"
  >
    <Attribute
      internalID="id1353074680955"
      name="evidence"
    >
      <type internalID="id1353074680956">
        <ruleclass
          internalID="id1353074680957"
          name="PDCIdentification"
          ruleset="PDCIdentificationRuleSet"
        />
      </type>
      <derivation internalID="id1353074680958">
        <specified internalID="id1353074680959"/>
      </derivation>
    </Attribute>
    <Attribute
      internalID="id1355754693577"
      name="description"
    >
      <type internalID="id1355754693578">
        <javaclass
          internalID="id1355754693579"
          name="curam.creole.value.Message"
        />
      </type>
      <derivation internalID="id1355754693580">
        <ResourceMessage
          internalID="id1355754693581"
          key="PDCIdentificationValidationResult.description"
          resourceBundle="curam.pdc.rules.PDCAlternateIDValidationRuleSet"
        >
          <reference
            attribute="concernRoleName"
            internalID="id1355754693582"
          >
            <reference
              attribute="concernRoleRecord"
              internalID="id1355754693583"
            />
          </reference>
        </ResourceMessage>
      </derivation>
    </Attribute>
    <Attribute
      internalID="id1353074680960"
      name="standardValidations"
    >
      <type internalID="id1353074680961">
        <javaclass
          internalID="id1353082026458"
          name="List"
        >
          <ruleclass
            internalID="id1353082026459"
            name="Validation"
            ruleset="EvidenceValidationRuleSet"
          />
        </javaclass>
      </type>
      <derivation internalID="id1353082026460">
        <fixedlist internalID="PDCIdentificationValidationRuleSet1353488951886">
          <listof internalID="PDCIdentificationValidationRuleSet1353488951887">
            <ruleclass
              internalID="PDCIdentificationValidationRuleSet1353488951889"
              name="Validation"
              ruleset="EvidenceValidationRuleSet"
            />
          </listof>
          <members internalID="PDCIdentificationValidationRuleSet1353488951888">
            <reference
              attribute="fromDateAfterDOBValidation"
              internalID="PDCIdentificationValidationRuleSet1353489042421"
            />
            <reference
              attribute="toDateBeforeDODValidation"
              internalID="PDCIdentificationValidationRuleSet1353489104298"
            />
            <reference
              attribute="ssnMedOverlapValidation"
              internalID="id1354645032072"
            />
            <reference
              attribute="preferredIdentificationValidation"
              internalID="id1376570105961"
            />
            <reference
              attribute="duplicateIDTypeValidation"
              internalID="PDCIdentificationValidationRuleSet1376570826812"
            />
            <!-- BEGIN - TASK 4245 - CKwong - Identification Validations -->
            <reference attribute="sinMod10Validation"/>
            <reference attribute="duplicateIDEvidenceValidation"/>
            <reference attribute="preferredIDValidation"/>
            <!-- END - TASK 4245 - CKwong - Identification Validations -->   
            
            <!-- BEGIN - TASK 5348 - GMohan - Evidence Overlap -->
            <reference attribute="dlMedOverlapValidation"/>
            <reference attribute="pnMedOverlapValidation"/>
            <reference attribute="hcnMedOverlapValidation"/>
            <!-- END - TASK 5348 - GMohan - Evidence Overlap -->
			
			<!-- BEGIN - BUG 103864 - Evidence Overlap check for IA Account Number -->
            <reference attribute="iaAccountNumberOverlapValidation"/>
            <!-- END - BUG 103864-->
			
			<reference attribute="modifySSNValidation"/>
			<reference attribute="modifyReferenceValidation"/>
			
			<!-- BEGIN 57386 DEV: Implement Identification Evidence Changes -->
			<reference attribute="mandatorySourceFieldValidation" />
			<reference attribute="disallowedSourceFieldValidation" />
			<reference attribute="restrictedCountryValidation" />
			<reference attribute="validLengthValidation" />
			<reference attribute="validFormatValidation" />			
			<!-- END 57386 DEV: Implement Identification Evidence Changes -->
                 
          </members>
        </fixedlist>
      </derivation>
    </Attribute>
    <!-- BEGIN - TASK 4245 - CKwong - Identification Validations -->
    
    <Attribute name="preferredIDValidation">
      <type>
         <ruleclass name="Validation" ruleset="EvidenceValidationRuleSet" />
      </type>
      <derivation>
        <create ruleclass="Validation" ruleset="EvidenceValidationRuleSet" >        
          <reference attribute="isPreferredAndIncorrectIDType"/>
          <ResourceMessage
            key="ERR_ID_TYPE_PREFERRED"
            resourceBundle="curam.bdm.pdc.rules.PDCAlternateIDValidationRuleSet"
          />  
        </create>
      </derivation>
    </Attribute>
    
    <!-- check if the incoming evidence is set as preferred. If it is, check whether there is existing 
    preferred IDs. If there is, the incoming evidence can only be of type SIN. Otherwise, it can be of type 
    SIN or Reference Number.-->  
    <Attribute name="isPreferredAndIncorrectIDType">
      <type>
        <javaclass name="Boolean"/>
      </type>
      <derivation>
        <choose>
          <type>
            <javaclass name="Boolean"/>
          </type>
          <when>
            <condition>
              <reference attribute="preferredInd">
                <reference attribute="evidence"/>
              </reference>
            </condition>
            <value>
              <choose>
                <type>
                  <javaclass name="Boolean"/>
                </type>
                <when>
                  <condition>
                    <reference attribute="hasExistingPreferredID"/>
                  </condition>
                  <value>
                    <not>
                      <equals>
                        <reference attribute="altIDType">
                          <reference attribute="evidence"/>
                        </reference>
                        <Code table="ConcernRoleAlternateID">
                          <String value="BDMCA80002"/>
                        </Code>
                      </equals>
                    </not>
                  </value>
                </when>
                <otherwise>
                  <value>
                    <all>
                      <fixedlist>
                        <listof>
                          <javaclass name="Boolean"/>
                        </listof>
                        <members>
                          <not>
                            <equals>
                              <reference attribute="altIDType">
                                <reference attribute="evidence"/>
                              </reference>
                              <Code table="ConcernRoleAlternateID">
                                <String value="BDMCA80002"/>
                              </Code>
                            </equals>
                          </not>
                          <not>
                            <equals>
                              <reference attribute="altIDType">
                                <reference attribute="evidence"/>
                              </reference>
                              <Code table="ConcernRoleAlternateID">
                                <String value="CA7"/>
                              </Code>
                            </equals>
                          </not>
                        </members>
                      </fixedlist>
                    </all>
                  </value>
                </otherwise>
              </choose>
            </value>
          </when>
          <otherwise>
            <value>
              <false/>
            </value>
          </otherwise>
        </choose>
      </derivation>
    </Attribute>
    
    <!-- whether or not the client has an existing preferred ID evidence of type Reference Number or SIN-->
    <Attribute name ="hasExistingPreferredID">
      <type>
        <javaclass name="Boolean"/>
      </type>
      <derivation>
        <choose>
          <type>
            <javaclass name="Boolean"/>
          </type>
          <when>
            <condition>
              <not>
                <equals>
                  <reference attribute="existingPreferredIDForClient"/>
                  <null/>
                </equals>
              </not>
            </condition>
            <value>
              <any>
                <fixedlist>
                  <listof>
                    <javaclass name="Boolean"/>
                  </listof>
                  <members>
                    <equals>
                      <reference attribute="altIDType">
                        <reference attribute="existingPreferredIDForClient"/>
                      </reference>
                      <Code table="ConcernRoleAlternateID">
                        <String value="BDMCA80002"/>
                      </Code>
                    </equals>
                    <equals>
                      <reference attribute="altIDType">
                        <reference attribute="existingPreferredIDForClient"/>
                      </reference>
                      <Code table="ConcernRoleAlternateID">
                        <String value="CA7"/>
                      </Code>
                    </equals>    
                  </members>
                </fixedlist>
              </any>
            </value>
          </when>
          <otherwise>
            <value>
              <false/>
            </value>
          </otherwise>
        </choose>
      </derivation>
    </Attribute>
    
    <!--Get the existing preferred ID evidence for the client. Only 0 or 1 results should be returned -->
    <Attribute name="existingPreferredIDForClient">
      <type>
        <ruleclass name="IdentificationEvidence" ruleset="ParticipantEvidenceRuleSet"/>
      </type>
      <derivation>
        <singleitem onEmpty="returnNull" onMultiple="error">
          <filter>
            <list>
              <reference attribute="identificationEvidence"/>
            </list>
            <listitemexpression>
            <all>
              <fixedlist>
                <listof>
                  <javaclass
                    name="Boolean"
                  />
                </listof>
                <members>
                  <equals>
                    <reference attribute="participantRoleID" >
                      <reference attribute="related_participant" >
                        <reference attribute="evidence" />
                      </reference>
                    </reference>
                    <reference attribute="participantRoleID" >
                      <reference attribute="related_participant" >
                        <current/>
                      </reference>
                    </reference>
                  </equals>
                  <not>
                    <equals>
                      <reference attribute="evidenceSuccessionID" />
                      <reference attribute="successionID" >
                        <current/>
                      </reference>
                    </equals>
                  </not>
                  <reference attribute="preferredInd">
                    <current/>
                  </reference>
                </members>
              </fixedlist>
            </all>
          </listitemexpression>
          </filter>
        </singleitem>
      </derivation>
    </Attribute>
    
    <Attribute name="duplicateIDEvidenceValidation">
      <type>
        <ruleclass name="Validation" ruleset="EvidenceValidationRuleSet" />
      </type>
      <derivation>
        <create ruleclass="Validation" ruleset="EvidenceValidationRuleSet" >
        	<!-- BEGIN 57386 DEV: Implement Identification Evidence Changes -->
        	<choose>
        		<type>
        			<javaclass name="java.lang.Boolean" />
        		</type>
        		<when>
        			<condition>
        				<equals>
        					<reference attribute="altIDType">
        						<reference attribute="evidence" />
        					</reference>
        					<Code table="ConcernRoleAlternateID">
        						<String value="BDMCA00004" />
        					</Code>
        				</equals>
        			</condition>
        			<value>
        				<false />
        			</value>
        		</when>
        		<otherwise>
        			<value>
          				<reference attribute="isEvidenceDuplicated"/>
        			</value>
        		</otherwise>
        	</choose>
          	<!-- END 57386 DEV: Implement Identification Evidence Changes -->
          <ResourceMessage
            key="ERR_EXISTING_BDM_ACCOUNT_NUMBER"
            resourceBundle="curam.bdm.pdc.rules.PDCAlternateIDValidationRuleSet"
          />  
        </create>
      </derivation>
    </Attribute>
    
    <!-- Check if there are existing ID evidences with the same type, value, from date and to date -->
    <Attribute name="isEvidenceDuplicated">
      <type>
        <javaclass name="Boolean"/>
      </type>
      <derivation>
        <any>
          <dynamiclist>
            <list>
              <reference attribute="identificationEvidenceForClientByType"/>
            </list>
            <listitemexpression>
              <all>
                <fixedlist>
                  <listof>
                    <javaclass name="Boolean"/>
                  </listof>
                  <members>
                    <equals>
                      <reference attribute="alternateID">
                        <reference attribute="evidence"/>
                      </reference>
                      <reference attribute="alternateID">
                        <current/>
                      </reference>
                    </equals>                 
                    <equals>
                      <reference attribute="toDate">
                        <reference attribute="evidence"/>
                      </reference>
                      <reference attribute="toDate">
                        <current/>
                      </reference>
                    </equals>
                    <equals>
                      <reference attribute="fromDate">
                        <reference attribute="evidence"/>
                      </reference>
                      <reference attribute="fromDate">
                        <current/>
                      </reference>
                    </equals>
                  </members>
                </fixedlist>
              </all>
            </listitemexpression>
          </dynamiclist>
        </any>
      </derivation>
    </Attribute>

      
    <!-- If the ID being added is SIN, check it is a valid sin number -->
    <Attribute
      name="sinMod10Validation"
    >
      <type>
        <ruleclass name="Validation" ruleset="EvidenceValidationRuleSet" />
      </type>
      <derivation>
        <create
          ruleclass="Validation"
          ruleset="EvidenceValidationRuleSet"
        >
          <choose>
            <type>
              <javaclass name="Boolean"/>
            </type>
            <when>
              <condition>
                <equals>
                  <reference attribute ="altIDType">
                    <reference attribute="evidence"/>
                  </reference>
                  <Code table="ConcernRoleAlternateID">
                    <String value="BDMCA80002"/>
                  </Code>
                </equals>
              </condition>         
              <value>
                <call class="curam.ca.gc.bdm.creole.impl.Statics" method="validateSINMod10">
                  <type>
                    <javaclass name="Boolean"/>
                  </type>
                  <arguments>
                    <reference attribute="alternateID">
                      <reference attribute="evidence"/>
                    </reference>
                  </arguments>
                </call>      
              </value>
            </when>
            <otherwise> 
              <value>              
                <false/>
              </value>
            </otherwise>
          </choose>
          <ResourceMessage
            key="ERR_SIN_MOD10"
            resourceBundle="curam.bdm.pdc.rules.PDCAlternateIDValidationRuleSet"
          />         
        </create>
      </derivation>
      
    </Attribute>
	
	<!-- END - TASK 4245 - CKwong - Identification Validations -->
    	    
    <!-- END - TASK 5348 - GMohan - Overlapping Evidence -->
	
	
	 <Attribute
      name="modifySSNValidation"
    >
      <type>
        <ruleclass name="Validation" ruleset="EvidenceValidationRuleSet" />
      </type>
      <derivation>
        <create
          ruleclass="Validation"
          ruleset="EvidenceValidationRuleSet"
        >
          <choose>
            <type>
              <javaclass name="Boolean"/>
            </type>
            <when>
              <condition>
                <equals>
                  <reference attribute ="altIDType">
                    <reference attribute="evidence"/>
                  </reference>
                  <Code table="ConcernRoleAlternateID">
                    <String value="BDMCA80002"/>
                  </Code>
                </equals>
              </condition>         
              <value>
                <call class="curam.ca.gc.bdm.creole.impl.Statics" method="canModifySSN">
                  <type>
                    <javaclass name="Boolean"/>
                  </type>
                  <arguments>
                      <reference attribute="evidence"/>
                  </arguments>
                </call>      
              </value>
            </when>
            <otherwise> 
              <value>              
                <false/>
              </value>
            </otherwise>
          </choose>
          <ResourceMessage
            key="ERR_SIN_MODIFY"
            resourceBundle="curam.bdm.pdc.rules.PDCAlternateIDValidationRuleSet"
          />         
        </create>
      </derivation>
      
    </Attribute>
	
	<Attribute
      name="modifyReferenceValidation"
    >
      <type>
        <ruleclass name="Validation" ruleset="EvidenceValidationRuleSet" />
      </type>
      <derivation>
        <create
          ruleclass="Validation"
          ruleset="EvidenceValidationRuleSet"
        >
          <choose>
            <type>
              <javaclass name="Boolean"/>
            </type>
            <when>
              <condition>
                <equals>
                  <reference attribute ="altIDType">
                    <reference attribute="evidence"/>
                  </reference>
                  <Code table="ConcernRoleAlternateID">
                    <String value="CA7"/>
                  </Code>
                </equals>
              </condition>         
              <value>
                <call class="curam.ca.gc.bdm.creole.impl.Statics" method="canModifySSN">
                  <type>
                    <javaclass name="Boolean"/>
                  </type>
                  <arguments>
                      <reference attribute="evidence"/>
                  </arguments>
                </call>      
              </value>
            </when>
            <otherwise> 
              <value>              
                <false/>
              </value>
            </otherwise>
          </choose>
          <ResourceMessage
            key="ERR_REFERENCE_MODIFY"
            resourceBundle="curam.bdm.pdc.rules.PDCAlternateIDValidationRuleSet"
          />         
        </create>
      </derivation>
      
    </Attribute>
	
	
    <Attribute
      internalID="id1353074680966"
      name="detailsValidations"
    >
      <type internalID="id1353074680967">
        <javaclass
          internalID="id1353074680968"
          name="java.util.List"
        >
          <ruleclass
            internalID="id1353074680969"
            name="Validation"
            ruleset="EvidenceValidationRuleSet"
          />
        </javaclass>
      </type>
      <derivation internalID="id1353074680970">
        <null internalID="id1353074680971"/>
      </derivation>
    </Attribute>
    <Attribute
      internalID="id1353074680972"
      name="preCreateValidations"
    >
      <type internalID="id1353452434630">
        <javaclass
          internalID="id1353452434631"
          name="List"
        >
          <ruleclass
            internalID="id1353452434632"
            name="Validation"
            ruleset="EvidenceValidationRuleSet"
          />
        </javaclass>
      </type>
      <derivation internalID="id1353513238302">
        <null internalID="PDCIdentificationValidationRuleSet1354046655103"/>
      </derivation>
    </Attribute>
    <Attribute
      internalID="id1355226629685"
      name="preModifyValidations"
    >
      <type internalID="id1355226629686">
        <javaclass
          internalID="id1355226629687"
          name="List"
        >
          <ruleclass
            internalID="id1355226629688"
            name="Validation"
            ruleset="EvidenceValidationRuleSet"
          />
        </javaclass>
      </type>
      <derivation internalID="id1355226629689">
        <fixedlist internalID="id1355226629690">
          <listof internalID="id1355226629691">
            <ruleclass
              internalID="id1355226629692"
              name="Validation"
              ruleset="EvidenceValidationRuleSet"
            />
          </listof>
          <members internalID="id1355226629693">
            <reference
              attribute="validateTypeChanged"
              internalID="id1355226629694"
            />
          </members>
        </fixedlist>
      </derivation>
    </Attribute>
    <Attribute
      internalID="id1352989076359"
      name="postCreateValidations"
    >
      <type internalID="id1352989076360">
        <javaclass
          internalID="PDCIdentificationValidationRuleSet1352989278984"
          name="List"
        >
          <ruleclass
            internalID="PDCIdentificationValidationRuleSet1352989275740"
            name="Validation"
            ruleset="EvidenceValidationRuleSet"
          />
        </javaclass>
      </type>
      <derivation internalID="id1352989076363">
        <fixedlist internalID="id1353074680984">
          <listof internalID="id1353074680985">
            <ruleclass
              internalID="id1353074680986"
              name="Validation"
              ruleset="EvidenceValidationRuleSet"
            />
          </listof>
          <members internalID="id1353074680987">
            <reference
              attribute="createDuplicateClientValidation"
              internalID="PDCIdentificationValidationRuleSet1353489950390"
            />
          </members>
        </fixedlist>
      </derivation>
    </Attribute>
    <Attribute
      internalID="id1353074680988"
      name="postModifyValidations"
    >
      <type internalID="id1353082026468">
        <javaclass
          internalID="id1353082026469"
          name="List"
        >
          <ruleclass
            internalID="id1353082026470"
            name="Validation"
            ruleset="EvidenceValidationRuleSet"
          />
        </javaclass>
      </type>
      <derivation internalID="id1353074680992">
        <fixedlist internalID="id1353082026471">
          <listof internalID="id1353082026472">
            <ruleclass
              internalID="id1353082026473"
              name="Validation"
              ruleset="EvidenceValidationRuleSet"
            />
          </listof>
          <members internalID="id1353082026474">
            <reference
              attribute="modifyDuplicateClientValidation"
              internalID="PDCIdentificationValidationRuleSet1353488649106"
            />
            <reference
              attribute="effectiveDateAfterDOBValidation"
              internalID="PDCIdentificationValidationRuleSet1355754725607"
            />
          </members>
        </fixedlist>
      </derivation>
    </Attribute>
    <Attribute
      internalID="PDCIdentificationValidationRuleSet1352978057880"
      name="duplicateCheck"
    >
      <type internalID="PDCIdentificationValidationRuleSet1352978057881">
        <ruleclass
          internalID="PDCIdentificationValidationRuleSet1352978576333"
          name="DuplicateClientCheck"
          ruleset="PDCDuplicateClientValidationRuleSet"
        />
      </type>
      <derivation internalID="PDCIdentificationValidationRuleSet1352978057883">
        <create
          internalID="PDCIdentificationValidationRuleSet1352978987054"
          ruleclass="DuplicateClientCheck"
          ruleset="PDCDuplicateClientValidationRuleSet"
        >
          <specify
            attribute="concernRoleID"
            internalID="PDCIdentificationValidationRuleSet1352978987055"
          >
            <reference
              attribute="participantRoleID"
              internalID="PDCIdentificationValidationRuleSet1353074734323"
            >
              <reference
                attribute="related_participant"
                internalID="PDCIdentificationValidationRuleSet1353074734324"
              >
                <reference
                  attribute="evidence"
                  internalID="PDCIdentificationValidationRuleSet1353074734325"
                />
              </reference>
            </reference>
          </specify>
        </create>
      </derivation>
    </Attribute>
    <Attribute
      internalID="PDCIdentificationValidationRuleSet1353082692183"
      name="fromDateAfterDOBValidation"
    >
      <type internalID="PDCIdentificationValidationRuleSet1353082692184">
        <ruleclass
          internalID="PDCIdentificationValidationRuleSet1353083987379"
          name="Validation"
          ruleset="EvidenceValidationRuleSet"
        />
      </type>
      <derivation internalID="PDCIdentificationValidationRuleSet1353082692186">
        <create
          internalID="id1353322666868"
          ruleclass="Validation"
          ruleset="EvidenceValidationRuleSet"
        >
          <choose internalID="id1354465229615">
            <type internalID="id1354465229616">
              <javaclass
                internalID="id1354465229617"
                name="Boolean"
              />
            </type>
            <when internalID="id1354465229618">
              <condition internalID="id1354465229619">
                <not internalID="id1354465229620">
                  <equals internalID="id1354465229621">
                    <reference
                      attribute="dateOfBirth"
                      internalID="id1354465229622"
                    />
                    <null internalID="id1355754693584"/>
                  </equals>
                </not>
              </condition>
              <value internalID="id1354465229624">
                <compare
                  comparison="&gt;"
                  internalID="id1354465229625"
                >
                  <reference
                    attribute="dateOfBirth"
                    internalID="id1354465229626"
                  />
                  <reference
                    attribute="fromDate"
                    internalID="id1354465229627"
                  >
                    <reference
                      attribute="evidence"
                      internalID="id1354465229628"
                    />
                  </reference>
                </compare>
              </value>
            </when>
            <otherwise internalID="id1354465229629">
              <value internalID="id1354465229630">
                <false internalID="id1354465229631"/>
              </value>
            </otherwise>
          </choose>
          <ResourceMessage
            internalID="id1353322666870"
            key="ERR_IDENTIFICATION_XRV_START_DATE"
            resourceBundle="curam.pdc.rules.PDCAlternateIDValidationRuleSet"
          >
            <reference
              attribute="concernRoleName"
              internalID="PDCIdentificationValidationRuleSet1353322866249"
            >
              <reference
                attribute="concernRoleRecord"
                internalID="PDCIdentificationValidationRuleSet1353322866250"
              />
            </reference>
            <reference
              attribute="dateOfBirth"
              internalID="id1354465229632"
            />
          </ResourceMessage>
        </create>
      </derivation>
    </Attribute>
    <Attribute
      internalID="PDCIdentificationValidationRuleSet1353083030154"
      name="fromDateBeforeDODValidation"
    >
      <type internalID="PDCIdentificationValidationRuleSet1353083030155">
        <ruleclass
          internalID="PDCIdentificationValidationRuleSet1353083969847"
          name="Validation"
          ruleset="EvidenceValidationRuleSet"
        />
      </type>
      <derivation internalID="PDCIdentificationValidationRuleSet1353083030157">
        <create
          internalID="id1353322666871"
          ruleclass="Validation"
          ruleset="EvidenceValidationRuleSet"
        >
          <choose internalID="id1353409531697">
            <type internalID="id1353409531698">
              <javaclass
                internalID="id1353409531699"
                name="Boolean"
              />
            </type>
            <when internalID="id1353409531700">
              <condition internalID="id1353409531701">
                <not internalID="id1353409531702">
                  <equals internalID="id1353409531703">
                    <reference
                      attribute="dateOfDeath"
                      internalID="id1354465229633"
                    />
                    <null internalID="id1355754693585"/>
                  </equals>
                </not>
              </condition>
              <value internalID="id1353409531707">
                <compare
                  comparison="&gt;"
                  internalID="id1353409531708"
                >
                  <reference
                    attribute="fromDate"
                    internalID="id1353409531709"
                  >
                    <reference
                      attribute="evidence"
                      internalID="id1353409531710"
                    />
                  </reference>
                  <reference
                    attribute="dateOfDeath"
                    internalID="id1354465229634"
                  />
                </compare>
              </value>
            </when>
            <otherwise internalID="id1353409531713">
              <value internalID="id1353409531714">
                <false internalID="id1353409531715"/>
              </value>
            </otherwise>
          </choose>
          <ResourceMessage
            internalID="id1353322666873"
            key="ERR_IDENTIFICATION_XRV_START_DATE_END_DATE"
            resourceBundle="curam.pdc.rules.PDCAlternateIDValidationRuleSet"
          >
            <reference
              attribute="concernRoleName"
              internalID="PDCIdentificationValidationRuleSet1353326085518"
            >
              <reference
                attribute="concernRoleRecord"
                internalID="PDCIdentificationValidationRuleSet1353326085519"
              />
            </reference>
            <reference
              attribute="dateOfDeath"
              internalID="id1354465229635"
            />
          </ResourceMessage>
        </create>
      </derivation>
    </Attribute>
    <Attribute
      internalID="PDCIdentificationValidationRuleSet1353083063720"
      name="toDateBeforeDODValidation"
    >
      <type internalID="PDCIdentificationValidationRuleSet1353083063721">
        <ruleclass
          internalID="PDCIdentificationValidationRuleSet1353083935347"
          name="Validation"
          ruleset="EvidenceValidationRuleSet"
        />
      </type>
      <derivation internalID="PDCIdentificationValidationRuleSet1353083063723">
        <create
          internalID="id1353322666874"
          ruleclass="Validation"
          ruleset="EvidenceValidationRuleSet"
        >
          <choose internalID="id1353409531716">
            <type internalID="id1353409531717">
              <javaclass
                internalID="id1353409531718"
                name="Boolean"
              />
            </type>
            <when internalID="id1353409531719">
              <condition internalID="id1353409531720">
                <not internalID="id1353409531721">
                  <equals internalID="id1353409531722">
                    <reference
                      attribute="dateOfDeath"
                      internalID="id1354465229636"
                    />
                    <null internalID="id1355754693586"/>
                  </equals>
                </not>
              </condition>
              <value internalID="id1376570105962">
                <reference
                  attribute="toDateAfterDateOfDeath"
                  internalID="id1376570105963"
                />
              </value>
            </when>
            <otherwise internalID="id1353409531748">
              <value internalID="id1353409531749">
                <false internalID="id1353409531750"/>
              </value>
            </otherwise>
          </choose>
          <ResourceMessage
            internalID="id1353322666876"
            key="ERR_IDENTIFICATION_XRV_END_DATE"
            resourceBundle="curam.pdc.rules.PDCAlternateIDValidationRuleSet"
          >
            <reference
              attribute="concernRoleName"
              internalID="PDCIdentificationValidationRuleSet1353326162181"
            >
              <reference
                attribute="concernRoleRecord"
                internalID="PDCIdentificationValidationRuleSet1353326162182"
              />
            </reference>
            <reference
              attribute="dateOfDeath"
              internalID="id1354465229638"
            />
          </ResourceMessage>
        </create>
      </derivation>
    </Attribute>
    <Attribute
      internalID="id1376570105964"
      name="toDateAfterDateOfDeath"
    >
      <type internalID="id1376570105965">
        <javaclass
          internalID="id1376570105966"
          name="Boolean"
        />
      </type>
      <derivation internalID="id1376570105967">
        <choose internalID="id1376570105968">
          <type internalID="id1376570105969">
            <javaclass
              internalID="id1376570105970"
              name="Boolean"
            />
          </type>
          <when internalID="id1376570105971">
            <condition internalID="id1376570105972">
              <reference
                attribute="isTodateNull"
                internalID="id1376570105973"
              />
            </condition>
            <value internalID="id1376570105974">
              <compare
                comparison="&gt;"
                internalID="id1376570105975"
              >
                <reference
                  attribute="toDate"
                  internalID="id1376570105976"
                >
                  <reference
                    attribute="evidence"
                    internalID="id1376570105977"
                  />
                </reference>
                <reference
                  attribute="dateOfDeath"
                  internalID="id1376570105978"
                />
              </compare>
            </value>
          </when>
          <otherwise internalID="id1376570105979">
            <value internalID="id1376570105980">
              <false internalID="id1376570105981"/>
            </value>
          </otherwise>
        </choose>
      </derivation>
    </Attribute>
    <Attribute
      internalID="id1376570105982"
      name="isTodateNull"
    >
      <type internalID="id1376570105983">
        <javaclass
          internalID="id1376570105984"
          name="Boolean"
        />
      </type>
      <derivation internalID="id1376570105985">
        <choose internalID="id1376570105986">
          <type internalID="id1376570105987">
            <javaclass
              internalID="id1376570105988"
              name="Boolean"
            />
          </type>
          <when internalID="id1376570105989">
            <condition internalID="id1376570105990">
              <not internalID="id1376570105991">
                <equals internalID="id1376570105992">
                  <reference
                    attribute="toDate"
                    internalID="id1376570105993"
                  >
                    <reference
                      attribute="evidence"
                      internalID="id1376570105994"
                    />
                  </reference>
                  <null internalID="id1376570105995"/>
                </equals>
              </not>
            </condition>
            <value internalID="id1376570105996">
              <true internalID="id1376570105997"/>
            </value>
          </when>
          <otherwise internalID="id1376570105998">
            <value internalID="id1376570105999">
              <false internalID="id1376570106000"/>
            </value>
          </otherwise>
        </choose>
      </derivation>
    </Attribute>
    <Attribute
      internalID="id1354465229639"
      name="effectiveDateAfterDOBValidation"
    >
      <type internalID="id1354465229640">
        <ruleclass
          internalID="id1354465229641"
          name="Validation"
          ruleset="EvidenceValidationRuleSet"
        />
      </type>
      <derivation internalID="id1354465229642">
        <create
          internalID="id1354465229643"
          ruleclass="Validation"
          ruleset="EvidenceValidationRuleSet"
        >
          <choose internalID="id1354465229644">
            <type internalID="id1354465229645">
              <javaclass
                internalID="id1354465229646"
                name="Boolean"
              />
            </type>
            <when internalID="id1354465229647">
              <condition internalID="id1354465229648">
                <all internalID="id1354465229649">
                  <fixedlist internalID="id1354465229650">
                    <listof internalID="id1354465229651">
                      <javaclass
                        internalID="id1354465229652"
                        name="Boolean"
                      />
                    </listof>
                    <members internalID="id1354465229653">
                      <not internalID="id1354465229654">
                        <equals internalID="id1354465229655">
                          <reference
                            attribute="dateOfBirth"
                            internalID="id1354465229656"
                          />
                          <null internalID="id1355754693587"/>
                        </equals>
                      </not>
                      <not internalID="id1354465229658">
                        <equals internalID="id1354465229659">
                          <reference
                            attribute="effectiveDate"
                            internalID="id1354465229660"
                          />
                          <null internalID="id1376570106001"/>
                        </equals>
                      </not>
                    </members>
                  </fixedlist>
                </all>
              </condition>
              <value internalID="id1354465229662">
                <compare
                  comparison="&gt;"
                  internalID="id1354465229663"
                >
                  <reference
                    attribute="dateOfBirth"
                    internalID="id1354465229664"
                  />
                  <reference
                    attribute="effectiveDate"
                    internalID="id1354465229665"
                  />
                </compare>
              </value>
            </when>
            <otherwise internalID="id1354465229666">
              <value internalID="id1354465229667">
                <false internalID="id1354465229668"/>
              </value>
            </otherwise>
          </choose>
          <ResourceMessage
            internalID="id1354465229669"
            key="ERR_IDENTIFICATION_XRV_EFFECTIVE_DATE_DOB"
            resourceBundle="curam.pdc.rules.PDCAlternateIDValidationRuleSet"
          >
            <reference
              attribute="concernRoleName"
              internalID="id1354465229670"
            >
              <reference
                attribute="concernRoleRecord"
                internalID="id1354465229671"
              />
            </reference>
            <reference
              attribute="dateOfBirth"
              internalID="id1354465229672"
            />
          </ResourceMessage>
        </create>
      </derivation>
    </Attribute>
    <Attribute
      internalID="PDCIdentificationValidationRuleSet1353322677596"
      name="concernRoleRecord"
    >
      <type internalID="PDCIdentificationValidationRuleSet1353322677597">
        <ruleclass
          internalID="PDCIdentificationValidationRuleSet1353322693065"
          name="ConcernRole"
          ruleset="ParticipantEntitiesRuleSet"
        />
      </type>
      <derivation internalID="PDCIdentificationValidationRuleSet1353322677599">
        <singleitem
          internalID="PDCIdentificationValidationRuleSet1353322742670"
          onEmpty="error"
          onMultiple="error"
        >
          <readall
            internalID="PDCIdentificationValidationRuleSet1353322697673"
            ruleclass="ConcernRole"
            ruleset="ParticipantEntitiesRuleSet"
          >
            <match
              internalID="PDCIdentificationValidationRuleSet1353322724302"
              retrievedattribute="concernRoleID"
            >
              <reference
                attribute="participantRoleID"
                internalID="PDCIdentificationValidationRuleSet1353322738063"
              >
                <reference
                  attribute="related_participant"
                  internalID="PDCIdentificationValidationRuleSet1353322738064"
                >
                  <reference
                    attribute="evidence"
                    internalID="PDCIdentificationValidationRuleSet1353322738065"
                  />
                </reference>
              </reference>
            </match>
          </readall>
        </singleitem>
      </derivation>
    </Attribute>
    <Attribute
      internalID="PDCIdentificationValidationRuleSet1353487835468"
      name="modifyDuplicateClientValidation"
    >
      <type internalID="PDCIdentificationValidationRuleSet1353487835469">
        <ruleclass
          internalID="PDCIdentificationValidationRuleSet1353488024809"
          name="Validation"
          ruleset="EvidenceValidationRuleSet"
        />
      </type>
      <derivation internalID="PDCIdentificationValidationRuleSet1353487835471">
        <create
          internalID="PDCIdentificationValidationRuleSet1353488295619"
          ruleclass="Validation"
          ruleset="EvidenceValidationRuleSet"
        >
          <reference
            attribute="isConcernRoleDuplicate"
            internalID="PDCIdentificationValidationRuleSet1353488483630"
          >
            <reference
              attribute="duplicateCheck"
              internalID="PDCIdentificationValidationRuleSet1353488483631"
            />
          </reference>
          <ResourceMessage
            internalID="PDCIdentificationValidationRuleSet1353488295637"
            key="ERR_IDENTIFICATION_XRV_DUPLICATE_CLIENT_MODIFY"
            resourceBundle="curam.pdc.rules.PDCAlternateIDValidationRuleSet"
          >
            <Annotations internalID="PDCIdentificationValidationRuleSet1353488295640">
              <Label
                internalID="PDCIdentificationValidationRuleSet1353488295639"
                label-id="PDCIdentificationValidationRuleSetlabelID_1353488295638"
                name=""
              />
            </Annotations>
          </ResourceMessage>
        </create>
      </derivation>
    </Attribute>
    <Attribute
      internalID="PDCIdentificationValidationRuleSet1353489581370"
      name="createDuplicateClientValidation"
    >
      <type internalID="PDCIdentificationValidationRuleSet1353489581371">
        <ruleclass
          internalID="PDCIdentificationValidationRuleSet1353489596313"
          name="Validation"
          ruleset="EvidenceValidationRuleSet"
        />
      </type>
      <derivation internalID="PDCIdentificationValidationRuleSet1353489581373">
        <create
          internalID="PDCIdentificationValidationRuleSet1353489618431"
          ruleclass="Validation"
          ruleset="EvidenceValidationRuleSet"
        >
          <reference
            attribute="isConcernRoleDuplicate"
            internalID="PDCIdentificationValidationRuleSet1353489645231"
          >
            <reference
              attribute="duplicateCheck"
              internalID="PDCIdentificationValidationRuleSet1353489645232"
            />
          </reference>
          <ResourceMessage
            internalID="PDCIdentificationValidationRuleSet1353489618433"
            key="ERR_IDENTIFICATION_XRV_DUPLICATE_CLIENT_CREATE"
            resourceBundle="curam.pdc.rules.PDCAlternateIDValidationRuleSet"
          >
            <Annotations internalID="PDCIdentificationValidationRuleSet1353489618436">
              <Label
                internalID="PDCIdentificationValidationRuleSet1353489618435"
                label-id="PDCIdentificationValidationRuleSetlabelID_1353489618434"
                name=""
              />
            </Annotations>
          </ResourceMessage>
        </create>
      </derivation>
    </Attribute>
    <Attribute
      internalID="id1354465229673"
      name="caseID"
    >
      <type internalID="id1354465229674">
        <javaclass
          internalID="id1354465229675"
          name="Number"
        />
      </type>
      <derivation internalID="id1354465229676">
        <reference
          attribute="caseID"
          internalID="id1354465229677"
        >
          <reference
            attribute="evidence"
            internalID="id1354465229678"
          />
        </reference>
      </derivation>
    </Attribute>
    <Attribute
      internalID="id1376570106002"
      name="birthAndDeathEvidence"
    >
      <type internalID="id1376570106003">
        <javaclass
          internalID="id1376570106004"
          name="List"
        >
          <ruleclass
            internalID="id1376570106005"
            name="BirthAndDeathEvidence"
            ruleset="ParticipantEvidenceRuleSet"
          />
        </javaclass>
      </type>
      <derivation internalID="id1376570106006">
        <readall
          internalID="id1376570106007"
          ruleclass="BirthAndDeathEvidence"
          ruleset="ParticipantEvidenceRuleSet"
        >
          <match
            internalID="id1376570106008"
            retrievedattribute="caseID"
          >
            <reference
              attribute="caseID"
              internalID="id1376570106009"
            />
          </match>
        </readall>
      </derivation>
    </Attribute>
    <Attribute
      internalID="id1376570106010"
      name="birthAndDeathEvidenceForClient"
    >
      <type internalID="id1376570106011">
        <ruleclass
          internalID="id1376570106012"
          name="BirthAndDeathEvidence"
          ruleset="ParticipantEvidenceRuleSet"
        />
      </type>
      <derivation internalID="id1376570106013">
        <singleitem
          internalID="id1376570106014"
          onEmpty="returnNull"
          onMultiple="returnFirst"
        >
          <filter internalID="id1376570106015">
            <list internalID="id1376570106016">
              <reference
                attribute="birthAndDeathEvidence"
                internalID="id1376570106017"
              />
            </list>
            <listitemexpression internalID="id1376570106018">
              <all internalID="id1376570106019">
                <fixedlist internalID="id1376570106020">
                  <listof internalID="id1376570106021">
                    <javaclass
                      internalID="id1376570106022"
                      name="Boolean"
                    />
                  </listof>
                  <members internalID="id1376570106023">
                    <not internalID="id1376570106024">
                      <equals internalID="id1376570106025">
                        <reference
                          attribute="evidenceSuccessionID"
                          internalID="id1376570106026"
                        />
                        <reference
                          attribute="successionID"
                          internalID="id1376570106027"
                        >
                          <current internalID="id1376570106028"/>
                        </reference>
                      </equals>
                    </not>
                    <equals internalID="id1376570106029">
                      <reference
                        attribute="participantRoleID"
                        internalID="id1376570106030"
                      >
                        <reference
                          attribute="related_participant"
                          internalID="id1376570106031"
                        >
                          <reference
                            attribute="evidence"
                            internalID="id1376570106032"
                          />
                        </reference>
                      </reference>
                      <reference
                        attribute="participantRoleID"
                        internalID="id1376570106033"
                      >
                        <reference
                          attribute="related_person"
                          internalID="id1376570106034"
                        >
                          <current internalID="id1376570106035"/>
                        </reference>
                      </reference>
                    </equals>
                  </members>
                </fixedlist>
              </all>
            </listitemexpression>
          </filter>
        </singleitem>
      </derivation>
    </Attribute>
    <Attribute
      internalID="id1354465229687"
      name="dateOfBirth"
    >
      <type internalID="id1354465229688">
        <javaclass
          internalID="id1354465229689"
          name="curam.util.type.Date"
        />
      </type>
      <derivation internalID="id1354465229690">
        <choose internalID="id1354465229691">
          <type internalID="id1354465229692">
            <javaclass
              internalID="id1354465229693"
              name="curam.util.type.Date"
            />
          </type>
          <when internalID="id1354465229694">
            <condition internalID="id1354465229695">
              <not internalID="id1354465229696">
                <equals internalID="id1354465229697">
                  <reference
                    attribute="birthAndDeathEvidenceForClient"
                    internalID="id1354465229698"
                  />
                  <null internalID="id1354465229699"/>
                </equals>
              </not>
            </condition>
            <value internalID="id1354465229700">
              <reference
                attribute="dateOfBirth"
                internalID="id1354465229701"
              >
                <reference
                  attribute="birthAndDeathEvidenceForClient"
                  internalID="id1354465229702"
                />
              </reference>
            </value>
          </when>
          <otherwise internalID="id1354465229719">
            <value internalID="id1354465229720">
              <null internalID="id1354465229721"/>
            </value>
          </otherwise>
        </choose>
      </derivation>
    </Attribute>
    <Attribute
      internalID="id1354465229722"
      name="dateOfDeath"
    >
      <type internalID="id1354465229723">
        <javaclass
          internalID="id1354465229724"
          name="curam.util.type.Date"
        />
      </type>
      <derivation internalID="id1354465229725">
        <choose internalID="id1354465229726">
          <type internalID="id1354465229727">
            <javaclass
              internalID="id1354465229728"
              name="curam.util.type.Date"
            />
          </type>
          <when internalID="id1354465229729">
            <condition internalID="id1354465229730">
              <not internalID="id1354465229731">
                <equals internalID="id1354465229732">
                  <reference
                    attribute="birthAndDeathEvidenceForClient"
                    internalID="id1354465229733"
                  />
                  <null internalID="id1354465229734"/>
                </equals>
              </not>
            </condition>
            <value internalID="id1354465229735">
              <reference
                attribute="dateOfDeath"
                internalID="id1354465229736"
              >
                <reference
                  attribute="birthAndDeathEvidenceForClient"
                  internalID="id1354465229737"
                />
              </reference>
            </value>
          </when>
          <otherwise internalID="id1354465229738">
            <value internalID="id1354465229739">
              <null internalID="id1354465229740"/>
            </value>
          </otherwise>
        </choose>
      </derivation>
    </Attribute>
    <Attribute
      internalID="id1354465229741"
      name="effectiveDate"
    >
      <type internalID="id1354465229742">
        <javaclass
          internalID="id1354465229743"
          name="curam.util.type.Date"
        />
      </type>
      <derivation internalID="id1354465229744">
        <reference
          attribute="effectiveFrom"
          internalID="id1354465229745"
        >
          <reference
            attribute="evidence"
            internalID="id1354465229746"
          />
        </reference>
      </derivation>
    </Attribute>
    <Attribute
      internalID="PDCIdentificationValidationRuleSet1354465281204"
      name="identificationEvidence"
    >
      <type internalID="PDCIdentificationValidationRuleSet1354465281205">
        <javaclass
          internalID="PDCIdentificationValidationRuleSet1354465312048"
          name="List"
        >
          <ruleclass
            internalID="PDCIdentificationValidationRuleSet1354465308518"
            name="IdentificationEvidence"
            ruleset="ParticipantEvidenceRuleSet"
          />
        </javaclass>
      </type>
      <derivation internalID="PDCIdentificationValidationRuleSet1354465281207">
        <readall
          internalID="PDCIdentificationValidationRuleSet1354465402548"
          ruleclass="IdentificationEvidence"
          ruleset="ParticipantEvidenceRuleSet"
        >
          <match
            internalID="id1376570106036"
            retrievedattribute="caseID"
          >
            <reference
              attribute="caseID"
              internalID="id1376570106037"
            />
          </match>
        </readall>
      </derivation>
    </Attribute>
    <Attribute
      internalID="PDCIdentificationValidationRuleSet1354465809872"
      name="identificationEvidenceForClientByType"
    >
      <type internalID="PDCIdentificationValidationRuleSet1354465809873">
        <javaclass
          internalID="PDCIdentificationValidationRuleSet1354645391130"
          name="List"
        >
          <ruleclass
            internalID="PDCIdentificationValidationRuleSet1354465835021"
            name="IdentificationEvidence"
            ruleset="ParticipantEvidenceRuleSet"
          />
        </javaclass>
      </type>
      <derivation internalID="PDCIdentificationValidationRuleSet1354465809875">
        <filter internalID="PDCIdentificationValidationRuleSet1354465872168">
          <list internalID="PDCIdentificationValidationRuleSet1354465872169">
            <reference
              attribute="identificationEvidence"
              internalID="PDCIdentificationValidationRuleSet1354650311947"
            />
          </list>
          <listitemexpression internalID="PDCIdentificationValidationRuleSet1354465872170">
            <all internalID="PDCIdentificationValidationRuleSet1354465909706">
              <fixedlist internalID="PDCIdentificationValidationRuleSet1354465909707">
                <listof internalID="PDCIdentificationValidationRuleSet1354465909708">
                  <javaclass
                    internalID="PDCIdentificationValidationRuleSet1354465909709"
                    name="Boolean"
                  />
                </listof>
                <members internalID="PDCIdentificationValidationRuleSet1354465909710">
                  <not internalID="PDCIdentificationValidationRuleSet1354645529733">
                    <equals internalID="PDCIdentificationValidationRuleSet1354645590193">
                      <Annotations internalID="PDCIdentificationValidationRuleSet1354645590192">
                        <Label
                          internalID="PDCIdentificationValidationRuleSet1354645590191"
                          label-id="PDCIdentificationValidationRuleSetlabelID_1354645540440"
                          name=""
                        />
                      </Annotations>
                      <reference
                        attribute="evidenceSuccessionID"
                        internalID="PDCIdentificationValidationRuleSet1354645571120"
                      />
                      <reference
                        attribute="successionID"
                        internalID="PDCIdentificationValidationRuleSet1354645621459"
                      >
                        <current internalID="PDCIdentificationValidationRuleSet1354645621460"/>
                      </reference>
                    </equals>
                  </not>
                  <equals internalID="PDCIdentificationValidationRuleSet1354466232109">
                    <Annotations internalID="PDCIdentificationValidationRuleSet1354466232108">
                      <Label
                        internalID="PDCIdentificationValidationRuleSet1354466232107"
                        label-id="PDCIdentificationValidationRuleSetlabelID_1354466057284"
                        name=""
                      />
                    </Annotations>
                    <reference
                      attribute="altIDType"
                      internalID="PDCIdentificationValidationRuleSet1354466106687"
                    >
                      <current internalID="PDCIdentificationValidationRuleSet1354466106688"/>
                    </reference>
                    <reference
                      attribute="altIDType"
                      internalID="PDCIdentificationValidationRuleSet1354466177837"
                    >
                      <reference
                        attribute="evidence"
                        internalID="PDCIdentificationValidationRuleSet1354466177838"
                      />
                    </reference>
                  </equals>
                  <equals internalID="PDCIdentificationValidationRuleSet1354650140899">
                    <Annotations internalID="PDCIdentificationValidationRuleSet1354650140898">
                      <Label
                        internalID="PDCIdentificationValidationRuleSet1354650140897"
                        label-id="PDCIdentificationValidationRuleSetlabelID_1354650067843"
                        name=""
                      />
                    </Annotations>
                    <reference
                      attribute="participantRoleID"
                      internalID="PDCIdentificationValidationRuleSet1354650119168"
                    >
                      <reference
                        attribute="related_participant"
                        internalID="PDCIdentificationValidationRuleSet1354650119169"
                      >
                        <reference
                          attribute="evidence"
                          internalID="PDCIdentificationValidationRuleSet1354650119170"
                        />
                      </reference>
                    </reference>
                    <reference
                      attribute="participantRoleID"
                      internalID="PDCIdentificationValidationRuleSet1354650176661"
                    >
                      <reference
                        attribute="related_participant"
                        internalID="PDCIdentificationValidationRuleSet1354650176662"
                      >
                        <current internalID="PDCIdentificationValidationRuleSet1354650176663"/>
                      </reference>
                    </reference>
                  </equals>
                </members>
              </fixedlist>
            </all>
          </listitemexpression>
        </filter>
      </derivation>
    </Attribute>
    <Attribute
      internalID="id1354645032073"
      name="validateDateOverlap"
    >
      <type internalID="id1354645032074">
        <javaclass
          internalID="id1354645032075"
          name="Boolean"
        />
      </type>
      <derivation internalID="id1354645032076">
        <choose internalID="id1354645032077">
          <type internalID="id1354645032078">
            <javaclass
              internalID="id1354645032079"
              name="Boolean"
            />
          </type>
          <when internalID="id1354645032080">
            <condition internalID="id1354645032081">
              <not internalID="id1354645032082">
                <equals internalID="id1354645032083">
                  <reference
                    attribute="toDate"
                    internalID="id1354645032084"
                  >
                    <reference
                      attribute="evidence"
                      internalID="id1354645032085"
                    />
                  </reference>
                  <null internalID="id1355754693588"/>
                </equals>
              </not>
            </condition>
            <value internalID="id1354645032087">
              <reference
                attribute="validateOverlapWithEndDate"
                internalID="id1354645032088"
              />
            </value>
          </when>
          <otherwise internalID="id1354645032089">
            <value internalID="id1354645032090">
              <reference
                attribute="validateOverlapNoEndDate"
                internalID="id1354645032091"
              />
            </value>
          </otherwise>
        </choose>
      </derivation>
    </Attribute>
    <Attribute
      internalID="id1354645032092"
      name="ssnMedOverlapValidation"
    >
      <type internalID="id1354645032093">
        <ruleclass
          internalID="id1354645032094"
          name="Validation"
          ruleset="EvidenceValidationRuleSet"
        />
      </type>
      <derivation internalID="id1354645032095">
        <create
          internalID="id1354645032096"
          ruleclass="Validation"
          ruleset="EvidenceValidationRuleSet"
        >
          <choose internalID="id1354645032097">
            <type internalID="id1354645032098">
              <javaclass
                internalID="id1354645032099"
                name="Boolean"
              />
            </type>
            <when internalID="id1354645032100">
              <condition internalID="id1354645032101">
                <any internalID="id1354645032102">
                  <fixedlist internalID="id1354645032103">
                    <listof internalID="id1354645032104">
                      <javaclass
                        internalID="id1354645032105"
                        name="Boolean"
                      />
                    </listof>
                    <members internalID="id1354645032106">
                      <equals internalID="id1354645032107">
                        <reference
                          attribute="altIDType"
                          internalID="id1354645032108"
                        >
                          <reference
                            attribute="evidence"
                            internalID="id1354645032109"
                          />
                        </reference>
                        <Code
                          internalID="id1354645032110"
                          table="ConcernRoleAlternateID"
                        >
                          <String
                            internalID="id1354645032111"
                            value="CA1"
                          />
                        </Code>
                      </equals>
                      <equals internalID="id1354645032112">
                        <reference
                          attribute="altIDType"
                          internalID="id1354645032113"
                        >
                          <reference
                            attribute="evidence"
                            internalID="id1354645032114"
                          />
                        </reference>
                        <Code
                          internalID="id1354645032115"
                          table="ConcernRoleAlternateID"
                        >
                          <String
                            internalID="id1354645032116"
                            value="CA2"
                          />
                        </Code>
                      </equals>
                      <!-- BEGIN - TASK 4245 - CKwong - Identification Validations -->
                      <equals>
                        <reference attribute="altIDType" >
                          <reference attribute="evidence" />
                        </reference>
                        <Code table="ConcernRoleAlternateID" >
                          <String
                            value="BDMCA80002"
                          />
                        </Code>
                      </equals>
                      <!-- END - TASK 4245 - CKwong - Identification Validations -->
                    </members>
                  </fixedlist>
                </any>
              </condition>
              <value internalID="id1354645032117">
                <reference
                  attribute="validateDateOverlap"
                  internalID="id1354645032118"
                />
              </value>
            </when>
            <otherwise internalID="id1354645032119">
              <value internalID="id1354645032120">
                <false internalID="id1354645032121"/>
              </value>
            </otherwise>
          </choose>
          <!-- BEGIN - TASK 4245 - CKwong - Identification Validations -->
          <ResourceMessage
            internalID="id1354645032122"
            key="ERR_EXISTING_ACTIVE_SIN"
            resourceBundle="curam.bdm.pdc.rules.PDCAlternateIDValidationRuleSet"
          />
          <!-- END - TASK 4245 - CKwong - Identification Validations -->
        </create>
      </derivation>
    </Attribute>
    <!-- BEGIN - BUG 103864 - Overlapping IA Account Number -->
	<Attribute
      internalID="id1354645032092"
      name="iaAccountNumberOverlapValidation"
    >
      <type internalID="id1354645032093">
        <ruleclass
          internalID="id1354645032094"
          name="Validation"
          ruleset="EvidenceValidationRuleSet"
        />
      </type>
      <derivation internalID="id1354645032095">
        <create
          internalID="id1354645032096"
          ruleclass="Validation"
          ruleset="EvidenceValidationRuleSet"
        >
          <choose internalID="id1354645032097">
            <type internalID="id1354645032098">
              <javaclass
                internalID="id1354645032099"
                name="Boolean"
              />
            </type>
            <when internalID="id1354645032100">
              <condition internalID="id1354645032101">
                <any internalID="id1354645032102">
                  <fixedlist internalID="id1354645032103">
                    <listof internalID="id1354645032104">
                      <javaclass
                        internalID="id1354645032105"
                        name="Boolean"
                      />
                    </listof>
                    <members internalID="id1354645032106">
                      <equals>
                        <reference attribute="altIDType" >
                          <reference attribute="evidence" />
                        </reference>
                        <Code table="ConcernRoleAlternateID" >
                          <String
                            value="BDMCA00002"
                          />
                        </Code>
                      </equals>
                    </members>
                  </fixedlist>
                </any>
              </condition>
              <value internalID="id1354645032117">
                <reference
                  attribute="validateDateOverlap"
                  internalID="id1354645032118"
                />
              </value>
            </when>
            <otherwise internalID="id1354645032119">
              <value internalID="id1354645032120">
                <false internalID="id1354645032121"/>
              </value>
            </otherwise>
          </choose>
          <ResourceMessage
            internalID="id1354645032122"
            key="ERR_DUPLICATE_ID"
            resourceBundle="curam.bdm.pdc.rules.PDCAlternateIDValidationRuleSet"
          />
        </create>
      </derivation>
    </Attribute>
    <!-- END - BUG 103864 - Overlapping IA Account Number -->
    <Attribute
      internalID="id1354645032092"
      name="dlMedOverlapValidation"
    >
      <type internalID="id1354645032093">
        <ruleclass
          internalID="id1354645032094"
          name="Validation"
          ruleset="EvidenceValidationRuleSet"
        />
      </type>
      <derivation internalID="id1354645032095">
        <create
          internalID="id1354645032096"
          ruleclass="Validation"
          ruleset="EvidenceValidationRuleSet"
        >
          <choose internalID="id1354645032097">
            <type internalID="id1354645032098">
              <javaclass
                internalID="id1354645032099"
                name="Boolean"
              />
            </type>
            <when internalID="id1354645032100">
              <condition internalID="id1354645032101">
                <any internalID="id1354645032102">
                  <fixedlist internalID="id1354645032103">
                    <listof internalID="id1354645032104">
                      <javaclass
                        internalID="id1354645032105"
                        name="Boolean"
                      />
                    </listof>
                    <members internalID="id1354645032106">
                      <equals internalID="id1354645032107">
                        <reference
                          attribute="altIDType"
                          internalID="id1354645032108"
                        >
                          <reference
                            attribute="evidence"
                            internalID="id1354645032109"
                          />
                        </reference>
                        <Code
                          internalID="id1354645032110"
                          table="ConcernRoleAlternateID"
                        >
                          <String
                            internalID="id1354645032111"
                            value="CA1"
                          />
                        </Code>
                      </equals>
                      <equals internalID="id1354645032112">
                        <reference
                          attribute="altIDType"
                          internalID="id1354645032113"
                        >
                          <reference
                            attribute="evidence"
                            internalID="id1354645032114"
                          />
                        </reference>
                        <Code
                          internalID="id1354645032115"
                          table="ConcernRoleAlternateID"
                        >
                          <String
                            internalID="id1354645032116"
                            value="CA2"
                          />
                        </Code>
                      </equals>
                      <equals>
                        <reference attribute="altIDType" >
                          <reference attribute="evidence" />
                        </reference>
                        <Code table="ConcernRoleAlternateID" >
                          <String
                            value="CA50"
                          />
                        </Code>
                      </equals>
                    </members>
                  </fixedlist>
                </any>
              </condition>
              <value internalID="id1354645032117">
                <reference
                  attribute="validateDateOverlap"
                  internalID="id1354645032118"
                />
              </value>
            </when>
            <otherwise internalID="id1354645032119">
              <value internalID="id1354645032120">
                <false internalID="id1354645032121"/>
              </value>
            </otherwise>
          </choose>
          <ResourceMessage
            internalID="id1354645032122"
            key="ERR_EXISTING_ACTIVE_DL"
            resourceBundle="curam.bdm.pdc.rules.PDCAlternateIDValidationRuleSet"
          />
        </create>
      </derivation>
    </Attribute>
        <Attribute
      internalID="id1354645032092"
      name="pnMedOverlapValidation"
    >
      <type internalID="id1354645032093">
        <ruleclass
          internalID="id1354645032094"
          name="Validation"
          ruleset="EvidenceValidationRuleSet"
        />
      </type>
      <derivation internalID="id1354645032095">
        <create
          internalID="id1354645032096"
          ruleclass="Validation"
          ruleset="EvidenceValidationRuleSet"
        >
          <choose internalID="id1354645032097">
            <type internalID="id1354645032098">
              <javaclass
                internalID="id1354645032099"
                name="Boolean"
              />
            </type>
            <when internalID="id1354645032100">
              <condition internalID="id1354645032101">
                <any internalID="id1354645032102">
                  <fixedlist internalID="id1354645032103">
                    <listof internalID="id1354645032104">
                      <javaclass
                        internalID="id1354645032105"
                        name="Boolean"
                      />
                    </listof>
                    <members internalID="id1354645032106">
                      <equals internalID="id1354645032107">
                        <reference
                          attribute="altIDType"
                          internalID="id1354645032108"
                        >
                          <reference
                            attribute="evidence"
                            internalID="id1354645032109"
                          />
                        </reference>
                        <Code
                          internalID="id1354645032110"
                          table="ConcernRoleAlternateID"
                        >
                          <String
                            internalID="id1354645032111"
                            value="CA1"
                          />
                        </Code>
                      </equals>
                      <equals internalID="id1354645032112">
                        <reference
                          attribute="altIDType"
                          internalID="id1354645032113"
                        >
                          <reference
                            attribute="evidence"
                            internalID="id1354645032114"
                          />
                        </reference>
                        <Code
                          internalID="id1354645032115"
                          table="ConcernRoleAlternateID"
                        >
                          <String
                            internalID="id1354645032116"
                            value="CA2"
                          />
                        </Code>
                      </equals>
                      <equals>
                        <reference attribute="altIDType" >
                          <reference attribute="evidence" />
                        </reference>
                        <Code table="ConcernRoleAlternateID" >
                          <String
                            value="BDMCA80000"
                          />
                        </Code>
                      </equals>
                    </members>
                  </fixedlist>
                </any>
              </condition>
              <value internalID="id1354645032117">
                <reference
                  attribute="validateDateOverlap"
                  internalID="id1354645032118"
                />
              </value>
            </when>
            <otherwise internalID="id1354645032119">
              <value internalID="id1354645032120">
                <false internalID="id1354645032121"/>
              </value>
            </otherwise>
          </choose>
          <ResourceMessage
            internalID="id1354645032122"
            key="ERR_EXISTING_ACTIVE_PROVNUM"
            resourceBundle="curam.bdm.pdc.rules.PDCAlternateIDValidationRuleSet"
          />
        </create>
      </derivation>
    </Attribute>
        <Attribute
      internalID="id1354645032092"
      name="hcnMedOverlapValidation"
    >
      <type internalID="id1354645032093">
        <ruleclass
          internalID="id1354645032094"
          name="Validation"
          ruleset="EvidenceValidationRuleSet"
        />
      </type>
      <derivation internalID="id1354645032095">
        <create
          internalID="id1354645032096"
          ruleclass="Validation"
          ruleset="EvidenceValidationRuleSet"
        >
          <choose internalID="id1354645032097">
            <type internalID="id1354645032098">
              <javaclass
                internalID="id1354645032099"
                name="Boolean"
              />
            </type>
            <when internalID="id1354645032100">
              <condition internalID="id1354645032101">
                <any internalID="id1354645032102">
                  <fixedlist internalID="id1354645032103">
                    <listof internalID="id1354645032104">
                      <javaclass
                        internalID="id1354645032105"
                        name="Boolean"
                      />
                    </listof>
                    <members internalID="id1354645032106">
                      <equals internalID="id1354645032107">
                        <reference
                          attribute="altIDType"
                          internalID="id1354645032108"
                        >
                          <reference
                            attribute="evidence"
                            internalID="id1354645032109"
                          />
                        </reference>
                        <Code
                          internalID="id1354645032110"
                          table="ConcernRoleAlternateID"
                        >
                          <String
                            internalID="id1354645032111"
                            value="CA1"
                          />
                        </Code>
                      </equals>
                      <equals internalID="id1354645032112">
                        <reference
                          attribute="altIDType"
                          internalID="id1354645032113"
                        >
                          <reference
                            attribute="evidence"
                            internalID="id1354645032114"
                          />
                        </reference>
                        <Code
                          internalID="id1354645032115"
                          table="ConcernRoleAlternateID"
                        >
                          <String
                            internalID="id1354645032116"
                            value="CA2"
                          />
                        </Code>
                      </equals>
                      <equals>
                        <reference attribute="altIDType" >
                          <reference attribute="evidence" />
                        </reference>
                        <Code table="ConcernRoleAlternateID" >
                          <String
                            value="BDMCA80001"
                          />
                        </Code>
                      </equals>
                      <!-- Task-28538 BEGIN - Validation Check --> 
                      <equals>
                        <reference attribute="altIDType" >
                          <reference attribute="evidence" />
                        </reference>
                        <Code table="ConcernRoleAlternateID" >
                          <String
                            value="BDMCA80003"
                          />
                        </Code>
                      </equals>
                      <!-- Task-28538 END -->
                    </members>
                  </fixedlist>
                </any>
              </condition>
              <value internalID="id1354645032117">
                <reference
                  attribute="validateDateOverlap"
                  internalID="id1354645032118"
                />
              </value>
            </when>
            <otherwise internalID="id1354645032119">
              <value internalID="id1354645032120">
                <false internalID="id1354645032121"/>
              </value>
            </otherwise>
          </choose>
          <ResourceMessage
            internalID="id1354645032122"
            key="ERR_EXISTING_ACTIVE_HCNUM"
            resourceBundle="curam.bdm.pdc.rules.PDCAlternateIDValidationRuleSet"
          />
        </create>
      </derivation>
    </Attribute>
    <!-- END - TASK 5348 - GMohan - Overlapping Evd -->
    <Attribute
      internalID="id1354645032123"
      name="validateOverlapWithEndDate"
    >
      <type internalID="id1354645032124">
        <javaclass
          internalID="id1354645032125"
          name="Boolean"
        />
      </type>
      <derivation internalID="id1354645032126">
        <any internalID="id1354645032127">
          <dynamiclist internalID="id1354645032128">
            <list internalID="id1354645032129">
              <reference
                attribute="identificationEvidenceForClientByType"
                internalID="id1354645032130"
              />
            </list>
            <listitemexpression internalID="id1354645032131">
              <choose internalID="id1354645032132">
                <type internalID="id1354645032133">
                  <javaclass
                    internalID="id1354645032134"
                    name="Boolean"
                  />
                </type>
                <when internalID="id1354645032135">
                  <condition internalID="id1354645032136">
                    <all internalID="id1354645032137">
                      <fixedlist internalID="id1354645032138">
                        <listof internalID="id1354645032139">
                          <javaclass
                            internalID="id1354645032140"
                            name="Boolean"
                          />
                        </listof>
                        <members internalID="id1354645032141">
                          <any internalID="id1354645032142">
                            <fixedlist internalID="id1354645032143">
                              <listof internalID="id1354645032144">
                                <javaclass
                                  internalID="id1354645032145"
                                  name="Boolean"
                                />
                              </listof>
                              <members internalID="id1354645032146">
                                <compare
                                  comparison="&lt;="
                                  internalID="id1354645032147"
                                >
                                  <reference
                                    attribute="fromDate"
                                    internalID="id1354645032148"
                                  >
                                    <reference
                                      attribute="evidence"
                                      internalID="id1354645032149"
                                    />
                                  </reference>
                                  <reference
                                    attribute="toDate"
                                    internalID="id1354645032150"
                                  >
                                    <current internalID="id1354645032151"/>
                                  </reference>
                                </compare>
                                <equals internalID="id1354645032152">
                                  <reference
                                    attribute="toDate"
                                    internalID="id1354645032153"
                                  >
                                    <current internalID="id1354645032154"/>
                                  </reference>
                                  <null internalID="id1355754693589"/>
                                </equals>
                              </members>
                            </fixedlist>
                          </any>
                          <compare
                            comparison="&gt;="
                            internalID="id1354645032156"
                          >
                            <reference
                              attribute="toDate"
                              internalID="id1354645032157"
                            >
                              <reference
                                attribute="evidence"
                                internalID="id1354645032158"
                              />
                            </reference>
                            <reference
                              attribute="fromDate"
                              internalID="id1354645032159"
                            >
                              <current internalID="id1354645032160"/>
                            </reference>
                          </compare>
                        </members>
                      </fixedlist>
                    </all>
                  </condition>
                  <value internalID="id1354645032161">
                    <true internalID="id1354645032162"/>
                  </value>
                </when>
                <otherwise internalID="id1354645032163">
                  <value internalID="id1354645032164">
                    <false internalID="id1354645032165"/>
                  </value>
                </otherwise>
              </choose>
            </listitemexpression>
          </dynamiclist>
        </any>
      </derivation>
    </Attribute>
    <Attribute
      internalID="id1354645032166"
      name="validateOverlapNoEndDate"
    >
      <type internalID="id1354645032167">
        <javaclass
          internalID="id1354645032168"
          name="Boolean"
        />
      </type>
      <derivation internalID="id1354645032169">
        <any internalID="id1354645032170">
          <dynamiclist internalID="id1354645032171">
            <list internalID="id1354645032172">
              <reference
                attribute="identificationEvidenceForClientByType"
                internalID="id1354645032173"
              />
            </list>
            <listitemexpression internalID="id1354645032174">
              <choose internalID="id1354645032175">
                <type internalID="id1354645032176">
                  <javaclass
                    internalID="id1354645032177"
                    name="Boolean"
                  />
                </type>
                <when internalID="id1354645032178">
                  <condition internalID="id1354645032179">
                    <any internalID="id1354645032180">
                      <fixedlist internalID="id1354645032181">
                        <listof internalID="id1354645032182">
                          <javaclass
                            internalID="id1354645032183"
                            name="Boolean"
                          />
                        </listof>
                        <members internalID="id1354645032184">
                          <equals internalID="id1354645032185">
                            <reference
                              attribute="toDate"
                              internalID="id1354645032186"
                            >
                              <current internalID="id1354645032187"/>
                            </reference>
                            <null internalID="id1355754693590"/>
                          </equals>
                          <compare
                            comparison="&lt;="
                            internalID="id1354645032189"
                          >
                            <reference
                              attribute="fromDate"
                              internalID="id1354645032190"
                            >
                              <reference
                                attribute="evidence"
                                internalID="id1354645032191"
                              />
                            </reference>
                            <reference
                              attribute="toDate"
                              internalID="id1354645032192"
                            >
                              <current internalID="id1354645032193"/>
                            </reference>
                          </compare>
                        </members>
                      </fixedlist>
                    </any>
                  </condition>
                  <value internalID="id1354645032194">
                    <true internalID="id1354645032195"/>
                  </value>
                </when>
                <otherwise internalID="id1354645032196">
                  <value internalID="id1354645032197">
                    <false internalID="id1354645032198"/>
                  </value>
                </otherwise>
              </choose>
            </listitemexpression>
          </dynamiclist>
        </any>
      </derivation>
    </Attribute>
    <Attribute
      internalID="id1354645032199"
      name="evidenceSuccessionID"
    >
      <type internalID="id1354645032200">
        <javaclass
          internalID="id1354645032201"
          name="Number"
        />
      </type>
      <derivation internalID="id1354645032202">
        <reference
          attribute="successionID"
          internalID="id1354645032203"
        >
          <reference
            attribute="evidence"
            internalID="id1354645032204"
          />
        </reference>
      </derivation>
    </Attribute>
    <Attribute
      internalID="id1355226629697"
      name="validateTypeChanged"
    >
      <type internalID="id1355226629698">
        <ruleclass
          internalID="id1355226629699"
          name="Validation"
          ruleset="EvidenceValidationRuleSet"
        />
      </type>
      <derivation internalID="id1355226629700">
        <create
          internalID="id1355226629701"
          ruleclass="Validation"
          ruleset="EvidenceValidationRuleSet"
        >
          <reference
            attribute="hasTypeBeenChanged"
            internalID="id1355226629702"
          />
          <ResourceMessage
            internalID="id1355226629703"
            key="ERR_IDENTIFICATION_FV_TYPE_CANNOT_BE_MODIFIED"
            resourceBundle="curam.pdc.rules.PDCAlternateIDValidationRuleSet"
          />
        </create>
      </derivation>
    </Attribute>
    <Attribute
      internalID="id1376570106039"
      name="hasTypeBeenChanged"
    >
      <type internalID="id1376570106040">
        <javaclass
          internalID="id1376570106041"
          name="Boolean"
        />
      </type>
      <derivation internalID="id1376570106042">
        <choose internalID="id1376570106043">
          <type internalID="id1376570106044">
            <javaclass
              internalID="id1376570106045"
              name="Boolean"
            />
          </type>
          <when internalID="id1376570106046">
            <condition internalID="id1376570106047">
              <equals internalID="id1376570106048">
                <reference
                  attribute="status"
                  internalID="id1376570106049"
                >
                  <reference
                    attribute="evidence"
                    internalID="id1376570106050"
                  />
                </reference>
                <Code
                  internalID="id1376570106051"
                  table="EvidenceDescriptorStatus"
                >
                  <String
                    internalID="id1376570106052"
                    value="EDS1"
                  />
                </Code>
              </equals>
            </condition>
            <value internalID="id1376570106053">
              <not internalID="id1376570106054">
                <equals internalID="id1376570106055">
                  <reference
                    attribute="altIDType"
                    internalID="id1376570106056"
                  >
                    <reference
                      attribute="activeIdentificationEvidenceRow"
                      internalID="id1376570106057"
                    />
                  </reference>
                  <reference
                    attribute="altIDType"
                    internalID="id1376570106058"
                  >
                    <reference
                      attribute="evidence"
                      internalID="id1376570106059"
                    />
                  </reference>
                </equals>
              </not>
            </value>
          </when>
          <otherwise internalID="id1376570106060">
            <value internalID="id1376570106061">
              <false internalID="id1376570106062"/>
            </value>
          </otherwise>
        </choose>
      </derivation>
    </Attribute>
    <Attribute
      internalID="id1355226629714"
      name="activeIdentificationEvidenceRow"
    >
      <type internalID="id1355226629715">
        <ruleclass
          internalID="id1355226629716"
          name="ActiveIdentificationEvidenceRow"
          ruleset="ParticipantEvidenceRuleSet"
        />
      </type>
      <derivation internalID="id1355226629717">
        <singleitem
          internalID="id1355226629718"
          onEmpty="returnNull"
          onMultiple="returnFirst"
        >
          <readall
            internalID="id1355226629719"
            ruleclass="ActiveIdentificationEvidenceRow"
            ruleset="ParticipantEvidenceRuleSet"
          >
            <match
              internalID="id1355226629720"
              retrievedattribute="correctionSetID"
            >
              <reference
                attribute="correctionSetID"
                internalID="id1355226629721"
              >
                <reference
                  attribute="evidence"
                  internalID="id1355226629722"
                />
              </reference>
            </match>
          </readall>
        </singleitem>
      </derivation>
    </Attribute>
    <Attribute
      internalID="id1376570106063"
      name="preferredIdentificationValidation"
    >
      <type internalID="id1376570106064">
        <ruleclass
          internalID="id1376570106065"
          name="Validation"
          ruleset="EvidenceValidationRuleSet"
        />
      </type>
      <derivation internalID="id1376570106066">
        <create
          internalID="id1376570106067"
          ruleclass="Validation"
          ruleset="EvidenceValidationRuleSet"
        >
          <choose internalID="id1376570106068">
            <type internalID="id1376570106069">
              <javaclass
                internalID="id1376570106070"
                name="Boolean"
              />
            </type>
            <when internalID="id1376570106071">
              <condition internalID="id1376570106072">
                <not internalID="id1376570106073">
                  <equals internalID="id1376570106074">
                    <reference
                      attribute="caseTypeCode"
                      internalID="id1376570106075"
                    >
                      <reference
                        attribute="caseHeaderRecord"
                        internalID="id1376570106076"
                      />
                    </reference>
                    <Code
                      internalID="id1376570106077"
                      table="CaseTypeCode"
                    >
                      <String
                        internalID="id1376570106078"
                        value="CT2001"
                      />
                    </Code>
                  </equals>
                </not>
              </condition>
              <value internalID="id1376570106079">
                <reference
                  attribute="preferredIdentificationExists"
                  internalID="id1376570106080"
                />
              </value>
            </when>
            <otherwise internalID="id1376570106081">
              <value internalID="id1376570106082">
                <false internalID="id1376570106083"/>
              </value>
            </otherwise>
          </choose>
          <ResourceMessage
            internalID="id1376570106084"
            key="ERR_IDENTIFICATION_MULTIPLE_PREFERRED_IDENTIFICATION"
            resourceBundle="curam.pdc.rules.PDCAlternateIDValidationRuleSet"
          />
        </create>
      </derivation>
    </Attribute>
    <Attribute
      internalID="id1376570106085"
      name="preferredIdentificationExists"
    >
      <type internalID="id1376570106086">
        <javaclass
          internalID="id1376570106087"
          name="Boolean"
        />
      </type>
      <derivation internalID="id1376570106088">
        <any internalID="id1376570106089">
          <dynamiclist internalID="id1376570106090">
            <list internalID="id1376570106091">
              <reference
                attribute="identificationEvidenceForClient"
                internalID="id1376570106092"
              />
            </list>
            <listitemexpression internalID="id1376570106093">
              <all internalID="id1376570106094">
                <fixedlist internalID="id1376570106095">
                  <listof internalID="id1376570106096">
                    <javaclass
                      internalID="id1376570106097"
                      name="Boolean"
                    />
                  </listof>
                  <members internalID="id1376570106098">
                    <equals internalID="id1376570106099">
                      <reference
                        attribute="preferredInd"
                        internalID="id1376570106100"
                      >
                        <current internalID="id1376570106101"/>
                      </reference>
                      <true internalID="id1376570106102"/>
                    </equals>
                    <equals internalID="id1376570106103">
                      <reference
                        attribute="preferredInd"
                        internalID="id1376570106104"
                      >
                        <reference
                          attribute="evidence"
                          internalID="id1376570106105"
                        />
                      </reference>
                      <true internalID="id1376570106106"/>
                    </equals>
                    <!-- BEGIN, 191160, ZV -->
                    <equals>
                       <reference attribute="status">
                         <reference attribute="evidence"/>
                       </reference>
                      <Code table="EvidenceDescriptorStatus">
                         <String value="EDS1"/>
                      </Code>
                    </equals>
                    <!-- END, 191160 -->
                  </members>
                </fixedlist>
              </all>
            </listitemexpression>
          </dynamiclist>
        </any>
      </derivation>
    </Attribute>
    <Attribute
      internalID="id1376570106107"
      name="caseHeaderRecord"
    >
      <type internalID="id1376570106108">
        <ruleclass
          internalID="id1376570106109"
          name="CaseHeader"
          ruleset="CaseEntitiesRuleSet"
        />
      </type>
      <derivation internalID="id1376570106110">
        <singleitem
          internalID="id1376570106111"
          onEmpty="error"
          onMultiple="error"
        >
          <readall
            internalID="id1376570106112"
            ruleclass="CaseHeader"
            ruleset="CaseEntitiesRuleSet"
          >
            <match
              internalID="id1376570106113"
              retrievedattribute="caseID"
            >
              <reference
                attribute="caseID"
                internalID="id1376570106114"
              />
            </match>
          </readall>
        </singleitem>
      </derivation>
    </Attribute>
    <Attribute
      internalID="id1376570106115"
      name="identificationEvidenceForClient"
    >
      <type internalID="id1376570106116">
        <javaclass
          internalID="id1376570106117"
          name="List"
        >
          <ruleclass
            internalID="id1376570106118"
            name="IdentificationEvidence"
            ruleset="ParticipantEvidenceRuleSet"
          />
        </javaclass>
      </type>
      <derivation internalID="id1376570106119">
        <filter internalID="id1376570106120">
          <list internalID="id1376570106121">
            <reference
              attribute="identificationEvidence"
              internalID="id1376570106122"
            />
          </list>
          <listitemexpression internalID="id1376570106123">
            <all internalID="id1376570106124">
              <fixedlist internalID="id1376570106125">
                <listof internalID="id1376570106126">
                  <javaclass
                    internalID="id1376570106127"
                    name="Boolean"
                  />
                </listof>
                <members internalID="id1376570106128">
                  <equals internalID="id1376570106129">
                    <reference
                      attribute="participantRoleID"
                      internalID="id1376570106130"
                    >
                      <reference
                        attribute="related_participant"
                        internalID="id1376570106131"
                      >
                        <reference
                          attribute="evidence"
                          internalID="id1376570106132"
                        />
                      </reference>
                    </reference>
                    <reference
                      attribute="participantRoleID"
                      internalID="id1376570106133"
                    >
                      <reference
                        attribute="related_participant"
                        internalID="id1376570106134"
                      >
                        <current internalID="id1376570106135"/>
                      </reference>
                    </reference>
                  </equals>
                  <not internalID="id1376570106136">
                    <equals internalID="id1376570106137">
                      <reference
                        attribute="evidenceSuccessionID"
                        internalID="id1376570106138"
                      />
                      <reference
                        attribute="successionID"
                        internalID="id1376570106139"
                      >
                        <current internalID="id1376570106140"/>
                      </reference>
                    </equals>
                  </not>
                </members>
              </fixedlist>
            </all>
          </listitemexpression>
        </filter>
      </derivation>
    </Attribute>
    <Attribute
      internalID="PDCIdentificationValidationRuleSet1376570151485"
      name="doesIDTypeExistForConcernType"
    >
      <type internalID="PDCIdentificationValidationRuleSet1376570151486">
        <javaclass
          internalID="PDCIdentificationValidationRuleSet1376570151487"
          name="Boolean"
        />
      </type>
      <derivation>
			<choose>
				<type>
					<javaclass name="Boolean" />
				</type>
				<when>
					<condition>
						<any>
							<fixedlist>
								<listof>
									<javaclass name="java.lang.Boolean" />
								</listof>
								<members>
									<equals>
										<reference attribute="altIDType">
											<reference attribute="evidence" />
										</reference>
										<Code table="ConcernRoleAlternateID">
											<String value="BDMCA00001" />
										</Code>
									</equals>
									<equals>
										<reference attribute="altIDType">
											<reference attribute="evidence" />
										</reference>
										<Code table="ConcernRoleAlternateID">
											<String value="BDMCA00002" />
										</Code>
									</equals>
									<equals>
										<reference attribute="altIDType">
											<reference attribute="evidence" />
										</reference>
										<Code table="ConcernRoleAlternateID">
											<String value="BDMCA00004" />
										</Code>
									</equals>
								</members>
							</fixedlist>
						</any>
					</condition>
					<value>
						<choose>
							<type>
								<javaclass name="Boolean" />
							</type>
							<when>
								<condition>
									<not>
										<equals>
											<reference attribute="concernRoleType">
												<reference attribute="concernRoleRecord"/>
											</reference>
											<Code table="ConcernRoleType">
												<String value="RL7" />
											</Code>
										</equals>
									</not>
								</condition>
								<value>
									<call class="curam.ca.gc.bdm.creole.impl.Statics"
										method="isDisallowedOverlappingID">
										<type>
											<javaclass name="Boolean" />
										</type>
										<arguments>
											<reference attribute="evidence" />
										</arguments>
									</call>
								</value>
							</when>
							<otherwise>
								<value>
									<false />
								</value>
							</otherwise>
						</choose>
					</value>
				</when>
				<when>
					<condition>
						<equals>
							<reference attribute="altIDType">
								<reference attribute="evidence" />
							</reference>
							<Code table="ConcernRoleAlternateID">
								<String value="BDMCA80002" />
							</Code>
						</equals>
					</condition>
					<value>
						<call class="curam.ca.gc.bdm.creole.impl.Statics"
							method="doesSINExistForConcernType">
							<type>
								<javaclass name="Boolean" />
							</type>
							<arguments>
								<reference attribute="evidence" />
							</arguments>
						</call>
					</value>
				</when>
				<otherwise>
					<value>
						<choose>
							<type>
								<javaclass name="Boolean" />
							</type>
							<when>
								<condition>
									<not>
										<equals>
											<reference attribute="concernRoleType">
												<reference attribute="concernRoleRecord"/>
											</reference>
											<Code table="ConcernRoleType">
												<String value="RL7" />
											</Code>
										</equals>
									</not>
								</condition>
								<value>
									<call class="curam.pdc.impl.Statics" method="doesIDTypeExistForConcernType">
										<type>
											<javaclass name="Boolean" />
										</type>
										<arguments>
											<reference attribute="evidence"/>
										</arguments>
									</call>
								</value>
							</when>
							<otherwise>
								<value>
									<false />
								</value>
							</otherwise>
						</choose>
					</value>
				</otherwise>
			</choose>
		</derivation>
    </Attribute>
    <Attribute
      internalID="PDCIdentificationValidationRuleSet1376570370132"
      name="duplicateIDTypeValidation"
    >
      <type internalID="PDCIdentificationValidationRuleSet1376570370133">
        <ruleclass
          internalID="PDCIdentificationValidationRuleSet1376570480204"
          name="Validation"
          ruleset="EvidenceValidationRuleSet"
        />
      </type>
      <derivation internalID="PDCIdentificationValidationRuleSet1376570370135">
        <create
          internalID="PDCIdentificationValidationRuleSet1376570904663"
          ruleclass="Validation"
          ruleset="EvidenceValidationRuleSet"
        >
          <reference
            attribute="doesIDTypeExistForConcernType"
            internalID="PDCIdentificationValidationRuleSet1376570978017"
          />
          <!-- BEGIN 57386 DEV: Implement Identification Evidence Changes -->
               	<choose>
            		<type>
            			<javaclass name="curam.creole.value.Message" />
            		</type>
            		<when>
            			<condition>
   							<equals>
   								<reference attribute="altIDType">
   									<reference attribute="evidence" />
   								</reference>
   								<Code table="ConcernRoleAlternateID">
   									<String value="BDMCA00001" />
   								</Code>
   							</equals>
            			</condition>
            			<value>
            				<ResourceMessage key="ERR_EXISTING_BDM_ACCOUNT_NUMBER" 
								resourceBundle="curam.bdm.pdc.rules.PDCAlternateIDValidationRuleSet" />
            			</value>
            		</when>
            		<when>
            			<condition>
      							<equals>
      								<reference attribute="altIDType">
      									<reference attribute="evidence" />
      								</reference>
      								<Code table="ConcernRoleAlternateID">
      									<String value="BDMCA00002" />
      								</Code>
      							</equals>
            			</condition>
            			<value>
            				<ResourceMessage key="ERR_EXISTING_IA_ACCOUNT_NUMBER" 
								resourceBundle="curam.bdm.pdc.rules.PDCAlternateIDValidationRuleSet" />
            			</value>
            		</when>
            		<otherwise>
            			<value>
					         <ResourceMessage
					            internalID="PDCIdentificationValidationRuleSet1376570904669"
					            key="ERR_IDENTIFICATION_ID_TYPE_CONCERNTYPE_OVERLAP"
					            resourceBundle="curam.pdc.rules.PDCAlternateIDValidationRuleSet"
					          >
					            <reference
					              attribute="concernRoleType"
					              internalID="PDCIdentificationValidationRuleSet1376579807374"
					            >
					              <reference
					                attribute="concernRoleRecord"
					                internalID="PDCIdentificationValidationRuleSet1376579807375"
					              />
					            </reference>
					          </ResourceMessage>
            				</value>
            			</otherwise>
            			</choose>
          <!-- END 57386 DEV: Implement Identification Evidence Changes -->
        </create>
      </derivation>
    </Attribute>
    
    	<!-- BEGIN 57386 DEV: Implement Identification Evidence Changes -->
		<Attribute name="foreignCountryValidationHelper">
			<type>
				<ruleclass name="ForeignCountryValidationHelper"
					ruleset="BDMForeignCountryValidationHelperRuleSet" />
			</type>
			<derivation>
				<create ruleclass="ForeignCountryValidationHelper"
					ruleset="BDMForeignCountryValidationHelperRuleSet">
					<reference attribute="bdmReceivedFrom">
						<reference attribute="evidence" />
					</reference>
					<reference attribute="bdmReceivedFromCountry">
						<reference attribute="evidence" />
					</reference>
					<reference attribute="bdmModeOfReceipt">
						<reference attribute="evidence" />
					</reference>
				</create>
			</derivation>
		</Attribute>

		<Attribute name="mandatorySourceFieldValidation">
			<type>
				<ruleclass name="Validation"
					ruleset="EvidenceValidationRuleSet" />
			</type>
			<derivation>
				<create ruleclass="Validation"
					ruleset="EvidenceValidationRuleSet">
					<reference attribute="mandatorySourceFieldFailure" />
					<reference attribute="mandatorySourceFieldFailureMessage" />
				</create>
			</derivation>
		</Attribute>

		<Attribute name="mandatorySourceFieldFailure">
			<type>
				<javaclass name="java.lang.Boolean" />
			</type>
			<derivation>
				<reference attribute="mandatorySourceFieldFailure">
					<reference attribute="foreignCountryValidationHelper" />
				</reference>
			</derivation>
		</Attribute>

		<Attribute name="mandatorySourceFieldFailureMessage">
			<type>
				<javaclass name="curam.creole.value.Message" />
			</type>
			<derivation>
				<ResourceMessage
					key="ERR_FOREIGN_GOVT_REQUIRED_FIELDS"
					resourceBundle="curam.bdm.pdc.rules.PDCAlternateIDValidationRuleSet" />
			</derivation>
		</Attribute>

		<Attribute name="disallowedSourceFieldValidation">
			<type>
				<ruleclass name="Validation"
					ruleset="EvidenceValidationRuleSet" />
			</type>
			<derivation>
				<create ruleclass="Validation"
					ruleset="EvidenceValidationRuleSet">
					<reference attribute="disallowedSourceFieldFailure" />
					<reference
						attribute="disallowedSourceFieldFailureMessage" />
				</create>
			</derivation>
		</Attribute>

		<Attribute name="disallowedSourceFieldFailure">
			<type>
				<javaclass name="java.lang.Boolean" />
			</type>
			<derivation>
				<reference attribute="disallowedSourceFieldFailure">
					<reference attribute="foreignCountryValidationHelper" />
				</reference>
			</derivation>
		</Attribute>

		<Attribute name="disallowedSourceFieldFailureMessage">
			<type>
				<javaclass name="curam.creole.value.Message" />
			</type>
			<derivation>
				<ResourceMessage
					key="ERR_FOREIGN_GOVT_EXCLUSIVE_FIELDS"
					resourceBundle="curam.bdm.pdc.rules.PDCAlternateIDValidationRuleSet" />
			</derivation>
		</Attribute>

		<Attribute name="restrictedCountryValidation">
			<type>
				<ruleclass name="Validation"
					ruleset="EvidenceValidationRuleSet" />
			</type>
			<derivation>
				<create ruleclass="Validation"
					ruleset="EvidenceValidationRuleSet">
					<reference attribute="restrictedCountryFailure" />
					<reference attribute="restrictedCountryFailureMessage" />
				</create>
			</derivation>
      		</Attribute>

          <Attribute name="restrictedCountryFailure">
            <type>
              <javaclass name="java.lang.Boolean" />
            </type>
            <derivation>
              <choose>
                <type>
                  <javaclass name="Boolean" />
                </type>
                <when>
                  <condition>
                    <not>
                      <equals>
                        <reference attribute="concernRoleType">
                          <reference attribute="concernRoleRecord" />
                        </reference>
                        <Code table="ConcernRoleType">
                          <String value="RL7" />
                        </Code>
                      </equals>
                    </not>
                  </condition>
                  <value>
                    <reference attribute="restrictedCountryFailure">
                      <reference
                        attribute="foreignCountryValidationHelper" />
                    </reference>
                  </value>
                </when>
                <otherwise>
                  <value>
                    <false />
                  </value>
                </otherwise>
              </choose>
            </derivation>
          </Attribute>

		<Attribute name="restrictedCountryFailureMessage">
			<type>
				<javaclass name="curam.creole.value.Message" />
			</type>
			<derivation>
				<ResourceMessage key="ERR_RESTRICTED_COUNTRY"
					resourceBundle="curam.bdm.pdc.rules.PDCAlternateIDValidationRuleSet" />
			</derivation>
		</Attribute>
		
		<Attribute name="validLengthValidation">
			<type>
				<ruleclass name="Validation"
					ruleset="EvidenceValidationRuleSet" />
			</type>
			<derivation>
				<create ruleclass="Validation"
					ruleset="EvidenceValidationRuleSet">
					<reference attribute="validLengthFailure" />
					<reference attribute="validLengthFailureMessage" />
				</create>
			</derivation>
		</Attribute>

		<Attribute name="validLengthFailure">
			<type>
				<javaclass name="java.lang.Boolean" />
			</type>
			<derivation>
				<not>
					<call class="curam.ca.gc.bdm.creole.impl.Statics" method="isValidIdentifierLength">
                  		<type>
                    		<javaclass name="Boolean"/>
                  		</type>
                  		<arguments>
	                    	<reference attribute="altIDType">
	                      		<reference attribute="evidence"/>
	                    	</reference>
	                    	<reference attribute="alternateID">
	                      		<reference attribute="evidence"/>
	                    	</reference>
                  		</arguments>
                	</call>  
				</not>
			</derivation>
		</Attribute>

		<Attribute name="validLengthFailureMessage">
			<type>
				<javaclass name="curam.creole.value.Message" />
			</type>
			<derivation>
				<choose>
					<type>
						<javaclass name="curam.creole.value.Message" />
					</type>
					<when>
						<condition>
							<equals>
								<reference attribute="altIDType">
									<reference attribute="evidence" />
								</reference>
								<Code table="ConcernRoleAlternateID">
									<String value="BDMCA00003" />
								</Code>
							</equals>
						</condition>
						<value>
							<ResourceMessage key="ERR_VALID_TWELVE_DIGIT" 
								resourceBundle="curam.bdm.pdc.rules.PDCAlternateIDValidationRuleSet" />
						</value>
					</when>
					<otherwise>
						<value>
							<ResourceMessage key="ERR_VALID_NINE_DIGIT" 
								resourceBundle="curam.bdm.pdc.rules.PDCAlternateIDValidationRuleSet" />
						</value>
					</otherwise>
				</choose>
			</derivation>
		</Attribute>
		
		
		<Attribute name="validFormatValidation">
			<type>
				<ruleclass name="Validation"
					ruleset="EvidenceValidationRuleSet" />
			</type>
			<derivation>
				<create ruleclass="Validation"
					ruleset="EvidenceValidationRuleSet">
					<reference attribute="validFormatFailure" />
					<reference attribute="validFormatFailureMessage" />
				</create>
			</derivation>
		</Attribute>
		
		<Attribute name="validFormatFailure">
			<type>
				<javaclass name="java.lang.Boolean" />
			</type>
			<derivation>
				<not>
					<call class="curam.ca.gc.bdm.creole.impl.Statics" method="isValidIdentifierFormat">
                  		<type>
                    		<javaclass name="Boolean"/>
                  		</type>
                  		<arguments>
	                    	<reference attribute="altIDType">
	                      		<reference attribute="evidence"/>
	                    	</reference>
	                    	<reference attribute="alternateID">
	                      		<reference attribute="evidence"/>
	                    	</reference>
                  		</arguments>
                	</call>  
				</not>
			</derivation>
		</Attribute>

		<Attribute name="validFormatFailureMessage">
			<type>
				<javaclass name="curam.creole.value.Message" />
			</type>
			<derivation>
				<ResourceMessage key="ERR_NINE_DIGIT_STARTING_WITH_ZERO" 
					resourceBundle="curam.bdm.pdc.rules.PDCAlternateIDValidationRuleSet" />
			</derivation>
		</Attribute>
		
		<!-- BEGIN TASK-90069 removing validation as new validation is added under task-89389 -->
		<!-- TODO remove commented code after unit testing -->
		<!-- <Attribute name="receivedFromFINValidation">
			<type>
				<ruleclass name="Validation"
					ruleset="EvidenceValidationRuleSet" />
			</type>
			<derivation>
				<create ruleclass="Validation"
					ruleset="EvidenceValidationRuleSet">
					<reference attribute="receivedFromFINFailure" />
					<reference attribute="receivedFromFINFailureMessage" />
				</create>
			</derivation>
		</Attribute>
		
		<Attribute name="receivedFromFINFailure">
			<type>
				<javaclass name="java.lang.Boolean" />
			</type>
			<derivation>
				<all>
					<fixedlist>
						<listof>
							<javaclass name="java.lang.Boolean" />
						</listof>
						<members>
							<equals>
								<reference attribute="altIDType">
									<reference attribute="evidence" />
								</reference>
								<Code table="ConcernRoleAlternateID">
									<String value="BDMCA00004" />
								</Code>
							</equals>
							<not>
								<equals>
									<reference attribute="bdmReceivedFrom">
										<reference attribute="evidence" />
									</reference>
									<Code table="BDMReceivedFrom">
										<String value="RF4" />
									</Code>
								</equals>
							</not>
						</members>
					</fixedlist>
				</all>
			</derivation>
		</Attribute>

		<Attribute name="receivedFromFINFailureMessage">
			<type>
				<javaclass name="curam.creole.value.Message" />
			</type>
			<derivation>
				<ResourceMessage key="ERR_RECEIVED_FROM_REQ_IF_FIN" 
					resourceBundle="curam.bdm.pdc.rules.PDCAlternateIDValidationRuleSet" />
			</derivation>
		</Attribute> -->
		<!-- END TASK-90069 -->
    	<!-- END 57386 DEV: Implement Identification Evidence Changes -->
  </Class>
</RuleSet>
