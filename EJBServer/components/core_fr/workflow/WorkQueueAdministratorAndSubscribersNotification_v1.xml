<?xml version="1.0" encoding="UTF-8"?>

<!--
  Licensed Materials - Property of IBM
 
  Copyright IBM Corporation 2012. All Rights Reserved.

  US Government Users Restricted Rights - Use, duplication or disclosure 
  restricted by GSA ADP Schedule Contract with IBM Corp.
-->
<workflow-process category="PC10" createdBy="admin" creationDate="20091002T131718" id="28511" language-version="1.0" process-version="1" released="true"> 
  <name>WorkQueueAdministratorAndSubscribersNotification</name>  
  <!--BEGIN, CR00361282, CL -->  
  <process-display-name> 
    <localized-text> 
      <locale language="fr">Notification administrateur et abonnés de file d'attente des travaux</locale>  
      <locale language="en">Work Queue Administrator And Subscribers Notification</locale>
    </localized-text> 
  </process-display-name>  
  <!--END, CR00361282 -->  
  <description> 
    <localized-text> 
      <locale language="fr">Ce processus permet d'envoyer la notification à l'administrateur et aux abonnés de la file d'attente des travaux lorsqu'une tâche est affectée à la file d'attente des travaux et qu'aucun superviseur n'existe pour le dossier soumis pour approbation.</locale>  
      <locale language="en">This process is used to send the notification to the administrator and  subscribers of the work queue when a task (no supervisor existing for the case submitted for approval) is assigned to the work queue.</locale>
    </localized-text> 
  </description>  
  <enactment-mappings> 
    <mapping> 
      <source-attribute name="caseReference" struct-name="curam.core.struct.CaseReference"/>  
      <target-attribute name="caseReference" wdo-name="CaseReferenceWDO"/> 
    </mapping>  
    <mapping> 
      <source-attribute name="workQueueID" struct-name="curam.core.sl.struct.WorkQueueIDKey"/>  
      <target-attribute name="workQueueID" wdo-name="WorkQueueDetailsWDO"/> 
    </mapping>  
    <mapping> 
      <source-attribute name="workQueueName" struct-name="curam.core.sl.struct.WorkQueueName"/>  
      <target-attribute name="workQueueName" wdo-name="WorkQueueDetailsWDO"/> 
    </mapping> 
  </enactment-mappings>  
  <wdos> 
    <wdo initialize-attributes="false" is-list-wdo="false"> 
      <wdo-name>CaseReferenceWDO</wdo-name>  
      <display-name> 
        <localized-text> 
          <locale language="fr">CaseReferenceWDO</locale>  
          <locale language="en">CaseReferenceWDO</locale>
        </localized-text> 
      </display-name>  
      <description> 
        <localized-text> 
          <locale language="fr">Objet de données du flux de travaux pour la référence de dossier utilisée pour construire le message de notification.</locale>  
          <locale language="en">Workflow data object for case reference which is used to construct the message for notification.</locale>
        </localized-text> 
      </description>  
      <attributes> 
        <attribute> 
          <attribute-name>caseReference</attribute-name>  
          <display-name> 
            <localized-text> 
              <locale language="fr">Référence du dossier.</locale>  
              <locale language="en">Case Reference</locale>
            </localized-text> 
          </display-name>  
          <type>STRING</type>  
          <required-at-enactment>true</required-at-enactment>  
          <process-output>false</process-output> 
        </attribute> 
      </attributes> 
    </wdo>  
    <wdo initialize-attributes="false" is-list-wdo="true"> 
      <wdo-name>UserListWDO</wdo-name>  
      <display-name> 
        <localized-text> 
          <locale language="fr">UserListWDO</locale>  
          <locale language="en">UserListWDO</locale>
        </localized-text> 
      </display-name>  
      <description> 
        <localized-text> 
          <locale language="fr">Répertorie les objets de données de flux de travaux utilisés pour stocker les noms des abonnées et de l'administrateur de la file d'attente des travaux.</locale>  
          <locale language="en">List workflow data object used to store the names of subscribers and the administrator of the work queue.</locale>
        </localized-text> 
      </description>  
      <attributes> 
        <attribute> 
          <attribute-name>userName</attribute-name>  
          <display-name> 
            <localized-text> 
              <locale language="fr">Nom d'utilisateur</locale>  
              <locale language="en">User Name</locale>
            </localized-text> 
          </display-name>  
          <type>STRING</type>  
          <required-at-enactment>false</required-at-enactment>  
          <process-output>false</process-output> 
        </attribute>  
        <attribute> 
          <attribute-name>userType</attribute-name>  
          <display-name> 
            <localized-text> 
              <locale language="fr">Type d'utilisateur</locale>  
              <locale language="en">User Type</locale>
            </localized-text> 
          </display-name>  
          <type>STRING</type>  
          <required-at-enactment>false</required-at-enactment>  
          <process-output>false</process-output> 
        </attribute> 
      </attributes> 
    </wdo>  
    <wdo initialize-attributes="false" is-list-wdo="false"> 
      <wdo-name>WorkQueueDetailsWDO</wdo-name>  
      <display-name> 
        <localized-text> 
          <locale language="fr">WorkQueueDetailsWDO</locale>  
          <locale language="en">WorkQueueDetailsWDO</locale>
        </localized-text> 
      </display-name>  
      <description> 
        <localized-text> 
          <locale language="fr">Objet de données du flux de travaux pour l'ID de file d'attente des travaux et le nom de file d'attente des travaux. L'ID de file d'attente des travaux permet d'obtenir la liste des abonnés et l'administrateur de la file d'attente des travaux. Le nom de file d'attente des travaux permet de construire le message de notification.</locale>  
          <locale language="en">Workflow data object for work queue ID and work queue name. Work queue ID is used to get the list of subscribers and the administrator of the work queue. Work queue name is used to construct the message for notification.</locale>
        </localized-text> 
      </description>  
      <attributes> 
        <attribute> 
          <attribute-name>workQueueID</attribute-name>  
          <display-name> 
            <localized-text> 
              <locale language="fr">workQueueID</locale>  
              <locale language="en">workQueueID</locale>
            </localized-text> 
          </display-name>  
          <type>INT64</type>  
          <required-at-enactment>true</required-at-enactment>  
          <process-output>false</process-output> 
        </attribute>  
        <attribute> 
          <attribute-name>workQueueName</attribute-name>  
          <display-name> 
            <localized-text> 
              <locale language="fr">workQueueName</locale>  
              <locale language="en">workQueueName</locale>
            </localized-text> 
          </display-name>  
          <type>STRING</type>  
          <required-at-enactment>true</required-at-enactment>  
          <process-output>false</process-output> 
        </attribute> 
      </attributes> 
    </wdo> 
  </wdos>  
  <activities> 
    <start-process-activity id="1"> 
      <name> 
        <localized-text> 
          <locale language="fr">Activité de processus de début</locale>  
          <locale language="en">Start Process Activity</locale>
        </localized-text> 
      </name>  
      <description> 
        <localized-text> 
          <locale language="fr">Activité du processus de début</locale>  
          <locale language="en">The start process activity</locale>
        </localized-text> 
      </description>  
      <split type="none"> 
        <transition-id idref="6"/> 
      </split> 
    </start-process-activity>  
    <end-process-activity id="2"> 
      <name> 
        <localized-text> 
          <locale language="fr">Activité du processus de fin</locale>  
          <locale language="en">End Process Activity</locale>
        </localized-text> 
      </name>  
      <description> 
        <localized-text> 
          <locale language="fr">Activité du processus de fin</locale>  
          <locale language="en">The end process activity</locale>
        </localized-text> 
      </description>  
      <join type="none"/> 
    </end-process-activity>  
    <automatic-activity id="3"> 
      <name> 
        <localized-text> 
          <locale language="fr">Administrateur et abonnés de la file d'attente des travaux de lecture</locale>  
          <locale language="en">Read Work Queue Administrator And Subscribers</locale>
        </localized-text> 
      </name>  
      <description> 
        <localized-text> 
          <locale language="fr">Activité permettant d'obtenir la liste des abonnés et l'administrateur de la file d'attente des travaux.</locale>  
          <locale language="en">Activity to get the list of subscribers and the administrator of the work queue.</locale>
        </localized-text> 
      </description>  
      <join type="none"/>  
      <split type="none"> 
        <transition-id idref="2"/> 
      </split>  
      <bpo-mapping interface-name="curam.core.sl.intf.WorkQueue" method-name="readWorkQueueAdministratorAndSubscribers"> 
        <formal-parameters> 
          <formal-parameter index="0"> 
            <struct type="curam.core.sl.struct.WorkQueueIDKey"> 
              <field name="workQueueID"> 
                <base-type type="INT64"> 
                  <wdo-attribute name="workQueueID" wdo-name="WorkQueueDetailsWDO"/> 
                </base-type> 
              </field> 
            </struct> 
          </formal-parameter> 
        </formal-parameters>  
        <return> 
          <struct> 
            <field name="dtls"> 
              <struct> 
                <field name="name"> 
                  <base-type> 
                    <wdo-attribute name="userName" wdo-name="UserListWDO"/> 
                  </base-type> 
                </field> 
              </struct> 
            </field> 
          </struct> 
        </return> 
      </bpo-mapping> 
    </automatic-activity>  
    <route-activity category="AC1" id="6"> 
      <name> 
        <localized-text> 
          <locale language="fr">Envoyer une notification</locale>  
          <locale language="en">Send Notification</locale>
        </localized-text> 
      </name>  
      <description> 
        <localized-text> 
          <locale language="fr">Activité permettant d'envoyer la notification à l'administrateur et aux abonnés de la file d'attente des travaux.</locale>  
          <locale language="en">Activity to send the notification to the administrator and subscribers of the work queue.</locale>
        </localized-text> 
      </description>  
      <notification delivery-mechanism="DM1"> 
        <subject> 
          <message> 
            <message-text> 
              <localized-text> 
                <locale language="fr">Une tâche a été affectée à la file d'attente des travaux %1s, car il n'existe aucun superviseur pour le dossier %2s</locale>  
                <locale language="en">A task has been assigned to the Work Queue %1s as no supervisor exists for the Case %2s</locale>
              </localized-text> 
            </message-text>  
            <message-parameters> 
              <wdo-attribute name="workQueueName" wdo-name="WorkQueueDetailsWDO"/>  
              <wdo-attribute name="caseReference" wdo-name="CaseReferenceWDO"/> 
            </message-parameters> 
          </message> 
        </subject>  
        <body> 
          <message> 
            <message-text> 
              <localized-text> 
                <locale language="fr">Une tâche a été affectée à la file d'attente des travaux %1s, car il n'existe aucun superviseur pour le dossier %2s</locale>  
                <locale language="en">A task has been assigned to the Work Queue %1s as no supervisor exists for the Case %2s</locale>
              </localized-text> 
            </message-text>  
            <message-parameters> 
              <wdo-attribute name="workQueueName" wdo-name="WorkQueueDetailsWDO"/>  
              <wdo-attribute name="caseReference" wdo-name="CaseReferenceWDO"/> 
            </message-parameters> 
          </message> 
        </body>  
        <allocation-strategy identifier="curam.core.sl.intf.NotificationAllocationFunction.defaultStrategy" type="function"> 
          <function-mappings> 
            <formal-parameters> 
              <formal-parameter index="0"> 
                <base-type type="STRING"> 
                  <wdo-attribute name="userName" wdo-name="UserListWDO[Context_Loop.loopCount]"/> 
                </base-type> 
              </formal-parameter> 
            </formal-parameters> 
          </function-mappings> 
        </allocation-strategy> 
      </notification>  
      <join type="none"/>  
      <split type="none"> 
        <transition-id idref="4"/> 
      </split> 
    </route-activity>  
    <loop-begin-activity id="4"> 
      <name> 
        <localized-text> 
          <locale language="fr">Boucle [Début]</locale>  
          <locale language="en">Loop [Begin]</locale>
        </localized-text> 
      </name>  
      <join type="none"/>  
      <split type="none"> 
        <transition-id idref="3"/> 
      </split>  
      <loop-type name="while"/>  
      <condition> 
        <expression conjunction="and" data-item-lhs="Context_Loop.loopCount" data-item-rhs="UserListWDO.size()" id="1" operation="&lt;"/> 
      </condition>  
      <block-endpoint-ref activity-id="5"/> 
    </loop-begin-activity>  
    <loop-end-activity id="5"> 
      <name> 
        <localized-text> 
          <locale language="fr">Boucle [Fin]</locale>  
          <locale language="en">Loop [End]</locale>
        </localized-text> 
      </name>  
      <join type="none"/>  
      <split type="none"> 
        <transition-id idref="5"/> 
      </split>  
      <block-endpoint-ref activity-id="4"/> 
    </loop-end-activity> 
  </activities>  
  <transitions> 
    <transition from-activity-idref="3" id="2" to-activity-idref="4"/>  
    <transition from-activity-idref="4" id="3" to-activity-idref="6"/>  
    <transition from-activity-idref="6" id="4" to-activity-idref="5"/>  
    <transition from-activity-idref="5" id="5" to-activity-idref="2"/>  
    <transition from-activity-idref="1" id="6" to-activity-idref="3"/> 
  </transitions> 
</workflow-process>
