<?xml version="1.0" encoding="UTF-8"?>
<RuleSet name="BDMOASDataRuleSet"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="http://www.curamsoftware.com/CreoleRulesSchema.xsd">
	<Class name="BDMOASCaseData" extends="BDMCaseData"
		extendsRuleSet="BDMDataRuleSet">
		<Attribute name="applicationDetailsRecordList">
			<type>
				<javaclass name="List">
					<ruleclass name="BDMOASApplicationDetails"
						ruleset="BDMOASApplicationDetailsDataRuleSet" />
				</javaclass>
			</type>
			<derivation>
				<readall ruleclass="BDMOASApplicationDetails"
					ruleset="BDMOASApplicationDetailsDataRuleSet">
					<match retrievedattribute="caseID">
						<reference attribute="caseID" />
					</match>
				</readall>
			</derivation>
		</Attribute>
		<Attribute name="residencePeriodRecordList">
			<type>
				<javaclass name="List">
					<ruleclass name="OASResidencePeriod"
						ruleset="OASResidencePeriodDataRuleSet" />
				</javaclass>
			</type>
			<derivation>
				<readall ruleclass="OASResidencePeriod"
					ruleset="OASResidencePeriodDataRuleSet">
					<match retrievedattribute="caseID">
						<reference attribute="caseID" />
					</match>
				</readall>
			</derivation>
		</Attribute>
		<Attribute name="legalStatusRecordList">
			<type>
				<javaclass name="List">
					<ruleclass name="BDMOASLegalStatus"
						ruleset="BDMOASLegalStatusDataRuleSet" />
				</javaclass>
			</type>
			<derivation>
				<readall ruleclass="BDMOASLegalStatus"
					ruleset="BDMOASLegalStatusDataRuleSet">
					<match retrievedattribute="caseID">
						<reference attribute="caseID" />
					</match>
				</readall>
			</derivation>
		</Attribute>
		<Attribute name="benefitSuspensionRecordList">
			<type>
				<javaclass name="List">
					<ruleclass name="BDMOASBenefitSuspension"
						ruleset="BDMOASBenefitSuspensionDataRuleSet" />
				</javaclass>
			</type>
			<derivation>
				<readall ruleclass="BDMOASBenefitSuspension"
					ruleset="BDMOASBenefitSuspensionDataRuleSet">
					<match retrievedattribute="caseID">
						<reference attribute="caseID" />
					</match>
				</readall>
			</derivation>
		</Attribute>
		<Attribute name="sponsorshipRecordList">
			<type>
				<javaclass name="List">
					<ruleclass name="BDMOASSponsorship"
						ruleset="BDMOASSponsorshipDataRuleSet" />
				</javaclass>
			</type>
			<derivation>
				<readall ruleclass="BDMOASSponsorship"
					ruleset="BDMOASSponsorshipDataRuleSet">
					<match retrievedattribute="caseID">
						<reference attribute="caseID" />
					</match>
				</readall>
			</derivation>
		</Attribute>
	</Class>
	<Class name="BDMOASCaseParticipantData" extends="BDMCaseParticipantData"
		extendsRuleSet="BDMDataRuleSet">
		<Attribute name="caseData">
			<type>
				<ruleclass name="BDMOASCaseData" />
			</type>
			<derivation>
				<create ruleclass="BDMOASCaseData">
					<reference attribute="caseID">
						<reference attribute="caseParticipantRoleRecord" />
					</reference>
				</create>
			</derivation>
		</Attribute>
		<Attribute name="applicationDetailsRecordList">
			<type>
				<javaclass name="List">
					<ruleclass name="BDMOASApplicationDetails"
						ruleset="BDMOASApplicationDetailsDataRuleSet" />
				</javaclass>
			</type>
			<derivation>
				<filter>
					<list>
						<reference attribute="applicationDetailsRecordList">
							<reference attribute="caseData" />
						</reference>
					</list>
					<listitemexpression>
						<equals>
							<reference attribute="caseParticipantRole">
								<current />
							</reference>
							<reference attribute="caseParticipantRoleID">
								<reference attribute="caseParticipantRoleRecord" />
							</reference>
						</equals>
					</listitemexpression>
				</filter>
			</derivation>
		</Attribute>
		<Attribute name="residencePeriodRecordList">
			<type>
				<javaclass name="List">
					<ruleclass name="OASResidencePeriod"
						ruleset="OASResidencePeriodDataRuleSet" />
				</javaclass>
			</type>
			<derivation>
				<filter>
					<list>
						<reference attribute="residencePeriodRecordList">
							<reference attribute="caseData" />
						</reference>
					</list>
					<listitemexpression>
						<equals>
							<reference attribute="caseParticipantRole">
								<current />
							</reference>
							<reference attribute="caseParticipantRoleID">
								<reference attribute="caseParticipantRoleRecord" />
							</reference>
						</equals>
					</listitemexpression>
				</filter>
			</derivation>
		</Attribute>
		<Attribute name="legalStatusRecordList">
			<type>
				<javaclass name="List">
					<ruleclass name="BDMOASLegalStatus"
						ruleset="BDMOASLegalStatusDataRuleSet" />
				</javaclass>
			</type>
			<derivation>
				<filter>
					<list>
						<reference attribute="legalStatusRecordList">
							<reference attribute="caseData" />
						</reference>
					</list>
					<listitemexpression>
						<equals>
							<reference attribute="caseParticipantRoleID">
								<current />
							</reference>
							<reference attribute="caseParticipantRoleID">
								<reference attribute="caseParticipantRoleRecord" />
							</reference>
						</equals>
					</listitemexpression>
				</filter>
			</derivation>
		</Attribute>
		<Attribute name="benefitSuspensionRecordList">
			<type>
				<javaclass name="List">
					<ruleclass name="BDMOASBenefitSuspension"
						ruleset="BDMOASBenefitSuspensionDataRuleSet" />
				</javaclass>
			</type>
			<derivation>
				<filter>
					<list>
						<reference attribute="benefitSuspensionRecordList">
							<reference attribute="caseData" />
						</reference>
					</list>
					<listitemexpression>
						<equals>
							<reference attribute="caseParticipantRole">
								<current />
							</reference>
							<reference attribute="caseParticipantRoleID">
								<reference attribute="caseParticipantRoleRecord" />
							</reference>
						</equals>
					</listitemexpression>
				</filter>
			</derivation>
		</Attribute>
		<Attribute name="sponsorshipRecordList">
			<type>
				<javaclass name="List">
					<ruleclass name="BDMOASSponsorship"
						ruleset="BDMOASSponsorshipDataRuleSet" />
				</javaclass>
			</type>
			<derivation>
				<filter>
					<list>
						<reference attribute="sponsorshipRecordList">
							<reference attribute="caseData" />
						</reference>
					</list>
					<listitemexpression>
						<equals>
							<reference attribute="caseParticipantRole">
								<current />
							</reference>
							<reference attribute="caseParticipantRoleID">
								<reference attribute="caseParticipantRoleRecord" />
							</reference>
						</equals>
					</listitemexpression>
				</filter>
			</derivation>
		</Attribute>
        <Attribute name="craMaritalStatusRecord">
            <type>
                <ruleclass name="BDMOASCRAMaritalStatus"
                    ruleset="BDMOASCRAMaritalStatusDataRuleSet" />
            </type>
            <derivation>
                <singleitem onMultiple="returnFirst" onEmpty="returnNull">
                    <readall ruleclass="BDMOASCRAMaritalStatus"
                        ruleset="BDMOASCRAMaritalStatusDataRuleSet">
                        <match retrievedattribute="caseID">
                            <reference attribute="caseID">
                                <reference attribute="participantDataCaseHeaderRecord" />
                            </reference>
                        </match>
                    </readall>
                </singleitem>
            </derivation>
        </Attribute>
	</Class>
</RuleSet>