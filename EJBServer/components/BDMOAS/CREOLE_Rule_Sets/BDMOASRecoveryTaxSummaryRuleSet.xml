<?xml version="1.0" encoding="UTF-8"?>
<!-- Feature 99651: Manage OAS RCV Tax -->
<RuleSet name="BDMOASRecoveryTaxSummaryRuleSet"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="http://www.curamsoftware.com/CreoleRulesSchema.xsd">
	<Class extends="DefaultEvidenceSummary"
		extendsRuleSet="EvidenceSummaryRuleSet" name="SummaryInformation">
		<Attribute name="evidence">
			<type>
				<ruleclass name="BDMOASRecoveryTax"
					ruleset="BDMOASRecoveryTaxRuleSet" />
			</type>
			<derivation>
				<specified />
			</derivation>
		</Attribute>
		<Attribute name="summary">
			<type>
				<javaclass name="curam.creole.value.Message" />
			</type>
			<derivation>
				<choose>
					<type>
						<javaclass name="curam.creole.value.Message" />
					</type>
					<when>
						<condition>
							<reference attribute="mandatoryFieldsPresent" />
						</condition>
						<value>
							<ResourceMessage
								key="RecoveryTaxAmountForStartAndEndDate.SummaryMessage"
								resourceBundle="curam.ca.gc.bdmoas.evidence.BDMOASRecoveryTaxSummaryRuleSet">
								<reference attribute="monthlyRecoveryTaxAmount">
									<reference attribute="evidence" />
								</reference>
								<reference attribute="startDate">
									<reference attribute="evidence" />
								</reference>
								<reference attribute="endDate">
									<reference attribute="evidence" />
								</reference>
							</ResourceMessage>
						</value>
					</when>
					<otherwise>
						<value>
							<ResourceMessage
								key="MandatoryFieldsNotPresent.SummaryMessage"
								resourceBundle="curam.ca.gc.bdmoas.evidence.BDMOASRecoveryTaxSummaryRuleSet" />
						</value>
					</otherwise>
				</choose>
			</derivation>
		</Attribute>
		<Attribute name="mandatoryFieldsPresent">
			<type>
				<javaclass name="Boolean" />
			</type>
			<derivation>
				<all>
					<fixedlist>
						<listof>
							<javaclass name="Boolean" />
						</listof>
						<members>
							<not>
								<equals>
									<null />
									<reference attribute="taxYear">
										<reference attribute="evidence" />
									</reference>
								</equals>
							</not>
							<not>
								<equals>
									<Number value="0.00" />
									<reference attribute="monthlyRecoveryTaxAmount">
										<reference attribute="evidence" />
									</reference>
								</equals>
							</not>
							<not>
								<equals>
									<null />
									<reference attribute="startDate">
										<reference attribute="evidence" />
									</reference>
								</equals>
							</not>
							<not>
								<equals>
									<null />
									<reference attribute="endDate">
										<reference attribute="evidence" />
									</reference>
								</equals>
							</not>
						</members>
					</fixedlist>
				</all>
			</derivation>
		</Attribute>
	</Class>
</RuleSet>