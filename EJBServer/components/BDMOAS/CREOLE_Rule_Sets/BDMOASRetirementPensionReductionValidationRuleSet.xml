<?xml version="1.0" encoding="UTF-8"?>
<!-- Feature 72659: Manage Retirement/Pension Reduction Evidence -->
<RuleSet name="BDMOASRetirementPensionReductionValidationRuleSet"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="http://www.curamsoftware.com/CreoleRulesSchema.xsd">
	<Class extends="DefaultEvidenceValidationResult"
		extendsRuleSet="EvidenceValidationRuleSet" name="ValidationResult">
		<Attribute name="evidence">
			<type>
				<ruleclass name="BDMOASRetirementPensionReduction"
					ruleset="BDMOASRetirementPensionReductionRuleSet" />
			</type>
			<derivation>
				<specified />
			</derivation>
		</Attribute>
		<Attribute name="standardValidations">
			<type>
				<javaclass name="java.util.List">
					<ruleclass name="Validation" ruleset="EvidenceValidationRuleSet" />
				</javaclass>
			</type>
			<derivation>
				<fixedlist>
					<listof>
						<ruleclass name="Validation" ruleset="EvidenceValidationRuleSet" />
					</listof>
					<members>
						<reference attribute="eventDateValidator" />
					</members>
				</fixedlist>
			</derivation>
		</Attribute>
		<Attribute name="eventDateValidator">
			<type>
				<ruleclass name="Validation" ruleset="EvidenceValidationRuleSet" />
			</type>
			<derivation>
				<create ruleclass="Validation" ruleset="EvidenceValidationRuleSet">
					<reference attribute="eventDateFailure" />
					<reference attribute="eventDateFailureMessage" />
				</create>
			</derivation>
		</Attribute>
		<Attribute name="eventDateFailure">
			<type>
				<javaclass name="java.lang.Boolean" />
			</type>
			<derivation>
				<choose>
					<type>
						<javaclass name="Boolean" />
					</type>
					<when>
						<condition>
							<not>
								<equals>
									<null />
									<reference attribute="eventDate">
										<reference attribute="evidence" />
									</reference>
								</equals>
							</not>
						</condition>
						<value>
							<not>
								<call class="curam.ca.gc.bdm.creole.impl.Statics"
									method="isFirstOfMonth">
									<type>
										<javaclass name="Boolean" />
									</type>
									<arguments>
										<reference attribute="eventDate">
											<reference attribute="evidence" />
										</reference>
									</arguments>
								</call>
							</not>
						</value>
					</when>
					<otherwise>
						<value>
							<false />
						</value>
					</otherwise>
				</choose>
			</derivation>
		</Attribute>
		<Attribute name="eventDateFailureMessage">
			<type>
				<javaclass name="curam.creole.value.Message" />
			</type>
			<derivation>
				<ResourceMessage key="ERR_EVENT_DATE_NOT_FIRST"
					resourceBundle="curam.ca.gc.bdmoas.evidence.BDMOASRetirementPensionReductionValidationRuleSet" />
			</derivation>
		</Attribute>
	</Class>
</RuleSet>