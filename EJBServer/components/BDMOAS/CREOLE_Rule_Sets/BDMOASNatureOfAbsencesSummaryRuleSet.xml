<?xml version="1.0" encoding="UTF-8"?>
<!-- Feature 81673: Manage Nature of Absences Evidence -->
<RuleSet xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	name="BDMOASNatureOfAbsencesSummaryRuleSet"
	xsi:noNamespaceSchemaLocation="http://www.curamsoftware.com/CreoleRulesSchema.xsd">
	<Class name="BDMOASNatureOfAbsencesSummary"
		extends="DefaultEvidenceSummary" extendsRuleSet="EvidenceSummaryRuleSet">

		<Attribute name="evidence">
			<type>
				<ruleclass name="BDMOASNatureOfAbsences"
					ruleset="BDMOASNatureOfAbsencesRuleSet" />
			</type>
			<derivation>
				<specified />
			</derivation>
		</Attribute>

		<Attribute name="summary">
			<type>
				<javaclass name="curam.creole.value.Message" />
			</type>
			<derivation>
				<choose>
					<type>
						<javaclass name="curam.creole.value.Message" />
					</type>
					<when>
						<condition>
							<compare comparison="&gt;">
								<property name="length">
									<object>
										<reference attribute="absenceDetails" />
									</object>
								</property>
								<Number value="25" />
							</compare>
						</condition>
						<value>
							<reference attribute="truncatedMessage" />
						</value>
					</when>
					<otherwise>
						<value>
							<ResourceMessage key="Full.SummaryMessage"
								resourceBundle="curam.ca.gc.bdmoas.evidence.BDMOASNatureOfAbsencesSummaryRuleSet">
								<reference attribute="absenceDetails" />
							</ResourceMessage>
						</value>
					</otherwise>
				</choose>
			</derivation>
		</Attribute>

		<Attribute name="absenceDetails">
			<type>
				<javaclass name="java.lang.String" />
			</type>
			<derivation>
				<reference attribute="absenceDetails">
					<reference attribute="evidence" />
				</reference>
			</derivation>
		</Attribute>

		<Attribute name="truncatedMessage">
			<type>
				<javaclass name="curam.creole.value.Message" />
			</type>
			<derivation>
				<ResourceMessage key="Truncated.SummaryMessage"
					resourceBundle="curam.ca.gc.bdmoas.evidence.BDMOASNatureOfAbsencesSummaryRuleSet">
					<call class="curam.ca.gc.bdmoas.creole.impl.Statics"
						method="truncateString">
						<type>
							<javaclass name="java.lang.String" />
						</type>
						<arguments>
							<reference attribute="absenceDetails" />
							<Number value="25" />
							<String value=" ..." />
						</arguments>
					</call>
				</ResourceMessage>
			</derivation>
		</Attribute>

	</Class>

</RuleSet>