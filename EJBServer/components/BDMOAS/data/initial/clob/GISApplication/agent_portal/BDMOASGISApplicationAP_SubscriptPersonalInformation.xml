<?xml version="1.0" encoding="UTF-8"?>
 
<ieg-script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="ieg-schema.xsd"
finish-page="CommonIntake_finishInternalIntakeScript" 
	quit-page="CommonIntake_quitInternalIntakeScript"	
	show-sections="true"
	show-progress-bar="true"
	validate-save-and-exit="false"
	>
		
	<identifier id="BDMOASGISApplicationAP" scriptversionnumber="V1" type="Intake" />
	<section>
		<title id="PersonalInformation.Title">
			<![CDATA[Personal Information]]>
		</title>
		<icon enabled-image="sample_about_you"
			current-image="sample_about_you" />
	
		<question-page 
			id="PersonalInformation" 
			entity="Application"
			progress="0" 
			show-back-button="false" 
			show-exit-button="true"
			>
			
			<set-attribute expression="RemoveSpecialCharacters(Person.sinRawAP)" id="Person.SIN" />
			<set-attribute expression="Person.SIN" id="Person.sinRaw" />
			
			<!-- Bug 119955: Commenting out in case of future implementation
			<validation expression="not(isNotNull(Person.firstName)) or ValidateInstitutionNameLength(Person.firstName, &quot;1&quot;, &quot;17&quot;)">
				<message id="PersonalInformation.FName.Validation"><![CDATA[First given name cannot contain numbers or special characters.]]></message>
			</validation>
			<validation expression="not(isNotNull(Person.middleName)) or ValidateInstitutionNameLength(Person.middleName, &quot;1&quot;, &quot;17&quot;)">
				<message id="PersonalInformation.OName.Validation"><![CDATA[Other given name cannot contain numbers or special characters.]]></message>
			</validation>
			<validation expression="not(isNotNull(Person.lastName)) or ValidateInstitutionNameLength(Person.lastName, &quot;1&quot;, &quot;32&quot;)">
				<message id="PersonalInformation.FamName.Validation"><![CDATA[Last name cannot contain numbers or special characters.]]></message>
			</validation>
			
			<validation expression="not(isNotNull(Person.LastNameAtBirth)) or ValidateInstitutionNameLength(Person.LastNameAtBirth, &quot;1&quot;, &quot;32&quot;)">
				<message id="PersonalInformation.LName.Validation"><![CDATA[Last name at birth cannot contain numbers or special characters.]]></message>
			</validation>	
			Bug 119955-->
			
			<validation expression="not(isNotNull(Person.sinRawAP)) or ValidateSINLength(Person.sinRawAP)">
				<message id="PersonalInformation.SIN.LengthValidation"><![CDATA[Please enter a valid Social Insurance Number with 9 digits.]]></message>
			</validation>
			
			<validation expression="not(isNotNull(Person.sinRawAP)) or ValidateSINMOD10(Person.sinRawAP)">
				<message id="PersonalInformation.SIN.invalid"><![CDATA[Please enter a valid Social Insurance Number.]]></message>
			</validation>
			
			<validation expression="not(isNotNull(Person.dateOfBirth)) or ValidateFutureDate(Person.dateOfBirth)">
				<message id="PersonalInformation.DOB.Validation"><![CDATA[Date of birth cannot be a future date.]]></message>
			</validation>
			
			<validation expression="not(isNotNull(Person.sinRawAP)) or ValidateSINSPM(Person.sinRawAP)">
				<message id="PersonalInformation.SINSPM.Validation">Based on the information you provided it appears you have already applied for benefits. If you are applying for additional benefits for another period reapply at Canada.ca/reapply. If you believe you are receiving this message in error, please call us toll free at1-555-555-1234 between 8:30 AM and 4:30 PM, local time, Monday to Friday, except civic holidays.</message>
			</validation>
			<validation expression="not(isNotNull(Person.sinRawAP)) or ValidateSINService(Person.sinRawAP, Person.firstName, Person.lastName, Person.dateOfBirth)">
				<message id="PersonalInformation.SINService.Validation">Something doesn't look right. Please review the information entered and try again. If this situation continues, please call us toll free at 1-555-555-1234 between 8:30 AM and 4:30 PM, local time, Monday to Friday, except civic holidays.</message>
			</validation>

			<validation expression="not(isNotNull(Person.oasAccntNum)) or ValidateOASAcntNum(Person.oasAccntNum)">
				<message id="PersonalInformation.OASAccntNum.Validation"><![CDATA[A valid nine-digit OAS Account Number starting with zero must be entered. ]]></message>
			</validation>			
			<validation expression="not(isNotNull(Application.receiptDate)) or ValidateFutureDate(Application.receiptDate)">
				<message id="PersonalInformation.ReceiptDate.Validation"><![CDATA[Receipt Date cannot be later than current date.]]></message>
			</validation>			
			
			<title id="PersonalInformation.ApplicantDet">
				<![CDATA[Applicant Details]]>
			</title>
			
			<description id="MandatoryFieldsDescription">
				<![CDATA[All fields marked as * are mandatory.]]>
			</description>

	     	<set-attribute
		        expression="true"
		        id="Person.isPrimaryParticipant"
	     	/>

			<cluster entity="Application">
				<title id="PersonalInformation.IntakeDetails">
					<![CDATA[Intake Details]]>
				</title>
			
				<question id="receiptDate" mandatory="true" show-field-help="true">
					<label id="PersonalInformation.ReceiptDate">
						<![CDATA[Receipt Date]]>
					</label>
                    <layout>
                    	<type>date-picker</type>
                    </layout>
					<help-text id="PersonalInformation.ReceiptDate.Help">
						<![CDATA[YYYY-MM-DD]]>
					</help-text>                     
				</question>
				<question id="applicationForm" mandatory="true" >
					<label id="Question.Label.ApplicationForm">
						<![CDATA[Application Form]]>
					</label>
					<layout>
						<label-width>0</label-width>					
						<width>50</width>						
					</layout>										
				</question>							
			</cluster>
		
			<cluster entity="Person">
				<title id="PersonalInformation.Title">
					<![CDATA[Personal Information]]>
				</title>

				<question id="personTitle">
					<label id="Question.Label.Title">
						<![CDATA[Title]]>
					</label>
					<layout>
						<label-width>0</label-width>					
						<width>50</width>						
					</layout>										
				</question>
				
				<question id="sinRawAP" show-field-help="true">
					<label id="PersonalInformation.SIN">
						<![CDATA[<span style="color: red;">*</span>Social Insurance Number (without spaces or hyphens)]]>
					</label>
					<layout>
						<label-width>0</label-width>
						<width>40</width>						
					</layout>
					<help-text id="PersonalInformation.SIN.Help">
						<![CDATA[Social Insurance Number: Exclude spaces or hyphens when entering Social Insurance Number.]]>
					</help-text>					
				</question>	

				<question id="oasAccntNum" show-field-help="true">
					<label id="PersonalInformation.OASAccntNum">
						<![CDATA[<span style="color: red;">*</span>OAS Account Number]]>
					</label>
					<layout>
						<label-width>0</label-width>
						<width>40</width>						
					</layout>
					<help-text id="PersonalInformation.OASAccntNum.Help">
						<![CDATA[OAS Account Number must be 9 digits and start with a 0]]>
					</help-text>					
				</question>					
				
				<question id="firstName" mandatory="true">
					<label id="PersonalInformation.FName">
						<![CDATA[<span style="color: red;">*</span>First name (as indicated on your SIN card/letter)]]>
					</label>
					<layout>
						<label-width>0</label-width>					
						<width>60</width>							
					</layout>
				</question>	
				<question id="middleName" >
					<label id="PersonalInformation.OName">
						<![CDATA[Middle name]]>
					</label>
					<hint-text id="PersonalInformation.OName.Hint">
						<![CDATA[Enter your Middle name(s) as submitted in your SIN application.]]>
					</hint-text>			
					<layout>
						<label-width>0</label-width>
						<width>60</width>							
					</layout>
				</question>	
				<question id="lastName" mandatory="true">
					<label id="PersonalInformation.FamName">
						<![CDATA[Last name (as indicated on your SIN card/letter)]]>
					</label>
					<layout>
						<label-width>0</label-width>
						<width>60</width>							
					</layout>
				</question>	
 
				<question id="LastNameAtBirth">
					<label id="PersonalInformation.LName">
						<![CDATA[Last name at birth]]>
					</label>
					<layout>
						<label-width>0</label-width>
						<width>60</width>							
					</layout>
				</question>	
				<question id="dateOfBirth" mandatory="true" show-field-help="true">
					<label id="PersonalInformation.DOB">
						<![CDATA[Date of birth]]>
					</label>
                    <layout>
                    	<type>date-picker</type>
                    </layout>
					<help-text id="PersonalInformation.DOB.Help">
						<![CDATA[YYYY-MM-DD]]>
					</help-text>                    
				</question>							
			</cluster>			
		</question-page>
	</section>
</ieg-script>
