<?xml version="1.0" encoding="UTF-8"?>	
<databaseChangeLog
	xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
		http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd
		http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">
    
      <changeSet  id="BDMOAS_R2_S012_112236_01"  author="nadira.banu" context="initial">  
        <sql dbms="oracle"
        splitStatements="true"
        stripComments="true"> 
		
		DROP TABLE BDMOASINBOUNDFILEPROCESSINGSTAGING;
		DROP TABLE BDMOASOUTBOUNDFILEPROCESSINGSTAGING;
        
       
     </sql>
    </changeSet>
    
    <!-- START - TASK 53598 - Manage Penalty -->
    <changeSet id="BDMOAS_R2_S012_53598_2"  author="pranav.agarwal">
    	<sql dbms="oracle"
        splitStatements="true"
        stripComments="true">
					
			CREATE TABLE BDMOASPENALTIES (	
				PENALTYID NUMBER(19,0) NOT NULL ENABLE, 
				EXTERNALLIABILITYID NUMBER(19,0) NOT NULL ENABLE, 
				RECORDSTATUSCODE VARCHAR2(10 BYTE), 
				CURRENTOVERPAYMENTCASEID NUMBER(19,0), 
				PREVIOUSOVERPAYMENTCASEID NUMBER(19,0), 
				UPDATEDBY VARCHAR2(131 BYTE), 
				UPDATEDON DATE, 
				VERSIONNO NUMBER(*,0) NOT NULL ENABLE,
				PRIMARY KEY(PENALTYID),
				FOREIGN KEY(EXTERNALLIABILITYID) REFERENCES BDMEXTERNALLIABILITY(EXTERNALLIABILITYID)
			);
		</sql>
    </changeSet>
    <!-- END - TASK 53598 - Manage Penalty -->

    <!-- START - TASK 53598 - Manage Penalty -->
    <changeSet id="BDMOAS_R2_S012_53598_3"  author="pranav.agarwal">
    	<sql dbms="oracle"
        splitStatements="true"
        stripComments="true">
		
			DROP TABLE BDMOASPENALTIES;
					
			CREATE TABLE BDMOASPENALTY (	
				PENALTYID NUMBER(19,0) NOT NULL ENABLE, 
				EXTERNALLIABILITYID NUMBER(19,0) NOT NULL ENABLE, 
				RECORDSTATUSCODE VARCHAR2(10 BYTE), 
				CURRENTOVERPAYMENTCASEID NUMBER(19,0), 
				PREVIOUSOVERPAYMENTCASEID NUMBER(19,0), 
				UPDATEDBY VARCHAR2(131 BYTE), 
				UPDATEDON DATE, 
				VERSIONNO NUMBER(*,0) NOT NULL ENABLE,
				PRIMARY KEY(PENALTYID),
				FOREIGN KEY(EXTERNALLIABILITYID) REFERENCES BDMEXTERNALLIABILITY(EXTERNALLIABILITYID)
			);
		</sql>
    </changeSet>
    <!-- END - TASK 53598 - Manage Penalty -->
	
     <!-- START - ADO 52647 - Manage Office of Control -->
	<changeSet  id="BDMOAS_R2_S012_TASK_52647_V1"  author="abid.khan" context="initial">  
        <sql dbms="oracle"
        splitStatements="true"
        stripComments="true"> 
             
           CREATE TABLE BDMOASWORKQUEUEREGIONCODEMAPPING(
            WORKQUEUEID NUMBER(19,0) not null,             
            REGIONCODE VARCHAR(10), 
            RECORDSTATUS VARCHAR(10), 
            VERSIONNO INTEGER not null, 
			LASTWRITTEN DATE        
            );
            
           CREATE TABLE BDMOASWORKQUEUEPROVINCELINK(
            WORKQUEUEID NUMBER(19,0) not null,
			PROVINCETYPECD VARCHAR(10) not null, 
            CREATEDBY VARCHAR(64), 
            CREATEDON DATE, 
            LASTUPDATEDBY VARCHAR(64), 
            LASTUPDATEDON DATE,        
            VERSIONNO INTEGER not null,
			LASTWRITTEN DATE        			
            );
            
            CREATE TABLE BDMOASCASEUSERROLE(
            CASEUSERROLEID NUMBER(19,0) not null, 
            ISMANUALLYCHANGED CHAR(1) not null, 
            VERSIONNO INTEGER not null,
			LASTWRITTEN DATE 
            );

            ALTER TABLE BDMOASWORKQUEUEREGIONCODEMAPPING ADD
            CONSTRAINT BDMOASWORKQUEUEREGIONCODEMAPPING PRIMARY KEY(WORKQUEUEID);
            
            ALTER TABLE BDMOASWORKQUEUEPROVINCELINK ADD
            CONSTRAINT BDMOASWORKQUEUEPROVINCELINK PRIMARY KEY(PROVINCETYPECD);
            
            ALTER TABLE BDMOASCASEUSERROLE ADD
            CONSTRAINT BDMOASCASEUSERROLE PRIMARY KEY(CASEUSERROLEID);

            ALTER TABLE BDMOASCASEUSERROLE ADD CONSTRAINT FKBDMOASCASEUSERROLECASEUSERROLE 
            FOREIGN KEY (CASEUSERROLEID) REFERENCES CASEUSERROLE(CASEUSERROLEID);
            
            ALTER TABLE BDMOASWORKQUEUEREGIONCODEMAPPING ADD CONSTRAINT FKBDMOASWORKQUEUEREGIONWORKQUEUE 
            FOREIGN KEY (WORKQUEUEID) REFERENCES WORKQUEUE(WORKQUEUEID);
	</sql>
		</changeSet>
	    <!-- END - ADO 52647 - Manage Office of Control -->
    
	<!-- START - TASK 53598 - Manage Penalty -->
    <changeSet id="BDMOAS_R2_S012_53598_4"  author="pranav.agarwal">
    	<sql dbms="oracle"
			splitStatements="true"
			stripComments="true">
			ALTER TABLE BDMEXTERNALLIABILITY ADD CREATEREASON VARCHAR2(10 BYTE);
			ALTER TABLE BDMEXTERNALLIABILITYHISTORY ADD CHANGEREASON VARCHAR2(10 BYTE);
			ALTER TABLE BDMEXTERNALLIABILITYHISTORY ADD LIABILITYSTATUSCODE VARCHAR2(10 BYTE) NOT NULL ENABLE;
		</sql>
    </changeSet>
    <!-- END - TASK 53598 - Manage Penalty -->

	<!-- START - TASK 53598 - Manage Penalty -->
    <changeSet id="BDMOAS_R2_S012_53598_5"  author="pranav.agarwal">
    	<sql dbms="oracle"
			splitStatements="true"
			stripComments="true">
			ALTER TABLE BDMEXTERNALLIABILITYHISTORY MODIFY LIABILITYSTATUSCODE NULL;
		</sql>
    </changeSet>
    <!-- END - TASK 53598 - Manage Penalty -->
	
</databaseChangeLog>