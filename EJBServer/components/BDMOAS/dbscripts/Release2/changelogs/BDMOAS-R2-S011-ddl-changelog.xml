<?xml version="1.0" encoding="UTF-8"?>	
<databaseChangeLog
	xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
		http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd
		http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">
    
      <changeSet  id="BDMOAS_R2_S011_filetofile_01"  author="nadira.banu" context="initial">  
        <sql dbms="oracle"
        splitStatements="true"
        stripComments="true"> 
        
        CREATE TABLE BDMOASINBOUNDFILEPROCESSINGSTAGING(
		RECORDID NUMBER(19,0) not null, 
		CORRELATIONID NUMBER(19,0), 
		INTERFACETYPE VARCHAR(10), 
		RECORDTEXT CLOB, 
		STATUSCODE VARCHAR(10), 
		TRANSACTIONID NUMBER(19,0), 
		INTERFACEDESC VARCHAR(300), 
		CREATEDBY VARCHAR(64), 
		CREATEDON DATE, 
		LASTUPDATEDBY VARCHAR(64), 
		LASTUPDATEDON DATE, 
		VERSIONNO INTEGER not null
		);
    
   		CREATE TABLE BDMOASOUTBOUNDFILEPROCESSINGSTAGING(
		RECORDID NUMBER(19,0) not null, 
		CORRELATIONID NUMBER(19,0), 
		INTERFACETYPE VARCHAR(10), 
		RECORDTEXT CLOB, 
		STATUSCODE VARCHAR(10), 
		TRANSACTIONID NUMBER(19,0), 
		INTERFACEDESC VARCHAR(300), 
		CREATEDBY VARCHAR(64), 
		CREATEDON DATE, 
		LASTUPDATEDBY VARCHAR(64), 
		LASTUPDATEDON DATE, 
		VERSIONNO INTEGER not null
		);
    
     </sql>
    </changeSet>
    
    

     <changeSet  id="BDMOAS_R2_S011_TASK_112287_02"  author="guru.vankadara" context="initial">  
        <sql dbms="oracle"
        splitStatements="true"
        stripComments="true"> 
        
            
            CREATE TABLE BDMOASCRATRANSACTION(
            TRANSACTIONID NUMBER(19,0) not null, 
            CONCERNROLEID NUMBER(19,0), 
            PERSONMATCHSTATUS VARCHAR(10), 
            TAXYEAR VARCHAR(4), 
            SEQUENCENUMBER NUMBER(19,0), 
            TRANSACTIONCODE VARCHAR(10) not null, 
            TRANSACTIONSUBCODE VARCHAR(10) not null, 
            STATUS VARCHAR(10) not null, 
            CREATEDBY VARCHAR(64), 
            CREATEDON DATE, 
            LASTUPDATEDBY VARCHAR(64), 
            LASTUPDATEDON DATE, 
            VERSIONNO INTEGER not null
            );
            
            CREATE TABLE BDMOASCRATRANSACTIONLINK(
            TRANSACTIONLINKID NUMBER(19,0) not null, 
            TRANSACTIONID NUMBER(19,0) not null, 
            CONCERNROLEID NUMBER(19,0) not null, 
            PREVIOUSCONCERNROLEID NUMBER(19,0) not null, 
            STATUS VARCHAR(10) not null, 
            CREATEDBY VARCHAR(64), 
            CREATEDON DATE, 
            LASTUPDATEDBY VARCHAR(64), 
            LASTUPDATEDON DATE, 
            VERSIONNO INTEGER not null
            );
            
            CREATE TABLE BDMOASCRADATA(
            DATAID NUMBER(19,0) not null, 
            TRANSACTIONID NUMBER(19,0) not null, 
            FIRSTFORENAME VARCHAR(65) not null, 
            SURNAME VARCHAR(65) not null, 
            DATEOFBIRTH DATE not null, 
            DATEOFDEATH DATE not null, 
            SIN VARCHAR(20), 
            MARITALSTATUS VARCHAR(10), 
            SPOUSESIN VARCHAR(20), 
            ACCOUNTSTATUS VARCHAR(10), 
            REASSESSMENT NUMBER(19,0), 
            CPPPREMATCH VARCHAR(10), 
            PREPOSTBANKRUPTCYIND CHAR(1) not null, 
            RESPONSESTATUS VARCHAR(10), 
            INCOMESTATUS VARCHAR(10), 
            CRAPROCESSDATE DATE, 
            RECEIVEDDATETIME DATE
            );
            
            CREATE TABLE BDMOASCRAINCOMEDATA(
            INCOMEDATAID NUMBER(19,0) not null, 
            DATAID NUMBER(19,0) not null, 
            LINEITEM VARCHAR(10) not null, 
            AMOUNT NUMERIC(38,2) not null, 
            INCOMEBLOCK VARCHAR(10)
            );

            CREATE TABLE BDMOASINCOMEMAPPING(
            MAPPINGID NUMBER(19,0) not null, 
            TAXYEAR VARCHAR(4), 
            STATUS VARCHAR(10), 
            CREATEDBY VARCHAR(64), 
            CREATEDON DATE, 
            LASTUPDATEDBY VARCHAR(64), 
            LASTUPDATEDON DATE, 
            VERSIONNO INTEGER not null
            );
            
            CREATE TABLE BDMOASINCOMEMAPPINGITEM(
            MAPPINGITEMID NUMBER(19,0) not null, 
            MAPPINGID NUMBER(19,0), 
            LINEITEM VARCHAR(10), 
            INCOMEBLOCK VARCHAR(10), 
            ISDEDUCTION CHAR(1) not null
            );
            
            ALTER TABLE BDMOASCRADATA ADD
            CONSTRAINT BDMOASCRAData PRIMARY KEY(DATAID);
            
            ALTER TABLE BDMOASCRAINCOMEDATA ADD
            CONSTRAINT BDMOASCRAIncomeData PRIMARY KEY(INCOMEDATAID);
            
            ALTER TABLE BDMOASCRATRANSACTIONLINK ADD
            CONSTRAINT BDMOASCRATransactionLink PRIMARY KEY(TRANSACTIONLINKID);
            
            ALTER TABLE BDMOASCRATRANSACTION ADD
            CONSTRAINT BDMOASCRATransaction PRIMARY KEY(TRANSACTIONID);

            ALTER TABLE BDMOASINCOMEMAPPINGITEM ADD
            CONSTRAINT BDMOASIncomeMappingItem PRIMARY KEY(MAPPINGITEMID);
            
            ALTER TABLE BDMOASINCOMEMAPPING ADD
            CONSTRAINT BDMOASIncomeMapping PRIMARY KEY(MAPPINGID);
            
            CREATE INDEX IND__350865632 ON BDMOASCRADATA(TRANSACTIONID);
            
            CREATE INDEX IND_464681237 ON BDMOASCRAINCOMEDATA(DATAID);
            
            CREATE INDEX IND_2093663350 ON BDMOASCRATRANSACTIONLINK(TRANSACTIONID);
            
            CREATE INDEX IND__175018700 ON BDMOASCRATRANSACTION(CONCERNROLEID);

            CREATE INDEX IND__1971914740 ON BDMOASINCOMEMAPPINGITEM(MAPPINGID);
            
            ALTER TABLE BDMOASCRADATA ADD CONSTRAINT FKBDMOASCRADATABDMOASCRATRANSACTION 
            FOREIGN KEY (TRANSACTIONID) REFERENCES BDMOASCRATRANSACTION(TRANSACTIONID);
            
            ALTER TABLE BDMOASCRAINCOMEDATA ADD CONSTRAINT FKBDMOASCRAINCOMEDATABDMOASCRADATA 
            FOREIGN KEY (DATAID) REFERENCES BDMOASCRADATA(DATAID);
            
            ALTER TABLE BDMOASCRATRANSACTIONLINK ADD CONSTRAINT FKBDMOASCRATRANSACTIONLINKBDMOASCRATRANSACTION 
            FOREIGN KEY (TRANSACTIONID) REFERENCES BDMOASCRATRANSACTION(TRANSACTIONID);
            
            ALTER TABLE BDMOASINCOMEMAPPINGITEM ADD CONSTRAINT FKBDMOASINCOMEMAPPINGITEMBDMOASINCOMEMAPPING 
            FOREIGN KEY (MAPPINGID) REFERENCES BDMOASINCOMEMAPPING(MAPPINGID);

        </sql>
    </changeSet>
    
     <changeSet  id="BDMOAS_R2_S011_TASK_112287_04"  author="guru.vankadara" context="initial">  
        <sql dbms="oracle"
        splitStatements="true"
        stripComments="true"> 
        
        CREATE INDEX IND__1360474056 ON BDMOASINCOMEMAPPING(TAXYEAR);
        
        ALTER TABLE BDMOASCRADATA MODIFY DATEOFDEATH DATE NULL;
        </sql>
    </changeSet>
</databaseChangeLog>