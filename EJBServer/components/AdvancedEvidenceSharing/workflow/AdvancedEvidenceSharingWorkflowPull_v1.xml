<?xml version="1.0" encoding="UTF-8"?>
<!-- 
  Licensed Materials - Property of IBM
  
  PID 5725-H26
 
  Copyright IBM Corporation 2017, 2021. All Rights Reserved.

  US Government Users Restricted Rights - Use, duplication or disclosure 
  restricted by GSA ADP Schedule Contract with IBM Corp.
-->
<workflow-process creationDate="20170719T165212" createdBy="admin" category="PC2001" released="true" language-version="1.0" process-version="1" id="1126999418470853">
  <name>AdvancedEvidenceSharingWorkflowPull</name>
  <process-display-name>
    <localized-text>
      <locale country="US" language="en">AdvancedEvidenceSharingWorkflowPull</locale>
      <locale language="en">AdvancedEvidenceSharingWorkflowPull</locale>
    </localized-text>
  </process-display-name>
  <description>
    <localized-text>
      <locale country="US" language="en">This workflow is responsible for controlling the flow of evidence in the system as part of Advanced Evidence Sharing. In particular it controls the flow of evidence from one or more source cases to one target case on the system, i.e you are pulling evidence from source(s) to a target case.
        This includes not only the successful sharing onto the target case(s) but also the failure scenarios where the evidence cannot be shared seamlessly.
        Customers should use the out-of-the-box workflow as is.</locale>
      <locale language="en">This workflow is responsible for controlling the flow of evidence in the system as part of Advanced Evidence Sharing. In particular it controls the flow of evidence from one or more source cases to one target case on the system, i.e you are pulling evidence from source(s) to a target case.
        This includes not only the successful sharing onto the target case(s) but also the failure scenarios where the evidence cannot be shared seamlessly.
        Customers should use the out-of-the-box work-flow as is.</locale>
    </localized-text>
  </description>
  <enactment-mappings>
    <mapping>
      <source-attribute name="shareSetID" struct-name="curam.aes.sl.entity.struct.AESShareSetKey" />
      <target-attribute name="shareSetID" wdo-name="AESShareSetKey" />
    </mapping>
  </enactment-mappings>
  <wdos>
    <wdo initialize-attributes="true" is-list-wdo="false">
      <wdo-name>AESShareSetKey</wdo-name>
      <display-name>
        <localized-text>
          <locale language="en">AESShareSet Key</locale>
        </localized-text>
      </display-name>
      <description>
        <localized-text>
          <locale language="en">This workflow data object contains the details required to share the propagated evidence onto the target case specified by the delivery plans.</locale>
        </localized-text>
      </description>
      <attributes>
        <attribute>
          <attribute-name>shareSetID</attribute-name>
          <display-name>
            <localized-text>
              <locale language="en">Advanced Evidence Share Set ID</locale>
            </localized-text>
          </display-name>
          <type>INT64</type>
          <required-at-enactment>true</required-at-enactment>
          <process-output>false</process-output>
        </attribute>
      </attributes>
    </wdo>
  </wdos>
  <activities>
    <start-process-activity id="1">
      <name>
        <localized-text>
          <locale language="en">Start Process Activity</locale>
        </localized-text>
      </name>
      <description>
        <localized-text>
          <locale language="en">The start process activity</locale>
        </localized-text>
      </description>
      <split type="none">
        <transition-id idref="1" />
      </split>
    </start-process-activity>
    <end-process-activity id="2">
      <name>
        <localized-text>
          <locale language="en">End Process Activity</locale>
        </localized-text>
      </name>
      <description>
        <localized-text>
          <locale language="en">The end process activity</locale>
        </localized-text>
      </description>
      <join type="none" />
    </end-process-activity>
    <automatic-activity category="AC1" id="3">
      <name>
        <localized-text>
          <locale language="en">Initiate Sharing</locale>
        </localized-text>
      </name>
      <description>
        <localized-text>
          <locale language="en">This activity sets the status of the evidence sharing to 'In Progress'.</locale>
        </localized-text>
      </description>
      <join type="none" />
      <split type="none">
        <transition-id idref="3" />
      </split>
      <bpo-mapping method-name="initiateSharing" interface-name="curam.aes.sl.workflow.intf.AdvancedEvidenceSharingPullWorkflow">
        <formal-parameters>
          <formal-parameter index="0">
            <struct type="curam.aes.sl.entity.struct.AESShareSetKey">
              <field name="shareSetID">
                <base-type type="INT64">
                  <wdo-attribute name="shareSetID" wdo-name="AESShareSetKey" />
                </base-type>
              </field>
            </struct>
          </formal-parameter>
        </formal-parameters>
      </bpo-mapping>
    </automatic-activity>
    <automatic-activity category="AC1" id="4">
      <name>
        <localized-text>
          <locale language="en">Calculate ShareSet DeliverPlan</locale>
        </localized-text>
      </name>
      <description>
        <localized-text>
          <locale language="en">This activity calculates the Items (evidence) that needs to be pulled onto a target case.</locale>
        </localized-text>
      </description>
      <join type="none" />
      <split type="none">
        <transition-id idref="11" />
      </split>
      <bpo-mapping method-name="calculateShareItemsAndDeliverPlan" interface-name="curam.aes.sl.workflow.intf.AdvancedEvidenceSharingPullWorkflow">
        <formal-parameters>
          <formal-parameter index="0">
            <struct type="curam.aes.sl.entity.struct.AESShareSetKey">
              <field name="shareSetID">
                <base-type type="INT64">
                  <wdo-attribute name="shareSetID" wdo-name="AESShareSetKey" />
                </base-type>
              </field>
            </struct>
          </formal-parameter>
        </formal-parameters>
      </bpo-mapping>
    </automatic-activity>
    <automatic-activity category="AC1" id="5">
      <name>
        <localized-text>
          <locale language="en">Recommend ShareSet Actions</locale>
        </localized-text>
      </name>
      <description>
        <localized-text>
          <locale language="en">This activity recommends the action that should be taken when delivering shared evidence onto the target case. There are a number of actions that can be recommended, including Insert, Modify, Remove, Ignore and Manual Intervention.</locale>
        </localized-text>
      </description>
      <join type="none" />
      <split type="none">
        <transition-id idref="7" />
      </split>
      <bpo-mapping method-name="recommendShareSetAction" interface-name="curam.aes.sl.workflow.intf.AdvancedEvidenceSharingPullWorkflow">
        <formal-parameters>
          <formal-parameter index="0">
            <struct type="curam.aes.sl.entity.struct.AESShareSetKey">
              <field name="shareSetID">
                <base-type type="INT64">
                  <wdo-attribute name="shareSetID" wdo-name="AESShareSetKey" />
                </base-type>
              </field>
            </struct>
          </formal-parameter>
        </formal-parameters>
      </bpo-mapping>
    </automatic-activity>
    <automatic-activity category="AC1" id="6">
      <name>
        <localized-text>
          <locale language="en">Deliver ShareSet</locale>
        </localized-text>
      </name>
      <description>
        <localized-text>
          <locale language="en">This activity delivers the evidence onto the target case in accordance with the action determined for that delivery.</locale>
        </localized-text>
      </description>
      <join type="none" />
      <split type="none">
        <transition-id idref="17" />
      </split>
      <bpo-mapping method-name="deliverShareSet" interface-name="curam.aes.sl.workflow.intf.AdvancedEvidenceSharingPullWorkflow">
        <formal-parameters>
          <formal-parameter index="0">
            <struct type="curam.aes.sl.entity.struct.AESShareSetKey">
              <field name="shareSetID">
                <base-type type="INT64">
                  <wdo-attribute name="shareSetID" wdo-name="AESShareSetKey" />
                </base-type>
              </field>
            </struct>
          </formal-parameter>
        </formal-parameters>
      </bpo-mapping>
    </automatic-activity>
    <automatic-activity category="AC1" id="8">
      <name>
        <localized-text>
          <locale language="en">Complete ShareSet</locale>
        </localized-text>
      </name>
      <description>
        <localized-text>
          <locale language="en">This activity is responsible for marking a particular share set of evidence as 'Completed'. In the case of failures occurring during the workflow, the share set will be updated to 'Complete With Resilience' and the appropriate notification will be raised.</locale>
        </localized-text>
      </description>
      <join type="none" />
      <split type="none">
        <transition-id idref="16" />
      </split>
      <bpo-mapping method-name="completeShareSet" interface-name="curam.aes.sl.workflow.intf.AdvancedEvidenceSharingPullWorkflow">
        <formal-parameters>
          <formal-parameter index="0">
            <struct type="curam.aes.sl.entity.struct.AESShareSetKey">
              <field name="shareSetID">
                <base-type type="INT64">
                  <wdo-attribute name="shareSetID" wdo-name="AESShareSetKey" />
                </base-type>
              </field>
            </struct>
          </formal-parameter>
        </formal-parameters>
      </bpo-mapping>
    </automatic-activity>
  </activities>
  <transitions>
    <transition to-activity-idref="3" from-activity-idref="1" id="1" />
    <transition to-activity-idref="4" from-activity-idref="3" id="3" />
    <transition to-activity-idref="5" from-activity-idref="4" id="11" />
    <transition to-activity-idref="6" from-activity-idref="5" id="18" />
    <transition to-activity-idref="8" from-activity-idref="6" id="14" />
    <transition to-activity-idref="2" from-activity-idref="8" id="16" />
  </transitions>
</workflow-process>
