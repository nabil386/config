/**
 * @license Copyright (c) 2003-2016, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or http://ckeditor.com/license
 */
CKEDITOR.dialog.add("docProps",function(t){function e(e,i){var n=function(){o(this),i(this,this._.parentDialog)},o=function(t){t.removeListener("ok",n),t.removeListener("cancel",o)},a=function(t){t.on("ok",n),t.on("cancel",o)};t.execCommand(e),t._.storedDialogs.colordialog?a(t._.storedDialogs.colordialog):CKEDITOR.on("dialogDefinition",function(t){if(t.data.name==e){var i=t.data.definition;t.removeListener(),i.onLoad=CKEDITOR.tools.override(i.onLoad,function(t){return function(){a(this),i.onLoad=t,"function"==typeof t&&t.call(this)}})}})}function i(){var t=this.getDialog(),e=t.getContentElement("general",this.id+"Other");e&&("other"==this.getValue()?(e.getInputElement().removeAttribute("readOnly"),e.focus(),e.getElement().removeClass("cke_disabled")):(e.getInputElement().setAttribute("readOnly",!0),e.getElement().addClass("cke_disabled")))}function n(e,i,n){return function(o,a,l){var r=g,s="undefined"!=typeof n?n:this.getValue();if(!s&&e in r)r[e].remove();else if(s&&e in r)r[e].setAttribute("content",s);else if(s){var c=new CKEDITOR.dom.element("meta",t.document);c.setAttribute(i?"http-equiv":"name",e),c.setAttribute("content",s),l.append(c)}}}function o(t,e){return function(){var i=g,n=t in i?i[t].getAttribute("content")||"":"";return e?n:(this.setValue(n),null)}}function a(t){return function(e,i,n,o){o.removeAttribute("margin"+t);var a=this.getValue();""!==a?o.setStyle("margin-"+t,CKEDITOR.tools.cssLength(a)):o.removeStyle("margin-"+t)}}function l(t){for(var e={},i=t.getElementsByTag("meta"),n=i.count(),o=0;n>o;o++){var a=i.getItem(o);e[a.getAttribute(a.hasAttribute("http-equiv")?"http-equiv":"name").toLowerCase()]=a}return e}function r(t,e,i){t.removeStyle(e),t.getComputedStyle(e)!=i&&t.setStyle(e,i)}var s=t.lang.docprops,c=t.lang.common,g={},h=function(t,i,n){return{type:"hbox",padding:0,widths:["60%","40%"],children:[CKEDITOR.tools.extend({type:"text",id:t,label:s[i]},n||{},1),{type:"button",id:t+"Choose",label:s.chooseColor,className:"colorChooser",onClick:function(){var i=this;e("colordialog",function(e){var n=i.getDialog();n.getContentElement(n._.currentTabId,t).setValue(e.getContentElement("picker","selectedColor").getValue())})}}]}},m="javascript:void((function(){"+encodeURIComponent("document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+'document.write( \'<html style="background-color: #ffffff; height: 100%"><head></head><body style="width: 100%; height: 100%; margin: 0px">'+s.previewHtml+"</body></html>' );document.close();")+"})())";return{title:s.title,minHeight:330,minWidth:500,onShow:function(){var e=t.document,i=e.getElementsByTag("html").getItem(0),n=e.getHead(),o=e.getBody();g=l(e),this.setupContent(e,i,n,o)},onHide:function(){g={}},onOk:function(){var e=t.document,i=e.getElementsByTag("html").getItem(0),n=e.getHead(),o=e.getBody();this.commitContent(e,i,n,o)},contents:[{id:"general",label:c.generalTab,elements:[{type:"text",id:"title",label:s.docTitle,setup:function(t){this.setValue(t.getElementsByTag("title").getItem(0).data("cke-title"))},commit:function(t,e,i,n,o){o||t.getElementsByTag("title").getItem(0).data("cke-title",this.getValue())}},{type:"hbox",children:[{type:"select",id:"dir",label:c.langDir,style:"width: 100%",items:[[c.notSet,""],[c.langDirLtr,"ltr"],[c.langDirRtl,"rtl"]],setup:function(t,e,i,n){this.setValue(n.getDirection()||"")},commit:function(t,e,i,n){var o=this.getValue();o?n.setAttribute("dir",o):n.removeAttribute("dir"),n.removeStyle("direction")}},{type:"text",id:"langCode",label:c.langCode,setup:function(t,e){this.setValue(e.getAttribute("xml:lang")||e.getAttribute("lang")||"")},commit:function(t,e,i,n,o){if(!o){var a=this.getValue();a?e.setAttributes({"xml:lang":a,lang:a}):e.removeAttributes({"xml:lang":1,lang:1})}}}]},{type:"hbox",children:[{type:"select",id:"charset",label:s.charset,style:"width: 100%",items:[[c.notSet,""],[s.charsetASCII,"us-ascii"],[s.charsetCE,"iso-8859-2"],[s.charsetCT,"big5"],[s.charsetCR,"iso-8859-5"],[s.charsetGR,"iso-8859-7"],[s.charsetJP,"iso-2022-jp"],[s.charsetKR,"iso-2022-kr"],[s.charsetTR,"iso-8859-9"],[s.charsetUN,"utf-8"],[s.charsetWE,"iso-8859-1"],[s.other,"other"]],"default":"",onChange:function(){this.getDialog().selectedCharset="other"!=this.getValue()?this.getValue():"",i.call(this)},setup:function(){this.metaCharset="charset"in g;var t=o(this.metaCharset?"charset":"content-type",1,1),e=t.call(this);if(!this.metaCharset&&e.match(/charset=[^=]+$/)&&(e=e.substring(e.indexOf("=")+1)),e){if(this.setValue(e.toLowerCase()),!this.getValue()){this.setValue("other");var n=this.getDialog().getContentElement("general","charsetOther");n&&n.setValue(e)}this.getDialog().selectedCharset=e}i.call(this)},commit:function(t,e,i,o,a){if(!a){var l=this.getValue(),r=this.getDialog().getContentElement("general","charsetOther");"other"==l&&(l=r?r.getValue():""),l&&!this.metaCharset&&(l=(g["content-type"]?g["content-type"].getAttribute("content").split(";")[0]:"text/html")+"; charset="+l);var s=n(this.metaCharset?"charset":"content-type",1,l);s.call(this,t,e,i)}}},{type:"text",id:"charsetOther",label:s.charsetOther,onChange:function(){this.getDialog().selectedCharset=this.getValue()}}]},{type:"hbox",children:[{type:"select",id:"docType",label:s.docType,style:"width: 100%",items:[[c.notSet,""],["XHTML 1.1",'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">'],["XHTML 1.0 Transitional",'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'],["XHTML 1.0 Strict",'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">'],["XHTML 1.0 Frameset",'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">'],["HTML 5","<!DOCTYPE html>"],["HTML 4.01 Transitional",'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">'],["HTML 4.01 Strict",'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">'],["HTML 4.01 Frameset",'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN" "http://www.w3.org/TR/html4/frameset.dtd">'],["HTML 3.2",'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">'],["HTML 2.0",'<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">'],[s.other,"other"]],onChange:i,setup:function(){if(t.docType&&(this.setValue(t.docType),!this.getValue())){this.setValue("other");var e=this.getDialog().getContentElement("general","docTypeOther");e&&e.setValue(t.docType)}i.call(this)},commit:function(e,i,n,o,a){if(!a){var l=this.getValue(),r=this.getDialog().getContentElement("general","docTypeOther");t.docType="other"==l?r?r.getValue():"":l}}},{type:"text",id:"docTypeOther",label:s.docTypeOther}]},{type:"checkbox",id:"xhtmlDec",label:s.xhtmlDec,setup:function(){this.setValue(!!t.xmlDeclaration)},commit:function(e,i,n,o,a){a||(this.getValue()?(t.xmlDeclaration='<?xml version="1.0" encoding="'+(this.getDialog().selectedCharset||"utf-8")+'"?>',i.setAttribute("xmlns","http://www.w3.org/1999/xhtml")):(t.xmlDeclaration="",i.removeAttribute("xmlns")))}}]},{id:"design",label:s.design,elements:[{type:"hbox",widths:["60%","40%"],children:[{type:"vbox",children:[h("txtColor","txtColor",{setup:function(t,e,i,n){this.setValue(n.getComputedStyle("color"))},commit:function(t,e,i,n,o){if(this.isChanged()||o){n.removeAttribute("text");var a=this.getValue();a?n.setStyle("color",a):n.removeStyle("color")}}}),h("bgColor","bgColor",{setup:function(t,e,i,n){var o=n.getComputedStyle("background-color")||"";this.setValue("transparent"==o?"":o)},commit:function(t,e,i,n,o){if(this.isChanged()||o){n.removeAttribute("bgcolor");var a=this.getValue();a?n.setStyle("background-color",a):r(n,"background-color","transparent")}}}),{type:"hbox",widths:["60%","40%"],padding:1,children:[{type:"text",id:"bgImage",label:s.bgImage,setup:function(t,e,i,n){var o=n.getComputedStyle("background-image")||"";o="none"==o?"":o.replace(/url\(\s*(["']?)\s*([^\)]*)\s*\1\s*\)/i,function(t,e,i){return i}),this.setValue(o)},commit:function(t,e,i,n){n.removeAttribute("background");var o=this.getValue();o?n.setStyle("background-image","url("+o+")"):r(n,"background-image","none")}},{type:"button",id:"bgImageChoose",label:c.browseServer,style:"display:inline-block;margin-top:10px;",hidden:!0,filebrowser:"design:bgImage"}]},{type:"checkbox",id:"bgFixed",label:s.bgFixed,setup:function(t,e,i,n){this.setValue("fixed"==n.getComputedStyle("background-attachment"))},commit:function(t,e,i,n){this.getValue()?n.setStyle("background-attachment","fixed"):r(n,"background-attachment","scroll")}}]},{type:"vbox",children:[{type:"html",id:"marginTitle",html:'<div style="text-align: center; margin: 0px auto; font-weight: bold">'+s.margin+"</div>"},{type:"text",id:"marginTop",label:s.marginTop,style:"width: 80px; text-align: center",align:"center",inputStyle:"text-align: center",setup:function(t,e,i,n){this.setValue(n.getStyle("margin-top")||n.getAttribute("margintop")||"")},commit:a("top")},{type:"hbox",children:[{type:"text",id:"marginLeft",label:s.marginLeft,style:"width: 80px; text-align: center",align:"center",inputStyle:"text-align: center",setup:function(t,e,i,n){this.setValue(n.getStyle("margin-left")||n.getAttribute("marginleft")||"")},commit:a("left")},{type:"text",id:"marginRight",label:s.marginRight,style:"width: 80px; text-align: center",align:"center",inputStyle:"text-align: center",setup:function(t,e,i,n){this.setValue(n.getStyle("margin-right")||n.getAttribute("marginright")||"")},commit:a("right")}]},{type:"text",id:"marginBottom",label:s.marginBottom,style:"width: 80px; text-align: center",align:"center",inputStyle:"text-align: center",setup:function(t,e,i,n){this.setValue(n.getStyle("margin-bottom")||n.getAttribute("marginbottom")||"")},commit:a("bottom")}]}]}]},{id:"meta",label:s.meta,elements:[{type:"textarea",id:"metaKeywords",label:s.metaKeywords,setup:o("keywords"),commit:n("keywords")},{type:"textarea",id:"metaDescription",label:s.metaDescription,setup:o("description"),commit:n("description")},{type:"text",id:"metaAuthor",label:s.metaAuthor,setup:o("author"),commit:n("author")},{type:"text",id:"metaCopyright",label:s.metaCopyright,setup:o("copyright"),commit:n("copyright")}]},{id:"preview",label:c.preview,elements:[{type:"html",id:"previewHtml",html:'<iframe src="'+m+'" style="width: 100%; height: 310px" hidefocus="true" frameborder="0"></iframe>',onLoad:function(){var t=this.getElement();this.getDialog().on("selectPage",function(e){if("preview"==e.data.page){var i=this;setTimeout(function(){var e=t.getFrameDocument(),n=e.getElementsByTag("html").getItem(0),o=e.getHead(),a=e.getBody();i.commitContent(e,n,o,a,1)},50)}}),t.getAscendant("table").setStyle("height","100%")}}]}]}});