/* Copyright IBM Corp. 2009-2016  All Rights Reserved. *//**
 * @license Copyright (c) 2003-2014, CKSource - Frederico Knabben. All rights reserved. For licensing,
 * see LICENSE.md or http://ckeditor.com/license
 */
!function(){function e(e,i){if(!i){var t=e.getSelection();i=t.getSelectedElement()}return i&&i.is("img")&&!i.data("cke-realelement")&&!i.isReadOnly()?i:void 0}function i(e){var i=e.getStyle("float");return("inherit"==i||"none"==i)&&(i=0),i||(i=e.getAttribute("align")),i}CKEDITOR.plugins.add("ibmuploadimage",{requires:"dialog",lang:"af,ar,bg,bn,bs,ca,cs,cy,da,de,el,en,en-au,en-ca,en-gb,eo,es,et,eu,fa,fi,fo,fr,fr-ca,gl,gu,he,hi,hr,hu,id,is,it,ja,ka,km,ko,ku,lt,lv,mk,mn,ms,nb,nl,no,pl,pt,pt-br,ro,ru,si,sk,sl,sq,sr,sr-latn,sv,th,tr,tt,ug,uk,vi,zh,zh-cn",icons:"image",hidpi:!0,init:function(i){if(!i.plugins.image&&!i.plugins.image2){var t="ibmuploadimage";CKEDITOR.dialog.add(t,this.path+"dialogs/ibmuploadimage.js");var a="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}",n="img[alt,src]";CKEDITOR.dialog.isTabEnabled(i,t,"advanced")&&(a="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)"),i.addCommand(t,new CKEDITOR.dialogCommand(t,{allowedContent:a,requiredContent:n,contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]})),i.ui.addButton&&i.ui.addButton("Image",{label:i.lang.common.image,command:t,toolbar:"insert,10"}),i.on("doubleclick",function(e){var i=e.data.element;!i.is("img")||i.data("cke-realelement")||i.isReadOnly()||(e.data.dialog="ibmuploadimage")}),i.addMenuItems&&i.addMenuItems({ibmuploadimage:{label:i.lang.ibmuploadimage.menu,command:"ibmuploadimage",icon:"image",group:"image"}}),i.contextMenu&&i.contextMenu.addListener(function(t,a){return e(i,t)?{ibmuploadimage:CKEDITOR.TRISTATE_OFF}:void 0})}},afterInit:function(t){function a(a){var n=t.getCommand("justify"+a);n&&(("left"==a||"right"==a)&&n.on("exec",function(n){var l,o=e(t);o&&(l=i(o),l==a?(o.removeStyle("float"),a==i(o)&&o.removeAttribute("align")):o.setStyle("float",a),n.cancel())}),n.on("refresh",function(n){var l,o=e(t);o&&(l=i(o),this.setState(l==a?CKEDITOR.TRISTATE_ON:"right"==a||"left"==a?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),n.cancel())}))}t.plugins.image||t.plugins.image2||(a("left"),a("right"),a("center"),a("block"))}})}(),CKEDITOR.config.image_removeLinkByEmptyURL=!0;