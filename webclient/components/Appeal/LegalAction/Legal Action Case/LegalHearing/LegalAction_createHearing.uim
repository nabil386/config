<?xml version="1.0" encoding="UTF-8"?>
<!--
    Licensed Materials - Property of IBM
    
    PID 5725-H26
    
    Copyright IBM Corporation 2008, 2021. All Rights Reserved.
    
    US Government Users Restricted Rights - Use, duplication or disclosure 
    restricted by GSA ADP Schedule Contract with IBM Corp.
-->
<PAGE
  PAGE_ID="LegalAction_createHearing"
  WINDOW_OPTIONS="width=800"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>
 <SCRIPT
    ACTION="populateJudge('Hearing')"
    EVENT="ONLOAD"
    SCRIPT_FILE="PopulateMembers.js"
  />
  <!-- Page Title -->
  <PAGE_TITLE>
    <CONNECT>
      <SOURCE
        NAME="TEXT"
        PROPERTY="PageTitle.Statement"
      />
    </CONNECT>
  </PAGE_TITLE>


  <!-- Page parameters required for this page -->
  <PAGE_PARAMETER NAME="caseID"/>
  <PAGE_PARAMETER NAME="configLegalActionCategoryID"/>
  <PAGE_PARAMETER NAME="configLegalActionID"/>


  <!-- Server Interface for action bean to create a hearing -->
  <SERVER_INTERFACE
    CLASS="LegalHearing"
    NAME="ACTION"
    OPERATION="createLegalHearing"
    PHASE="ACTION"
  />


  <!-- Server Interface for display bean to display case participants -->
  <SERVER_INTERFACE
    CLASS="LegalAction"
    NAME="DISPLAY"
    OPERATION="listParticipantsLegalActionCategory"
    PHASE="DISPLAY"
  />


  <SERVER_INTERFACE
    CLASS="LegalAction"
    NAME="DISPLAYMEMBERS"
    OPERATION="listExternalPartyMembers"
    PHASE="DISPLAY"
  />


  <!-- Connection parameters required for display and action beans -->
  <CONNECT>
    <SOURCE
      NAME="PAGE"
      PROPERTY="caseID"
    />
    <TARGET
      NAME="DISPLAY"
      PROPERTY="caseID"
    />
  </CONNECT>
  <CONNECT>
    <SOURCE
      NAME="PAGE"
      PROPERTY="configLegalActionCategoryID"
    />
    <TARGET
      NAME="DISPLAY"
      PROPERTY="key$configLegalActionCategoryID"
    />
  </CONNECT>
  <CONNECT>
    <SOURCE
      NAME="PAGE"
      PROPERTY="configLegalActionID"
    />
    <TARGET
      NAME="DISPLAY"
      PROPERTY="key$configLegalActionID"
    />
  </CONNECT>
  <CONNECT>
    <SOURCE
      NAME="PAGE"
      PROPERTY="caseID"
    />
    <TARGET
      NAME="ACTION"
      PROPERTY="dtls$caseID"
    />
  </CONNECT>


  <JSP_SCRIPTLET> 
    curam.omega3.request.RequestHandler rh =
    curam.omega3.request.RequestHandlerFactory.getRequestHandler(request); 
    
    String contextValue = rh.getSystemParameters(); 
    String judgeValue = request.getParameter("hiddenJudge_0");
    if (judgeValue == null) {
    	judgeValue = "";
    } 
    
    StringBuffer strBuffpcInd = new StringBuffer();
    strBuffpcInd.append("&lt;input type='hidden' id='hiddenPageContextPath_");
    strBuffpcInd.append(0); 
    strBuffpcInd.append("' value='"); 
    strBuffpcInd.append(contextValue+"");
    strBuffpcInd.append("' /&gt;"); 
    
    // BEGIN, CR00236827, SS 
    strBuffpcInd.append("&lt;input type='hidden' name='hiddenJudge_");
    strBuffpcInd.append(0);
    strBuffpcInd.append("' value='");
    strBuffpcInd.append(judgeValue + "' /&gt;");
    //END, CR00236827
    out.println(strBuffpcInd); 

  </JSP_SCRIPTLET>


  <!-- Action control contains save and cancel links -->
  <ACTION_SET ALIGNMENT="CENTER">
    <ACTION_CONTROL
      IMAGE="SaveButton"
      LABEL="ActionControl.Label.Save"
      TYPE="SUBMIT"
    >
      <!-- BEGIN, CR00190255, MC -->
      <!-- BEGIN, CR00248622. SS -->
      <LINK PAGE_ID="Case_resolveCaseHome">
        <CONNECT>
          <SOURCE
            NAME="ACTION"
            PROPERTY="legalActionCaseID"
          />
          <TARGET
            NAME="PAGE"
            PROPERTY="caseID"
          />
        </CONNECT>
      </LINK>
      <!-- END, CR00248622 -->
      <!-- END, CR00190255 -->
    </ACTION_CONTROL>
    <ACTION_CONTROL
      IMAGE="CancelButton"
      LABEL="ActionControl.Label.Cancel"
    />
  </ACTION_SET>


  <!--Cluster to enter hearing details  -->
  <CLUSTER NUM_COLS="2">
    <FIELD
      LABEL="Field.Label.LegalCategory"
      USE_BLANK="TRUE"
    >
      <SCRIPT
        ACTION="doCompletion('dtls$dtls$legalActionDtls$dtls$configLegalActionID','LegalAction_getLegalActionValues','caseID')"
        EVENT="ONCHANGE"
        SCRIPT_FILE="AjaxCombo.js"
      />
      <CONNECT>
        <INITIAL
          HIDDEN_PROPERTY="legalActionCategoryID"
          NAME="DISPLAY"
          PROPERTY="legalCategoryNameCode"
        />
      </CONNECT>
      <CONNECT>
        <TARGET
          NAME="ACTION"
          PROPERTY="configLegalActionCategoryID"
        />
      </CONNECT>
      <CONNECT>
        <SOURCE
          NAME="DISPLAY"
          PROPERTY="dtls$configLegalActionCategoryID"
        />
      </CONNECT>
    </FIELD>
    <FIELD LABEL="Field.Label.DocketNumber">
      <CONNECT>
        <TARGET
          NAME="ACTION"
          PROPERTY="docketNumber"
        />
      </CONNECT>
    </FIELD>
    <FIELD LABEL="Field.Label.CourtLocation">

      <CONNECT>
        <TARGET
          NAME="ACTION"
          PROPERTY="locationID"
        />
      </CONNECT>


    </FIELD>
    <FIELD LABEL="Field.Label.StartDate">
      <CONNECT>
        <TARGET
          NAME="ACTION"
          PROPERTY="startDate"
        />
      </CONNECT>
    </FIELD>
    <FIELD
      LABEL="Field.Label.LegalAction"
      USE_BLANK="TRUE"
    >
      <SCRIPT
        ACTION="doRedirecr('caseID','dtls$dtls$legalActionDtls$dtls$configLegalActionCategoryID','LegalAction_getCreatePageName',document.forms[0].hiddenPageContextPath_0)"
        EVENT="ONCHANGE"
        SCRIPT_FILE="AjaxPageResolver.js"
      />
      <CONNECT>
        <INITIAL
          HIDDEN_PROPERTY="legalActionID"
          NAME="DISPLAY"
          PROPERTY="legalActionNameCode"
        />
      </CONNECT>
      <CONNECT>
        <TARGET
          NAME="ACTION"
          PROPERTY="configLegalActionID"
        />
      </CONNECT>
      <CONNECT>
        <SOURCE
          NAME="DISPLAY"
          PROPERTY="dtls$configLegalActionID"
        />
      </CONNECT>
    </FIELD>
    <FIELD
      LABEL="Field.Label.Outcome"
      USE_BLANK="TRUE"
      USE_DEFAULT="TRUE"
    >
      <CONNECT>
        <TARGET
          NAME="ACTION"
          PROPERTY="hearingOutcomeCode"
        />
      </CONNECT>
    </FIELD>
    <FIELD
      LABEL="Field.Label.Judge"
      USE_BLANK="TRUE"
      USE_DEFAULT="TRUE"
    >
      <!-- BEGIN, CR00236827, SS -->
      <SCRIPT
        ACTION="populateJudge('Hearing')"
        EVENT="ONFOCUS"
        SCRIPT_FILE="PopulateMembers.js"
      />
      <!-- END, CR00236827 -->
    
      <CONNECT>
        <INITIAL
          HIDDEN_PROPERTY="memberID"
          NAME="DISPLAYMEMBERS"
          PROPERTY="memberName"
        />
      </CONNECT>


      <CONNECT>
        <TARGET
          NAME="ACTION"
          PROPERTY="adjudicateID"
        />
      </CONNECT>
    </FIELD>
  </CLUSTER>


  <!-- Cluster to have participants list -->
  <CLUSTER TITLE="Cluster.Title.Participant">
    <CONDITION>
      <IS_TRUE
        NAME="DISPLAY"
        PROPERTY="multiParticipantInd"
      />
    </CONDITION>
    <!--  <CLUSTER STYLE="outer-cluster-borderless"> -->
    <LIST >
      <CONTAINER
        ALIGNMENT="CENTER"
        WIDTH="5"
      >
        <WIDGET TYPE="MULTISELECT">
          <WIDGET_PARAMETER NAME="MULTI_SELECT_SOURCE">
            <CONNECT>
              <SOURCE
                NAME="DISPLAY"
                PROPERTY="concernRoleID"
              />
            </CONNECT>
          </WIDGET_PARAMETER>
          <WIDGET_PARAMETER NAME="MULTI_SELECT_TARGET">
            <CONNECT>
              <TARGET
                NAME="ACTION"
                PROPERTY="caseParticipantMultiselect"
              />
            </CONNECT>
          </WIDGET_PARAMETER>
        </WIDGET>
      </CONTAINER>
      <!-- BEGIN, CR00247317, SS -->
      <FIELD
        LABEL="Field.Label.Name"
        WIDTH="65"
      >
        <!-- END, CR00247317 -->
        <CONNECT>
          <SOURCE
            NAME="DISPLAY"
            PROPERTY="name"
          />
        </CONNECT>
      </FIELD>
      <!-- BEGIN, CR00247317, SS -->
      <FIELD
        LABEL="Field.Label.Age"
        WIDTH="10"
      >
        <!-- END, CR00247317 -->
        <CONNECT>
          <SOURCE
            NAME="DISPLAY"
            PROPERTY="age"
          />
        </CONNECT>
      </FIELD>
      <!-- BEGIN, CR00247317, SS -->
      <FIELD
        LABEL="Field.Label.Gender"
        WIDTH="20"
      >
        <!-- END, CR00247317 -->
        <CONNECT>
          <SOURCE
            NAME="DISPLAY"
            PROPERTY="gender"
          />
        </CONNECT>
      </FIELD>
    </LIST>
    <!-- </CLUSTER>-->
  </CLUSTER>


  <!-- Cluster to select participant. This cluster
    displays only if multiple participant indicator is false -->
  <CLUSTER
    NUM_COLS="3"
    STYLE="outer-cluster-borderless"
  >
    <CONDITION>
      <IS_FALSE
        NAME="DISPLAY"
        PROPERTY="multiParticipantInd"
      />
    </CONDITION>
    <CLUSTER TITLE="Cluster.Title.Participant">
      <FIELD
        LABEL="Field.Label.Participant"
        USE_BLANK="true"
        USE_DEFAULT="false"
      >
        <CONNECT>
          <INITIAL
            HIDDEN_PROPERTY="concernRoleID"
            NAME="DISPLAY"
            PROPERTY="name"
          />
        </CONNECT>
        <CONNECT>
          <TARGET
            NAME="ACTION"
            PROPERTY="participantRoleID"
          />
        </CONNECT>
      </FIELD>
    </CLUSTER>
  </CLUSTER>


  <!-- Cluster to have narrative details -->
  <CLUSTER
    SHOW_LABELS="false"
    TITLE="Cluster.Title.Narrative"
  >
    <!-- BEGIN, CR00414024, RB -->
    <FIELD HEIGHT="7" LABEL="Field.Label.Narrative">
    <!-- END, CR00414024 -->
      <CONNECT>
        <TARGET
          NAME="ACTION"
          PROPERTY="narrative"
        />
      </CONNECT>
    </FIELD>
  </CLUSTER>
</PAGE>
