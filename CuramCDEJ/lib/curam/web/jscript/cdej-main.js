//>>built
require({cache:{"dojo/request/default":function(){
define(["exports","require","../has"],function(_1,_2,_3){
var _4=_3("config-requestProvider"),_5;
if(1||_3("host-webworker")){
_5="./xhr";
}else{
if(0){
_5="./node";
}
}
if(!_4){
_4=_5;
}
_1.getPlatformDefaultId=function(){
return _5;
};
_1.load=function(id,_6,_7,_8){
_2([id=="platform"?_5:_4],function(_9){
_7(_9);
});
};
});
},"curam/date":function(){
define(["curam/define","dojo/date","curam/date/locale","dojo/date/stamp"],function(_a,_b,_c,_d){
curam.define.singleton("curam.date",{testLocale:null,isDate:function(_e,_f){
return (curam.date.getDateFromFormat(_e,_f)!=0);
},compareDates:function(d1,df1,d2,df2){
var d1=curam.date.getDateFromFormat(d1,df1);
if(d1==0){
return -1;
}
var d2=curam.date.getDateFromFormat(d2,df2);
if(d2==0){
return -1;
}
return _b.compare(d1,d2,"date");
},formatDate:function(d,fmt){
var _10=_c.format(d,{selector:"date",datePattern:fmt,locale:curam.date.getLocale()});
return _10;
},getDateFromFormat:function(str,fmt){
var res=_c.parse(str,{selector:"date",datePattern:fmt,locale:curam.date.getLocale()});
return (res==null)?"0":res;
},ISO8601StringToDate:function(val){
return _d.fromISOString(val);
},getLocale:function(){
var _11=(typeof jsL!="undefined"&&jsL)?jsL:(curam.config?curam.config.locale:null);
return _11||curam.date.testLocale||"en";
}});
return curam.date;
});
},"dojo/date":function(){
define(["./has","./_base/lang"],function(has,_12){
var _13={};
_13.getDaysInMonth=function(_14){
var _15=_14.getMonth();
var _16=[31,28,31,30,31,30,31,31,30,31,30,31];
if(_15==1&&_13.isLeapYear(_14)){
return 29;
}
return _16[_15];
};
_13.isLeapYear=function(_17){
var _18=_17.getFullYear();
return !(_18%400)||(!(_18%4)&&!!(_18%100));
};
_13.getTimezoneName=function(_19){
var str=_19.toString();
var tz="";
var _1a;
var pos=str.indexOf("(");
if(pos>-1){
tz=str.substring(++pos,str.indexOf(")"));
}else{
var pat=/([A-Z\/]+) \d{4}$/;
if((_1a=str.match(pat))){
tz=_1a[1];
}else{
str=_19.toLocaleString();
pat=/ ([A-Z\/]+)$/;
if((_1a=str.match(pat))){
tz=_1a[1];
}
}
}
return (tz=="AM"||tz=="PM")?"":tz;
};
_13.compare=function(_1b,_1c,_1d){
_1b=new Date(+_1b);
_1c=new Date(+(_1c||new Date()));
if(_1d=="date"){
_1b.setHours(0,0,0,0);
_1c.setHours(0,0,0,0);
}else{
if(_1d=="time"){
_1b.setFullYear(0,0,0);
_1c.setFullYear(0,0,0);
}
}
if(_1b>_1c){
return 1;
}
if(_1b<_1c){
return -1;
}
return 0;
};
_13.add=function(_1e,_1f,_20){
var sum=new Date(+_1e);
var _21=false;
var _22="Date";
switch(_1f){
case "day":
break;
case "weekday":
var _23,_24;
var mod=_20%5;
if(!mod){
_23=(_20>0)?5:-5;
_24=(_20>0)?((_20-5)/5):((_20+5)/5);
}else{
_23=mod;
_24=parseInt(_20/5);
}
var _25=_1e.getDay();
var adj=0;
if(_25==6&&_20>0){
adj=1;
}else{
if(_25==0&&_20<0){
adj=-1;
}
}
var _26=_25+_23;
if(_26==0||_26==6){
adj=(_20>0)?2:-2;
}
_20=(7*_24)+_23+adj;
break;
case "year":
_22="FullYear";
_21=true;
break;
case "week":
_20*=7;
break;
case "quarter":
_20*=3;
case "month":
_21=true;
_22="Month";
break;
default:
_22="UTC"+_1f.charAt(0).toUpperCase()+_1f.substring(1)+"s";
}
if(_22){
sum["set"+_22](sum["get"+_22]()+_20);
}
if(_21&&(sum.getDate()<_1e.getDate())){
sum.setDate(0);
}
return sum;
};
_13.difference=function(_27,_28,_29){
_28=_28||new Date();
_29=_29||"day";
var _2a=_28.getFullYear()-_27.getFullYear();
var _2b=1;
switch(_29){
case "quarter":
var m1=_27.getMonth();
var m2=_28.getMonth();
var q1=Math.floor(m1/3)+1;
var q2=Math.floor(m2/3)+1;
q2+=(_2a*4);
_2b=q2-q1;
break;
case "weekday":
var _2c=Math.round(_13.difference(_27,_28,"day"));
var _2d=parseInt(_13.difference(_27,_28,"week"));
var mod=_2c%7;
if(mod==0){
_2c=_2d*5;
}else{
var adj=0;
var _2e=_27.getDay();
var _2f=_28.getDay();
_2d=parseInt(_2c/7);
mod=_2c%7;
var _30=new Date(_27);
_30.setDate(_30.getDate()+(_2d*7));
var _31=_30.getDay();
if(_2c>0){
switch(true){
case _2e==6:
adj=-1;
break;
case _2e==0:
adj=0;
break;
case _2f==6:
adj=-1;
break;
case _2f==0:
adj=-2;
break;
case (_31+mod)>5:
adj=-2;
}
}else{
if(_2c<0){
switch(true){
case _2e==6:
adj=0;
break;
case _2e==0:
adj=1;
break;
case _2f==6:
adj=2;
break;
case _2f==0:
adj=1;
break;
case (_31+mod)<0:
adj=2;
}
}
}
_2c+=adj;
_2c-=(_2d*2);
}
_2b=_2c;
break;
case "year":
_2b=_2a;
break;
case "month":
_2b=(_28.getMonth()-_27.getMonth())+(_2a*12);
break;
case "week":
_2b=parseInt(_13.difference(_27,_28,"day")/7);
break;
case "day":
_2b/=24;
case "hour":
_2b/=60;
case "minute":
_2b/=60;
case "second":
_2b/=1000;
case "millisecond":
_2b*=_28.getTime()-_27.getTime();
}
return Math.round(_2b);
};
1&&_12.mixin(_12.getObject("dojo.date",true),_13);
return _13;
});
},"curam/modal/CuramCarbonModal":function(){
define(["dojo/text!curam/layout/resources/CuramCarbonModal.html","dojo/_base/declare","dojo/dom-construct","dijit/_Widget","dijit/_Templated","curam/modal/CuramBaseModal","curam/ModalUIMController","curam/util/onLoad","curam/util","dojo/aspect","curam/debug","curam/ui/PageRequest"],function(_32,_33,_34,_35,_36,_37,_38,_39,_3a,asp,_3b){
return _33("curam.modal.CuramCarbonModal",[_37,_35,_36],{templateString:_32,modalContainerBaseModifier:"bx--modal-container--",carbonInstantiatedNode:null,modalSPMComponentRoot:null,currentPageID:null,modalSizeClassName:"md",carbonModal:null,isWizardModal:false,isIEGModal:null,cancelButtonID:null,redirectPageID:null,isRedirectModal:false,closingDialogEvent:null,addButttonEvent:null,_setCarbonModalAttr:{node:"carbonModalNode",type:"innerHTML"},carbonModalController:null,resizeController:null,isAlreadyShown:false,hasSingleModalButton:false,primaryButtonOnViewModalID:null,hasMultipleButtons:true,hasMultipleSubmitButtons:false,tlw:null,tabbingBackwards:null,isIEGScript:false,isAgendaPlayer:false,helpIconEnabled:false,wRef:null,closingAlready:false,closeTitle:LOCALISED_MODAL_CLOSE_BUTTON,helpAltText:LOCALISED_MODAL_HELP_ALT,helpTitle:LOCALISED_MODAL_HELP_TITLE,btnRequestCont:0,isOwnAction:false,isContentAction:false,cleanupFooter:false,actionSource:false,preventAction:false,fqWatchers:[],isIPNNav:false,constructor:function(_3c){
this.iframeHref=_3c.href;
},_getUnits:function(){
return "%";
},_calculateWidth:function(){
return "100";
},_calculateHeight:function(){
return "100";
},_determineSize:function(_3d){
this.inherited(arguments);
if(_3d.windowOptions){
this.setModalSizeClassName(_3d.windowOptions["width"]);
}
},_setupHelpIcon:function(_3e){
var _3f=typeof _3e!="undefined"?_3e.helpEnabled:false;
var _40=_3f?_3e.helpExtension:"";
var _41=_3f?_3e.pageID:"";
if(!_3f){
this.helpIcon.classList.add("is-not-displayed");
}else{
this.helpIconEnabled=true;
this.helpIcon.dataset.pageid=_41;
}
},displayHelp:function(e){
if(!e.keyCode||e.keyCode===13){
var _42=curam.config?curam.config.locale:jsL;
var url="./help.jsp?pageID="+this.helpIcon.dataset.pageid;
window.open(url);
}
},prepareAction:function(){
this.menuWatcher&&this.menuWatcher.remove();
this.formWatcher&&this.formWatcher.remove();
this.contentClickWatcher&&this.contentClickWatcher.remove();
!this.isIEGScript&&this.modalFooter.setAttribute("style","opacity:0.6;");
this.cleanupFooter=true;
this.btnRequestCont=0;
},actionEarly:function(){
this.prepareAction();
this.isContentAction=true;
},actionLate:function(){
this.prepareAction();
},actionWord:function(_43,evt){
this.isOwnAction=true;
this.wRef&&this.wRef.curam.util.clickButton(_43);
},actionSubmit:function(_44,evt){
this.isOwnAction=true;
this.actionEarly();
this.wRef&&this.wRef.curam.util.clickButton(_44);
this.isContentAction=false;
if(!this.preventAction){
dojo.publish("/curam/progress/display",[this.containerNode,100]);
}else{
this.modalFooter.removeAttribute("style");
}
},actionClick:function(evt,_45){
this.preventAction=false;
this.isOwnAction=true;
this.actionEarly();
var _46=this;
var _47;
if(_45){
_45(evt);
_47=setTimeout(function(){
clearTimeout(_47);
_46.modalFooter.removeAttribute("style");
},5000);
}else{
this.wRef&&this.wRef.curam.dialog.modalEventHandler(evt);
}
this.isContentAction=false;
var _48=evt.target.dataset&&evt.target.dataset.href;
if(_48&&_48.indexOf("FileDownload")>-1){
_47=setTimeout(function(){
dojo.publish("/curam/progress/unload");
clearTimeout(_47);
_46.modalFooter.removeAttribute("style");
},3000);
}
dojo.publish("/curam/progress/display",[this.containerNode]);
},actionCleanup:function(evt){
this.wRef&&(this.wRef.spm=null);
this.carbonModalController=null;
},_setClosableAttr:function(_49){
this.closeButton.setAttribute("style","display:"+(!!_49?"block":"none"));
},checkIfWizardModal:function(){
var _4a=this;
var _4b=this.tDojo.subscribe("/curam/CuramCarbonModal/wizardModalIndicator",this,function(){
_4a.isWizardModal=true;
_4a.modalFooter&&_4a.modalFooter.classList&&_4a.modalFooter.classList.add("bx--modal-footer--progress");
_4a.tDojo.unsubscribe(_4b);
});
},checkIfIEGModal:function(){
var _4c=this;
var _4d=this.tDojo.subscribe("/curam/CuramCarbonModal/iegModalIndicator",this,function(){
_4c.isIEGModal=true;
_4c.tDojo.unsubscribe(_4d);
});
},checkIfNonStandardModalButtons:function(){
var _4e=this;
var _4f=this.tDojo.subscribe("/curam/CuramCarbonModal/nonStandardModalFooter",this,function(_50){
if(_50){
if(_50.numButtons){
var _51=_50.numButtons;
if(_51==0){
var _52=this.iframe&&this.iframe.contentWindow.jsPageID;
if(_52){
curam.util.getTopmostWindow().dojo.global.passiveModalPageID=_52;
}
}else{
if(_51==1){
_4e.hasSingleModalButton=true;
}
}
_4e.hasMultipleButtons=(_51<=1);
}else{
if(_50.hasDefaultSubmitButton){
_4e.hasMultipleSubmitButtons=true;
}
}
}
_4e.tDojo.unsubscribe(_4f);
});
},updateWizardCancelStyle:function(){
var _53="bx--btn--secondary";
if(this.hasSingleModalButton){
_53="bx--btn--primary";
}
if(this.cancelButtonID!=null){
var _54=document.getElementById(this.cancelButtonID);
if(this.isWizardModal){
_53="bx--btn--ghost";
}
}
if(_54){
_54.classList.add(_53);
}
},updateRegularCancelStyle:function(){
var _55=false;
if(this.cancelButtonID!=null){
_55=document.getElementById(this.cancelButtonID);
}
if(_55){
if(_55.classList.contains("bx--btn--secondary")||_55.classList.contains("bx--btn--primary")){
return;
}else{
var _56="bx--btn--secondary";
if(this.hasSingleModalButton){
_56="bx--btn--primary";
}
_55.classList.add(_56);
}
}
},checkPrimaryButtonOnViewModal:function(){
if(this.primaryButtonOnViewModalID!=null){
return document.getElementById(this.primaryButtonOnViewModalID);
}
},show:function(_57){
if(!this.isIEGScript&&!this.isAgendaPlayer){
if(this.modalFooter.classList.contains("is-not-displayed")){
this.modalFooter.classList.remove("is-not-displayed");
}
}
this.manageModalFooterButtons();
if(this.isIEGScript||this.isWizardModal){
this.updateWizardCancelStyle();
}else{
this.updateRegularCancelStyle();
}
this.modalFooter.childNodes.forEach(function(btn){
btn.classList.remove("is-not-displayed");
});
var _58;
var _59=800;
var _5a=this.isIEGScript&&!curam.util.getTopmostWindow().exitingIEGScript;
this.isIEGScript=this.tlw.exitingIEGScript;
var _5b=this.modalFooter.children;
var _5c=this.modalContainerBaseModifier+this.modalSizeClassName;
if(this.isIEGScript){
var _5d=this.iframe.contentWindow.document.body.getElementsByTagName("FORM");
_58=_5d?_5d[0]:undefined;
if(_58&&_58.tagName=="FORM"){
!this.modalFooter.classList.contains("is-not-displayed")&&this.modalFooter.classList.add("is-not-displayed");
}
}else{
_58=this.iframe.contentWindow.document.querySelector("#content");
if(_5a){
if(this.modalFooter.classList.contains("is-not-displayed")){
this.modalFooter.classList.remove("is-not-displayed");
}
}
}
if(_58&&_58!=null){
_59=_58.scrollHeight;
}
if(_59){
var _5e=_59<this.modalContainer.scrollHeight?50:110;
var _5f=this.isIEGScript?_59:_59+_5e;
this.iframe.style.height=_5f+"px";
}
if(_58&&_58.style){
_58.style.position="relative";
_58.style.top="0px";
}
if(window.spm&&_58){
this.resizeController=new window.spm.helpers.ModalLayoutHelper(this.containerNode,this.uimController,this.iframe,_58,this.isIEGScript);
this.resizeController.register();
}
this.modalContainer.classList.add(_5c);
if(this.iframe){
this.iframe.classList.add("bx--modal-content__iframe-wrapper");
}
this.carbonModalNode.classList.add("is-visible");
!this.isIEGScript&&this.modalFooter.removeAttribute("style");
var _60=this.iframe&&this.iframe.contentWindow.jsPageID;
var _61=curam.util.getTopmostWindow().dojo.global.passiveModalPageID;
if(_60&&_61&&(_60==_61)){
if(!this.modalFooter.classList.contains("is-not-displayed")){
this.modalFooter.classList.add("is-not-displayed");
}
this.carbonInstantiatedNode=this.carbonModalController.create(this.carbonModalNode);
this.carbonInstantiatedNode.show();
}
this.isAlreadyShown=true;
},setModalSizeClassName:function(_62){
if(_62){
if(_62<=420){
this.modalSizeClassName="xs";
}else{
if(_62>420&&_62<=576){
this.modalSizeClassName="sm";
}else{
if(_62>768&&_62<1200){
this.modalSizeClassName="lg";
}else{
if(_62>=1200){
this.modalSizeClassName="xlg";
}
}
}
}
}
},manageModalFooterButtons:function(){
var _63=this;
this.preventAction=false;
if(!this.ipnWatcher){
this.ipnWatcher=asp.before(this.uimController,"handleIPNTabClick",function(tab){
_63.isIPNNav=true;
});
}
if(!this._isCDEJModal&&this.wRef){
this.menuWatcher=asp.before(this.wRef.curam.util,"clickHandlerForListActionMenu",function(){
_63.actionLate();
});
this.formWatcher=asp.after(this.wRef,"dc",function(_64){
if(_64){
_63.actionEarly();
}
return _64;
});
this.contentClickWatcher=asp.after(this.wRef,"clickMarker",function(_65){
_63.actionLate();
return _65;
});
}else{
if(this.iframeHref.indexOf("frequency-editor.jsp")>-1){
var _66=this.iframe.contentWindow;
var _67=function(_68){
_63.preventAction=!_68;
return _68;
};
this.fqWatchers.push(asp.after(_66.curam.util.FrequencyEditor,"validateDailyPattern",_67),asp.after(_66.curam.util.FrequencyEditor,"validateWeeklyPattern",_67),asp.after(_66.curam.util.FrequencyEditor,"validateBimonthlyData",_67),asp.after(_66.curam.util.FrequencyEditor,"validateMonthlyData",_67),asp.after(_66.curam.util.FrequencyEditor,"validateBimonthlyData",_67),asp.after(_66.curam.util.FrequencyEditor,"validateYearlyData",_67));
}
}
var _69=this.iframe.contentWindow.jsPageID;
this.actionSource=_69;
if(this.hasMultipleButtons){
this.modalFooter.classList.add("bx--btn-set");
}
this.hasSingleModalButton=(this.btnRequestCont==1);
this.isOwnAction=false;
this.isContentAction=false;
this.isIPNNav=false;
},hide:function(_6a){
if(!this.closingAlready){
this.closingAlready=true;
dojo.publish("/curam/progress/unload");
this.hideAndClose(_6a);
}
},escapeOnClose:function(evt){
if(evt.keyCode===27){
var _6b=this;
_6b.carbonModalNode.classList.remove("is-visible");
}
},hideAndClose:function(_6c){
if(curam.util.getTopmostWindow().dojo.global.focusSetOnCancelButton){
curam.util.getTopmostWindow().dojo.global.focusSetOnCancelButton=false;
}
curam.util.getTopmostWindow().dojo.global.passiveModalPageID=undefined;
this.fqWatchers&&this.fqWatchers.splice(0,this.fqWatchers.length);
curam.debug.log("curam.modal.CuramBaseModal._modalClosedHandler calling curam.util.setBrowserTabTitle");
if(this.parentWindow){
curam.util.setBrowserTabTitle(this.parentWindow.document.title);
if(this.iframe&&this.iframe.contentWindow){
var _6d=this.iframe.contentWindow.__customEventSubscriptions;
if(_6d){
for(var x=0;x<_6d.length;x++){
this.unsubscribes.push(_6d[x]);
}
}
}
}else{
curam.util.setBrowserTabTitle();
}
this.tDojo.publish("/curam/dialog/BeforeClose",[this.id,this.iframe.id]);
this.tDojo.unsubscribe(this.addButttonEvent);
if(this._scrollConnected){
this._scrollConnected=false;
}
if(this._relativePosition){
delete this._relativePosition;
}
curam.dialog.removeFromDialogHierarchy(this.iframe.contentWindow);
curam.dialog.removeFromDialogHierarchy(this.parentWindow);
dojo.forEach(this.modalconnects,dojo.disconnect);
this.modalconnects&&this.modalconnects.splice(0,this.modalconnects.length);
dojo.forEach(this.unsubscribes,this.tDojo.unsubscribe);
this.unsubscribes&&this.unsubscribes.splice(0,this.unsubscribes.length);
_39.removeSubscriber(this._getEventIdentifier(),this.onLoadSubsequentHandler);
if(this._explodeNode&&this._explodeNode.parentNode){
this._explodeNode.parentNode.removeChild(this._explodeNode);
}
this.tDojo.publish("/curam/dialog/close/appExitConfirmation",[this.id]);
this._markAsActiveDialog(false);
if(typeof this.parentWindow!="undefined"&&this.parentWindow!=null){
this.parentWindow.focus();
}
if(_6c&&!_6c instanceof Event){
this.tlw.modalsToDestroy.push(_6c);
}else{
this.tlw.modalsToDestroy.push(this.modalSPMComponentRoot.id);
}
sessionStorage.removeItem("firstPageHitAfterModalOpened");
this.carbonModalNode.classList.remove("is-visible");
this.parentWindow&&curam.util.returnFocusToPopupActionAnchorElement(this.parentWindow);
},_destroyOldModals:function(){
if(this.tlw.modalsToDestroy){
var mId=null;
while((mId=this.tlw.modalsToDestroy.pop())!=null){
var _6e=document.querySelector("#"+mId);
if(_6e&&_6e.parentNode!=null){
_6e.parentNode.removeChild(_6e);
_6e=null;
}
}
this.tlw.modalsToDestroy.splice(0,this.tlw.modalsToDestroy.length);
}
},preventForwardsTabEscFromModal:function(e){
var _6f=this.modalSPMComponentRoot.id;
var _70=this.helpIconEnabled?"_modal-help":"_modal-button-close";
var _71=document.getElementById(_6f+_70);
this.handleTabbingForwards(e,_71);
},preventBackwardsTabEscFromModal:function(e){
var _72=this.modalSPMComponentRoot.id;
var _73="modal-end_"+_72;
var _74=_72+"_modal-help";
this.handleTabbingBackwards(e,_74,_73);
},handleSubmitBtnStyling:function(_75,_76){
var _77=" bx--btn--primary";
if(_76&&!_75){
_77=" bx--btn--secondary";
}
return _77;
},buildButtonHTML:function(_78,_79,_7a){
var _7b=_7a!=undefined?_78+_79+"='"+_7a+"'":_78;
return _7b;
},createHTMLFromButtonJson:function(_7c){
htmlString="";
htmlString=this.buildButtonHTML(htmlString,"data-href",_7c.href);
htmlString=this.buildButtonHTML(htmlString,"keepmodal",_7c.keepmodal);
htmlString=this.buildButtonHTML(htmlString,"accesskey",_7c.accesskey);
htmlString=this.buildButtonHTML(htmlString,"onmouseover",_7c.onmouseover);
htmlString=this.buildButtonHTML(htmlString,"onmouseout",_7c.onmouseout);
htmlString=this.buildButtonHTML(htmlString,"buttonid",_7c.buttonid);
htmlString=this.buildButtonHTML(htmlString,"data-control",_7c.datacontrol);
return htmlString;
},indciatesCancelButton:function(_7d){
var _7e=curam.util.Constants.RETURN_PAGE_PARAM;
var _7f=(_7d!=undefined);
var _80=_7f&&(_7d.length==1)&&(_7d.indexOf("#")!=-1);
if(_7f&&(_7d.length==0||_7d.indexOf("keepModal=")==-1&&_7d.indexOf(_7e+"=")==-1)&&!_80){
return true;
}
return false;
},postMixInProperties:function(){
this.inherited(arguments);
this.tlw=curam.util.getTopmostWindow();
this.tDojo=this.tlw.dojo;
},enableDraggableHookpoint:function(_81){
try{
require(["curam/application/modal/ModalHooks"],function(_82){
_82.enableDraggableModals(_81);
});
}
catch(e){
curam.debug.log("WARNING: The file curam.util.modal.ModalHooks.js is not found");
}
},postCreate:function(){
this.inherited(arguments);
this.agendaGuard=this.tDojo.subscribe("agenda/buttons/loaded",(function(){
this.modalFooter&&this.modalFooter.classList.add("is-not-displayed");
this.isAgendaPlayer=true;
}).bind(this));
this.carbonModalController=spm.Modal;
this.initModal(arguments);
this.tlw.modalsToDestroy=[];
this.modalSPMComponentRoot=this.carbonModalNode.parentNode;
document.body.appendChild(this.modalSPMComponentRoot);
this.rootNode=document.getElementById(this.modalSPMComponentRoot.id);
var _83=this;
this.enableDraggableHookpoint(this.rootNode.firstElementChild);
this.checkIfWizardModal();
this.checkIfNonStandardModalButtons();
this.checkIfIEGModal();
var _84=this.tDojo.subscribe("/curam/CuramCarbonModal/redirectingModal",this,(function(){
this.isRedirectModal=true;
}).bind(this));
var _85=this.carbonModalController.options.eventAfterHidden;
document.addEventListener(_85,(function(evt){
evt.stopPropagation();
this.hideAndClose();
}).bind(this));
this.setModalSizeClassName(this.width);
var _86=0;
this.addButttonEvent=this.tDojo.subscribe("/curam/CuramCarbonModal/addModalButton",this,function(_87,_88,_89,_8a,_8b){
if(this.iframe.contentWindow.jsPageID!==_8b.jsPageID){
return;
}
if(this.isIPNNav){
return;
}
if(_87&&!typeof _87==="object"){
throw new Error(_87+" is not a valid object for this button");
}
if(this.isRedirectModal){
this.hasSingleModalButton=undefined;
}
this.wRef=_8b;
var _8c=false;
if(_87.buttonid&&_87.buttonid=="commitDocChangesBtnIE"){
this.isOwnAction=true;
_8c=true;
}
this.btnRequestCont+=1;
if(!this.isOwnAction){
if(!this._isCDEJModal&&!this.isContentAction&&this.actionSource==_8b.jsPageID){
this.btnRequestCont=0;
return;
}else{
if(this.cleanupFooter){
this.modalFooter.innerHTML="";
this.cleanupFooter=false;
}
}
}else{
if(this.cleanupFooter){
this.modalFooter.innerHTML="";
this.cleanupFooter=false;
}
}
var _8d=_87&&_87.buttonid?_87.buttonid:this.modalSPMComponentRoot.id+"_modal-button_"+_86;
if(this.hasSingleModalButton){
this.primaryButtonOnViewModalID=_8d;
}
var _8e=this.hasSingleModalButton?" bx--btn--primary":" bx--btn--secondary";
var _8f=_87&&_87.href;
if(this.indciatesCancelButton(_8f)){
this.cancelButtonID=_8d;
_8e="";
if(this.isAlreadyShown){
_8e=this.isWizardModal&&!this.hasSingleModalButton?" bx--btn--ghost":_8e;
}
}
var _90=this.handleSubmitBtnStyling(_8a,this.hasMultipleSubmitButtons);
var _91=_89?_90:_8e;
var _92=_87?this.createHTMLFromButtonJson(_87)+">":">";
var _93=_34.toDom("<button "+_92+_88+"</button>");
_93.setAttribute("type","button");
_93.setAttribute("tabIndex","0");
if(_87.dataTestId&&_87.dataTestId!==null){
_93.setAttribute("data-testid",_87.dataTestId);
}
_93.setAttribute("id",_8d);
("bx--btn"+_91).split(" ").forEach(function(cls){
_93.classList.add(cls);
});
this.isRedirectModal&&!_93.classList.contains("is-not-displayed")&&_93.classList.add("is-not-displayed");
if(!_89){
_93.addEventListener("click",function(e){
e.preventDefault();
e.stopPropagation();
if(_83.wRef&&_87&&_87.onclick){
_83.actionClick(e,_83.wRef.Function(_87.onclick));
}else{
_83.actionClick(e);
}
});
_93.addEventListener("keydown",function(e){
if(e.keyCode===27){
e.stopPropagation();
_83.carbonModalNode.classList.remove("is-visible");
}
});
}else{
var _94=_89.id;
if(_8c){
_93.addEventListener("click",function(e){
e.preventDefault();
e.stopPropagation();
_83.actionWord(_94,e);
});
_93.addEventListener("keydown",function(e){
if(e.keyCode===27){
e.preventDefault();
e.stopPropagation();
_83.hideAndClose();
}
});
}else{
_93.addEventListener("click",function(e){
e.preventDefault();
e.stopPropagation();
_83.actionSubmit(_94,e);
});
}
this.wRef.dojo.subscribe("curam/CarbonWrapper/cleanup",function(e){
_83.actionCleanup();
});
_93.addEventListener("keydown",function(e){
if(e.keyCode===27){
e.preventDefault();
e.stopPropagation();
_83.hideAndClose();
}
});
}
_34.place(_93,this.modalFooter);
_86++;
});
this.containerNode.appendChild(this.uimController.domNode);
this.unsubscribes.push(curam.util.getTopmostWindow().dojo.subscribe("/curam/dialog/spinner",function(e){
_83._displaySpinner(_83);
}));
},initModal:function(_95){
this._destroyOldModals();
this._verticalModalSpace=100;
this.draggable=false;
var _96=0.9;
this.maximumWidth=(dijit.getViewport().w*_96)-this._horizontalModalSpace;
this.maximumHeight=(dijit.getViewport().h*_96)-this._verticalModalSpace;
this.unsubscribes=[];
this.modalconnects=[];
this._isCDEJModal=(this.iframeHref.indexOf("CDEJ/popups")>-1||this.iframeHref.indexOf("frequency-editor.jsp")>-1||this.iframeHref.indexOf("user-pref")>-1);
this._initParentWindowRef();
curam.dialog.pushOntoDialogHierarchy(this.parentWindow||this.tlw);
this._registerInitListener();
var _97=dojo.subscribe("/curam/dialog/iframeUnloaded",this,function(_98,_99){
if(this.id==_98){
curam.dialog.removeFromDialogHierarchy(_99);
this.initDone=false;
this._registerInitListener();
}
});
this.unsubscribes.push(_97);
curam.util.getTopmostWindow().dojo.global.passiveModalPageID=undefined;
var _9a=(function(_9b,_9c){
_39.removeSubscriber(this._getEventIdentifier(),_9a);
curam.dialog.pushOntoDialogHierarchy(this.iframe.contentWindow);
this._determineSize(_9c);
if(!this.isRegisteredForClosing){
this.unsubscribes.push(this.tDojo.subscribe("/curam/dialog/close",this,function(_9d){
if(this.id==_9d){
this.hide();
this.menuWatcher&&this.menuWatcher.remove();
this.formWatcher&&this.formWatcher.remove();
this.contentClickWatcher&&this.contentClickWatcher.remove();
this.ipnWatcher.remove();
this.resizeController&&this.resizeController.reset();
this.resizeController=null;
this.tDojo.unsubscribe(this.agendaGuard);
this.agendaGuard=null;
if(this.wRef){
this.wRef.dojo.publish("curam/CarbonWrapper/cleanup");
this.wRef=null;
}
wRef=null;
this.iframe.setAttribute("src","");
this.iframe=null;
delete this.parentWindow;
this.uimController.destroyRecursive(false);
delete this.uimController;
this.destroyRecursive(false);
window.webpackJsonpspm=null;
}
}));
this.isRegisteredForClosing=true;
}
this.doShow(_9c);
this._notifyModalDisplayed();
}).bind(this);
_39.addSubscriber(this._getEventIdentifier(),_9a);
if(this._isCDEJModal){
_39.addSubscriber(this._getEventIdentifier(),function(_9e,_9f){
var _a0=document.querySelector("#"+_9e);
if(_a0){
_a0.focus();
_a0.contentWindow.focusFirst&&_a0.contentWindow.focusFirst();
}
});
}
var _a1=true;
this.onLoadSubsequentHandler=(function(_a2,_a3){
if(_a1){
_a1=false;
}else{
if(!_a3.modalClosing){
curam.dialog.pushOntoDialogHierarchy(this.iframe.contentWindow);
this._determineSize(_a3);
this._position(true);
this.doShow(_a3);
this._notifyModalDisplayed();
}
}
var _a4=document.querySelector("#"+_a2);
_a4&&_a4.setAttribute("title",[LOCALISED_MODAL_FRAME_TITLE,_a4.contentWindow.document.title].join(" - "));
}).bind(this);
_39.addSubscriber(this._getEventIdentifier(),this.onLoadSubsequentHandler);
this.unsubscribes.push(this.tDojo.subscribe("/curam/dialog/iframeFailedToLoad",this,function(_a5){
if(this.id==_a5){
_39.removeSubscriber(this._getEventIdentifier(),_9a);
this._determineSize({height:450,title:"Error!"});
this.doShow();
this._notifyModalDisplayed();
}
}));
this.unsubscribes.push(this.tDojo.subscribe("/curam/dialog/displayed",this,function(){
curam.util._setModalCurrentlyOpening(false);
}),this.tDojo.subscribe("/curam/dialog/displayed",this,this._setFocusHandler),this.tDojo.subscribe("/curam/dialog/displayed",this,function(_a6){
(_a6==this.id)&&this.tDojo.publish("/curam/dialog/AfterDisplay",[_a6]);
}));
var _a7=function(_a8){
return _a8.indexOf(":")>0;
};
var _a9=_a7(this.iframeHref)?this.iframeHref:this._getBaseUrl(this.tlw.location.href)+jsL+"/"+this.iframeHref;
this.uimController=new _38({uid:this.id,url:_a9,loadFrameOnCreate:false,inDialog:true,iframeId:this._getEventIdentifier(),width:this._calculateWidth(this.width)+"px",height:this.maximumHeight+"px"});
this.iframe=this.uimController.getIFrame();
this.set("content",this.uimController.domNode);
this.iframe.classList.add(this._getEventIdentifier());
this.unsubscribes.push(this.tDojo.subscribe("/curam/dialog/displayed",this,this._modalDisplayedHandler),this.tDojo.subscribe("/curam/dialog/closed",this,this._modalClosedHandler));
this._registerOnIframeLoad(this._loadErrorHandler.bind(this));
this.uimController.loadPage();
},_initParentWindowRef:function(){
if(!this.parentWindow){
var _aa=curam.tab.getContentPanelIframe();
_aa&&(this.parentWindow=_aa.contentWindow);
}else{
this.inherited(arguments);
}
}});
});
},"curam/UIMController":function(){
define(["dojo/text!curam/layout/resources/UIMController.html","dojo/_base/declare","dijit/_Widget","dijit/_Templated","dijit/layout/ContentPane","curam/inspection/Layer","curam/tab","curam/debug","dojo/dom-style","dojo/dom-attr","curam/util","curam/util/onLoad"],function(_ab,_ac,_ad,_ae,_af,_b0,tab,_b1,_b2,_b3){
var _b4=_ac("curam.UIMController",[dijit._Widget,dijit._Templated],{TAB_HEIGHT:20,EVENT:{TOPIC_PREFIX:"UIMController.InPageNav_"},TOPIC_LOADED:"/curam/uim/controller/loaded",frameLoadEvent:"",uid:"",url:"",tabControllerId:"",oldTabsTitlesList:[],newTabsTitlesList:[],widgetsInTemplate:true,finishedLoadingTabs:false,classList:"",iframeId:"",height:"",width:"",iframeClassList:"",iscpiframe:"false",ipnTabClickEvent:null,title:"",handleIPNTabClickListener:null,inPageNavItems:null,loadFrameOnCreate:true,resizeFrameOnLoad:false,templateString:_ab,inDialog:false,constructor:function(_b5){
if(!_b5.uid){
throw "'uid' attribute not provided to constructor for"+" curam.UIMController(url,uid)";
}
this.uid="uimcontroller_"+_b5.uid;
this.tabControllerId="uimcontroller_tc_"+_b5.uid;
this.newTabsTitlesList=[];
this.ipnTabClickEvent=this.tabControllerId+"-selectChild";
if(this.height==""){
this.height="99%";
}
if(this.width==""){
this.width="99%";
}
curam.debug.log(_b1.getProperty("curam.UIMController.new")+" curam.UIMController()...");
curam.debug.log("curam.UIMController "+_b1.getProperty("curam.UIMController.identifier")+" "+this.uid);
curam.debug.log("curam.UIMController "+_b1.getProperty("curam.UIMController.url")+" "+this.url);
curam.debug.log("curam.UIMController "+_b1.getProperty("curam.UIMController.identifier")+" "+this.tabControllerId);
curam.debug.log("curam.UIMController: newTabsTitlesList "+" "+this.newTabsTitlesList);
_b0.register("curam/UIMController",this);
return this.uimController;
},postCreate:function(){
if(jsScreenContext.hasContextBits("EXTAPP")){
_b3.set(this.domNode,"style",{"height":this.height,"width":this.width});
}
curam.debug.log("UIMController Height: "+_b2.get(this.domNode,"height"));
curam.debug.log("UIMController Width: "+_b2.get(this.domNode,"width"));
this.frameLoadEvent=this.EVENT.TOPIC_PREFIX+this.frame.id;
this.setURL(this.url);
var _b6=dojo.hitch(this,"processFrameLoadEvent");
curam.util.onLoad.addSubscriber(this.frame.id,_b6);
dojo.connect(this,"destroy",function(){
curam.util.onLoad.removeSubscriber(this.iframeId,_b6);
this.fLoadFunct=null;
});
if(jsScreenContext.hasContextBits("EXTAPP")){
if(this.inDialog){
_b2.set(this.frame,{width:this.width,height:this.height});
}
}
curam.debug.log("curam.UIMController: loadFrameOnCreate="+this.loadFrameOnCreate);
curam.debug.log("curam.UIMController "+_b1.getProperty("curam.UIMController.url")+this.url);
if(this.loadFrameOnCreate==true&&typeof (this.url)!="undefined"){
curam.debug.log("curam.UIMController: "+_b1.getProperty("uram.UIMController.loading"));
this.loadPage();
}
},setURL:function(url){
if(url.indexOf("Page.do")==-1){
this.absoluteURL=true;
this.url=url;
}else{
this.absoluteURL=false;
this.url=this._trimURL(url);
}
},processFrameLoadEvent:function(_b7,_b8){
curam.debug.log("curam.UIMController: processFrameLoadEvent "+_b1.getProperty("curam.UIMController.processing.IPN")+_b8);
this.inPageNavItems=_b8.inPageNavItems;
curam.debug.log("curam.UIMController: processFrameLoadEvent: "+_b1.getProperty("curam.UIMController.processing"));
curam.debug.log("curam.UIMController.processFrameLoadEvent: this.tabController: "+this.tabController);
if(this.resizeFrameOnLoad==true){
var _b9=_b8.height;
curam.debug.log(_b1.getProperty("curam.UIMController.resizing")+_b9);
if(_b9){
_b2.set(this.getIFrame(),{height:_b9+"px"});
}
}
curam.debug.log(_b1.getProperty("curam.UIMController.IPN.items")+JSON.stringify(this.inPageNavItems));
if(!this.hasInPageNavigation()){
curam.debug.log(_b1.getProperty("curam.UIMController.no.IPN"));
this.clearIPNTabs();
if(!this._tabControllerHidden()){
curam.debug.log(_b1.getProperty("curam.UIMController.hiding"));
this.showTabContainer(false);
}
dojo.publish(this.TOPIC_LOADED);
if(this.inDialog===false){
curam.debug.log("curam.UIMController.processFrameLoadEvent calling curam.util.setBrowserTabTitle");
curam.util.setBrowserTabTitle();
}
return;
}
curam.debug.log(_b1.getProperty("curam.UIMController.extract"));
var _ba=-1;
for(var i=0;i<this.inPageNavItems.length;i++){
this.newTabsTitlesList.push(this.inPageNavItems[i].title);
if(this.inPageNavItems[i].selected==true){
_ba=i;
}
curam.debug.log(_b1.getProperty("curam.UIMController.IPN.")+"["+this.inPageNavItems[i].title+", "+this.inPageNavItems[i].href+", "+this.inPageNavItems[i].selected+"]");
}
var _bb=!(this.compareLists(this.oldTabsTitlesList,this.newTabsTitlesList));
if(_bb){
this.clearIPNTabs(this);
this.createIPNTabs(this.inPageNavItems);
if(this._tabControllerHidden()){
this.showTabContainer(true);
}
}else{
curam.debug.log(_b1.getProperty("curam.UIMController.no.change"));
if(_ba>-1){
var _bc=this.tabController.getIndexOfChild(this.tabController.selectedChildWidget);
if(_bc!=_ba){
curam.debug.log(_b1.getProperty("curam.UIMController.change")+_bc+_b1.getProperty("curam.UIMController.to")+_ba);
this.toggleIPNTabClickEventListener("off");
this.tabController.selectChild(this.tabController.getChildren()[_ba]);
this.toggleIPNTabClickEventListener("on");
}
}
}
this.newTabsTitlesList=[];
curam.debug.log(_b1.getProperty("curam.UIMController.clear")+this.newTabsTitlesList);
this.finishedLoadingTabs=true;
dojo.publish(this.TOPIC_LOADED);
dojo.publish("/curam/tab/labelUpdated");
},_tabControllerHidden:function(){
return _b2.get(this.tabController.domNode,"display")=="none";
},toggleIPNTabClickEventListener:function(_bd){
if(_bd=="off"){
if(this.handleIPNTabClickListener!=null){
curam.debug.log(_b1.getProperty("curam.UIMController.off.listener"));
dojo.unsubscribe(this.handleIPNTabClickListener);
}
}else{
curam.debug.log(_b1.getProperty("curam.UIMController.on.listener"));
this.handleIPNTabClickListener=this.subscribe(this.ipnTabClickEvent,dojo.hitch(this,this.handleIPNTabClick));
}
},handleIPNTabClick:function(tab){
if(this.finishedLoadingTabs){
curam.debug.log(_b1.getProperty("curam.UIMController.finishing"));
this.finishedLoadingTabs=false;
this.setURL(this._getURLByTitle(tab.title));
this.loadPage();
}
},createIPNTabs:function(_be){
this.toggleIPNTabClickEventListener("off");
if(!this.tabController){
console.error("curam.UIMController.createIPNTabs: "+_b1.getProperty("uram.UIMController.no.widget")+" '"+this.tabControllerId+"'");
}else{
curam.debug.log("curam.UIMController.createIPNTabs: "+_b1.getProperty("curam.UIMController.creating.tabs")+_be);
var _bf=null;
for(var i=0;i<_be.length;i++){
var cp=new dijit.layout.ContentPane({title:_be[i].title});
this.tabController.addChild(cp);
if(_be[i].selected==true||_bf==null){
_bf=cp;
}
this.oldTabsTitlesList.push(_be[i].title);
curam.debug.log("curam.UIMController.createIPNTabs: "+_b1.getProperty("curam.UIMController.adding.tabs")+_be[i].title);
}
this.tabController.startup();
this.tabController.selectChild(_bf);
}
this.toggleIPNTabClickEventListener("on");
this.newTabsTitlesList=[];
},clearIPNTabs:function(){
var _c0=false;
curam.debug.log("curam.UIMController.clearIPNTabs: "+_b1.getProperty("curam.UIMController.clearing.tabs")+this.oldTabsTitlesList);
this.toggleIPNTabClickEventListener("off");
try{
this.tabController.destroyDescendants();
}
catch(e){
curam.debug.log("curam.UIMController.clearIPNTabs - this.tabController.destroyDescendants(): "+_b1.getProperty("curam.UIMController.clear.warning"));
_c0=true;
}
this.tabController.selectedChildWidget=null;
this.oldTabsTitlesList=[];
this.toggleIPNTabClickEventListener("on");
if(!_c0){
curam.debug.log("curam.UIMController.createIPNTabs: "+_b1.getProperty("curam.UIMController.clearing.notify")+this.oldTabsTitlesList);
}
},compareLists:function(_c1,_c2){
curam.debug.log("curam.UIMController.compareLists: "+_b1.getProperty("curam.UIMController.comparing.tabs"));
curam.debug.log(_b1.getProperty("curam.UIMController.tab.list1")+_c1);
curam.debug.log(_b1.getProperty("curam.UIMController.tab.list1")+_c2);
var _c3=true;
if(_c1.length!=_c2.length){
_c3=false;
}
for(var i=0;i<_c1.length;i++){
if(_c1[i]!=_c2[i]){
_c3=false;
}
}
curam.debug.log(_b1.getProperty("curam.UIMController.result")+_c3);
return _c3;
},_getURLByTitle:function(_c4){
var url=null;
dojo.forEach(this.inPageNavItems,function(_c5){
if(_c5.title==_c4){
url=_c5.href;
}
});
curam.debug.log(url);
return url;
},_trimURL:function(_c6){
var idx=_c6.lastIndexOf("/");
if(idx>-1&&idx<=_c6.length){
return _c6.substring(idx+1);
}else{
return _c6;
}
},hasInPageNavigation:function(){
return this.inPageNavItems!=null;
},getIFrame:function(){
return this.frame;
},loadPage:function(_c7){
if(typeof (this.url)=="undefined"||this.url==null){
var e=new Error("curam.UIMController: Cannot load page as URL has not been set");
if(_c7){
_c7.errback(e);
}
throw e;
}
if(_c7){
var st=curam.util.subscribe(this.TOPIC_LOADED,function(){
curam.util.unsubscribe(st);
_c7.callback();
});
}
var _c8=this._getFullURL();
curam.debug.log("curam.UIMController.loadPage(): "+_b1.getProperty("curam.UIMController.set.source")+this.frame.id+" to url: "+_c8);
_b3.set(this.frame,"src",_c8);
},_getFullURL:function(){
if(typeof (this.absoluteURL)!="undefined"&&this.absoluteURL==true){
return this.url;
}
var _c9;
if(this.url.indexOf("?")==-1){
_c9="?";
}else{
_c9="&";
}
var _ca=curam.config?curam.config.locale:jsL;
var _cb="";
if(window==curam.util.getTopmostWindow()){
_cb=_ca+"/";
}
if(this.url.indexOf("o3nocache=")==-1){
return _cb+this.url+_c9+curam.util.getCacheBusterParameter();
}else{
return _cb+this.url;
}
},showTabContainer:function(_cc){
if(_cc&&!this.hasInPageNavigation()){
curam.debug.log(_b1.getProperty("curam.UIMController.ignore.reuest"));
return;
}
_b2.set(this.frameWrapper,"top",(_cc?this.TAB_HEIGHT+7:"0")+"px");
_b2.set(this.tabController.domNode,"display",_cc?"block":"none");
if(this.hasInPageNavigation()){
_b2.set(this.tabController.domNode.parentNode,"overflow","visible");
}
if(_cc){
this.tabController.resize();
}
},setDimensionsForModalDialog:function(w,h,_cd){
curam.debug.log("curam.UIMController:setDimensionsForModalDialog() - "+"w="+w+", h="+h);
_b2.set(this.frame,{width:w,height:h});
_b2.set(this.tabController.domNode,{width:w});
if(typeof (_cd.inPageNavItems)!="undefined"){
h+=this.TAB_HEIGHT+5;
curam.debug.log("cura.UIMController:setDimensionsForModalDialog() - "+_b1.getProperty("curam.UIMController.height"));
}
_b2.set(this.domNode,{width:w,height:h});
},destroy:function(){
this.iframe=null;
this.inPageNavItems=null;
dojo.unsubscribe(this.handleIPNTabClickListener);
this.tabController.destroy();
this.inherited(arguments);
}});
return _b4;
});
},"curam/util/ui/form/renderer/TextEditRendererFormEventsAdapter":function(){
define(["dojo/_base/declare","curam/util/ui/form/renderer/GenericRendererFormEventsAdapter"],function(_ce,_cf){
var _d0=_ce("curam.util.ui.form.renderer.TextEditRendererFormEventsAdapter",_cf,{setFormElementValue:function(_d1){
this.element.value=_d1;
},getFormElementValue:function(){
return this.getFormElement().value;
},});
return _d0;
});
},"curam/ajax":function(){
define(["curam/util/Request"],function(_d2){
var _d3=function(_d4,_d5){
this.target=_d4;
this.inputProvider=_d5||"null";
};
var _d6={doRequest:function(_d7,_d8,_d9,_da){
var _db="../servlet/JSONServlet";
var _dc=this;
if(_d9){
_db="../"+_db;
}
var _dd={caller:this.target.id,operation:_d7,inputProvider:this.inputProvider,args:_d8};
function _de(_df,_e0){
_df=dojo.fromJson(_df);
if(_df instanceof Array){
if(_df.length>1){
if(_e0=="getCodeTableSubset"){
_dc.fillCTWithBlank(_df);
}else{
_dc.fillCT(_df);
}
}else{
if(_e0=="getCodeTableSubset"){
_dc.fillCTWithBlank(_df);
}else{
_dc.fillSingle(_df,true);
}
}
}else{
_dc.fillSingle(_df);
}
};
_d2.post({url:_db,handleAs:"text",load:function(_e1,evt){
_de(_e1,_d7);
},error:function(){
alert("error");
},content:{"content":dojo.toJson(_dd)},preventCache:true,sync:_da});
},fillCT:function(_e2){
this.target.options.length=0;
for(var i=0;i<_e2.length;i++){
this.target.options[i]=new Option(_e2[i]["descr"],_e2[i]["code"],_e2[i]["default"]);
}
},fillCTWithBlank:function(_e3){
this.target.options.length=0;
this.target.options[0]=new Option("");
for(var i=0;i<_e3.length;i++){
this.target.options[i+1]=new Option(_e3[i]["descr"],_e3[i]["code"]);
}
},fillSingle:function(_e4,_e5){
if(_e5){
this.target.value=_e4[0]["value"];
}else{
this.target.value=_e4["value"];
}
}};
dojo.mixin(_d3.prototype,_d6);
dojo.global.AJAXCall=_d3;
return _d3;
});
},"curam/util/Request":function(){
define(["dojo/_base/xhr","curam/debug","curam/util/ResourceBundle","curam/inspection/Layer","curam/util/LocalConfig"],function(xhr,_e6,_e7,_e8,_e9){
var _ea=new _e7("curam.application.Request");
_isLoginPage=null,isLoginPage=function(_eb){
if(_isLoginPage){
return _isLoginPage(_eb);
}else{
return _eb.responseText.indexOf("action=\"j_security_check\"")>0;
}
},errorDisplayHookpoint=function(err,_ec){
if(isLoginPage(_ec.xhr)){
_e6.log(_ea.getProperty("sessionExpired"));
}else{
_e6.log(_ea.getProperty("ajaxError"));
}
_e6.log(err);
_e6.log("HTTP status was: "+_ec.xhr.status);
},_xhr=function(_ed,_ee){
var _ef=_e9.readOption("ajaxDebugMode","false")=="true";
var _f0=_ee.error;
if(_ef){
_ee.error=function(err,_f1){
if(_ee.errorHandlerOverrideDefault!==true){
errorDisplayHookpoint(err,_f1);
}
if(_f0){
_f0(err,_f1);
}
};
}
var _f2=_ed(_ee);
return _f2;
};
var _f3={post:function(_f4){
return _xhr(xhr.post,_f4);
},get:function(_f5){
return _xhr(xhr.get,_f5);
},setLoginPageDetector:function(_f6){
_isLoginPage=_f6;
},checkLoginPage:function(_f7){
return isLoginPage(_f7);
}};
_e8.register("curam/util/Request",_f3);
return _f3;
});
},"curam/widget/DropDownButton":function(){
define(["dojo/_base/declare","dojo/text!curam/widget/templates/DropDownButton.html","dijit/form/DropDownButton","curam/widget/_HasDropDown"],function(_f8,_f9){
var _fa=_f8("curam.widget.DropDownButton",[dijit.form.DropDownButton,curam.widget._HasDropDown],{templateString:_f9});
return _fa;
});
},"cm/_base/_form":function(){
define([],function(){
var cm=dojo.global.cm||{};
dojo.global.cm=cm;
dojo.mixin(cm,{checkAll:function(_fb,_fc){
cm.query("input[type='checkbox']",_fc).forEach("item.checked = "+(_fb?"true":"false"));
},setFormSubmitted:function(_fd,_fe){
_fd._alreadySubmitted=_fe;
},wasFormSubmitted:function(_ff){
return _ff._alreadySubmitted;
},getFormItems:function(){
if(cm._formItems){
return cm._formItems;
}
var _100=dojo.query("input[name='__o3fmeta']");
var data=_100.length>0?dojo.fromJson(_100[0].value):{};
var _101=[];
for(var x in data){
_101.push(x);
}
cm._formItems=new function(){
this.length=function(){
return _101.length;
};
this.getNames=function(){
return _101;
};
this.getInputs=function(_102){
var _103=[];
dojo.forEach(_101,function(name,_104){
if(!_102||this.isMandatory(_104)){
_103.push("[name='"+name+"']");
}
},this);
return _103.length>0?dojo.query(_103.join(",")):[];
};
function fn(_105){
return function(_106){
var d=data[dojo.isString(_106)?_106:_101[_106]];
return d?d[_105]:null;
};
};
this.getTargetPath=fn(0);
this.getLabel=fn(1);
this.getDomain=fn(2);
this.isMandatory=fn(3);
};
return cm._formItems;
}});
return cm;
});
},"dijit/MenuBar":function(){
define(["dojo/_base/declare","dojo/keys","./_MenuBase","dojo/text!./templates/MenuBar.html"],function(_107,keys,_108,_109){
return _107("dijit.MenuBar",_108,{templateString:_109,baseClass:"dijitMenuBar",popupDelay:0,_isMenuBar:true,_orient:["below"],_moveToPopup:function(evt){
if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled){
this.onItemClick(this.focusedChild,evt);
}
},focusChild:function(item){
this.inherited(arguments);
if(this.activated&&item.popup&&!item.disabled){
this._openItemPopup(item,true);
}
},_onChildDeselect:function(item){
if(this.currentPopupItem==item){
this.currentPopupItem=null;
item._closePopup();
}
this.inherited(arguments);
},_onLeftArrow:function(){
this.focusPrev();
},_onRightArrow:function(){
this.focusNext();
},_onDownArrow:function(evt){
this._moveToPopup(evt);
},_onUpArrow:function(){
},onItemClick:function(item,evt){
if(item.popup&&item.popup.isShowingNow&&(!/^key/.test(evt.type)||evt.keyCode!==keys.DOWN_ARROW)){
item.focusNode.focus();
this._cleanUp(true);
}else{
this.inherited(arguments);
}
}});
});
},"dijit/Viewport":function(){
define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(_10a,on,_10b,has,_10c){
var _10d=new _10a();
var _10e;
_10b(function(){
var _10f=_10c.getBox();
_10d._rlh=on(window,"resize",function(){
var _110=_10c.getBox();
if(_10f.h==_110.h&&_10f.w==_110.w){
return;
}
_10f=_110;
_10d.emit("resize");
});
if(has("ie")==8){
var _111=screen.deviceXDPI;
setInterval(function(){
if(screen.deviceXDPI!=_111){
_111=screen.deviceXDPI;
_10d.emit("resize");
}
},500);
}
if(has("ios")){
on(document,"focusin",function(evt){
_10e=evt.target;
});
on(document,"focusout",function(evt){
_10e=null;
});
}
});
_10d.getEffectiveBox=function(doc){
var box=_10c.getBox(doc);
var tag=_10e&&_10e.tagName&&_10e.tagName.toLowerCase();
if(has("ios")&&_10e&&!_10e.readOnly&&(tag=="textarea"||(tag=="input"&&/^(color|email|number|password|search|tel|text|url)$/.test(_10e.type)))){
box.h*=(orientation==0||orientation==180?0.66:0.4);
var rect=_10e.getBoundingClientRect();
box.h=Math.max(box.h,rect.top+rect.height);
}
return box;
};
return _10d;
});
},"dijit/Dialog":function(){
define(["require","dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/Deferred","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/fx","dojo/i18n","dojo/keys","dojo/_base/lang","dojo/on","dojo/ready","dojo/sniff","dojo/window","dojo/dnd/Moveable","dojo/dnd/TimedMoveable","./focus","./_base/manager","./_Widget","./_TemplatedMixin","./_CssStateMixin","./form/_FormMixin","./_DialogMixin","./DialogUnderlay","./layout/ContentPane","./layout/utils","dojo/text!./templates/Dialog.html","./a11yclick","dojo/i18n!./nls/common"],function(_112,_113,_114,_115,_116,dom,_117,_118,_119,fx,i18n,keys,lang,on,_11a,has,_11b,_11c,_11d,_11e,_11f,_120,_121,_122,_123,_124,_125,_126,_127,_128){
var _129=new _116();
_129.resolve(true);
var _12a=_115("dijit._DialogBase"+(has("dojo-bidi")?"_NoBidi":""),[_121,_123,_124,_122],{templateString:_128,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:false,duration:_11f.defaultDuration,refocus:true,autofocus:true,_firstFocusItem:null,_lastFocusItem:null,draggable:true,_setDraggableAttr:function(val){
this._set("draggable",val);
},maxRatio:0.9,closable:true,_setClosableAttr:function(val){
this.closeButtonNode.style.display=val?"":"none";
this._set("closable",val);
},postMixInProperties:function(){
var _12b=i18n.getLocalization("dijit","common");
lang.mixin(this,_12b);
this.inherited(arguments);
},postCreate:function(){
_119.set(this.domNode,{display:"none",position:"absolute"});
this.ownerDocumentBody.appendChild(this.domNode);
this.inherited(arguments);
_114.after(this,"onExecute",lang.hitch(this,"hide"),true);
_114.after(this,"onCancel",lang.hitch(this,"hide"),true);
this._modalconnects=[];
},onLoad:function(){
this.resize();
this._position();
if(this.autofocus&&_12c.isTop(this)){
this._getFocusItems();
_11e.focus(this._firstFocusItem);
}
this.inherited(arguments);
},focus:function(){
this._getFocusItems();
_11e.focus(this._firstFocusItem);
},_endDrag:function(){
var _12d=_118.position(this.domNode),_12e=_11b.getBox(this.ownerDocument);
_12d.y=Math.min(Math.max(_12d.y,0),(_12e.h-_12d.h));
_12d.x=Math.min(Math.max(_12d.x,0),(_12e.w-_12d.w));
this._relativePosition=_12d;
this._position();
},_setup:function(){
var node=this.domNode;
if(this.titleBar&&this.draggable){
this._moveable=new ((has("ie")==6)?_11d:_11c)(node,{handle:this.titleBar});
_114.after(this._moveable,"onMoveStop",lang.hitch(this,"_endDrag"),true);
}else{
_117.add(node,"dijitDialogFixed");
}
this.underlayAttrs={dialogId:this.id,"class":_113.map(this["class"].split(/\s/),function(s){
return s+"_underlay";
}).join(" "),_onKeyDown:lang.hitch(this,"_onKey"),ownerDocument:this.ownerDocument};
},_size:function(){
this.resize();
},_position:function(){
if(!_117.contains(this.ownerDocumentBody,"dojoMove")){
var node=this.domNode,_12f=_11b.getBox(this.ownerDocument),p=this._relativePosition,bb=p?null:_118.position(node),l=Math.floor(_12f.l+(p?p.x:(_12f.w-bb.w)/2)),t=Math.floor(_12f.t+(p?p.y:(_12f.h-bb.h)/2));
_119.set(node,{left:l+"px",top:t+"px"});
}
},_onKey:function(evt){
if(evt.keyCode==keys.TAB){
this._getFocusItems();
var node=evt.target;
if(this._firstFocusItem==this._lastFocusItem){
evt.stopPropagation();
evt.preventDefault();
}else{
if(node==this._firstFocusItem&&evt.shiftKey){
_11e.focus(this._lastFocusItem);
evt.stopPropagation();
evt.preventDefault();
}else{
if(node==this._lastFocusItem&&!evt.shiftKey){
_11e.focus(this._firstFocusItem);
evt.stopPropagation();
evt.preventDefault();
}
}
}
}else{
if(this.closable&&evt.keyCode==keys.ESCAPE){
this.onCancel();
evt.stopPropagation();
evt.preventDefault();
}
}
},show:function(){
if(this.open){
return _129.promise;
}
if(!this._started){
this.startup();
}
if(!this._alreadyInitialized){
this._setup();
this._alreadyInitialized=true;
}
if(this._fadeOutDeferred){
this._fadeOutDeferred.cancel();
_12c.hide(this);
}
var win=_11b.get(this.ownerDocument);
this._modalconnects.push(on(win,"scroll",lang.hitch(this,"resize",null)));
this._modalconnects.push(on(this.domNode,"keydown",lang.hitch(this,"_onKey")));
_119.set(this.domNode,{opacity:0,display:""});
this._set("open",true);
this._onShow();
this.resize();
this._position();
var _130;
this._fadeInDeferred=new _116(lang.hitch(this,function(){
_130.stop();
delete this._fadeInDeferred;
}));
var _131=this._fadeInDeferred.promise;
_130=fx.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:lang.hitch(this,function(){
_12c.show(this,this.underlayAttrs);
}),onEnd:lang.hitch(this,function(){
if(this.autofocus&&_12c.isTop(this)){
this._getFocusItems();
_11e.focus(this._firstFocusItem);
}
this._fadeInDeferred.resolve(true);
delete this._fadeInDeferred;
})}).play();
return _131;
},hide:function(){
if(!this._alreadyInitialized||!this.open){
return _129.promise;
}
if(this._fadeInDeferred){
this._fadeInDeferred.cancel();
}
var _132;
this._fadeOutDeferred=new _116(lang.hitch(this,function(){
_132.stop();
delete this._fadeOutDeferred;
}));
this._fadeOutDeferred.then(lang.hitch(this,"onHide"));
var _133=this._fadeOutDeferred.promise;
_132=fx.fadeOut({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,function(){
this.domNode.style.display="none";
_12c.hide(this);
this._fadeOutDeferred.resolve(true);
delete this._fadeOutDeferred;
})}).play();
if(this._scrollConnected){
this._scrollConnected=false;
}
var h;
while(h=this._modalconnects.pop()){
h.remove();
}
if(this._relativePosition){
delete this._relativePosition;
}
this._set("open",false);
return _133;
},resize:function(dim){
if(this.domNode.style.display!="none"){
this._checkIfSingleChild();
if(!dim){
if(this._shrunk){
if(this._singleChild){
if(typeof this._singleChildOriginalStyle!="undefined"){
this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle;
delete this._singleChildOriginalStyle;
}
}
_113.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(node){
if(node){
_119.set(node,{position:"static",width:"auto",height:"auto"});
}
});
this.domNode.style.position="absolute";
}
var _134=_11b.getBox(this.ownerDocument);
_134.w*=this.maxRatio;
_134.h*=this.maxRatio;
var bb=_118.position(this.domNode);
if(bb.w>=_134.w||bb.h>=_134.h){
dim={w:Math.min(bb.w,_134.w),h:Math.min(bb.h,_134.h)};
this._shrunk=true;
}else{
this._shrunk=false;
}
}
if(dim){
_118.setMarginBox(this.domNode,dim);
var _135=[];
if(this.titleBar){
_135.push({domNode:this.titleBar,region:"top"});
}
if(this.actionBarNode){
_135.push({domNode:this.actionBarNode,region:"bottom"});
}
var _136={domNode:this.containerNode,region:"center"};
_135.push(_136);
var _137=_127.marginBox2contentBox(this.domNode,dim);
_127.layoutChildren(this.domNode,_137,_135);
if(this._singleChild){
var cb=_127.marginBox2contentBox(this.containerNode,_136);
this._singleChild.resize({w:cb.w,h:cb.h});
}else{
this.containerNode.style.overflow="auto";
this._layoutChildren();
}
}else{
this._layoutChildren();
}
if(!has("touch")&&!dim){
this._position();
}
}
},_layoutChildren:function(){
_113.forEach(this.getChildren(),function(_138){
if(_138.resize){
_138.resize();
}
});
},destroy:function(){
if(this._fadeInDeferred){
this._fadeInDeferred.cancel();
}
if(this._fadeOutDeferred){
this._fadeOutDeferred.cancel();
}
if(this._moveable){
this._moveable.destroy();
}
var h;
while(h=this._modalconnects.pop()){
h.remove();
}
_12c.hide(this);
this.inherited(arguments);
}});
if(has("dojo-bidi")){
_12a=_115("dijit._DialogBase",_12a,{_setTitleAttr:function(_139){
this._set("title",_139);
this.titleNode.innerHTML=_139;
this.applyTextDir(this.titleNode);
},_setTextDirAttr:function(_13a){
if(this._created&&this.textDir!=_13a){
this._set("textDir",_13a);
this.set("title",this.title);
}
}});
}
var _13b=_115("dijit.Dialog",[_126,_12a],{});
_13b._DialogBase=_12a;
var _12c=_13b._DialogLevelManager={_beginZIndex:950,show:function(_13c,_13d){
ds[ds.length-1].focus=_11e.curNode;
var _13e=ds[ds.length-1].dialog?ds[ds.length-1].zIndex+2:_13b._DialogLevelManager._beginZIndex;
_119.set(_13c.domNode,"zIndex",_13e);
_125.show(_13d,_13e-1);
ds.push({dialog:_13c,underlayAttrs:_13d,zIndex:_13e});
},hide:function(_13f){
if(ds[ds.length-1].dialog==_13f){
ds.pop();
var pd=ds[ds.length-1];
if(ds.length==1){
_125.hide();
}else{
_125.show(pd.underlayAttrs,pd.zIndex-1);
}
if(_13f.refocus){
var _140=pd.focus;
if(pd.dialog&&(!_140||!dom.isDescendant(_140,pd.dialog.domNode))){
pd.dialog._getFocusItems();
_140=pd.dialog._firstFocusItem;
}
if(_140){
try{
_140.focus();
}
catch(e){
}
}
}
}else{
var idx=_113.indexOf(_113.map(ds,function(elem){
return elem.dialog;
}),_13f);
if(idx!=-1){
ds.splice(idx,1);
}
}
},isTop:function(_141){
return ds[ds.length-1].dialog==_141;
}};
var ds=_13b._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];
_11e.watch("curNode",function(attr,_142,node){
var _143=ds[ds.length-1].dialog;
if(node&&_143&&!_143._fadeOutDeferred&&node.ownerDocument==_143.ownerDocument){
do{
if(node==_143.domNode||_117.contains(node,"dijitPopup")){
return;
}
}while(node=node.parentNode);
_143.focus();
}
});
if(1){
_11a(0,function(){
var _144=["dijit/TooltipDialog"];
_112(_144);
});
}
return _13b;
});
},"dojo/date/locale":function(){
define(["../_base/lang","../_base/array","../date","../cldr/supplemental","../i18n","../regexp","../string","../i18n!../cldr/nls/gregorian","module"],function(lang,_145,date,_146,i18n,_147,_148,_149,_14a){
var _14b={};
lang.setObject(_14a.id.replace(/\//g,"."),_14b);
function _14c(_14d,_14e,_14f,_150){
return _150.replace(/([a-z])\1*/ig,function(_151){
var s,pad,c=_151.charAt(0),l=_151.length,_152=["abbr","wide","narrow"];
switch(c){
case "G":
s=_14e[(l<4)?"eraAbbr":"eraNames"][_14d.getFullYear()<0?0:1];
break;
case "y":
s=_14d.getFullYear();
switch(l){
case 1:
break;
case 2:
if(!_14f.fullYear){
s=String(s);
s=s.substr(s.length-2);
break;
}
default:
pad=true;
}
break;
case "Q":
case "q":
s=Math.ceil((_14d.getMonth()+1)/3);
pad=true;
break;
case "M":
case "L":
var m=_14d.getMonth();
if(l<3){
s=m+1;
pad=true;
}else{
var _153=["months",c=="L"?"standAlone":"format",_152[l-3]].join("-");
s=_14e[_153][m];
}
break;
case "w":
var _154=0;
s=_14b._getWeekOfYear(_14d,_154);
pad=true;
break;
case "d":
s=_14d.getDate();
pad=true;
break;
case "D":
s=_14b._getDayOfYear(_14d);
pad=true;
break;
case "e":
case "c":
var d=_14d.getDay();
if(l<2){
s=(d-_146.getFirstDayOfWeek(_14f.locale)+8)%7;
break;
}
case "E":
d=_14d.getDay();
if(l<3){
s=d+1;
pad=true;
}else{
var _155=["days",c=="c"?"standAlone":"format",_152[l-3]].join("-");
s=_14e[_155][d];
}
break;
case "a":
var _156=_14d.getHours()<12?"am":"pm";
s=_14f[_156]||_14e["dayPeriods-format-wide-"+_156];
break;
case "h":
case "H":
case "K":
case "k":
var h=_14d.getHours();
switch(c){
case "h":
s=(h%12)||12;
break;
case "H":
s=h;
break;
case "K":
s=(h%12);
break;
case "k":
s=h||24;
break;
}
pad=true;
break;
case "m":
s=_14d.getMinutes();
pad=true;
break;
case "s":
s=_14d.getSeconds();
pad=true;
break;
case "S":
s=Math.round(_14d.getMilliseconds()*Math.pow(10,l-3));
pad=true;
break;
case "v":
case "z":
s=_14b._getZone(_14d,true,_14f);
if(s){
break;
}
l=4;
case "Z":
var _157=_14b._getZone(_14d,false,_14f);
var tz=[(_157<=0?"+":"-"),_148.pad(Math.floor(Math.abs(_157)/60),2),_148.pad(Math.abs(_157)%60,2)];
if(l==4){
tz.splice(0,0,"GMT");
tz.splice(3,0,":");
}
s=tz.join("");
break;
default:
throw new Error("dojo.date.locale.format: invalid pattern char: "+_150);
}
if(pad){
s=_148.pad(s,l);
}
return s;
});
};
_14b._getZone=function(_158,_159,_15a){
if(_159){
return date.getTimezoneName(_158);
}else{
return _158.getTimezoneOffset();
}
};
_14b.format=function(_15b,_15c){
_15c=_15c||{};
var _15d=i18n.normalizeLocale(_15c.locale),_15e=_15c.formatLength||"short",_15f=_14b._getGregorianBundle(_15d),str=[],_160=lang.hitch(this,_14c,_15b,_15f,_15c);
if(_15c.selector=="year"){
return _161(_15f["dateFormatItem-yyyy"]||"yyyy",_160);
}
var _162;
if(_15c.selector!="date"){
_162=_15c.timePattern||_15f["timeFormat-"+_15e];
if(_162){
str.push(_161(_162,_160));
}
}
if(_15c.selector!="time"){
_162=_15c.datePattern||_15f["dateFormat-"+_15e];
if(_162){
str.push(_161(_162,_160));
}
}
return str.length==1?str[0]:_15f["dateTimeFormat-"+_15e].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(_163,key){
return str[key];
});
};
_14b.regexp=function(_164){
return _14b._parseInfo(_164).regexp;
};
_14b._parseInfo=function(_165){
_165=_165||{};
var _166=i18n.normalizeLocale(_165.locale),_167=_14b._getGregorianBundle(_166),_168=_165.formatLength||"short",_169=_165.datePattern||_167["dateFormat-"+_168],_16a=_165.timePattern||_167["timeFormat-"+_168],_16b;
if(_165.selector=="date"){
_16b=_169;
}else{
if(_165.selector=="time"){
_16b=_16a;
}else{
_16b=_167["dateTimeFormat-"+_168].replace(/\{(\d+)\}/g,function(_16c,key){
return [_16a,_169][key];
});
}
}
var _16d=[],re=_161(_16b,lang.hitch(this,_16e,_16d,_167,_165));
return {regexp:re,tokens:_16d,bundle:_167};
};
_14b.parse=function(_16f,_170){
var _171=/[\u200E\u200F\u202A\u202E]/g,info=_14b._parseInfo(_170),_172=info.tokens,_173=info.bundle,re=new RegExp("^"+info.regexp.replace(_171,"")+"$",info.strict?"":"i"),_174=re.exec(_16f&&_16f.replace(_171,""));
if(!_174){
return null;
}
var _175=["abbr","wide","narrow"],_176=[1970,0,1,0,0,0,0],amPm="",_177=_145.every(_174,function(v,i){
if(!i){
return true;
}
var _178=_172[i-1],l=_178.length,c=_178.charAt(0);
switch(c){
case "y":
if(l!=2&&_170.strict){
_176[0]=v;
}else{
if(v<100){
v=Number(v);
var year=""+new Date().getFullYear(),_179=year.substring(0,2)*100,_17a=Math.min(Number(year.substring(2,4))+20,99);
_176[0]=(v<_17a)?_179+v:_179-100+v;
}else{
if(_170.strict){
return false;
}
_176[0]=v;
}
}
break;
case "M":
case "L":
if(l>2){
var _17b=_173["months-"+(c=="L"?"standAlone":"format")+"-"+_175[l-3]].concat();
if(!_170.strict){
v=v.replace(".","").toLowerCase();
_17b=_145.map(_17b,function(s){
return s.replace(".","").toLowerCase();
});
}
v=_145.indexOf(_17b,v);
if(v==-1){
return false;
}
}else{
v--;
}
_176[1]=v;
break;
case "E":
case "e":
case "c":
var days=_173["days-"+(c=="c"?"standAlone":"format")+"-"+_175[l-3]].concat();
if(!_170.strict){
v=v.toLowerCase();
days=_145.map(days,function(d){
return d.toLowerCase();
});
}
v=_145.indexOf(days,v);
if(v==-1){
return false;
}
break;
case "D":
_176[1]=0;
case "d":
_176[2]=v;
break;
case "a":
var am=_170.am||_173["dayPeriods-format-wide-am"],pm=_170.pm||_173["dayPeriods-format-wide-pm"];
if(!_170.strict){
var _17c=/\./g;
v=v.replace(_17c,"").toLowerCase();
am=am.replace(_17c,"").toLowerCase();
pm=pm.replace(_17c,"").toLowerCase();
}
if(_170.strict&&v!=am&&v!=pm){
return false;
}
amPm=(v==pm)?"p":(v==am)?"a":"";
break;
case "K":
if(v==24){
v=0;
}
case "h":
case "H":
case "k":
if(v>23){
return false;
}
_176[3]=v;
break;
case "m":
_176[4]=v;
break;
case "s":
_176[5]=v;
break;
case "S":
_176[6]=v;
}
return true;
});
var _17d=+_176[3];
if(amPm==="p"&&_17d<12){
_176[3]=_17d+12;
}else{
if(amPm==="a"&&_17d==12){
_176[3]=0;
}
}
var _17e=new Date(_176[0],_176[1],_176[2],_176[3],_176[4],_176[5],_176[6]);
if(_170.strict){
_17e.setFullYear(_176[0]);
}
var _17f=_172.join(""),_180=_17f.indexOf("d")!=-1,_181=_17f.indexOf("M")!=-1;
if(!_177||(_181&&_17e.getMonth()>_176[1])||(_180&&_17e.getDate()>_176[2])){
return null;
}
if((_181&&_17e.getMonth()<_176[1])||(_180&&_17e.getDate()<_176[2])){
_17e=date.add(_17e,"hour",1);
}
return _17e;
};
function _161(_182,_183,_184,_185){
var _186=function(x){
return x;
};
_183=_183||_186;
_184=_184||_186;
_185=_185||_186;
var _187=_182.match(/(''|[^'])+/g),_188=_182.charAt(0)=="'";
_145.forEach(_187,function(_189,i){
if(!_189){
_187[i]="";
}else{
_187[i]=(_188?_184:_183)(_189.replace(/''/g,"'"));
_188=!_188;
}
});
return _185(_187.join(""));
};
function _16e(_18a,_18b,_18c,_18d){
_18d=_147.escapeString(_18d);
if(!_18c.strict){
_18d=_18d.replace(" a"," ?a");
}
return _18d.replace(/([a-z])\1*/ig,function(_18e){
var s,c=_18e.charAt(0),l=_18e.length,p2="",p3="";
if(_18c.strict){
if(l>1){
p2="0"+"{"+(l-1)+"}";
}
if(l>2){
p3="0"+"{"+(l-2)+"}";
}
}else{
p2="0?";
p3="0{0,2}";
}
switch(c){
case "y":
s="\\d{2,4}";
break;
case "M":
case "L":
s=(l>2)?"\\S+?":"1[0-2]|"+p2+"[1-9]";
break;
case "D":
s="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+p2+"[1-9][0-9]|"+p3+"[1-9]";
break;
case "d":
s="3[01]|[12]\\d|"+p2+"[1-9]";
break;
case "w":
s="[1-4][0-9]|5[0-3]|"+p2+"[1-9]";
break;
case "E":
case "e":
case "c":
s=".+?";
break;
case "h":
s="1[0-2]|"+p2+"[1-9]";
break;
case "k":
s="1[01]|"+p2+"\\d";
break;
case "H":
s="1\\d|2[0-3]|"+p2+"\\d";
break;
case "K":
s="1\\d|2[0-4]|"+p2+"[1-9]";
break;
case "m":
case "s":
s="[0-5]\\d";
break;
case "S":
s="\\d{"+l+"}";
break;
case "a":
var am=_18c.am||_18b["dayPeriods-format-wide-am"],pm=_18c.pm||_18b["dayPeriods-format-wide-pm"];
s=am+"|"+pm;
if(!_18c.strict){
if(am!=am.toLowerCase()){
s+="|"+am.toLowerCase();
}
if(pm!=pm.toLowerCase()){
s+="|"+pm.toLowerCase();
}
if(s.indexOf(".")!=-1){
s+="|"+s.replace(/\./g,"");
}
}
s=s.replace(/\./g,"\\.");
break;
default:
s=".*";
}
if(_18a){
_18a.push(_18e);
}
return "("+s+")";
}).replace(/[\xa0 ]/g,"[\\s\\xa0]");
};
var _18f=[];
var _190={};
_14b.addCustomFormats=function(_191,_192){
_18f.push({pkg:_191,name:_192});
_190={};
};
_14b._getGregorianBundle=function(_193){
if(_190[_193]){
return _190[_193];
}
var _194={};
_145.forEach(_18f,function(desc){
var _195=i18n.getLocalization(desc.pkg,desc.name,_193);
_194=lang.mixin(_194,_195);
},this);
return _190[_193]=_194;
};
_14b.addCustomFormats(_14a.id.replace(/\/date\/locale$/,".cldr"),"gregorian");
_14b.getNames=function(item,type,_196,_197){
var _198,_199=_14b._getGregorianBundle(_197),_19a=[item,_196,type];
if(_196=="standAlone"){
var key=_19a.join("-");
_198=_199[key];
if(_198[0]==1){
_198=undefined;
}
}
_19a[1]="format";
return (_198||_199[_19a.join("-")]).concat();
};
_14b.isWeekend=function(_19b,_19c){
var _19d=_146.getWeekend(_19c),day=(_19b||new Date()).getDay();
if(_19d.end<_19d.start){
_19d.end+=7;
if(day<_19d.start){
day+=7;
}
}
return day>=_19d.start&&day<=_19d.end;
};
_14b._getDayOfYear=function(_19e){
return date.difference(new Date(_19e.getFullYear(),0,1,_19e.getHours()),_19e)+1;
};
_14b._getWeekOfYear=function(_19f,_1a0){
if(arguments.length==1){
_1a0=0;
}
var _1a1=new Date(_19f.getFullYear(),0,1).getDay(),adj=(_1a1-_1a0+7)%7,week=Math.floor((_14b._getDayOfYear(_19f)+adj-1)/7);
if(_1a1==_1a0){
week++;
}
return week;
};
return _14b;
});
},"curam/widget/AppBannerComboBoxMixin":function(){
define(["dijit/form/ComboBoxMixin","dojo/_base/declare","dojo/_base/lang","dojo/text!curam/widget/templates/AppBannerDropDownBox.html"],function(_1a2,_1a3,lang,_1a4){
var _1a5=_1a3("curam.widget.AppBannerComboBoxMixin",_1a2,{templateString:_1a4});
return _1a5;
});
},"dijit/_Templated":function(){
define(["./_WidgetBase","./_TemplatedMixin","./_WidgetsInTemplateMixin","dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/kernel"],function(_1a6,_1a7,_1a8,_1a9,_1aa,lang,_1ab){
lang.extend(_1a6,{waiRole:"",waiState:""});
return _1aa("dijit._Templated",[_1a7,_1a8],{widgetsInTemplate:false,constructor:function(){
_1ab.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0");
},_processNode:function(_1ac,_1ad){
var ret=this.inherited(arguments);
var role=_1ad(_1ac,"waiRole");
if(role){
_1ac.setAttribute("role",role);
}
var _1ae=_1ad(_1ac,"waiState");
if(_1ae){
_1a9.forEach(_1ae.split(/\s*,\s*/),function(_1af){
if(_1af.indexOf("-")!=-1){
var pair=_1af.split("-");
_1ac.setAttribute("aria-"+pair[0],pair[1]);
}
});
}
return ret;
}});
});
},"dojo/require":function(){
define(["./_base/loader"],function(_1b0){
return {dynamic:0,normalize:function(id){
return id;
},load:_1b0.require};
});
},"curam/cdsl/store/IdentityApi":function(){
define(["dojo/_base/declare","dojo/json"],function(_1b1,json){
var _1b2=_1b1(null,{getIdentity:function(item){
var _1b3=this.getIdentityPropertyNames()[0];
if(typeof item[_1b3]==="object"){
throw new Error("Complex identity attributes are not supported by this implementation.");
}
return item[_1b3];
},parseIdentity:function(_1b4){
var _1b5={};
_1b5[this.getIdentityPropertyNames()[0]]=_1b4;
return _1b5;
},getIdentityPropertyNames:function(){
return ["id"];
}});
return _1b2;
});
},"dijit/MenuSeparator":function(){
define(["dojo/_base/declare","dojo/dom","./_WidgetBase","./_TemplatedMixin","./_Contained","dojo/text!./templates/MenuSeparator.html"],function(_1b6,dom,_1b7,_1b8,_1b9,_1ba){
return _1b6("dijit.MenuSeparator",[_1b7,_1b8,_1b9],{templateString:_1ba,buildRendering:function(){
this.inherited(arguments);
dom.setSelectable(this.domNode,false);
},isFocusable:function(){
return false;
}});
});
},"dijit/form/ToggleButton":function(){
define(["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(_1bb,_1bc,_1bd,_1be){
return _1bb("dijit.form.ToggleButton",[_1bd,_1be],{baseClass:"dijitToggleButton",setChecked:function(_1bf){
_1bc.deprecated("setChecked("+_1bf+") is deprecated. Use set('checked',"+_1bf+") instead.","","2.0");
this.set("checked",_1bf);
}});
});
},"curam/util/Dialog":function(){
define(["curam/util","curam/define","curam/dialog","dojo/on","curam/util/onLoad","curam/debug"],function(util,_1c0,_1c1,on,_1c2,_1c3){
_1c0.singleton("curam.util.Dialog",{_id:null,_unsubscribes:[],_modalWithIEGScript:false,open:function(path,_1c4,_1c5){
var url=path+curam.util.makeQueryString(_1c4);
var _1c6={href:url};
var _1c7=null;
if(_1c5){
_1c7="width="+_1c5.width+",height="+_1c5.height;
}
window.jsModals=true;
curam.util.openModalDialog(_1c6,_1c7);
},init:function(){
var _1c8=curam.util.getTopmostWindow();
var _1c9=_1c8.dojo.subscribe("/curam/dialog/SetId",null,function(_1ca){
curam.util.Dialog._id=_1ca;
curam.debug.log(_1c3.getProperty("curam.util.Dialog.id.success"),curam.util.Dialog._id);
_1c8.dojo.unsubscribe(_1c9);
});
curam.util.Dialog._unsubscribes.push(_1c9);
_1c8.dojo.publish("/curam/dialog/init");
if(!curam.util.Dialog._id){
curam.debug.log(_1c3.getProperty("curam.util.Dialog.id.fail"));
}
if(curam.util.Dialog._modalWithIEGScript){
dojo.addOnUnload(function(){
curam.util.Dialog._releaseHandlers();
window.parent.dojo.publish("/curam/dialog/iframeUnloaded",[curam.util.Dialog._id,window]);
});
}else{
var _1cb=on(window,"unload",function(){
_1cb.remove();
curam.util.Dialog._releaseHandlers();
window.parent.dojo.publish("/curam/dialog/iframeUnloaded",[curam.util.Dialog._id,window]);
});
}
},initModalWithIEGScript:function(){
curam.util.Dialog._modalWithIEGScript=true;
curam.util.Dialog.init();
},registerGetTitleFunc:function(_1cc){
curam.util.onLoad.addPublisher(function(_1cd){
_1cd.title=_1cc();
});
},registerGetSizeFunc:function(_1ce){
curam.util.onLoad.addPublisher(function(_1cf){
_1cf.windowOptions=_1ce();
});
},registerAfterDisplayHandler:function(_1d0){
var _1d1=curam.util.getTopmostWindow();
curam.util.Dialog._unsubscribes.push(_1d1.dojo.subscribe("/curam/dialog/AfterDisplay",null,function(_1d2){
if(_1d2==curam.util.Dialog._id){
_1d0();
}
}));
},registerBeforeCloseHandler:function(_1d3){
var _1d4=curam.util.getTopmostWindow();
curam.util.Dialog._unsubscribes.push(_1d4.dojo.subscribe("/curam/dialog/BeforeClose",null,function(_1d5){
if(_1d5===curam.util.Dialog._id){
_1d3();
}
}));
},pageLoadFinished:function(){
var _1d6=curam.util.getTopmostWindow();
curam.util.Dialog._unsTokenReleaseHandlers=_1d6.dojo.subscribe("/curam/dialog/BeforeClose",null,function(_1d7){
if(_1d7==curam.util.Dialog._id){
curam.util.Dialog._releaseHandlers(_1d6);
}
});
curam.util.onLoad.execute();
},_releaseHandlers:function(_1d8){
var _1d9;
if(_1d8){
_1d9=_1d8;
}else{
_1d9=curam.util.getTopmostWindow();
}
dojo.forEach(curam.util.Dialog._unsubscribes,_1d9.dojo.unsubscribe);
curam.util.Dialog._unsubscribes=[];
_1d9.dojo.unsubscribe(curam.util.Dialog._unsTokenReleaseHandlers);
curam.util.Dialog._unsTokenReleaseHandlers=null;
},close:function(_1da,_1db,_1dc){
var _1dd=curam.dialog.getParentWindow(window);
if(typeof (curam.util.Dialog._id)==="undefined"||curam.util.Dialog._id==null){
var _1de=window.frameElement.id;
var _1df=_1de.substring(7);
curam.util.Dialog._id=_1df;
_1c3.log("curam.util.Dialog.closeAndSubmitParent() "+_1c3.getProperty("curam.dialog.modal.id")+_1df);
}
if(_1da&&!_1db){
curam.dialog.forceParentRefresh();
_1dd.curam.util.redirectWindow(null);
}else{
if(_1db){
var _1e0=_1db;
if(_1db.indexOf("Page.do")==-1&&_1db.indexOf("Action.do")==-1){
_1e0=_1db+"Page.do"+curam.util.makeQueryString(_1dc);
}
_1dd.curam.util.redirectWindow(_1e0);
}
}
var _1e1=curam.util.getTopmostWindow();
_1e1.dojo.publish("/curam/dialog/close",[curam.util.Dialog._id]);
},closeAndSubmitParent:function(_1e2){
var _1e3=curam.dialog.getParentWindow(window);
var _1e4=_1e3.document.forms["mainForm"];
var _1e5=curam.util.getTopmostWindow();
if(typeof (curam.util.Dialog._id)==="undefined"||curam.util.Dialog._id==null){
var _1e6=window.frameElement.id;
var _1e7=_1e6.substring(7);
curam.util.Dialog._id=_1e7;
_1c3.log("curam.util.Dialog.closeAndSubmitParent() "+_1c3.getProperty("curam.dialog.modal.id")+_1e7);
}
if(_1e4==null||_1e4==undefined){
_1e5.dojo.publish("/curam/dialog/close",[curam.util.Dialog._id]);
return;
}
var _1e8=function(_1e9){
for(var _1ea in _1e9){
if(_1e9.hasOwnProperty(_1ea)){
return false;
}
}
return true;
};
if(_1e2&&!_1e8(_1e2)){
var _1eb=dojo.query("#"+_1e4.id+" > "+"input[type=text]");
var _1ec=dojo.filter(_1eb,function(node){
return node.readOnly==false;
});
dojo.forEach(_1ec,function(node){
node.value="";
});
for(var _1ed in _1e2){
var _1ee=_1ec[parseInt(_1ed)];
if(_1ee){
var _1ef=dojo.query("input[name="+_1ee.id+"]",_1e4)[0];
if(_1ef){
_1ef.value=_1e2[_1ed];
}else{
_1ee.value=_1e2[_1ed];
}
}
}
}else{
}
_1e3.dojo.publish("/curam/page/refresh");
_1e4.submit();
_1e5.dojo.publish("/curam/dialog/close",[curam.util.Dialog._id]);
},fileDownloadAnchorHandler:function(url){
return curam.util.fileDownloadAnchorHandler(url);
}});
});
},"dijit/CheckedMenuItem":function(){
define(["dojo/_base/declare","dojo/dom-class","./MenuItem","dojo/text!./templates/CheckedMenuItem.html","./hccss"],function(_1f0,_1f1,_1f2,_1f3){
return _1f0("dijit.CheckedMenuItem",_1f2,{baseClass:"dijitMenuItem dijitCheckedMenuItem",templateString:_1f3,checked:false,_setCheckedAttr:function(_1f4){
this.domNode.setAttribute("aria-checked",_1f4?"true":"false");
this._set("checked",_1f4);
},iconClass:"",role:"menuitemcheckbox",checkedChar:"&#10003;",onChange:function(){
},_onClick:function(evt){
if(!this.disabled){
this.set("checked",!this.checked);
this.onChange(this.checked);
}
this.onClick(evt);
}});
});
},"dojox/html/_base":function(){
define(["dojo/_base/declare","dojo/Deferred","dojo/dom-construct","dojo/html","dojo/_base/kernel","dojo/_base/lang","dojo/ready","dojo/_base/sniff","dojo/_base/url","dojo/_base/xhr","dojo/when","dojo/_base/window"],function(_1f5,_1f6,_1f7,_1f8,_1f9,lang,_1fa,has,_1fb,_1fc,when,_1fd){
var html=_1f9.getObject("dojox.html",true);
if(has("ie")){
var _1fe=/(AlphaImageLoader\([^)]*?src=(['"]))(?![a-z]+:|\/)([^\r\n;}]+?)(\2[^)]*\)\s*[;}]?)/g;
}
var _1ff=/(?:(?:@import\s*(['"])(?![a-z]+:|\/)([^\r\n;{]+?)\1)|url\(\s*(['"]?)(?![a-z]+:|\/)([^\r\n;]+?)\3\s*\))([a-z, \s]*[;}]?)/g;
var _200=html._adjustCssPaths=function(_201,_202){
if(!_202||!_201){
return;
}
if(_1fe){
_202=_202.replace(_1fe,function(_203,pre,_204,url,post){
return pre+(new _1fb(_201,"./"+url).toString())+post;
});
}
return _202.replace(_1ff,function(_205,_206,_207,_208,_209,_20a){
if(_207){
return "@import \""+(new _1fb(_201,"./"+_207).toString())+"\""+_20a;
}else{
return "url("+(new _1fb(_201,"./"+_209).toString())+")"+_20a;
}
});
};
var _20b=/(<[a-z][a-z0-9]*\s[^>]*)(?:(href|src)=(['"]?)([^>]*?)\3|style=(['"]?)([^>]*?)\5)([^>]*>)/gi;
var _20c=html._adjustHtmlPaths=function(_20d,cont){
var url=_20d||"./";
return cont.replace(_20b,function(tag,_20e,name,_20f,_210,_211,_212,end){
return _20e+(name?(name+"="+_20f+(new _1fb(url,_210).toString())+_20f):("style="+_211+_200(url,_212)+_211))+end;
});
};
var _213=html._snarfStyles=function(_214,cont,_215){
_215.attributes=[];
cont=cont.replace(/<[!][-][-](.|\s)*?[-][-]>/g,function(_216){
return _216.replace(/<(\/?)style\b/ig,"&lt;$1Style").replace(/<(\/?)link\b/ig,"&lt;$1Link").replace(/@import "/ig,"@ import \"");
});
return cont.replace(/(?:<style([^>]*)>([\s\S]*?)<\/style>|<link\s+(?=[^>]*rel=['"]?stylesheet)([^>]*?href=(['"])([^>]*?)\4[^>\/]*)\/?>)/gi,function(_217,_218,_219,_21a,_21b,href){
var i,attr=(_218||_21a||"").replace(/^\s*([\s\S]*?)\s*$/i,"$1");
if(_219){
i=_215.push(_214?_200(_214,_219):_219);
}else{
i=_215.push("@import \""+href+"\";");
attr=attr.replace(/\s*(?:rel|href)=(['"])?[^\s]*\1\s*/gi,"");
}
if(attr){
attr=attr.split(/\s+/);
var _21c={},tmp;
for(var j=0,e=attr.length;j<e;j++){
tmp=attr[j].split("=");
_21c[tmp[0]]=tmp[1].replace(/^\s*['"]?([\s\S]*?)['"]?\s*$/,"$1");
}
_215.attributes[i-1]=_21c;
}
return "";
});
};
var _21d=html._snarfScripts=function(cont,_21e){
_21e.code="";
cont=cont.replace(/<[!][-][-](.|\s)*?[-][-]>/g,function(_21f){
return _21f.replace(/<(\/?)script\b/ig,"&lt;$1Script");
});
function _220(src){
if(_21e.downloadRemote){
src=src.replace(/&([a-z0-9#]+);/g,function(m,name){
switch(name){
case "amp":
return "&";
case "gt":
return ">";
case "lt":
return "<";
default:
return name.charAt(0)=="#"?String.fromCharCode(name.substring(1)):"&"+name+";";
}
});
_1fc.get({url:src,sync:true,load:function(code){
if(_21e.code!==""){
code="\n"+code;
}
_21e.code+=code+";";
},error:_21e.errBack});
}
};
return cont.replace(/<script\s*(?![^>]*type=['"]?(?:dojo\/|text\/html\b))[^>]*?(?:src=(['"]?)([^>]*?)\1[^>]*)?>([\s\S]*?)<\/script>/gi,function(_221,_222,src,code){
if(src){
_220(src);
}else{
if(_21e.code!==""){
code="\n"+code;
}
_21e.code+=code+";";
}
return "";
});
};
var _223=html.evalInGlobal=function(code,_224){
_224=_224||_1fd.doc.body;
var n=_224.ownerDocument.createElement("script");
n.type="text/javascript";
_224.appendChild(n);
n.text=code;
};
html._ContentSetter=_1f5(_1f8._ContentSetter,{adjustPaths:false,referencePath:".",renderStyles:false,executeScripts:false,scriptHasHooks:false,scriptHookReplacement:null,_renderStyles:function(_225){
this._styleNodes=[];
var st,att,_226,doc=this.node.ownerDocument;
var head=doc.getElementsByTagName("head")[0];
for(var i=0,e=_225.length;i<e;i++){
_226=_225[i];
att=_225.attributes[i];
st=doc.createElement("style");
st.setAttribute("type","text/css");
for(var x in att){
st.setAttribute(x,att[x]);
}
this._styleNodes.push(st);
head.appendChild(st);
if(st.styleSheet){
st.styleSheet.cssText=_226;
}else{
st.appendChild(doc.createTextNode(_226));
}
}
},empty:function(){
this.inherited("empty",arguments);
this._styles=[];
},onBegin:function(){
this.inherited("onBegin",arguments);
var cont=this.content,node=this.node;
var _227=this._styles;
if(lang.isString(cont)){
if(this.adjustPaths&&this.referencePath){
cont=_20c(this.referencePath,cont);
}
if(this.renderStyles||this.cleanContent){
cont=_213(this.referencePath,cont,_227);
}
if(this.executeScripts){
var _228=this;
var _229={downloadRemote:true,errBack:function(e){
_228._onError.call(_228,"Exec","Error downloading remote script in \""+_228.id+"\"",e);
}};
cont=_21d(cont,_229);
this._code=_229.code;
}
}
this.content=cont;
},onEnd:function(){
var code=this._code,_22a=this._styles;
if(this._styleNodes&&this._styleNodes.length){
while(this._styleNodes.length){
_1f7.destroy(this._styleNodes.pop());
}
}
if(this.renderStyles&&_22a&&_22a.length){
this._renderStyles(_22a);
}
var d=new _1f6();
var _22b=this.getInherited(arguments),args=arguments,_22c=lang.hitch(this,function(){
_22b.apply(this,args);
when(this.parseDeferred,function(){
d.resolve();
});
});
if(this.executeScripts&&code){
if(this.cleanContent){
code=code.replace(/(<!--|(?:\/\/)?-->|<!\[CDATA\[|\]\]>)/g,"");
}
if(this.scriptHasHooks){
code=code.replace(/_container_(?!\s*=[^=])/g,this.scriptHookReplacement);
}
try{
_223(code,this.node);
}
catch(e){
this._onError("Exec","Error eval script in "+this.id+", "+e.message,e);
}
_1fa(_22c);
}else{
_22c();
}
return d.promise;
},tearDown:function(){
this.inherited(arguments);
delete this._styles;
if(this._styleNodes&&this._styleNodes.length){
while(this._styleNodes.length){
_1f7.destroy(this._styleNodes.pop());
}
}
delete this._styleNodes;
lang.mixin(this,html._ContentSetter.prototype);
}});
html.set=function(node,cont,_22d){
if(!_22d){
return _1f8._setNodeContent(node,cont,true);
}else{
var op=new html._ContentSetter(lang.mixin(_22d,{content:cont,node:node}));
return op.set();
}
};
return html;
});
},"curam/widget/_HasDropDown":function(){
define(["dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","dojo/touch","dijit/registry","dijit/focus","dijit/popup","dijit/_FocusMixin","dijit/a11y","dijit/_HasDropDown","curam/util"],function(_22e,_22f,dom,_230,_231,_232,_233,has,keys,lang,on,_234,_235,_236,_237,_238,a11y){
return _22e("curam.widget._HasDropDown",[dijit._HasDropDown],{openDropDown:function(){
var _239=this.dropDown,_23a=_239.domNode,_23b=this._aroundNode||this.domNode,self=this;
var _23c=_237.open({parent:this,popup:_239,around:_23b,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){
self.closeDropDown(true);
},onCancel:function(evt){
self.closeDropDown(evt,true);
},onClose:function(){
_230.set(self._popupStateNode,"popupActive",false);
_231.remove(self._popupStateNode,"dijitHasDropDownOpen");
self._set("_opened",false);
}});
if(this.forceWidth||(this.autoWidth&&_23b.offsetWidth>_239._popupWrapper.offsetWidth)){
var _23d=_23b.offsetWidth-_239._popupWrapper.offsetWidth;
var _23e={w:_239.domNode.offsetWidth+_23d};
this._origStyle=_23a.style.cssText;
if(lang.isFunction(_239.resize)){
_239.resize(_23e);
}else{
_232.setMarginBox(_23a,_23e);
}
if(_23c.corner[1]=="R"){
_239._popupWrapper.style.left=(_239._popupWrapper.style.left.replace("px","")-_23d)+"px";
}
}
_230.set(this._popupStateNode,"popupActive","true");
_231.add(this._popupStateNode,"dijitHasDropDownOpen");
this._set("_opened",true);
this._popupStateNode.setAttribute("aria-expanded","true");
this._popupStateNode.setAttribute("aria-owns",_239.id);
if(_23a.getAttribute("role")!=="presentation"&&!_23a.getAttribute("aria-labelledby")){
_23a.setAttribute("aria-labelledby",this.id);
}
return _23c;
},closeDropDown:function(evt,_23f){
if(this._focusDropDownTimer){
this._focusDropDownTimer.remove();
delete this._focusDropDownTimer;
}
if(this._opened){
this._popupStateNode.setAttribute("aria-expanded","false");
if(_23f&&this.focus){
var _240=this._getNextFocusableNode(evt,this.ownerDocument,this.focusNode);
if(_240.focus){
_240.focus();
}else{
this.focus();
}
}
_237.close(this.dropDown);
this._opened=false;
}
if(this._origStyle){
this.dropDown.domNode.style.cssText=this._origStyle;
delete this._origStyle;
}
},_getNextFocusableNode:function(evt,_241,_242){
var _243=_242;
var _244=curam.util.getTopmostWindow();
if(evt&&evt.keyCode==keys.TAB){
var _245=this._findFocusableElementsInDocument(_241);
var _246=_245.length;
var _247=_245.indexOf(_242);
if(_247>-1){
if(!evt.shiftKey){
_247++;
var _248=null;
for(var i=_247;i<_245.length;i++){
if(_245[i].offsetParent!==null&&!_231.contains(_245[i],"dijitMenuItem")){
_248=_245[i];
break;
}
}
if(_248&&_248.nodeName.toLowerCase()!=="iframe"){
_243=_248;
}else{
if(_248&&_248.nodeName.toLowerCase()==="iframe"){
_248=this._findFocusableElementInIframe(_248,evt.shiftKey);
if(_248){
_243=_248;
}
}else{
if(this.ownerDocument!==_244.document){
var _249=this.ownerDocument;
while(_249!==_244.document&&!_248){
var _24a=window.parent;
var _24b=_24a.document||_24a.contentDocument||_24a.contentWindow.document;
_248=this._findFocusableElementInParentDocument(_24b,evt.shiftKey);
_249=_24b;
}
if(_248){
_243=_248;
}
}
}
}
}else{
_247--;
var _24c=null;
for(var i=_247;i>-1;i--){
if(_245[i].offsetParent!==null){
_24c=_245[i];
break;
}
}
if(_24c&&_24c.nodeName.toLowerCase()!=="iframe"){
_243=_24c;
}else{
if(_24c&&_24c.nodeName.toLowerCase()==="iframe"){
_24c=this._findFocusableElementInIframe(_24c,evt.shiftKey);
if(_24c){
_243=_24c;
}
}else{
if(this.ownerDocument!==_244.document){
var _249=this.ownerDocument;
while(_249!==_244.document&&!_24c){
var _24a=window.parent;
var _24b=_24a.document||_24a.contentDocument||_24a.contentWindow.document;
_24c=this._findFocusableElementInParentDocument(_24b,evt.shiftKey);
_249=_24b;
}
if(_24c){
_243=_24c;
}
}
}
}
}
}
}
return _243;
},_findFocusableElementsInDocument:function(_24d){
var _24e=_24d.querySelectorAll("button:not(.dijitTabCloseButton), [href], input, select, object, iframe, area, textarea, [tabindex]:not([tabindex=\"-1\"])");
var _24f=[];
for(var i=0;i<_24e.length;i++){
if(a11y._isElementShown(_24e[i])){
if(a11y.isTabNavigable(_24e[i])){
_24f.push(_24e[i]);
}else{
if(_24e[i].nodeName.toLowerCase()==="iframe"){
_24f.push(_24e[i]);
}
}
}
}
return _24f;
},_findFocusableElementInParentDocument:function(_250,_251){
var _252=this._findFocusableElementsInDocument(_250);
var _253=false;
var _254=0;
var _255=null;
if(!_251){
for(var i=0;i<_252.length;i++){
if(_252[i].nodeName.toLowerCase()==="iframe"){
if(_252[i].contentDocument===this.ownerDocument){
_253=true;
_254=i;
break;
}
}
}
}else{
for(var i=_252.length-1;i>-1;i--){
if(_252[i].nodeName.toLowerCase()==="iframe"){
if(_252[i].contentDocument===this.ownerDocument){
_253=true;
_254=i;
break;
}
}
}
}
if(_253){
if(!_251){
_254++;
for(var i=_254;i<_252.length;i++){
if(_252[i].offsetParent!==null){
_255=_252[i];
break;
}
}
}else{
_254--;
for(var i=_254;i>-1;i--){
if(_252[i].offsetParent!==null){
_255=_252[i];
break;
}
}
}
if(_255&&_255.nodeName.toLowerCase()==="iframe"){
_255=this._findFocusableElementInIframe(_255,_251);
}
}
return _255;
},_findFocusableElementInIframe:function(node,_256){
var _257=node;
while(_257&&_257.nodeName.toLowerCase()==="iframe"){
var _258=_257.contentDocument||_257.contentWindow.document;
var _259=this._findFocusableElementsInDocument(_258);
if(_259.length>0){
if(!_256){
indexOfNode=0;
for(var i=indexOfNode;i<_259.length;i++){
if(_259[i].offsetParent!==null){
_257=_259[i];
break;
}
}
}else{
indexOfNode=_259.length-1;
for(var i=indexOfNode;i>-1;i--){
if(_259[i].offsetParent!==null){
_257=_259[i];
break;
}
}
}
}else{
_257=null;
}
}
return _257;
}});
});
},"dijit/_DialogMixin":function(){
define(["dojo/_base/declare","./a11y"],function(_25a,a11y){
return _25a("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){
},onCancel:function(){
},onExecute:function(){
},_onSubmit:function(){
this.onExecute();
this.execute(this.get("value"));
},_getFocusItems:function(){
var _25b=a11y._getTabNavigable(this.domNode);
this._firstFocusItem=_25b.lowest||_25b.first||this.closeButtonNode||this.domNode;
this._lastFocusItem=_25b.last||_25b.highest||this._firstFocusItem;
}});
});
},"curam/widget/FilteringSelect":function(){
define(["dijit/registry","dojo/_base/declare","dojo/on","dojo/dom","dojo/dom-construct","dojo/keys","dojo/sniff","dijit/form/FilteringSelect","curam/widget/ComboBoxMixin"],function(_25c,_25d,on,dom,_25e,keys,has){
var _25f=_25d("curam.widget.FilteringSelect",[dijit.form.FilteringSelect,curam.widget.ComboBoxMixin],{enterKeyOnOpenDropDown:false,required:false,postMixInProperties:function(){
if(!this.store){
if(dojo.query("> option",this.srcNodeRef)[0]==undefined){
_25e.create("option",{innerHTML:"<!--__o3_BLANK-->"},this.srcNodeRef);
}
}
if(!this.get("store")&&this.srcNodeRef.value==""){
var _260=this.srcNodeRef,_261=dojo.query("> option[value='']",_260);
if(_261.length&&_261[0].innerHTML!="<!--__o3_BLANK-->"){
this.displayedValue=dojo.trim(_261[0].innerHTML);
}
}
this.inherited(arguments);
},postCreate:function(){
on(this.focusNode,"keydown",function(e){
var _262=_25c.byNode(dom.byId("widget_"+e.target.id));
if(e.keyCode==dojo.keys.ENTER&&_262._opened){
_262.enterKeyOnOpenDropDown=true;
}
});
this.inherited(arguments);
},startup:function(){
if(has("trident")){
this.domNode.setAttribute("role","listbox");
}
this.inherited(arguments);
},_callbackSetLabel:function(_263,_264,_265,_266){
if((_264&&_264[this.searchAttr]!==this._lastQuery)||(!_264&&_263.length&&this.get("store").getIdentity(_263[0])!=this._lastQuery)){
return;
}
if(!_263.length){
this.set("value","__o3_INVALID",_266||(_266===undefined&&!this.focused),this.textbox.value,null);
}else{
this.set("item",_263[0],_266);
}
},_onKey:function(evt){
if(evt.charCode>=32){
return;
}
var key=evt.charCode||evt.keyCode;
if(key==keys.ALT||key==keys.CTRL||key==keys.META||key==keys.SHIFT){
return;
}
var pw=this.dropDown;
var _267=null;
this._abortQuery();
this.inherited(arguments);
if(evt.altKey||evt.ctrlKey||evt.metaKey){
return;
}
if(this._opened){
_267=pw.getHighlightedOption();
}
switch(key){
case keys.PAGE_DOWN:
case keys.DOWN_ARROW:
case keys.PAGE_UP:
case keys.UP_ARROW:
if(this._opened){
this._announceOption(_267);
}
evt.stopPropagation();
evt.preventDefault();
break;
case keys.ENTER:
if(_267){
if(_267==pw.nextButton){
this._nextSearch(1);
evt.stopPropagation();
evt.preventDefault();
break;
}else{
if(_267==pw.previousButton){
this._nextSearch(-1);
evt.stopPropagation();
evt.preventDefault();
break;
}
}
evt.stopPropagation();
evt.preventDefault();
}else{
this._setBlurValue();
this._setCaretPos(this.focusNode,0);
var _268=this._resetValue;
var _269=this.displayedValue;
if(_268!=_269){
evt.stopPropagation();
evt.preventDefault();
}
}
case keys.TAB:
var _269=this.get("displayedValue");
if(pw&&(_269==pw._messages["previousMessage"]||_269==pw._messages["nextMessage"])){
break;
}
if(_267){
this._selectOption(_267);
}
case keys.ESCAPE:
if(this._opened){
this._lastQuery=null;
this.closeDropDown();
}
break;
}
},_selectOption:function(_26a){
this.closeDropDown();
if(_26a){
this._announceOption(_26a);
}
this._setCaretPos(this.focusNode,0);
this._handleOnChange(this.value,true);
this.focusNode.removeAttribute("aria-activedescendant");
}});
return _25f;
});
},"dijit/_Widget":function(){
define(["dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/ready","./registry","./_WidgetBase","./_OnDijitClickMixin","./_FocusMixin","dojo/uacss","./hccss"],function(_26b,_26c,_26d,_26e,has,_26f,lang,_270,_271,_272,_273,_274,_275){
function _276(){
};
function _277(_278){
return function(obj,_279,_27a,_27b){
if(obj&&typeof _279=="string"&&obj[_279]==_276){
return obj.on(_279.substring(2).toLowerCase(),lang.hitch(_27a,_27b));
}
return _278.apply(_26d,arguments);
};
};
_26b.around(_26d,"connect",_277);
if(_26f.connect){
_26b.around(_26f,"connect",_277);
}
var _27c=_26e("dijit._Widget",[_273,_274,_275],{onClick:_276,onDblClick:_276,onKeyDown:_276,onKeyPress:_276,onKeyUp:_276,onMouseDown:_276,onMouseMove:_276,onMouseOut:_276,onMouseOver:_276,onMouseLeave:_276,onMouseEnter:_276,onMouseUp:_276,constructor:function(_27d){
this._toConnect={};
for(var name in _27d){
if(this[name]===_276){
this._toConnect[name.replace(/^on/,"").toLowerCase()]=_27d[name];
delete _27d[name];
}
}
},postCreate:function(){
this.inherited(arguments);
for(var name in this._toConnect){
this.on(name,this._toConnect[name]);
}
delete this._toConnect;
},on:function(type,func){
if(this[this._onMap(type)]===_276){
return _26d.connect(this.domNode,type.toLowerCase(),this,func);
}
return this.inherited(arguments);
},_setFocusedAttr:function(val){
this._focused=val;
this._set("focused",val);
},setAttribute:function(attr,_27e){
_26f.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");
this.set(attr,_27e);
},attr:function(name,_27f){
var args=arguments.length;
if(args>=2||typeof name==="object"){
return this.set.apply(this,arguments);
}else{
return this.get(name);
}
},getDescendants:function(){
_26f.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");
return this.containerNode?_270("[widgetId]",this.containerNode).map(_272.byNode):[];
},_onShow:function(){
this.onShow();
},onShow:function(){
},onHide:function(){
},onClose:function(){
return true;
}});
if(1){
_271(0,function(){
var _280=["dijit/_base"];
require(_280);
});
}
return _27c;
});
},"dijit/form/_SearchMixin":function(){
define(["dojo/_base/declare","dojo/keys","dojo/_base/lang","dojo/query","dojo/string","dojo/when","../registry"],function(_281,keys,lang,_282,_283,when,_284){
return _281("dijit.form._SearchMixin",null,{pageSize:Infinity,store:null,fetchProperties:{},query:{},list:"",_setListAttr:function(list){
this._set("list",list);
},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:true,_patternToRegExp:function(_285){
return new RegExp("^"+_285.replace(/(\\.)|(\*)|(\?)|\W/g,function(str,_286,star,_287){
return star?".*":_287?".":_286?_286:"\\"+str;
})+"$",this.ignoreCase?"mi":"m");
},_abortQuery:function(){
if(this.searchTimer){
this.searchTimer=this.searchTimer.remove();
}
if(this._queryDeferHandle){
this._queryDeferHandle=this._queryDeferHandle.remove();
}
if(this._fetchHandle){
if(this._fetchHandle.abort){
this._cancelingQuery=true;
this._fetchHandle.abort();
this._cancelingQuery=false;
}
if(this._fetchHandle.cancel){
this._cancelingQuery=true;
this._fetchHandle.cancel();
this._cancelingQuery=false;
}
this._fetchHandle=null;
}
},_processInput:function(evt){
if(this.disabled||this.readOnly){
return;
}
var key=evt.charOrCode;
var _288=false;
this._prev_key_backspace=false;
switch(key){
case keys.DELETE:
case keys.BACKSPACE:
this._prev_key_backspace=true;
this._maskValidSubsetError=true;
_288=true;
break;
default:
_288=typeof key=="string"||key==229;
}
if(_288){
if(!this.store){
this.onSearch();
}else{
this.searchTimer=this.defer("_startSearchFromInput",1);
}
}
},onSearch:function(){
},_startSearchFromInput:function(){
this._startSearch(this.focusNode.value);
},_startSearch:function(text){
this._abortQuery();
var _289=this,_282=lang.clone(this.query),_28a={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:true}},qs=_283.substitute(this.queryExpr,[text.replace(/([\\\*\?])/g,"\\$1")]),q,_28b=function(){
var _28c=_289._fetchHandle=_289.store.query(_282,_28a);
if(_289.disabled||_289.readOnly||(q!==_289._lastQuery)){
return;
}
when(_28c,function(res){
_289._fetchHandle=null;
if(!_289.disabled&&!_289.readOnly&&(q===_289._lastQuery)){
when(_28c.total,function(_28d){
res.total=_28d;
var _28e=_289.pageSize;
if(isNaN(_28e)||_28e>res.total){
_28e=res.total;
}
res.nextPage=function(_28f){
_28a.direction=_28f=_28f!==false;
_28a.count=_28e;
if(_28f){
_28a.start+=res.length;
if(_28a.start>=res.total){
_28a.count=0;
}
}else{
_28a.start-=_28e;
if(_28a.start<0){
_28a.count=Math.max(_28e+_28a.start,0);
_28a.start=0;
}
}
if(_28a.count<=0){
res.length=0;
_289.onSearch(res,_282,_28a);
}else{
_28b();
}
};
_289.onSearch(res,_282,_28a);
});
}
},function(err){
_289._fetchHandle=null;
if(!_289._cancelingQuery){
console.error(_289.declaredClass+" "+err.toString());
}
});
};
lang.mixin(_28a,this.fetchProperties);
if(this.store._oldAPI){
q=qs;
}else{
q=this._patternToRegExp(qs);
q.toString=function(){
return qs;
};
}
this._lastQuery=_282[this.searchAttr]=q;
this._queryDeferHandle=this.defer(_28b,this.searchDelay);
},constructor:function(){
this.query={};
this.fetchProperties={};
},postMixInProperties:function(){
if(!this.store){
var list=this.list;
if(list){
this.store=_284.byId(list);
}
}
this.inherited(arguments);
}});
});
},"dijit/layout/AccordionContainer":function(){
define(["require","dojo/_base/array","dojo/_base/declare","dojo/_base/fx","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/topic","../focus","../_base/manager","dojo/ready","../_Widget","../_Container","../_TemplatedMixin","../_CssStateMixin","./StackContainer","./ContentPane","dojo/text!./templates/AccordionButton.html","../a11yclick"],function(_290,_291,_292,fx,dom,_293,_294,_295,_296,keys,lang,has,_297,_298,_299,_29a,_29b,_29c,_29d,_29e,_29f,_2a0,_2a1){
var _2a2=_292("dijit.layout._AccordionButton",[_29b,_29d,_29e],{templateString:_2a1,label:"",_setLabelAttr:{node:"titleTextNode",type:"innerHTML"},title:"",_setTitleAttr:{node:"titleTextNode",type:"attribute",attribute:"title"},iconClassAttr:"",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitAccordionTitle",getParent:function(){
return this.parent;
},buildRendering:function(){
this.inherited(arguments);
var _2a3=this.id.replace(" ","_");
_293.set(this.titleTextNode,"id",_2a3+"_title");
this.focusNode.setAttribute("aria-labelledby",_293.get(this.titleTextNode,"id"));
dom.setSelectable(this.domNode,false);
},getTitleHeight:function(){
return _296.getMarginSize(this.domNode).h;
},_onTitleClick:function(){
var _2a4=this.getParent();
_2a4.selectChild(this.contentWidget,true);
_298.focus(this.focusNode);
},_onTitleKeyDown:function(evt){
return this.getParent()._onKeyDown(evt,this.contentWidget);
},_setSelectedAttr:function(_2a5){
this._set("selected",_2a5);
this.focusNode.setAttribute("aria-expanded",_2a5?"true":"false");
this.focusNode.setAttribute("aria-selected",_2a5?"true":"false");
this.focusNode.setAttribute("tabIndex",_2a5?"0":"-1");
}});
if(has("dojo-bidi")){
_2a2.extend({_setLabelAttr:function(_2a6){
this._set("label",_2a6);
_293.set(this.titleTextNode,"innerHTML",_2a6);
this.applyTextDir(this.titleTextNode);
},_setTitleAttr:function(_2a7){
this._set("title",_2a7);
_293.set(this.titleTextNode,"title",_2a7);
this.applyTextDir(this.titleTextNode);
}});
}
var _2a8=_292("dijit.layout._AccordionInnerContainer"+(has("dojo-bidi")?"_NoBidi":""),[_29b,_29e],{baseClass:"dijitAccordionInnerContainer",isLayoutContainer:true,buildRendering:function(){
this.domNode=_295.place("<div class='"+this.baseClass+"' role='presentation'>",this.contentWidget.domNode,"after");
var _2a9=this.contentWidget,cls=lang.isString(this.buttonWidget)?lang.getObject(this.buttonWidget):this.buttonWidget;
this.button=_2a9._buttonWidget=(new cls({contentWidget:_2a9,label:_2a9.title,title:_2a9.tooltip,dir:_2a9.dir,lang:_2a9.lang,textDir:_2a9.textDir||this.textDir,iconClass:_2a9.iconClass,id:_2a9.id+"_button",parent:this.parent})).placeAt(this.domNode);
this.containerNode=_295.place("<div class='dijitAccordionChildWrapper' role='tabpanel' style='display:none'>",this.domNode);
this.containerNode.setAttribute("aria-labelledby",this.button.id);
_295.place(this.contentWidget.domNode,this.containerNode);
},postCreate:function(){
this.inherited(arguments);
var _2aa=this.button,cw=this.contentWidget;
this._contentWidgetWatches=[cw.watch("title",lang.hitch(this,function(name,_2ab,_2ac){
_2aa.set("label",_2ac);
})),cw.watch("tooltip",lang.hitch(this,function(name,_2ad,_2ae){
_2aa.set("title",_2ae);
})),cw.watch("iconClass",lang.hitch(this,function(name,_2af,_2b0){
_2aa.set("iconClass",_2b0);
}))];
},_setSelectedAttr:function(_2b1){
this._set("selected",_2b1);
this.button.set("selected",_2b1);
if(_2b1){
var cw=this.contentWidget;
if(cw.onSelected){
cw.onSelected();
}
}
},startup:function(){
this.contentWidget.startup();
},destroy:function(){
this.button.destroyRecursive();
_291.forEach(this._contentWidgetWatches||[],function(w){
w.unwatch();
});
delete this.contentWidget._buttonWidget;
delete this.contentWidget._wrapperWidget;
this.inherited(arguments);
},destroyDescendants:function(_2b2){
this.contentWidget.destroyRecursive(_2b2);
}});
if(has("dojo-bidi")){
_2a8=_292("dijit.layout._AccordionInnerContainer",_2a8,{postCreate:function(){
this.inherited(arguments);
var _2b3=this.button;
this._contentWidgetWatches.push(this.contentWidget.watch("textDir",function(name,_2b4,_2b5){
_2b3.set("textDir",_2b5);
}));
}});
}
var _2b6=_292("dijit.layout.AccordionContainer",_29f,{duration:_299.defaultDuration,buttonWidget:_2a2,baseClass:"dijitAccordionContainer",buildRendering:function(){
this.inherited(arguments);
this.domNode.style.overflow="hidden";
this.domNode.setAttribute("role","tablist");
},startup:function(){
if(this._started){
return;
}
this.inherited(arguments);
if(this.selectedChildWidget){
this.selectedChildWidget._wrapperWidget.set("selected",true);
}
},layout:function(){
var _2b7=this.selectedChildWidget;
if(!_2b7){
return;
}
var _2b8=_2b7._wrapperWidget.domNode,_2b9=_296.getMarginExtents(_2b8),_2ba=_296.getPadBorderExtents(_2b8),_2bb=_2b7._wrapperWidget.containerNode,_2bc=_296.getMarginExtents(_2bb),_2bd=_296.getPadBorderExtents(_2bb),_2be=this._contentBox;
var _2bf=0;
_291.forEach(this.getChildren(),function(_2c0){
if(_2c0!=_2b7){
_2bf+=_296.getMarginSize(_2c0._wrapperWidget.domNode).h;
}
});
this._verticalSpace=_2be.h-_2bf-_2b9.h-_2ba.h-_2bc.h-_2bd.h-_2b7._buttonWidget.getTitleHeight();
this._containerContentBox={h:this._verticalSpace,w:this._contentBox.w-_2b9.w-_2ba.w-_2bc.w-_2bd.w};
if(_2b7){
_2b7.resize(this._containerContentBox);
}
},_setupChild:function(_2c1){
_2c1._wrapperWidget=_2a8({contentWidget:_2c1,buttonWidget:this.buttonWidget,id:_2c1.id+"_wrapper",dir:_2c1.dir,lang:_2c1.lang,textDir:_2c1.textDir||this.textDir,parent:this});
this.inherited(arguments);
_295.place(_2c1.domNode,_2c1._wrapper,"replace");
},removeChild:function(_2c2){
if(_2c2._wrapperWidget){
_295.place(_2c2.domNode,_2c2._wrapperWidget.domNode,"after");
_2c2._wrapperWidget.destroy();
delete _2c2._wrapperWidget;
}
_294.remove(_2c2.domNode,"dijitHidden");
this.inherited(arguments);
},getChildren:function(){
return _291.map(this.inherited(arguments),function(_2c3){
return _2c3.declaredClass=="dijit.layout._AccordionInnerContainer"?_2c3.contentWidget:_2c3;
},this);
},destroy:function(){
if(this._animation){
this._animation.stop();
}
_291.forEach(this.getChildren(),function(_2c4){
if(_2c4._wrapperWidget){
_2c4._wrapperWidget.destroy();
}else{
_2c4.destroyRecursive();
}
});
this.inherited(arguments);
},_showChild:function(_2c5){
_2c5._wrapperWidget.containerNode.style.display="block";
return this.inherited(arguments);
},_hideChild:function(_2c6){
_2c6._wrapperWidget.containerNode.style.display="none";
this.inherited(arguments);
},_transition:function(_2c7,_2c8,_2c9){
if(has("ie")<8){
_2c9=false;
}
if(this._animation){
this._animation.stop(true);
delete this._animation;
}
var self=this;
if(_2c7){
_2c7._wrapperWidget.set("selected",true);
var d=this._showChild(_2c7);
if(this.doLayout&&_2c7.resize){
_2c7.resize(this._containerContentBox);
}
}
if(_2c8){
_2c8._wrapperWidget.set("selected",false);
if(!_2c9){
this._hideChild(_2c8);
}
}
if(_2c9){
var _2ca=_2c7._wrapperWidget.containerNode,_2cb=_2c8._wrapperWidget.containerNode;
var _2cc=_2c7._wrapperWidget.containerNode,_2cd=_296.getMarginExtents(_2cc),_2ce=_296.getPadBorderExtents(_2cc),_2cf=_2cd.h+_2ce.h;
_2cb.style.height=(self._verticalSpace-_2cf)+"px";
this._animation=new fx.Animation({node:_2ca,duration:this.duration,curve:[1,this._verticalSpace-_2cf-1],onAnimate:function(_2d0){
_2d0=Math.floor(_2d0);
_2ca.style.height=_2d0+"px";
_2cb.style.height=(self._verticalSpace-_2cf-_2d0)+"px";
},onEnd:function(){
delete self._animation;
_2ca.style.height="auto";
_2c8._wrapperWidget.containerNode.style.display="none";
_2cb.style.height="auto";
self._hideChild(_2c8);
}});
this._animation.onStop=this._animation.onEnd;
this._animation.play();
}
return d;
},_onKeyDown:function(e,_2d1){
if(this.disabled||e.altKey||!(_2d1||e.ctrlKey)){
return;
}
var c=e.keyCode;
if((_2d1&&(c==keys.LEFT_ARROW||c==keys.UP_ARROW))||(e.ctrlKey&&c==keys.PAGE_UP)){
this._adjacent(false)._buttonWidget._onTitleClick();
e.stopPropagation();
e.preventDefault();
}else{
if((_2d1&&(c==keys.RIGHT_ARROW||c==keys.DOWN_ARROW))||(e.ctrlKey&&(c==keys.PAGE_DOWN||c==keys.TAB))){
this._adjacent(true)._buttonWidget._onTitleClick();
e.stopPropagation();
e.preventDefault();
}
}
}});
if(1){
_29a(0,function(){
var _2d2=["dijit/layout/AccordionPane"];
_290(_2d2);
});
}
_2b6._InnerContainer=_2a8;
_2b6._Button=_2a2;
return _2b6;
});
},"dijit/Destroyable":function(){
define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(_2d3,_2d4,_2d5){
return _2d5("dijit.Destroyable",null,{destroy:function(_2d6){
this._destroyed=true;
},own:function(){
var _2d7=["destroyRecursive","destroy","remove"];
_2d3.forEach(arguments,function(_2d8){
var _2d9;
var odh=_2d4.before(this,"destroy",function(_2da){
_2d8[_2d9](_2da);
});
var hdhs=[];
function _2db(){
odh.remove();
_2d3.forEach(hdhs,function(hdh){
hdh.remove();
});
};
if(_2d8.then){
_2d9="cancel";
_2d8.then(_2db,_2db);
}else{
_2d3.forEach(_2d7,function(_2dc){
if(typeof _2d8[_2dc]==="function"){
if(!_2d9){
_2d9=_2dc;
}
hdhs.push(_2d4.after(_2d8,_2dc,_2db,true));
}
});
}
},this);
return arguments;
}});
});
},"dojo/request":function(){
define(["./request/default!"],function(_2dd){
return _2dd;
});
},"curam/util/Dropdown":function(){
define(["dojo/_base/declare"],function(_2de){
var _2df=_2de("curam.util.Dropdown",null,{constructor:function(){
},updateDropdownItems:function(_2e0,_2e1,_2e2){
if(_2e1.constructor!==Array||_2e2.constructor!==Array){
throw new Error("Both "+_2e1+" and "+_2e2+" must be an array");
}
if(_2e1.length!=_2e2.length){
throw new Error("Both "+_2e1+" and "+_2e2+" must have the same number of items");
}
if(window.spm){
window.spm.requireCarbonAddons().then(function(_2e3){
_2e3.ComboBox.unmount(window,_2e0);
});
var _2e4=[];
for(var i=0;i<_2e1.length;i++){
item={};
item.id=_2e0+"_"+_2e1[i];
item.text=_2e2[i];
item.value=_2e1[i];
_2e4.push(item);
}
labelConfig=curam.util.getTopmostWindow().__dropdownLabelConfig;
var _2e5=labelConfig?labelConfig:{};
var _2e6={inputId:_2e0,items:_2e4,attributes:{},comboBoxOptions:{},labels:_2e5,iframeWindow:window};
window.spm.requireCarbonAddons().then(function(_2e7){
_2e7.ComboBox.render(_2e6);
});
}
},resetDropdownToEmpty:function(_2e8){
this.updateDropdownItems(_2e8,[],[]);
},setSelectedOnDropdownByDescription:function(_2e9,_2ea){
if(_2e9){
var _2eb=_2e9.lastIndexOf("_wrapper")!=-1?_2e9.substring(0,_2e9.lastIndexOf("_wrapper")):_2e9;
dojo.publish("/curam/comboxbox/setSelectedItem",[_2eb,undefined,_2ea]);
}
},setSelectedOnDropdownIDByCodevalue:function(_2ec,_2ed){
if(_2ec){
var _2ee=_2ec.lastIndexOf("_wrapper")!=-1?_2ec.substring(0,_2ec.lastIndexOf("_wrapper")):_2ec;
curam.util.getTopmostWindow().dojo.publish("/curam/comboxbox/setSelectedItem".concat(_2ec),[_2ee,_2ed]);
}
},setSelectedOnDropdownByCodevalue:function(_2ef,_2f0){
if(_2ef){
var _2f1=_2ef.lastIndexOf("_wrapper")!=-1?_2ef.substring(0,_2ef.lastIndexOf("_wrapper")):_2ef;
curam.util.getTopmostWindow().dojo.publish("/curam/comboxbox/setSelectedItem",[_2f1,_2f0]);
}
},executeActionFromInitialValueOnDropdown:function(_2f2,_2f3){
this.dropdownInputID=_2f2;
var _2f4=dojo.subscribe("/curam/comboxbox/initialValue",this,function(val,_2f5){
if(this.dropdownInputID===_2f5){
this.__initialValueFromDropdown=val;
_2f3();
dojo.unsubscribe(_2f4);
}
});
}});
return _2df;
});
},"dojo/NodeList-traverse":function(){
define(["./query","./_base/lang","./_base/array"],function(_2f6,lang,_2f7){
var _2f8=_2f6.NodeList;
lang.extend(_2f8,{_buildArrayFromCallback:function(_2f9){
var ary=[];
for(var i=0;i<this.length;i++){
var _2fa=_2f9.call(this[i],this[i],ary);
if(_2fa){
ary=ary.concat(_2fa);
}
}
return ary;
},_getUniqueAsNodeList:function(_2fb){
var ary=[];
for(var i=0,node;node=_2fb[i];i++){
if(node.nodeType==1&&_2f7.indexOf(ary,node)==-1){
ary.push(node);
}
}
return this._wrap(ary,null,this._NodeListCtor);
},_getUniqueNodeListWithParent:function(_2fc,_2fd){
var ary=this._getUniqueAsNodeList(_2fc);
ary=(_2fd?_2f6._filterResult(ary,_2fd):ary);
return ary._stash(this);
},_getRelatedUniqueNodes:function(_2fe,_2ff){
return this._getUniqueNodeListWithParent(this._buildArrayFromCallback(_2ff),_2fe);
},children:function(_300){
return this._getRelatedUniqueNodes(_300,function(node,ary){
return lang._toArray(node.childNodes);
});
},closest:function(_301,root){
return this._getRelatedUniqueNodes(null,function(node,ary){
do{
if(_2f6._filterResult([node],_301,root).length){
return node;
}
}while(node!=root&&(node=node.parentNode)&&node.nodeType==1);
return null;
});
},parent:function(_302){
return this._getRelatedUniqueNodes(_302,function(node,ary){
return node.parentNode;
});
},parents:function(_303){
return this._getRelatedUniqueNodes(_303,function(node,ary){
var pary=[];
while(node.parentNode){
node=node.parentNode;
pary.push(node);
}
return pary;
});
},siblings:function(_304){
return this._getRelatedUniqueNodes(_304,function(node,ary){
var pary=[];
var _305=(node.parentNode&&node.parentNode.childNodes);
for(var i=0;i<_305.length;i++){
if(_305[i]!=node){
pary.push(_305[i]);
}
}
return pary;
});
},next:function(_306){
return this._getRelatedUniqueNodes(_306,function(node,ary){
var next=node.nextSibling;
while(next&&next.nodeType!=1){
next=next.nextSibling;
}
return next;
});
},nextAll:function(_307){
return this._getRelatedUniqueNodes(_307,function(node,ary){
var pary=[];
var next=node;
while((next=next.nextSibling)){
if(next.nodeType==1){
pary.push(next);
}
}
return pary;
});
},prev:function(_308){
return this._getRelatedUniqueNodes(_308,function(node,ary){
var prev=node.previousSibling;
while(prev&&prev.nodeType!=1){
prev=prev.previousSibling;
}
return prev;
});
},prevAll:function(_309){
return this._getRelatedUniqueNodes(_309,function(node,ary){
var pary=[];
var prev=node;
while((prev=prev.previousSibling)){
if(prev.nodeType==1){
pary.push(prev);
}
}
return pary;
});
},andSelf:function(){
return this.concat(this._parent);
},first:function(){
return this._wrap(((this[0]&&[this[0]])||[]),this);
},last:function(){
return this._wrap((this.length?[this[this.length-1]]:[]),this);
},even:function(){
return this.filter(function(item,i){
return i%2!=0;
});
},odd:function(){
return this.filter(function(item,i){
return i%2==0;
});
}});
return _2f8;
});
},"curam/lnf":function(){
define(["dojo/dom","dojo/dom-class","curam/define"],function(dom,_30a,_30b){
_30b.singleton("curam.lnf",{setCTParent:function(id){
var _30c=dom.byId(id);
var _30d=_30c.parentNode;
if(_30d.tagName=="TD"){
_30a.add(_30d,"codetable");
}
}});
return curam.lnf;
});
},"dojo/data/util/filter":function(){
define(["../../_base/lang"],function(lang){
var _30e={};
lang.setObject("dojo.data.util.filter",_30e);
_30e.patternToRegExp=function(_30f,_310){
var rxp="^";
var c=null;
for(var i=0;i<_30f.length;i++){
c=_30f.charAt(i);
switch(c){
case "\\":
rxp+=c;
i++;
rxp+=_30f.charAt(i);
break;
case "*":
rxp+=".*";
break;
case "?":
rxp+=".";
break;
case "$":
case "^":
case "/":
case "+":
case ".":
case "|":
case "(":
case ")":
case "{":
case "}":
case "[":
case "]":
rxp+="\\";
default:
rxp+=c;
}
}
rxp+="$";
if(_310){
return new RegExp(rxp,"mi");
}else{
return new RegExp(rxp,"m");
}
};
return _30e;
});
},"dojo/dnd/common":function(){
define(["../sniff","../_base/kernel","../_base/lang","../dom"],function(has,_311,lang,dom){
var _312=lang.getObject("dojo.dnd",true);
_312.getCopyKeyState=function(evt){
return evt[has("mac")?"metaKey":"ctrlKey"];
};
_312._uniqueId=0;
_312.getUniqueId=function(){
var id;
do{
id=_311._scopeName+"Unique"+(++_312._uniqueId);
}while(dom.byId(id));
return id;
};
_312._empty={};
_312.isFormElement=function(e){
var t=e.target;
if(t.nodeType==3){
t=t.parentNode;
}
return " a button textarea input select option ".indexOf(" "+t.tagName.toLowerCase()+" ")>=0;
};
return _312;
});
},"dijit/tree/ForestStoreModel":function(){
define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(_313,_314,_315,lang,_316){
return _314("dijit.tree.ForestStoreModel",_316,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(_317){
this.root={store:this,root:true,id:_317.rootId,label:_317.rootLabel,children:_317.rootChildren};
},mayHaveChildren:function(item){
return item===this.root||this.inherited(arguments);
},getChildren:function(_318,_319,_31a){
if(_318===this.root){
if(this.root.children){
_319(this.root.children);
}else{
this.store.fetch({query:this.query,onComplete:lang.hitch(this,function(_31b){
this.root.children=_31b;
_319(_31b);
}),onError:_31a});
}
}else{
this.inherited(arguments);
}
},isItem:function(_31c){
return (_31c===this.root)?true:this.inherited(arguments);
},fetchItemByIdentity:function(_31d){
if(_31d.identity==this.root.id){
var _31e=_31d.scope||_315.global;
if(_31d.onItem){
_31d.onItem.call(_31e,this.root);
}
}else{
this.inherited(arguments);
}
},getIdentity:function(item){
return (item===this.root)?this.root.id:this.inherited(arguments);
},getLabel:function(item){
return (item===this.root)?this.root.label:this.inherited(arguments);
},newItem:function(args,_31f,_320){
if(_31f===this.root){
this.onNewRootItem(args);
return this.store.newItem(args);
}else{
return this.inherited(arguments);
}
},onNewRootItem:function(){
},pasteItem:function(_321,_322,_323,_324,_325){
if(_322===this.root){
if(!_324){
this.onLeaveRoot(_321);
}
}
this.inherited(arguments,[_321,_322===this.root?null:_322,_323===this.root?null:_323,_324,_325]);
if(_323===this.root){
this.onAddToRoot(_321);
}
},onAddToRoot:function(item){
console.log(this,": item ",item," added to root");
},onLeaveRoot:function(item){
console.log(this,": item ",item," removed from root");
},_requeryTop:function(){
var _326=this.root.children||[];
this.store.fetch({query:this.query,onComplete:lang.hitch(this,function(_327){
this.root.children=_327;
if(_326.length!=_327.length||_313.some(_326,function(item,idx){
return _327[idx]!=item;
})){
this.onChildrenChange(this.root,_327);
}
})});
},onNewItem:function(item,_328){
this._requeryTop();
this.inherited(arguments);
},onDeleteItem:function(item){
if(_313.indexOf(this.root.children,item)!=-1){
this._requeryTop();
}
this.inherited(arguments);
},onSetItem:function(item,_329,_32a,_32b){
this._requeryTop();
this.inherited(arguments);
}});
});
},"curam/util/ResourceBundle":function(){
define(["dojo/_base/declare","dojo/i18n","dojo/string"],function(_32c,i18n,_32d){
var _32e=_32c("curam.util.ResourceBundle",null,{_bundle:undefined,constructor:function(_32f,_330){
var _331=_32f.split(".");
var _332=_331[_331.length-1];
var _333=_331.length==1?"curam.application":_32f.slice(0,_32f.length-_332.length-1);
try{
var b=i18n.getLocalization(_333,_332,_330);
if(this._isEmpty(b)){
throw new Error("Empty resource bundle.");
}else{
this._bundle=b;
}
}
catch(e){
throw new Error("Unable to access resource bundle: "+_333+"."+_332+": "+e.message);
}
},_isEmpty:function(_334){
for(var prop in _334){
return false;
}
return true;
},getProperty:function(key,_335){
var msg=this._bundle[key];
var _336=msg;
if(_335){
_336=_32d.substitute(msg,_335);
}
return _336;
}});
return _32e;
});
},"dijit/Menu":function(){
define(["require","dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window","dojo/window","./popup","./DropDownMenu","dojo/ready"],function(_337,_338,_339,dom,_33a,_33b,_33c,keys,lang,on,has,win,_33d,pm,_33e,_33f){
if(1){
_33f(0,function(){
var _340=["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"];
_337(_340);
});
}
return _339("dijit.Menu",_33e,{constructor:function(){
this._bindings=[];
},targetNodeIds:[],selector:"",contextMenuForWindow:false,leftClickToOpen:false,refocus:true,postCreate:function(){
if(this.contextMenuForWindow){
this.bindDomNode(this.ownerDocumentBody);
}else{
_338.forEach(this.targetNodeIds,this.bindDomNode,this);
}
this.inherited(arguments);
},_iframeContentWindow:function(_341){
return _33d.get(this._iframeContentDocument(_341))||this._iframeContentDocument(_341)["__parent__"]||(_341.name&&document.frames[_341.name])||null;
},_iframeContentDocument:function(_342){
return _342.contentDocument||(_342.contentWindow&&_342.contentWindow.document)||(_342.name&&document.frames[_342.name]&&document.frames[_342.name].document)||null;
},bindDomNode:function(node){
node=dom.byId(node,this.ownerDocument);
var cn;
if(node.tagName.toLowerCase()=="iframe"){
var _343=node,_344=this._iframeContentWindow(_343);
cn=win.body(_344.document);
}else{
cn=(node==win.body(this.ownerDocument)?this.ownerDocument.documentElement:node);
}
var _345={node:node,iframe:_343};
_33a.set(node,"_dijitMenu"+this.id,this._bindings.push(_345));
var _346=lang.hitch(this,function(cn){
var _347=this.selector,_348=_347?function(_349){
return on.selector(_347,_349);
}:function(_34a){
return _34a;
},self=this;
return [on(cn,_348(this.leftClickToOpen?"click":"contextmenu"),function(evt){
evt.stopPropagation();
evt.preventDefault();
if((new Date()).getTime()<self._lastKeyDown+500){
return;
}
self._scheduleOpen(this,_343,{x:evt.pageX,y:evt.pageY},evt.target);
}),on(cn,_348("keydown"),function(evt){
if(evt.keyCode==93||(evt.shiftKey&&evt.keyCode==keys.F10)||(self.leftClickToOpen&&evt.keyCode==keys.SPACE)){
evt.stopPropagation();
evt.preventDefault();
self._scheduleOpen(this,_343,null,evt.target);
self._lastKeyDown=(new Date()).getTime();
}
})];
});
_345.connects=cn?_346(cn):[];
if(_343){
_345.onloadHandler=lang.hitch(this,function(){
var _34b=this._iframeContentWindow(_343),cn=win.body(_34b.document);
_345.connects=_346(cn);
});
if(_343.addEventListener){
_343.addEventListener("load",_345.onloadHandler,false);
}else{
_343.attachEvent("onload",_345.onloadHandler);
}
}
},unBindDomNode:function(_34c){
var node;
try{
node=dom.byId(_34c,this.ownerDocument);
}
catch(e){
return;
}
var _34d="_dijitMenu"+this.id;
if(node&&_33a.has(node,_34d)){
var bid=_33a.get(node,_34d)-1,b=this._bindings[bid],h;
while((h=b.connects.pop())){
h.remove();
}
var _34e=b.iframe;
if(_34e){
if(_34e.removeEventListener){
_34e.removeEventListener("load",b.onloadHandler,false);
}else{
_34e.detachEvent("onload",b.onloadHandler);
}
}
_33a.remove(node,_34d);
delete this._bindings[bid];
}
},_scheduleOpen:function(_34f,_350,_351,_352){
if(!this._openTimer){
this._openTimer=this.defer(function(){
delete this._openTimer;
this._openMyself({target:_352,delegatedTarget:_34f,iframe:_350,coords:_351});
},1);
}
},_openMyself:function(args){
var _353=args.target,_354=args.iframe,_355=args.coords,_356=!_355;
this.currentTarget=args.delegatedTarget;
if(_355){
if(_354){
var ifc=_33b.position(_354,true),_357=this._iframeContentWindow(_354),_358=_33b.docScroll(_357.document);
var cs=_33c.getComputedStyle(_354),tp=_33c.toPixelValue,left=(has("ie")&&has("quirks")?0:tp(_354,cs.paddingLeft))+(has("ie")&&has("quirks")?tp(_354,cs.borderLeftWidth):0),top=(has("ie")&&has("quirks")?0:tp(_354,cs.paddingTop))+(has("ie")&&has("quirks")?tp(_354,cs.borderTopWidth):0);
_355.x+=ifc.x+left-_358.x;
_355.y+=ifc.y+top-_358.y;
}
}else{
_355=_33b.position(_353,true);
_355.x+=10;
_355.y+=10;
}
var self=this;
var _359=this._focusManager.get("prevNode");
var _35a=this._focusManager.get("curNode");
var _35b=!_35a||(dom.isDescendant(_35a,this.domNode))?_359:_35a;
function _35c(){
if(self.refocus&&_35b){
_35b.focus();
}
pm.close(self);
};
pm.open({popup:this,x:_355.x,y:_355.y,onExecute:_35c,onCancel:_35c,orient:this.isLeftToRight()?"L":"R"});
this.focus();
if(!_356){
this.defer(function(){
this._cleanUp(true);
});
}
this._onBlur=function(){
this.inherited("_onBlur",arguments);
pm.close(this);
};
},destroy:function(){
_338.forEach(this._bindings,function(b){
if(b){
this.unBindDomNode(b.node);
}
},this);
this.inherited(arguments);
}});
});
},"curam/util/TabNavigation":function(){
dojo.require("curam.util.ResourceBundle");
define(["dijit/registry","dojo/dom","dojo/dom-style","dojo/dom-class","dojo/dom-attr","dojo/dom-construct","curam/inspection/Layer","curam/debug","curam/define","curam/util","curam/tab","curam/util/Refresh"],function(_35d,dom,_35e,_35f,_360,_361,_362,_363){
curam.define.singleton("curam.util.TabNavigation",{CACHE_BUSTER:0,CACHE_BUSTER_PARAM_NAME:"o3nocache",disabledItems:{},tabLists:{},init:function(_364,_365){
var _366=_364+"child-nav-selectChild";
var _367=dojo.subscribe(_366,"",function(){
curam.util.TabNavigation.onParentSelect(null,_364);
});
curam.tab.unsubscribeOnTabClose(_367,_365);
},onParentSelect:function(_368,_369){
var _36a=_369+"-child-nav";
var _36b=_35d.byId(_36a);
var _36c=true;
if(!_368){
var _36c=false;
var _36d=_369+"-parent-nav";
var _36e=_35d.byId(_36d);
_368=_36e.selectedChildWidget;
}
if(_368.curamDoNoReload){
_36c=false;
_368.setAttribute("curamDoNoReload",null);
}
var _36f=_368.id+"-Stack";
var _370=_35d.byId(_36f);
var href=_360.get(_370.get("srcNodeRef"),"page-ref");
if(!href){
var _371=_370;
if(_371){
var link=dojo.query("li.selected > div.link",_371.id)[0];
href=_360.get(link,"page-ref");
}else{
throw new Error("Could not find a page reference. The menu item '"+_368.id+"' has no page reference and no selected child item was found.");
}
}
if(_36c){
var ifr=curam.util.TabNavigation.getIframe(_369);
if(dojo.isIE&&dojo.isIE<9){
ifrBody=ifr.contentWindow.document.body;
}else{
ifrBody=ifr.contentDocument.activeElement;
}
var _372=function(){
_36b.selectChild(_370);
_35e.set(_36b.domNode,"visibility","visible");
_35e.set(ifr,"visibility","visible");
_35e.set(ifr,"opacity","1");
curam.debug.log("curam.util.TabNavigation.postIframeLoadHandler anon function calling curam.util.setBrowserTabTitle");
curam.util.setBrowserTabTitle();
};
if(dojo.isIE&&dojo.isIE<9){
var lh=function(){
if(ifr.readyState=="complete"){
ifr.detachEvent("onreadystatechange",lh);
_372();
}
};
ifr.attachEvent("onreadystatechange",lh);
}else{
var dt=dojo.connect(ifr,"onload",null,function(){
dojo.disconnect(dt);
_372();
});
}
dojo.query("div.list",ifrBody).forEach(function(node){
_35f.add(node,"hidden");
});
_35e.set(ifr,"opacity","0");
_35e.set(_36b.domNode,"visibility","hidden");
curam.util.TabNavigation.loadIframe(href,_369);
}
var open=curam.util.TabNavigation.childMenuExists(_368);
curam.util.TabNavigation.toggleChildMenu(open,_369);
},childMenuExists:function(_373){
var _374=_373.id+"-Stack";
var _375=dojo.query("#"+_374+" ul");
if(_375.length==0){
return false;
}else{
return true;
}
},toggleChildMenu:function(open,_376){
var _377=_376+"-navigation-tab";
var _378=dom.byId(_377);
var _379=dojo.query(".content-area-container",_378)[0];
var _37a=dojo.query(".child-nav",_378)[0];
if(!open){
var _37b="0px";
var _37c=((_35e.getComputedStyle(_379).direction=="ltr")?{left:_37b}:{right:_37b});
var _37d={width:_37b};
_35e.set(_379,_37c);
_35e.set(_37a,_37d);
}else{
var _37e=_360.get(_378,"child-menu-width");
var _37c=((_35e.getComputedStyle(_379).direction=="ltr")?{left:_37e}:{right:_37e});
var _37d={width:_37e};
_35e.set(_379,_37c);
_35e.set(_37a,_37d);
}
},handleChildSelect:function(_37f,_380,_381){
if(!curam.util.TabNavigation.isSelectable(_37f.parentNode.id)){
dojo.stopEvent(dojo.fixEvent(_381));
return false;
}
var ul=curam.util.TabNavigation.getNext(_37f,"UL");
var _382=ul.childNodes;
for(var i=0;i<_382.length;i++){
_35f.replace(_382[i],"not-selected","selected");
}
_35f.replace(_37f.parentNode,"selected","not-selected");
var href=_360.get(_37f,"page-ref");
curam.util.TabNavigation.loadIframe(href,_380);
return true;
},isSelectable:function(_383){
return !curam.util.TabNavigation.disabledItems[_383];
},getNext:function(_384,_385){
var _386=_384.parentNode;
if(_386==null){
curam.debug.log(_363.getProperty("curam.util.TabNavigation.error",[_385]));
return null;
}
if(_386.nodeName===_385){
return _386;
}else{
var _386=curam.util.TabNavigation.getNext(_386,_385);
return _386;
}
},loadIframe:function(href,_387){
var _388=curam.util.TabNavigation.getIframe(_387);
curam.util.getTopmostWindow().dojo.publish("/curam/progress/display",[_35d.getEnclosingWidget(_388).domNode]);
_360.set(_388,"src",href+"&"+this.getCacheBusterParameter());
},getIframe:function(_389){
var _38a=_389+"-navigation-tab";
var _38b=dom.byId(_38a);
var _38c=dojo.query("iframe",_38b);
return _38c[0];
},getCacheBusterParameter:function(){
return this.CACHE_BUSTER_PARAM_NAME+"="+new Date().getTime()+"_"+this.CACHE_BUSTER++;
},setupOnParentSelect:function(_38d,_38e,_38f){
var _390=dom.byId(_38d+"-navigation-tab");
var _391=curam.tab.getContainerTab(_390);
_391.subscribe(_38d+"-child-nav-startup",function(){
curam.util.TabNavigation.onParentSelect(null,_38d);
var tabs=_38f.split(",");
for(tabID in tabs){
var _392=curam.util.TabNavigation.findNavItem("navItem_"+this.id+"_"+tabs[tabID]);
if(_392!=null){
_392.set("curamVisible",false);
}
}
});
_391.subscribe(_38e,function(_393){
curam.util.TabNavigation.onParentSelect(_393,_38d);
});
},setupRefresh:function(_394){
curam.util.Refresh.setNavigationCallbacks(curam.util.TabNavigation.updateNavItemStates,curam.util.TabNavigation.getRefreshParams);
},getRefreshParams:function(_395){
curam.debug.log("curam.util.TabNavigation.getRefreshParams(%s)",_395);
var _396=curam.util.TabNavigation.dynamicNavigationData[_395];
if(!_396){
curam.debug.log(_363.getProperty("curam.util.TabNavigation.no.dynamic"));
return null;
}
var _397="navId="+_396.navigationId;
_397+="&navItemIds="+curam.util.toCommaSeparatedList(_396.dynamicNavItemIds);
_397+="&navLoaders="+curam.util.toCommaSeparatedList(_396.dynamicNavLoaders);
_397+="&navPageParameters="+_396.pageParameters;
return _397;
},updateNavItemStates:function(_398,data){
var _399=data.navData;
for(var i=0;i<_399.itemStates.length;i++){
curam.util.TabNavigation.updateNavItemState(_399.itemStates[i],_398);
}
curam.util.TabNavigation._updateAriaMarkupForEnabledAndDisabledNavigationTabs();
},_updateAriaMarkupForEnabledAndDisabledNavigationTabs:function(){
var _39a;
var _39b;
var _39c="true";
var _39d=[];
var _39e=dojo.query(".dijitTabContainerTop-tabs");
var _39f=new curam.util.ResourceBundle("TabNavigation");
_39e.forEach(function(_3a0){
_39a=dojo.query(".tabLabel",_3a0);
if(_39a.length>0&&_39c=="true"){
_39b=0;
_39d=[];
_39c="false";
}
_39a.forEach(function(tab){
var _3a1=tab.id+"_tabButtonContainer";
var _3a2=dojo.byId(_3a1);
if(!_35f.contains(_3a2,"disabled")&&(_35f.contains(_3a2,"visible")||_35f.contains(_3a2,"enabled, dijitChecked"))){
_360.set(tab,"aria-disabled","false");
}else{
_360.set(tab,"aria-disabled","true");
_39b++;
var _3a3=_360.get(tab,"title");
if(typeof (_3a3)!="undefined"){
_39d.push(" "+_3a3);
}
}
});
_39a.forEach(function(tab,_3a4){
var _3a5=_360.get(tab,"aria-disabled");
if(_3a5=="false"){
var _3a6;
var _3a7=_39a[_3a4].innerHTML;
tab.setAttribute("title",_3a7);
if(_39b==1){
tab.removeAttribute("aria-labelledby");
_3a6=". "+_39f.getProperty("curam.navigation.tab")+" "+(_3a4+1)+" "+LOCALISED_TABCONTAINER_CONTEXT_OF+" "+_39a.length+". "+_39b+" "+_39f.getProperty("curam.single.disabled.navigation.tab")+": "+_39d+".";
tab.setAttribute("aria-label",_3a7+_3a6);
}else{
if(_39b>1){
tab.removeAttribute("aria-labelledby");
_3a6=". "+_39f.getProperty("curam.navigation.tab")+" "+(_3a4+1)+" "+LOCALISED_TABCONTAINER_CONTEXT_OF+" "+_39a.length+". "+_39b+" "+_39f.getProperty("curam.multiple.disabled.navigation.tab")+": "+_39d+".";
tab.setAttribute("aria-label",_3a7+_3a6);
}else{
_3a6=". "+_39f.getProperty("curam.navigation.tab")+" "+(_3a4+1)+" "+LOCALISED_TABCONTAINER_CONTEXT_OF+" "+_39a.length+". ";
tab.setAttribute("aria-label",_3a7+_3a6);
}
}
}else{
tab.removeAttribute("role");
tab.removeAttribute("tabindex");
tab.removeAttribute("aria-label");
}
});
_39c="true";
});
},updateNavItemState:function(_3a8,_3a9){
var _3aa=curam.util.TabNavigation.findNavItem("navItem_"+_3a9+"_"+_3a8.id);
if(_3aa!=null){
if(!_3aa.domNode){
curam.util.TabNavigation.disabledItems[_3aa.id]=!_3a8.enabled;
curam.util.swapState(_3aa,_3a8.enabled,"enabled","disabled");
curam.util.swapState(_3aa,_3a8.visible,"visible","hidden");
var _3ab=_360.get(_3aa,"class").indexOf("disabled")>0?true:false;
if(_3ab){
_360.set(_3aa.children[0],"aria-disabled","true");
}
}else{
_3aa.set("curamDisabled",!_3a8.enabled);
_3aa.set("curamVisible",_3a8.visible);
}
}
},findNavItem:function(_3ac){
var _3ad=dojo.query("."+_3ac);
if(_3ad.length==1){
var node=_3ad[0];
var _3ae=dijit.byNode(node);
if(!_3ae){
return node;
}else{
return _3ae.controlButton;
}
}else{
curam.debug.log(_363.getProperty("curam.util.TabNavigation.item",[_3ac]));
return null;
}
},addRollOverClass:function(_3af){
_35f.add(_3af.target,"hover");
curam.util.connect(_3af.target,"onmouseout",function(){
_35f.remove(_3af.target,"hover");
});
},setupOnLoadListener:function(_3b0,_3b1){
var _3b2=dojo.fromJson(_3b1);
var _3b3=function(_3b4,_3b5){
curam.util.TabNavigation.handleContentAreaUpdate(_3b4,_3b5,_3b2);
};
var _3b6=curam.tab.getHandlerForTab(_3b3,_3b0);
var _3b7=curam.util.getTopmostWindow();
var _3b8=_3b7.dojo.subscribe("/curam/main-content/page/loaded",null,_3b6);
curam.tab.unsubscribeOnTabClose(_3b8,_3b0);
},setupTabList:function(_3b9,_3ba){
if(!curam.util.TabNavigation.tabLists[_3b9]){
curam.tab.executeOnTabClose(function(){
delete curam.util.TabNavigation.tabLists[_3b9];
},_3b9);
}
delete curam.util.TabNavigation.tabLists[_3b9];
curam.util.TabNavigation.tabLists[_3b9]=_3ba;
},handleContentAreaUpdate:function(_3bb,_3bc,_3bd){
var ids=_3bd[_3bb];
if(ids){
var _3be=ids["dojoTabId"];
var _3bf=_3be+"-parent-nav";
var _3c0=ids["tabId"];
var _3c1=ids["childId"];
var _3c2=_35d.byId(_3c0);
var _3c3=_35d.byId(_3bf);
if(_3c2){
if(_3c3.selectedChildWidget!=_3c2){
_3c2.setAttribute("curamDoNoReload",true);
_3c3.selectChild(_3c2);
}
if(_3c1){
var _3c4=_3c0+"-Stack";
var _3c5=_3be+"-child-nav";
var _3c6=_35d.byId(_3c5);
var _3c7=_35d.byId(_3c4);
_3c6.selectChild(_3c7);
var _3c8=dojo.query("li",_3c7.domNode);
for(var i=0;i<_3c8.length;i++){
var _3c9=_3c8[i];
if(_3c9.id==_3c1){
var _3ca=_3c9;
}
}
if(_3ca){
if(!_35f.contains(_3ca,"selected")){
var _3cb=_3ca.parentNode.childNodes;
for(var i=0;i<_3cb.length;i++){
_35f.replace(_3cb[i],"not-selected","selected");
}
_35f.replace(_3ca,"selected","not-selected");
}
}
}
}
}
},getInsertIndex:function(_3cc,_3cd,_3ce){
var _3cf=curam.util.TabNavigation.tabLists[_3cc];
var _3d0=dojo.indexOf(_3cf,_3ce);
var _3d1=_3d0;
for(var i=_3d0-1;i>=0;i--){
if(dojo.indexOf(_3cd,_3cf[i])<0){
_3d1--;
}
}
return _3d1;
}});
_362.register("curam/util/TabNavigation",curam.util.TabNavigation);
return curam.util.TabNavigation;
});
},"dojo/store/Observable":function(){
define(["../_base/kernel","../_base/lang","../when","../_base/array"],function(_3d2,lang,when,_3d3){
var _3d4=function(_3d5){
var _3d6,_3d7=[],_3d8=0;
_3d5=lang.delegate(_3d5);
_3d5.notify=function(_3d9,_3da){
_3d8++;
var _3db=_3d7.slice();
for(var i=0,l=_3db.length;i<l;i++){
_3db[i](_3d9,_3da);
}
};
var _3dc=_3d5.query;
_3d5.query=function(_3dd,_3de){
_3de=_3de||{};
var _3df=_3dc.apply(this,arguments);
if(_3df&&_3df.forEach){
var _3e0=lang.mixin({},_3de);
delete _3e0.start;
delete _3e0.count;
var _3e1=_3d5.queryEngine&&_3d5.queryEngine(_3dd,_3e0);
var _3e2=_3d8;
var _3e3=[],_3e4;
_3df.observe=function(_3e5,_3e6){
if(_3e3.push(_3e5)==1){
_3d7.push(_3e4=function(_3e7,_3e8){
when(_3df,function(_3e9){
var _3ea=_3e9.length!=_3de.count;
var i,l,_3e5;
if(++_3e2!=_3d8){
throw new Error("Query is out of date, you must observe() the query prior to any data modifications");
}
var _3eb,_3ec=-1,_3ed=-1;
if(_3e8!==_3d6){
var _3ee=[].concat(_3e9);
if(_3e1&&!_3e7){
_3ee=_3e1(_3e9);
}
for(i=0,l=_3e9.length;i<l;i++){
var _3ef=_3e9[i];
if(_3d5.getIdentity(_3ef)==_3e8){
if(_3ee.indexOf(_3ef)<0){
continue;
}
_3eb=_3ef;
_3ec=i;
if(_3e1||!_3e7){
_3e9.splice(i,1);
}
break;
}
}
}
if(_3e1){
if(_3e7&&(_3e1.matches?_3e1.matches(_3e7):_3e1([_3e7]).length)){
var _3f0=_3ec>-1?_3ec:_3e9.length;
_3e9.splice(_3f0,0,_3e7);
_3ed=_3d3.indexOf(_3e1(_3e9),_3e7);
_3e9.splice(_3f0,1);
if((_3de.start&&_3ed==0)||(!_3ea&&_3ed==_3e9.length)){
_3ed=-1;
}else{
_3e9.splice(_3ed,0,_3e7);
}
}
}else{
if(_3e7){
if(_3e8!==_3d6){
_3ed=_3ec;
}else{
if(!_3de.start){
_3ed=_3d5.defaultIndex||0;
_3e9.splice(_3ed,0,_3e7);
}
}
}
}
if((_3ec>-1||_3ed>-1)&&(_3e6||!_3e1||(_3ec!=_3ed))){
var _3f1=_3e3.slice();
for(i=0;_3e5=_3f1[i];i++){
_3e5(_3e7||_3eb,_3ec,_3ed);
}
}
});
});
}
var _3f2={};
_3f2.remove=_3f2.cancel=function(){
var _3f3=_3d3.indexOf(_3e3,_3e5);
if(_3f3>-1){
_3e3.splice(_3f3,1);
if(!_3e3.length){
_3d7.splice(_3d3.indexOf(_3d7,_3e4),1);
}
}
};
return _3f2;
};
}
return _3df;
};
var _3f4;
function _3f5(_3f6,_3f7){
var _3f8=_3d5[_3f6];
if(_3f8){
_3d5[_3f6]=function(_3f9){
var _3fa;
if(_3f6==="put"){
_3fa=_3d5.getIdentity(_3f9);
}
if(_3f4){
return _3f8.apply(this,arguments);
}
_3f4=true;
try{
var _3fb=_3f8.apply(this,arguments);
when(_3fb,function(_3fc){
_3f7((typeof _3fc=="object"&&_3fc)||_3f9,_3fa);
});
return _3fb;
}
finally{
_3f4=false;
}
};
}
};
_3f5("put",function(_3fd,_3fe){
_3d5.notify(_3fd,_3fe);
});
_3f5("add",function(_3ff){
_3d5.notify(_3ff);
});
_3f5("remove",function(id){
_3d5.notify(undefined,id);
});
return _3d5;
};
lang.setObject("dojo.store.Observable",_3d4);
return _3d4;
});
},"curam/pagination/ControlPanel":function(){
define(["dijit/registry","dojo/_base/declare","dojo/dom-style","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/sniff","dojo/window","curam/pagination","curam/debug","curam/util"],function(_400,_401,_402,_403,_404,_405,has,_406){
var _407=_401("curam.pagination.ControlPanel",null,{first:"FIRST",last:"LAST",previous:"PREV",next:"NEXT",page:"GOTO_PAGE",pageSize:"PAGE_SIZE",rowInfo:"ROW_INFO",classFirst:"first",classLast:"last",classPrevious:"previous",classNext:"next",classPage:"page",classDisplayInfo:"display_info",_controls:undefined,currentPage:0,lastPage:9999,currentPageSize:0,directLinkRangeWidth:3,parentNode:undefined,handlers:undefined,directLinksDisconnects:undefined,constructor:function(_408){
this._controls={};
this.handlers={};
this.directLinksDisconnects=[];
var loc=this._localize;
var ul=_405.create("ul",null,_408);
_404.add(ul,"pagination-control-list");
this._controls[this.pageSize]=this._createDropdownControl(this.pageSize,loc("pageSize_title"),ul);
this._controls[this.rowInfo]=this._createDisplayControl(this.rowInfo,loc("pagination_info",["$dummy$","$dummy$","$dummy$"]),ul,null,null);
this._controls[this.first]=this._createLinkControl(this.first,loc("firstPage_btn"),ul,null,this.classFirst,loc("firstPage_title"));
this._controls[this.previous]=this._createLinkControl(this.previous,loc("prevPage_btn"),ul,null,this.classPrevious,loc("prevPage_title"));
this._controls[this.page]=[];
this._controls[this.page].push(this._createLinkControl(this.page,"direct-page-links-section",ul,null,this.classPage,loc("page_title")));
this._controls[this.next]=this._createLinkControl(this.next,loc("nextPage_btn"),ul,null,this.classNext,loc("nextPage_title"));
this._controls[this.last]=this._createLinkControl(this.last,loc("lastPage_btn"),ul,null,this.classLast,loc("lastPage_title"));
this.parentNode=_408;
_402.set(_408,{"display":""});
},_localize:function(_409,_40a){
var _40b=curam.pagination.localizedStrings[_409];
if(!_40a){
return _40b;
}
for(var i=0;i<_40a.length;i++){
_40b=_40b.replace(/%s/i,_40a[i]);
}
return _40b;
},_createLinkControl:function(_40c,text,_40d,_40e,_40f,_410){
var cls=_40f!=null?_40f:"";
var li=_405.create("li",{"id":_40c,"class":cls},_40d,_40e);
_404.add(li,"pagination-control-list-item enabled");
var a=_405.create("a",{"innerHTML":text,"href":"#","title":_410},li);
_404.add(a,"pagination-link");
if(_40c==this.first||_40c==this.last||_40c==this.previous||_40c==this.next){
if(curam.util.highContrastModeType()){
var _411="../CDEJ/themes/v6/images/high-contrast/"+_40c+"-contrast"+".png";
_405.create("img",{"src":_411,"alt":_410},a);
}else{
var _411="../CDEJ/themes/curam/images/"+_40c+".svg";
var _412="../CDEJ/themes/curam/images/"+_40c+"_hover.svg";
a.setAttribute("onfocus","this.children[0].src = '"+_412+"';");
a.setAttribute("onblur","this.children[0].src = '"+_411+"';");
_405.create("img",{"src":_411,"alt":_410,"onmouseover":"this.src = '"+_412+"';","onmouseout":"this.src = '"+_411+"';","onmouseup":"this.src = '"+_411+"';","aria-hidden":"true"},a);
}
}else{
var text=_405.create("p",{"innerHTML":text},li);
_404.add(text,"pagination-text");
}
return li;
},_createDropdownControl:function(_413,text,_414,_415){
var li=_405.create("li",{"id":_413},_414,_415);
_404.add(li,"pagination-control-list-item");
var _416="page-size-select"+new Date().getTime();
var _417=_405.create("label",{"innerHTML":text+": ","for":_416},li);
_404.add(_417,"pagination-page-size-dropdown-label");
var _418=_405.create("select",{"title":text,"id":_416},li);
li._type="dropdown";
return li;
},_createDisplayControl:function(_419,text,_41a,_41b,_41c){
var cls=_41c!=null?_41c:"";
var li=_405.create("li",{"id":_419,"class":cls},_41a,_41b);
_404.add(li,"pagination-control-list-item");
var text=_405.create("p",{"innerHTML":"["+text+"]"},li);
return li;
},updateState:function(_41d){
curam.debug.log("curam.pagination.ControlPanel.updateState: ",_41d);
if(typeof (_41d.first)!="undefined"){
this._setEnabled(this._controls[this.first],_41d.first);
}
if(typeof (_41d.previous)!="undefined"){
this._setEnabled(this._controls[this.previous],_41d.previous);
}
if(typeof (_41d.next)!="undefined"){
this._setEnabled(this._controls[this.next],_41d.next);
}
if(typeof (_41d.last)!="undefined"){
this._setEnabled(this._controls[this.last],_41d.last);
}
if(typeof (_41d.currentPage)!="undefined"){
this.currentPage=_41d.currentPage;
}
if(typeof (_41d.lastPage)!="undefined"){
this.lastPage=_41d.lastPage;
}
if(typeof (_41d.currentPageSize)!="undefined"){
this.currentPageSize=_41d.currentPageSize;
}
if(typeof (_41d.directLinkRangeWidth)!="undefined"){
this.directLinkRangeWidth=_41d.directLinkRangeWidth;
}
if(typeof (_41d.rowInfo)!="undefined"){
var _41e=this._controls[this.rowInfo].previousSibling;
_405.destroy(this._controls[this.rowInfo]);
var _41f=_41d.rowInfo[0];
var end=_41d.rowInfo[1];
var _420=_41d.rowInfo[2];
var _421=this._localize("pagination_info",[_41f,end,_420]);
this._controls[this.rowInfo]=this._createDisplayControl(this.rowInfo,_421,_41e,"after",this.classDisplayInfo);
}
if(typeof (_41d.pageSizeOptions)!="undefined"){
var _422=dojo.query("select",this._controls[this.pageSize])[0];
dojo.forEach(_422.childNodes,function(item){
_405.destroy(item);
});
for(var i=0;i<_41d.pageSizeOptions.length;i++){
var _423=_41d.pageSizeOptions[i];
var _424=_405.create("option",{"value":_423,"innerHTML":_423},_422);
if(_423==this.currentPageSize){
_403.set(_424,"selected","selected");
}
}
}
this._updateDirectLinks();
var _425=_400.byId("content");
if(_425){
_425.resize();
}
},setHandlers:function(_426){
curam.debug.log("curam.pagination.ControlPanel.setHandlers: ",_426);
this.handlers=_426;
if(_426.first){
this._connectSimpleHandler(this._controls[this.first],_426.first);
}
if(_426.previous){
this._connectSimpleHandler(this._controls[this.previous],_426.previous);
}
if(_426.next){
this._connectSimpleHandler(this._controls[this.next],_426.next);
}
if(_426.last){
this._connectSimpleHandler(this._controls[this.last],_426.last);
}
if(_426.page){
this._connectDirectLinkHandlers(_426.page);
}
if(_426.pageSize){
var _427=dojo.query("select",this._controls[this.pageSize])[0];
var _428=this._setFocusToListDivContainerAfterNewPageSelected;
dojo.connect(_427,"onchange",dojo.hitch(this,function(_429){
var _42a=_429.target.value;
this.currentPageSize=_42a;
_426.pageSize(this.currentPageSize);
var _42b=_429.currentTarget;
if(_42b&&_404.contains(_42b.parentElement,"pagination-control-list-item")){
var _42c=_42b.parentElement;
_428(_42c);
}
var _42d=dojo.query("option",_427);
_42d.forEach(function(_42e){
if(_403.get(_42e,"value")==_42a){
_403.set(_42e,"selected","selected");
}else{
_403.remove(_42e,"selected");
}
});
}));
}
},_connectSimpleHandler:function(_42f,_430){
var h=_430?_430:_42f._handler;
this._removeSimpleHandler(_42f);
var _431=this._setFocusToListDivContainerAfterNewPageSelected;
var _432=curam.util.connect(_42f,"onclick",function(_433){
dojo.stopEvent(_433);
h();
var _434=_433.currentTarget;
if(_434&&_404.contains(_434,"pagination-control-list-item")){
var _435=_434.parentElement;
_431(_435);
}
});
_42f._handler=h;
_42f._disconnect=_432;
},_removeSimpleHandler:function(_436){
if(_436._disconnect){
curam.util.disconnect(_436._disconnect);
}
},reset:function(){
curam.debug.log("curam.pagination.ControlPanel.reset");
},_getDirectLinkPageNumbers:function(){
var _437=2*this.directLinkRangeWidth+1;
var p=this.currentPage;
var _438=[];
var num=p>this.directLinkRangeWidth?p-this.directLinkRangeWidth:1;
for(var i=0;i<_437;i++){
_438[i]=num++;
if(num>this.lastPage){
break;
}
}
return _438;
},_updateDirectLinks:function(){
curam.debug.log("curam.pagination.ControlPanel._updateDirectLinks");
var loc=this._localize;
var _439=this._controls[this.page];
dojo.query("div.pagination-direct-links-dots").forEach(_405.destroy);
var _43a=_439[0].previousSibling;
_402.set(this.parentNode,"display","none");
for(var i=0;i<_439.length;i++){
if(_439._dots){
_405.destroy(_439._dots);
}
_405.destroy(_439[i]);
_439[i]=undefined;
}
this._controls[this.page]=[];
_439=this._controls[this.page];
var _43b=this._getDirectLinkPageNumbers();
for(var i=0;i<_43b.length;i++){
var _43c=_43b[i];
_439[i]=this._createLinkControl(this.page+"("+_43c+")",_43c,_43a,"after",null,loc("page_title")+" "+_43c);
_404.add(_439[i],"pagination-direct-link");
if(_43c==this.currentPage){
_404.add(_439[i],"selected");
}
_43a=_439[i];
_439[i]._pageNum=_43c;
}
var _43d=_439[0];
_404.add(_43d,"firstDirectLink");
if(_43b[0]>1){
_404.add(_43d,"has-previous");
var dots=_405.create("div",{innerHTML:"..."},_43d,"before");
_404.add(dots,"pagination-direct-links-dots");
}
var _43e=_439[_439.length-1];
_404.add(_43e,"lastDirectLink");
if(_43b[_43b.length-1]<this.lastPage){
_404.add(_43e,"has-next");
var dots=_405.create("div",{innerHTML:"..."},_43e,"after");
_404.add(dots,"pagination-direct-links-dots");
}
if(this.handlers.page){
this._connectDirectLinkHandlers(this.handlers.page);
}
_402.set(this.parentNode,"display","");
},_connectDirectLinkHandlers:function(_43f){
dojo.forEach(this.directLinksDisconnects,dojo.disconnect);
this.directLinksDisconnects=[];
var _440=this._controls[this.page];
for(var i=0;i<_440.length;i++){
var _441=_440[i];
var _442=this._setFocusToListDivContainerAfterNewPageSelected;
var h=function(_443){
dojo.stopEvent(_443);
var _444=_443.currentTarget;
var _445=_444.parentElement;
_43f(this._pageNum);
if(_444&&_404.contains(_444,"pagination-control-list-item")){
if(!_404.contains(_444,"selected")){
_442(_445);
}else{
var _446=_444.id;
var _447=dojo.query("a.pagination-link",_445.children[_446])[0];
if(_447){
_447.focus();
}
}
}
};
h._pageNum=_441._pageNum;
this.directLinksDisconnects.push(dojo.connect(_441,"onclick",h));
}
},_setEnabled:function(_448,_449){
if(_449){
this._connectSimpleHandler(_448);
_404.replace(_448,"enabled","disabled");
}else{
this._removeSimpleHandler(_448);
_404.replace(_448,"disabled","enabled");
}
},_setFocusToListDivContainerAfterNewPageSelected:function(_44a){
var _44b="";
while(_44a!==null){
if(_404.contains(_44a,"list")){
_44b=_44a;
break;
}else{
_44a=_44a.parentElement;
}
}
if(_44b!=""){
_44b.setAttribute("tabindex","-1");
_44b.focus();
has("trident")?_406.scrollIntoView(_44b):_44b.scrollIntoView();
}
}});
return _407;
});
},"dijit/form/MappedTextBox":function(){
define(["dojo/_base/declare","dojo/sniff","dojo/dom-construct","./ValidationTextBox"],function(_44c,has,_44d,_44e){
return _44c("dijit.form.MappedTextBox",_44e,{postMixInProperties:function(){
this.inherited(arguments);
this.nameAttrSetting="";
},_setNameAttr:"valueNode",serialize:function(val){
return val.toString?val.toString():"";
},toString:function(){
var val=this.filter(this.get("value"));
return val!=null?(typeof val=="string"?val:this.serialize(val,this.constraints)):"";
},validate:function(){
this.valueNode.value=this.toString();
return this.inherited(arguments);
},buildRendering:function(){
this.inherited(arguments);
this.valueNode=_44d.place("<input type='hidden'"+((this.name&&!has("msapp"))?" name=\""+this.name.replace(/"/g,"&quot;")+"\"":"")+"/>",this.textbox,"after");
},reset:function(){
this.valueNode.value="";
this.inherited(arguments);
}});
});
},"dojox/layout/ContentPane":function(){
define(["dojo/_base/lang","dojo/_base/xhr","dijit/layout/ContentPane","dojox/html/_base","dojo/_base/declare"],function(lang,_44f,_450,_451,_452){
return _452("dojox.layout.ContentPane",_450,{adjustPaths:false,cleanContent:false,renderStyles:false,executeScripts:true,scriptHasHooks:false,ioMethod:_44f.get,ioArgs:{},onExecError:function(e){
},_setContent:function(cont){
var _453=this._contentSetter;
if(!(_453&&_453 instanceof _451._ContentSetter)){
_453=this._contentSetter=new _451._ContentSetter({node:this.containerNode,_onError:lang.hitch(this,this._onError),onContentError:lang.hitch(this,function(e){
var _454=this.onContentError(e);
try{
this.containerNode.innerHTML=_454;
}
catch(e){
console.error("Fatal "+this.id+" could not change content due to "+e.message,e);
}
})});
}
this._contentSetterParams={adjustPaths:Boolean(this.adjustPaths&&(this.href||this.referencePath)),referencePath:this.href||this.referencePath,renderStyles:this.renderStyles,executeScripts:this.executeScripts,scriptHasHooks:this.scriptHasHooks,scriptHookReplacement:"dijit.byId('"+this.id+"')"};
return this.inherited("_setContent",arguments);
},destroy:function(){
var _455=this._contentSetter;
if(_455){
_455.tearDown();
}
this.inherited(arguments);
}});
});
},"curam/date/locale":function(){
define(["curam/define","dojo/_base/lang","dojo/date/locale"],function(_456,lang,_457){
var _458=_457._getGregorianBundle;
function _459(_45a){
var _45b=_458(_45a);
if(LOCALIZED_MONTH_NAMES){
_45b["months-format-abbr"]=LOCALIZED_SHORT_MONTH_NAMES;
_45b["months-format-wide"]=LOCALIZED_MONTH_NAMES;
}
return _45b;
};
_456.singleton("curam.date.locale",{});
lang.mixin(curam.date.locale,_457);
curam.date.locale.format=function(_45c,_45d){
_457._getGregorianBundle=_459;
var _45e=_457.format(_45c,_45d);
_457._getGregorianBundle=_458;
return _45e;
};
curam.date.locale.parseDate=function(_45f){
var _460=new Date(_45f);
return new Date(_460.getTime()+_460.getTimezoneOffset()*60000);
};
curam.date.locale.parse=function(_461,_462){
_457._getGregorianBundle=_459;
var _463=_457.parse(_461,_462);
_457._getGregorianBundle=_458;
return _463;
};
return curam.date.locale;
});
},"curam/util/WordFileEdit":function(){
define(["dojo/has","dojo/dom","dojo/dom-style","dojo/dom-construct","curam/define","curam/debug","dijit/DialogUnderlay"],function(has,dom,_464,_465,_466,_467){
isIE8OrGreater=function(){
return has("ie")>=8||has("trident");
};
_466.singleton("curam.util.WordFileEdit",{_clickedFinish:false,_buttonIdPart:"__o3btn.",searchWindow:null,cantLoadControlMsg:"$unlocalized$ cannot load Word integration control",cantSubmitMsg:"$unlocalized$ cannot submit data",searchWindowTitlePrefix:"SEARCH",useApplet:(function(){
return isIE8OrGreater();
})(),controlAttributes:{},controlParameters:{},submitSaveWordFileEdit:function(_468,_469){
try{
var _46a=curam.util.WordFileEdit.getParentWindow();
var _46b=curam.util.WordFileEdit._findTextArea(_46a,_468);
_46b.value=_469;
_46a.document.forms[0].submit();
}
catch(e){
alert("Error saving: "+dojo.toJson(e));
}
return;
},openWordFileEditWindow:function(_46c,_46d,_46e){
if(curam.util.WordFileEdit.getSearchPage().length>0){
curam.util.WordFileEdit.displaySearchWindow(_46c,_46d,_46e);
}else{
curam.util.WordFileEdit.doOpenWordFileEditWindow(_46c,_46d,_46e);
}
},doOpenWordFileEditWindow:function(_46f,_470,_471){
var _472=100;
var _473=100;
var _474=Math.floor((screen.width-_472)/2);
var _475=Math.floor((screen.height-_473)/2);
window.open("../word-file-edit.jsp?id="+_46f+"&document-field="+_470+"&details-field="+_471,new Date().valueOf(),"toolbar=no,menubar=no,location=no,scrollbars=no,"+"resizable=no,top="+_475+",left="+_474+",width="+_472+",height="+_473);
},displaySearchWindow:function(_476,_477,_478,_479){
if(!_479){
_479=0;
}
if(_479>3){
return;
}
if(_479==0){
curam.util.WordFileEdit.searchWindow=window.open("about:blank","searchWindow","left=40000,top=40000,scrollbars=yes");
}
var _47a=false;
try{
var _47b=curam.util.WordFileEdit.searchWindow.document.title;
if(_47b.indexOf(searchWindowTitlePrefix+":")==-1){
curam.util.WordFileEdit.searchWindow.document.title=searchWindowTitlePrefix+":"+_476;
}else{
_47a=true;
}
_47b=curam.util.WordFileEdit.searchWindow.document.title;
if(!_47a&&_47b.indexOf(searchWindowTitlePrefix+":")!=-1){
_47a=true;
}
}
catch(e){
}
if(!_47a){
_479++;
window.setTimeout("displaySearchWindow('"+_476+"','"+_477+"','"+_478+"',"+_479+")",500);
}else{
curam.util.WordFileEdit.doOpenWordFileEditWindow(_476,_477,_478);
}
},redisplaySearchWindow:function(_47c,_47d){
if(!_47d){
_47d=0;
}
if(_47d>3){
return;
}
if(_47d==0){
curam.util.WordFileEdit.searchWindow=window.open("about:blank","searchWindow","left=40000,top=40000");
}
var _47e=false;
try{
var _47f=curam.util.WordFileEdit.searchWindow.document.title;
if(_47f.indexOf(searchWindowTitlePrefix+":")==-1){
curam.util.WordFileEdit.searchWindow.document.title=searchWindowTitlePrefix+":"+_47c;
}else{
_47e=true;
}
_47f=curam.util.WordFileEdit.searchWindow.document.title;
if(!_47e&&_47f.indexOf(searchWindowTitlePrefix+":")!=-1){
_47e=true;
}
}
catch(e){
}
if(!_47e){
_47d++;
window.setTimeout("redisplaySearchWindow('"+_47c+"',"+_47d+")",500);
}
},getSearchPage:function(_480){
var _481="";
try{
if(!_480){
_481=document.getElementById("searchPage").value;
}else{
var _482=curam.util.WordFileEdit.getParentWindow();
_481=_482.document.getElementById("searchPage").value;
}
}
catch(e){
}
return _481;
},initialize:function(_483){
var _484=curam.util.WordFileEdit.getParentWindow();
try{
var _485=dom.byId(_483);
if(typeof _485!="undefined"){
curam.util.WordFileEdit._setOverlay(true);
if(curam.util.WordFileEdit.useApplet){
if(!isIE8OrGreater()){
var _486=_484.frameElement;
curam.util.connect(_486,"onload",function(evt){
dojo.fixEvent(evt,_486);
var url=_486.contentWindow.location.href;
try{
_485.mainApplicationPageLoaded(url);
}
catch(e){
alert("Error calling mainApplicationPageLoaded on applet: "+e.message);
}
});
_484.top.dojo.addOnUnload(function(){
_485.mainApplicationPageUnloaded();
});
}
}else{
_485.openDocument();
}
}else{
curam.util.WordFileEdit._setOverlay(false);
curam.util.WordFileEdit.closeAppletWindow();
}
}
catch(e){
curam.util.WordFileEdit._setOverlay(false);
curam.util.WordFileEdit.closeAppletWindow();
_484.curam.util.WordFileEdit.cannotLoadControl(e);
}
},_setOverlay:function(_487){
_467.log(_467.getProperty("curam.util.WordFileEdit.version"),"6.0");
},cannotLoadControl:function(e){
var msg=isIE8OrGreater()&&!curam.util.WordFileEdit.useApplet?curam.util.WordFileEdit.cantLoadControlMsgIE:curam.util.WordFileEdit.cantLoadControlMsg;
alert(msg+"\rERROR: "+e.message);
history.go(-1);
},setStatusTextWordFileEditWindow:function(text){
try{
document.getElementById("statustext").innerHTML=text;
}
catch(e){
}
},getWordFileEditParentTextareaValue:function(_488){
var _489="";
try{
var _48a=curam.util.WordFileEdit.getParentWindow();
var _48b=curam.util.WordFileEdit._findTextArea(_48a,_488);
_489=_48b.value;
}
catch(e){
alert("getWordFileEditParentTextareaValue('"+_488+"'): \r"+e.message);
}
return _489;
},_findTextArea:function(_48c,_48d,_48e){
var _48f=null;
if(!_48e){
_48f=_48c.dojo.query("input[name='"+_48d+"']",_48c.dojo.body())[0];
}else{
_48f=_48c.dojo.query("input[name$='"+_48d+"']",_48c.dojo.body())[0];
}
return _48f;
},finishedWordFileEditWindow:function(_490,_491,_492){
if(!curam.util.WordFileEdit._clickedFinish){
curam.util.WordFileEdit.doFinishWordFileEditWindow(_490,_491,_492);
curam.util.WordFileEdit._clickedFinish=true;
}
},doFinishWordFileEditWindow:function(_493,_494,_495){
var _496=false;
var _497=false;
try{
var _498=curam.util.WordFileEdit.getParentWindow();
if(_494&&_495){
_497=true;
var _499=curam.util.WordFileEdit._findTextArea(_498,_494);
_499.value=_495;
}
var _49a=_498.dojo.query("form input");
for(var i=0;i<_49a.length&&!_496;i++){
if(_49a[i].id.substring(0,curam.util.WordFileEdit._buttonIdPart.length).toLowerCase()==curam.util.WordFileEdit._buttonIdPart.toLowerCase()){
_496=true;
if(!_497){
var _499=curam.util.WordFileEdit._findTextArea(_498,_494);
_499.value="";
var _49b=false;
var _49c;
var _49d=_49a[i];
try{
while(_49d.tagName.toUpperCase()!="BODY"&&!_49b){
if(_49d.tagName.toUpperCase()=="FORM"){
_49b=true;
_49c=_49d;
}else{
_49d=_49d.parentElement;
}
}
}
catch(e){
alert("doFinishWordFileEditWindow: "+e.message);
}
if(_49b){
var _49e="<input type=\"hidden\" name=\"__o3NoSave\" value=\"true\"/>";
_49c.innerHTML+=_49e;
}
}
_498.curam.util.clickButton(_49a[i].id);
if(_493.length>0){
_498.document.body.innerHTML=_493;
}
curam.util.WordFileEdit._setOverlay(false);
return;
}
}
if(!_496){
alert(curam.util.WordFileEdit.cantSubmitMsg);
try{
curam.util.WordFileEdit._setOverlay(false);
curam.util.WordFileEdit.closeAppletWindow();
}
catch(e){
}
}
}
catch(e){
alert("doFinishWordFileEditWindow: "+e.message);
curam.util.WordFileEdit._setOverlay(false);
curam.util.WordFileEdit.closeAppletWindow();
}
},screenAlertWordFileEditWindow:function(_49f){
try{
curam.util.WordFileEdit.getParentWindow().alert(_49f);
}
catch(e){
}
},hideSubmitButtons:function(){
dojo.query("a.ac").forEach(function(item){
item.style.display="none";
});
},getParentWindow:function(){
return window.opener;
},getUrls:function(){
try{
var _4a0=curam.util.WordFileEdit.getParentWindow();
var doc=_4a0.document;
var _4a1=doc.URL;
var _4a2=_4a0.dojo.query("form",doc)[0];
var _4a3=_4a2.action;
var _4a4=_4a1.substr(0,_4a1.lastIndexOf("/")+1);
window.curam.util.WordFileEdit.urlPath_return_value=_4a4;
var _4a5=isIE8OrGreater()?_4a3:_4a4+_4a3;
window.curam.util.WordFileEdit.allowedUrl_return_value=_4a5;
return [_4a4,_4a5];
}
catch(e){
alert("getUrls: "+dojo.toJson(e));
}
},getTitle:function(){
var _4a6=curam.util.WordFileEdit.getParentWindow().top.document.title;
curam.util.WordFileEdit.title_return_value=_4a6;
window.curam_wordIntegration_title_return_value=_4a6;
return _4a6;
},setTitle:function(_4a7){
curam.util.WordFileEdit.getParentWindow().top.document.title=_4a7;
},hasNamedInput:function(_4a8){
var _4a9=curam.util.WordFileEdit.getParentWindow();
var _4aa=_4a8.slice(1);
var _4ab=curam.util.WordFileEdit._findTextArea(_4a9,_4aa,true);
return _4ab?true:false;
},closeAppletWindow:function(){
self.close();
},runApplet:function(id){
if(typeof deployJava!="undefined"){
var _4ac=deployJava.getPlugin();
if(_4ac){
_467.log(_467.getProperty("curam.util.WordFileEdit.version"),_4ac.version);
}else{
_467.log(_467.getProperty("curam.util.WordFileEdit.no.plugin"));
}
}else{
_467.log(_467.getProperty("curam.util.WordFileEdit.no.java"));
}
if(typeof deployJava=="undefined"||(!dojo.isChrome&&!deployJava.isPlugin2())){
alert(curam.util.WordFileEdit.noJavaInstalled);
}else{
dojo.mixin(curam.util.WordFileEdit.controlAttributes,{id:id});
var _4ad=_465.create("div",{style:"display:none"});
var _4ae=_465.create("applet",curam.util.WordFileEdit.controlAttributes,_4ad);
var _4af=curam.util.WordFileEdit.controlParameters;
for(property in _4af){
_465.create("param",{name:property,value:_4af[property]},_4ae);
}
var _4b0=_4ad.innerHTML;
_465.destroy(_4ad);
document.write(_4b0);
}
}});
return curam.util.WordFileEdit;
});
},"dojo/dnd/Moveable":function(){
define(["../_base/array","../_base/declare","../_base/lang","../dom","../dom-class","../Evented","../on","../topic","../touch","./common","./Mover","../_base/window"],function(_4b1,_4b2,lang,dom,_4b3,_4b4,on,_4b5,_4b6,dnd,_4b7,win){
var _4b8=_4b2("dojo.dnd.Moveable",[_4b4],{handle:"",delay:0,skip:false,constructor:function(node,_4b9){
this.node=dom.byId(node);
if(!_4b9){
_4b9={};
}
this.handle=_4b9.handle?dom.byId(_4b9.handle):null;
if(!this.handle){
this.handle=this.node;
}
this.delay=_4b9.delay>0?_4b9.delay:0;
this.skip=_4b9.skip;
this.mover=_4b9.mover?_4b9.mover:_4b7;
this.events=[on(this.handle,_4b6.press,lang.hitch(this,"onMouseDown")),on(this.handle,"dragstart",lang.hitch(this,"onSelectStart")),on(this.handle,"selectstart",lang.hitch(this,"onSelectStart"))];
},markupFactory:function(_4ba,node,Ctor){
return new Ctor(node,_4ba);
},destroy:function(){
_4b1.forEach(this.events,function(_4bb){
_4bb.remove();
});
this.events=this.node=this.handle=null;
},onMouseDown:function(e){
if(this.skip&&dnd.isFormElement(e)){
return;
}
if(this.delay){
this.events.push(on(this.handle,_4b6.move,lang.hitch(this,"onMouseMove")),on(this.handle,_4b6.release,lang.hitch(this,"onMouseUp")));
this._lastX=e.pageX;
this._lastY=e.pageY;
}else{
this.onDragDetected(e);
}
e.stopPropagation();
e.preventDefault();
},onMouseMove:function(e){
if(Math.abs(e.pageX-this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay){
this.onMouseUp(e);
this.onDragDetected(e);
}
e.stopPropagation();
e.preventDefault();
},onMouseUp:function(e){
for(var i=0;i<2;++i){
this.events.pop().remove();
}
e.stopPropagation();
e.preventDefault();
},onSelectStart:function(e){
if(!this.skip||!dnd.isFormElement(e)){
e.stopPropagation();
e.preventDefault();
}
},onDragDetected:function(e){
new this.mover(this.node,e,this);
},onMoveStart:function(_4bc){
_4b5.publish("/dnd/move/start",_4bc);
_4b3.add(win.body(),"dojoMove");
_4b3.add(this.node,"dojoMoveItem");
},onMoveStop:function(_4bd){
_4b5.publish("/dnd/move/stop",_4bd);
_4b3.remove(win.body(),"dojoMove");
_4b3.remove(this.node,"dojoMoveItem");
},onFirstMove:function(){
},onMove:function(_4be,_4bf){
this.onMoving(_4be,_4bf);
var s=_4be.node.style;
s.left=_4bf.l+"px";
s.top=_4bf.t+"px";
this.onMoved(_4be,_4bf);
},onMoving:function(){
},onMoved:function(){
}});
return _4b8;
});
},"dojo/store/util/QueryResults":function(){
define(["../../_base/array","../../_base/lang","../../when"],function(_4c0,lang,when){
var _4c1=function(_4c2){
if(!_4c2){
return _4c2;
}
var _4c3=!!_4c2.then;
if(_4c3){
_4c2=lang.delegate(_4c2);
}
function _4c4(_4c5){
_4c2[_4c5]=function(){
var args=arguments;
var _4c6=when(_4c2,function(_4c7){
Array.prototype.unshift.call(args,_4c7);
return _4c1(_4c0[_4c5].apply(_4c0,args));
});
if(_4c5!=="forEach"||_4c3){
return _4c6;
}
};
};
_4c4("forEach");
_4c4("filter");
_4c4("map");
if(_4c2.total==null){
_4c2.total=when(_4c2,function(_4c8){
return _4c8.length;
});
}
return _4c2;
};
lang.setObject("dojo.store.util.QueryResults",_4c1);
return _4c1;
});
},"curam/util/ui/form/renderer/CTListEditRendererFormEventsAdapter":function(){
define(["dojo/_base/declare","dojo/_base/unload","curam/util/ui/form/renderer/GenericRendererFormEventsAdapter","curam/util/Dropdown"],function(_4c9,_4ca,_4cb,_4cc){
var _4cd=_4c9("curam.util.ui.form.renderer.CTListEditRendererFormEventsAdapter",_4cb,{_unsubscribes:[],constructor:function(id,_4ce){
this.elementID=id;
this.pathID=_4ce;
var _4cf=dojo.subscribe("/curam/comboxbox/initialValue",this,function(_4d0,_4d1){
if(this.getFormElement().id===_4d1){
this.getFormElement().value=_4d0;
}
_4cf.remove();
});
_4ca.addOnUnload(function(){
this._unsubscribes&&this._unsubscribes.forEach(function(hh){
hh.remove();
});
});
},addChangeListener:function(_4d2){
var _4d3="curam/util/CuramFormsAPI/formChange/combobox".concat(this.getElementID());
this._unsubscribes.push(dojo.subscribe(_4d3,this,function(_4d4){
this.getFormElement().value=_4d4.value;
_4d2();
}));
},setFormElementValue:function(_4d5){
var self=this;
var _4d6=dojo.subscribe("curam/modal/component/ready",this,function(){
var _4d7=new _4cc();
_4d7.setSelectedOnDropdownIDByCodevalue(self.getElementID(),_4d5);
this.getFormElement().value=_4d5;
_4d6.remove();
});
}});
return _4cd;
});
},"curam/pagination/DefaultListModel":function(){
define(["dojo/_base/declare","dojo/dom-class","dojo/dom-style","dojo/query","curam/debug","curam/pagination"],function(_4d8,_4d9,_4da,_4db,_4dc,_4dd){
var _4de=_4d8("curam.pagination.DefaultListModel",null,{_rowCount:null,constructor:function(_4df){
this.tableNode=_4db("table.paginated-list-id-"+_4df)[0];
if(!this.tableNode){
throw "Table node for ID "+_4df+" not found - failing!";
}
_4dc.log("curam.pagination.DefaultListModel "+_4dc.getProperty("curam.pagination.DefaultListModel"),this.tableNode);
this._id=_4df;
},getId:function(){
return this._id;
},getRowCount:function(){
if(this._rowCount==null){
this._rowCount=0;
var _4e0=_4db("tbody > script.hidden-list-rows",this.tableNode),frag=document.createDocumentFragment();
for(var i=0;i<_4e0.length;i++){
var _4e1=_4e0[i];
var _4e2=(i==_4e0.length-1);
if(!_4e2){
this._rowCount+=_4dd.getNumRowsInBlock(_4e1);
}else{
_4dd.unpackRows(_4e1,frag);
_4e1.innerHTML="";
}
}
this.tableNode.tBodies[0].appendChild(frag);
var _4e3=_4db("tbody > tr",this.tableNode).length;
this._rowCount+=_4e3;
}
return this._rowCount;
},hideRange:function(_4e4,_4e5){
var rows=this._getRowNodes(_4e4,_4e5);
for(var i=_4e4;i<=_4e5;i++){
_4da.set(rows[i-1],{"display":"none"});
_4d9.remove(rows[i-1],"even-last-row");
_4d9.remove(rows[i-1],"odd-last-row");
}
},showRange:function(_4e6,_4e7){
var rows=this._getRowNodes(_4e6,_4e7);
var _4e8=(_4e7%2==0)?"even-last-row":"odd-last-row";
_4d9.add(rows[_4e7-1],_4e8);
for(var i=_4e6;i<=_4e7;i++){
_4da.set(rows[i-1],{"display":""});
}
dojo.publish("curam/update/pagination/rows",[rows,this.getId()]);
},_getRowNodes:function(_4e9,_4ea){
var _4eb=_4dd.readListContent(this.tableNode);
for(var i=1;i<=_4ea&&i<=_4eb.length;i++){
var node=_4eb[i-1];
if(node.tagName=="SCRIPT"){
_4dd.unpackRows(node);
_4eb=_4dd.readListContent(this.tableNode);
i--;
}
}
return _4db("tbody > tr",this.tableNode);
}});
return _4de;
});
},"dijit/form/DropDownButton":function(){
define(["dojo/_base/declare","dojo/_base/lang","dojo/query","../registry","../popup","./Button","../_Container","../_HasDropDown","dojo/text!./templates/DropDownButton.html","../a11yclick"],function(_4ec,lang,_4ed,_4ee,_4ef,_4f0,_4f1,_4f2,_4f3){
return _4ec("dijit.form.DropDownButton",[_4f0,_4f1,_4f2],{baseClass:"dijitDropDownButton",templateString:_4f3,_fillContent:function(){
if(this.srcNodeRef){
var _4f4=_4ed("*",this.srcNodeRef);
this.inherited(arguments,[_4f4[0]]);
this.dropDownContainer=this.srcNodeRef;
}
},startup:function(){
if(this._started){
return;
}
if(!this.dropDown&&this.dropDownContainer){
var _4f5=_4ed("[widgetId]",this.dropDownContainer)[0];
if(_4f5){
this.dropDown=_4ee.byNode(_4f5);
}
delete this.dropDownContainer;
}
if(this.dropDown){
_4ef.hide(this.dropDown);
}
this.inherited(arguments);
},isLoaded:function(){
var _4f6=this.dropDown;
return (!!_4f6&&(!_4f6.href||_4f6.isLoaded));
},loadDropDown:function(_4f7){
var _4f8=this.dropDown;
var _4f9=_4f8.on("load",lang.hitch(this,function(){
_4f9.remove();
_4f7();
}));
_4f8.refresh();
},isFocusable:function(){
return this.inherited(arguments)&&!this._mouseDown;
}});
});
},"dojo/regexp":function(){
define(["./_base/kernel","./_base/lang"],function(dojo,lang){
var _4fa={};
lang.setObject("dojo.regexp",_4fa);
_4fa.escapeString=function(str,_4fb){
return str.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(ch){
if(_4fb&&_4fb.indexOf(ch)!=-1){
return ch;
}
return "\\"+ch;
});
};
_4fa.buildGroupRE=function(arr,re,_4fc){
if(!(arr instanceof Array)){
return re(arr);
}
var b=[];
for(var i=0;i<arr.length;i++){
b.push(re(arr[i]));
}
return _4fa.group(b.join("|"),_4fc);
};
_4fa.group=function(_4fd,_4fe){
return "("+(_4fe?"?:":"")+_4fd+")";
};
return _4fa;
});
},"curam/layout/TabContainer":function(){
define(["dojo/_base/declare","dijit/layout/TabContainer","dojo/text!curam/layout/resources/TabContainer.html","curam/inspection/Layer","dojo/_base/connect","curam/layout/ScrollingTabController","dijit/layout/TabController"],function(_4ff,_500,_501,_502,_503,_504,_505){
var _506=_4ff("curam.layout.TabContainer",dijit.layout.TabContainer,{templateString:_501,_theSelectedTabIndex:0,_thePage:null,_theChildren:null,postCreate:function(){
this.inherited(arguments);
var tl=this.tablist;
this.connect(tl,"onRemoveChild","_changeTab");
this.connect(tl,"onSelectChild","updateTabTitle");
_502.register("curam/layout/TabContainer",this);
},selectChild:function(page,_507){
this.inherited(arguments);
dojo.publish("curam/tab/selected",[page.id]);
},updateTabTitle:function(){
curam.util.setBrowserTabTitle();
},_changeTab:function(){
if(this._beingDestroyed){
this._thePage=null;
this._theChildren=null;
return;
}
if(this._theChildren==null){
return;
}
if(this._theChildren[this._theSelectedTabIndex]!=this._thePage){
this.selectChild(this._theChildren[this._theSelectedTabIndex]);
this._thePage=null;
this._theChildren=null;
return;
}
if(this._theChildren.length<1){
this._thePage=null;
return;
}else{
if(this._theChildren.length==1){
this.selectChild(this._theChildren[this._theChildren.length-1]);
this._thePage=null;
this._theChildren=null;
}else{
if(this._theSelectedTabIndex==(this._theChildren.length-1)){
this.selectChild(this._theChildren[this._theChildren.length-2]);
}else{
if(this._theSelectedTabIndex==0){
this.selectChild(this._theChildren[1]);
}else{
if(this._theChildren.length>2){
this.selectChild(this._theChildren[this._theSelectedTabIndex+1]);
}
}
}
this._thePage=null;
this._theChildren=null;
}
}
},removeChild:function(page){
if(this._started&&!this._beingDestroyed){
var _508=this.getChildren();
var i=0;
var _509=0;
for(i=0;i<_508.length;i++){
if(_508[i].get("selected")){
_509=i;
break;
}
}
this._theSelectedTabIndex=_509;
this._thePage=page;
this._theChildren=_508;
var _50a=page.id;
_503.publish("/curam/tab/closing",[_50a]);
}
this.inherited(arguments);
},postMixInProperties:function(){
if(!this.controllerWidget){
this.controllerWidget=(this.tabPosition=="top"||this.tabPosition=="bottom")&&!this.nested?_504:_505;
}
this.inherited(arguments);
}});
return _506;
});
},"curam/ui/SectionShortcutsPanel":function(){
define(["curam/inspection/Layer","curam/define","curam/tab","curam/util","curam/ui/UIController"],function(_50b){
var _50c=curam.define.singleton("curam.ui.SectionShortcutsPanel",{handleClickOnAnchorElement:function(_50d,_50e){
if(!_50e){
curam.tab.getTabController().handleUIMPageID(_50d);
}else{
curam.ui.SectionShortcutsPanel.openInModal(_50d);
}
},handleClick:function(_50f,item){
var _510=eval(_50f+"JsonStore");
var _511=_510.getValue(item,"pageID");
var _512=_510.getValue(item,"openInModal");
if(!_512){
curam.tab.getTabController().handleUIMPageID(_511);
}else{
curam.ui.SectionShortcutsPanel.openInModal(_511);
}
},openInModal:function(_513){
var _514=_513+"Page.do";
var _515={};
curam.tab.getTabController().handleLinkClick(_514,_515);
},setupCleanupScript:function(_516){
dojo.ready(function(){
var _517=eval(_516+"JsonStore");
dojo.addOnWindowUnload(function(){
_517.close();
});
});
}});
_50b.register("curam/ui/SectionShortcutsPanel",this);
return _50c;
});
},"curam/cdsl/_base/_StructBase":function(){
define(["dojo/_base/declare","dojo/_base/lang","dojo/json","curam/cdsl/types/FrequencyPattern"],function(_518,lang,json,_519){
var _51a={bareInput:false,fixups:null,metadataRegistry:null,dataAdapter:null};
var _51b=function(_51c){
var o=lang.clone(_51a);
return lang.mixin(o,_51c);
};
var _51d={onRequest:{onItem:function(path,data){
return data;
},onStruct:function(_51e){
},},onResponse:{onItem:function(path,data){
return data;
},onStruct:function(_51f){
},}};
var _520=function(frag,_521){
if(frag){
return frag+"."+_521;
}
return _521;
};
var _522=_518(null,{_data:null,_converter:null,_dataAdapter:null,constructor:function(data,opts){
if(!data){
throw new Error("Missing parameter.");
}
if(typeof data!=="object"){
throw new Error("Wrong parameter type: "+typeof data);
}
var _523=_51b(opts);
if(!_523.bareInput){
this._data=this._typedToBare(data);
}else{
this.setDataAdapter(_523.dataAdapter);
this._data=this._bareToTyped(data);
if(_523.fixups){
this._applyFixUps(_523.fixups,this._data,_523.metadataRegistry);
}
}
},_applyFixUps:function(_524,data,_525){
dojo.forEach(_524,function(item,_526){
var path=_524[_526].path;
var type=_524[_526].type;
this._processFixUp(data,path,this._getTransformFunction(type,_525));
},this);
},_processFixUp:function(data,path,_527){
if(path.length==1){
data[path[0]]=_527(data[path[0]]);
return;
}else{
if(lang.isArray(data[path[0]])){
dojo.forEach(data[path[0]],function(item,_528){
this._processFixUp(item,path.slice(1,path.length),_527);
},this);
}else{
this._processFixUp(data[path[0]],path.slice(1,path.length),_527);
}
}
},_getTransformFunction:function(type,_529){
if(type[0]==="frequencypattern"){
return function(data){
return new _519(data.code,data.description);
};
}else{
if(type[0]==="datetime"){
return function(data){
return new Date(data);
};
}else{
if(type[0]==="date"){
return function(data){
return new Date(data);
};
}else{
if(type[0]==="time"){
return function(data){
return new Date(data);
};
}else{
if(type[0]==="codetable"){
if(type.length<2){
throw new Error("Missing codetable name, type specified is: "+type);
}
return function(data){
var _52a=_529.codetables()[type[1]];
if(_52a){
return _52a.getItem(data);
}else{
throw new Error("Codetable does not exist: codetable name="+type[1]);
}
};
}else{
throw new Error("Unsupported type: "+type);
}
}
}
}
}
},toJson:function(){
return json.stringify(this.getData());
},getData:function(){
for(var name in this._data){
this._data[name]=this[name];
}
return this._typedToBare(this._data);
},_bareToTyped:function(data,path){
if(lang.isObject(data)){
var _52b={};
this._applyResponseStructAdapter(data);
for(var prop in data){
if(lang.isArray(data[prop])){
_52b[prop]=[];
for(var i=0;i<data[prop].length;i++){
_52b[prop].push(this._bareToTyped(data[prop][i],_520(path,prop+"["+i+"]")));
}
}else{
if(typeof data[prop]==="object"){
_52b[prop]=this._bareToTyped(data[prop],_520(path,prop));
}else{
_52b[prop]=data[prop];
}
}
var _52c=_520(path,prop);
_52b[prop]=this._applyResponseDataAdapter(_52c,_52b[prop]);
}
return _52b;
}
return this._applyResponseDataAdapter(path,data);
},_typedToBare:function(data,path){
if(lang.isObject(data)){
var _52d={};
for(var prop in data){
if(data.hasOwnProperty(prop)&&"_data"!==prop&&"_dataAdapter"!==prop&&"_inherited"!==prop&&"_converter"!==prop){
if(lang.isArray(data[prop])){
_52d[prop]=[];
for(var i=0;i<data[prop].length;i++){
_52d[prop].push(this._typedToBare(data[prop][i],_520(path,prop+"["+i+"]")));
}
}else{
if(data[prop].getDescription&&data[prop].getCode){
_52d[prop]=data[prop].getCode();
}else{
if(data[prop].getTime){
_52d[prop]=data[prop].getTime();
}else{
if(typeof data[prop]==="object"){
_52d[prop]=this._typedToBare(data[prop],_520(path,prop));
}else{
_52d[prop]=data[prop];
}
}
}
}
var _52e=_520(path,prop);
_52d[prop]=this._applyRequestDataAdapter(_52e,_52d[prop]);
}
}
this._applyRequestStructAdapter(_52d);
return _52d;
}
return this._applyRequestDataAdapter(path,data);
},setDataAdapter:function(_52f){
if(_52f){
var a=lang.clone(_51d);
if(_52f.onRequest&&_52f.onRequest.onItem){
a.onRequest.onItem=_52f.onRequest.onItem;
}
if(_52f.onRequest&&_52f.onRequest.onStruct){
a.onRequest.onStruct=_52f.onRequest.onStruct;
}
if(_52f.onResponse&&_52f.onResponse.onItem){
a.onResponse.onItem=_52f.onResponse.onItem;
}
if(_52f.onResponse&&_52f.onResponse.onStruct){
a.onResponse.onStruct=_52f.onResponse.onStruct;
}
this._dataAdapter=a;
}else{
this._dataAdapter=null;
}
},_applyRequestDataAdapter:function(path,_530){
if(this._dataAdapter){
return this._dataAdapter.onRequest.onItem(path,_530);
}
return _530;
},_applyResponseDataAdapter:function(path,_531){
if(this._dataAdapter){
return this._dataAdapter.onResponse.onItem(path,_531);
}
return _531;
},_applyRequestStructAdapter:function(_532){
if(this._dataAdapter){
this._dataAdapter.onRequest.onStruct(_532);
}
},_applyResponseStructAdapter:function(_533){
if(this._dataAdapter){
this._dataAdapter.onResponse.onStruct(_533);
}
}});
return _522;
});
},"dojo/debounce":function(){
define([],function(){
return function(cb,wait){
var _534;
return function(){
if(_534){
clearTimeout(_534);
}
var self=this;
var a=arguments;
_534=setTimeout(function(){
cb.apply(self,a);
},wait);
};
};
});
},"dojox/widget/Standby":function(){
define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/array","dojo/_base/event","dojo/_base/sniff","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/window","dojo/_base/window","dojo/_base/fx","dojo/fx","dijit/_Widget","dijit/_TemplatedMixin","dijit/registry"],function(_535,_536,_537,_538,has,dom,attr,_539,_53a,_53b,_53c,_53d,_53e,fx,_53f,_540,_541){
_535.experimental("dojox.widget.Standby");
return _536("dojox.widget.Standby",[_53f,_540],{image:require.toUrl("dojox/widget/Standby/images/loading.gif").toString(),imageText:"Please Wait...",text:"Please wait...",centerIndicator:"image",target:"",color:"#C0C0C0",duration:500,zIndex:"auto",opacity:0.75,templateString:"<div>"+"<div style=\"display: none; opacity: 0; z-index: 9999; "+"position: absolute; cursor:wait;\" dojoAttachPoint=\"_underlayNode\"></div>"+"<img src=\"${image}\" style=\"opacity: 0; display: none; z-index: -10000; "+"position: absolute; top: 0px; left: 0px; cursor:wait;\" "+"dojoAttachPoint=\"_imageNode\">"+"<div style=\"opacity: 0; display: none; z-index: -10000; position: absolute; "+"top: 0px;\" dojoAttachPoint=\"_textNode\"></div>"+"</div>",_underlayNode:null,_imageNode:null,_textNode:null,_centerNode:null,_displayed:false,_resizeCheck:null,_started:false,_parent:null,startup:function(args){
if(!this._started){
if(typeof this.target==="string"){
var w=_541.byId(this.target);
this.target=w?w.domNode:dom.byId(this.target);
}
if(this.text){
this._textNode.innerHTML=this.text;
}
if(this.centerIndicator==="image"){
this._centerNode=this._imageNode;
attr.set(this._imageNode,"src",this.image);
attr.set(this._imageNode,"alt",this.imageText);
}else{
this._centerNode=this._textNode;
}
_53b.set(this._underlayNode,{display:"none",backgroundColor:this.color});
_53b.set(this._centerNode,"display","none");
this.connect(this._underlayNode,"onclick","_ignore");
if(this.domNode.parentNode&&this.domNode.parentNode!=_53d.body()){
_53d.body().appendChild(this.domNode);
}
if(has("ie")==7){
this._ieFixNode=_539.create("div");
_53b.set(this._ieFixNode,{opacity:"0",zIndex:"-1000",position:"absolute",top:"-1000px"});
_53d.body().appendChild(this._ieFixNode);
}
this.inherited(arguments);
}
},show:function(){
if(!this._displayed){
if(this._anim){
this._anim.stop();
delete this._anim;
}
this._displayed=true;
this._size();
this._disableOverflow();
this._fadeIn();
}
},hide:function(){
if(this._displayed){
try{
if(this._anim){
this._anim.stop();
delete this._anim;
}
this._size();
}
catch(e){
console.error(e);
}
finally{
this._fadeOut();
this._displayed=false;
if(this._resizeCheck!==null){
clearInterval(this._resizeCheck);
this._resizeCheck=null;
}
}
}
},isVisible:function(){
return this._displayed;
},onShow:function(){
},onHide:function(){
},uninitialize:function(){
this._displayed=false;
if(this._resizeCheck){
clearInterval(this._resizeCheck);
}
_53b.set(this._centerNode,"display","none");
_53b.set(this._underlayNode,"display","none");
if(has("ie")==7&&this._ieFixNode){
_53d.body().removeChild(this._ieFixNode);
delete this._ieFixNode;
}
if(this._anim){
this._anim.stop();
delete this._anim;
}
this.target=null;
this._imageNode=null;
this._textNode=null;
this._centerNode=null;
this.inherited(arguments);
},_size:function(){
if(this._displayed){
var dir=attr.get(_53d.body(),"dir");
if(dir){
dir=dir.toLowerCase();
}
var _542;
var _543=this._scrollerWidths();
var _544=this.target;
var _545=_53b.get(this._centerNode,"display");
_53b.set(this._centerNode,"display","block");
var box=_53a.position(_544,true);
if(_544===_53d.body()||_544===_53d.doc){
box=_53c.getBox();
box.x=box.l;
box.y=box.t;
}
var _546=_53a.getMarginBox(this._centerNode);
_53b.set(this._centerNode,"display",_545);
if(this._ieFixNode){
_542=-this._ieFixNode.offsetTop/1000;
box.x=Math.floor((box.x+0.9)/_542);
box.y=Math.floor((box.y+0.9)/_542);
box.w=Math.floor((box.w+0.9)/_542);
box.h=Math.floor((box.h+0.9)/_542);
}
var zi=_53b.get(_544,"zIndex");
var ziUl=zi;
var ziIn=zi;
if(this.zIndex==="auto"){
if(zi!="auto"){
ziUl=parseInt(ziUl,10)+1;
ziIn=parseInt(ziIn,10)+2;
}else{
var _547=_544;
if(_547&&_547!==_53d.body()&&_547!==_53d.doc){
_547=_544.parentNode;
var _548=-100000;
while(_547&&_547!==_53d.body()){
zi=_53b.get(_547,"zIndex");
if(!zi||zi==="auto"){
_547=_547.parentNode;
}else{
var _549=parseInt(zi,10);
if(_548<_549){
_548=_549;
ziUl=_549+1;
ziIn=_549+2;
}
_547=_547.parentNode;
}
}
}
}
}else{
ziUl=parseInt(this.zIndex,10)+1;
ziIn=parseInt(this.zIndex,10)+2;
}
_53b.set(this._centerNode,"zIndex",ziIn);
_53b.set(this._underlayNode,"zIndex",ziUl);
var pn=_544.parentNode;
if(pn&&pn!==_53d.body()&&_544!==_53d.body()&&_544!==_53d.doc){
var obh=box.h;
var obw=box.w;
var _54a=_53a.position(pn,true);
if(this._ieFixNode){
_542=-this._ieFixNode.offsetTop/1000;
_54a.x=Math.floor((_54a.x+0.9)/_542);
_54a.y=Math.floor((_54a.y+0.9)/_542);
_54a.w=Math.floor((_54a.w+0.9)/_542);
_54a.h=Math.floor((_54a.h+0.9)/_542);
}
_54a.w-=pn.scrollHeight>pn.clientHeight&&pn.clientHeight>0?_543.v:0;
_54a.h-=pn.scrollWidth>pn.clientWidth&&pn.clientWidth>0?_543.h:0;
if(dir==="rtl"){
if(has("opera")){
box.x+=pn.scrollHeight>pn.clientHeight&&pn.clientHeight>0?_543.v:0;
_54a.x+=pn.scrollHeight>pn.clientHeight&&pn.clientHeight>0?_543.v:0;
}else{
if(has("ie")){
_54a.x+=pn.scrollHeight>pn.clientHeight&&pn.clientHeight>0?_543.v:0;
}else{
if(has("webkit")){
}
}
}
}
if(_54a.w<box.w){
box.w=box.w-_54a.w;
}
if(_54a.h<box.h){
box.h=box.h-_54a.h;
}
var _54b=_54a.y;
var _54c=_54a.y+_54a.h;
var bTop=box.y;
var _54d=box.y+obh;
var _54e=_54a.x;
var _54f=_54a.x+_54a.w;
var _550=box.x;
var _551=box.x+obw;
var _552;
if(_54d>_54b&&bTop<_54b){
box.y=_54a.y;
_552=_54b-bTop;
var _553=obh-_552;
if(_553<_54a.h){
box.h=_553;
}else{
box.h-=2*(pn.scrollWidth>pn.clientWidth&&pn.clientWidth>0?_543.h:0);
}
}else{
if(bTop<_54c&&_54d>_54c){
box.h=_54c-bTop;
}else{
if(_54d<=_54b||bTop>=_54c){
box.h=0;
}
}
}
if(_551>_54e&&_550<_54e){
box.x=_54a.x;
_552=_54e-_550;
var _554=obw-_552;
if(_554<_54a.w){
box.w=_554;
}else{
box.w-=2*(pn.scrollHeight>pn.clientHeight&&pn.clientHeight>0?_543.w:0);
}
}else{
if(_550<_54f&&_551>_54f){
box.w=_54f-_550;
}else{
if(_551<=_54e||_550>=_54f){
box.w=0;
}
}
}
}
if(box.h>0&&box.w>0){
_53b.set(this._underlayNode,{display:"block",width:box.w+"px",height:box.h+"px",top:box.y+"px",left:box.x+"px"});
var _555=["borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"];
this._cloneStyles(_555);
if(!has("ie")){
_555=["MozBorderRadius","MozBorderRadiusTopleft","MozBorderRadiusTopright","MozBorderRadiusBottomleft","MozBorderRadiusBottomright","WebkitBorderRadius","WebkitBorderTopLeftRadius","WebkitBorderTopRightRadius","WebkitBorderBottomLeftRadius","WebkitBorderBottomRightRadius"];
this._cloneStyles(_555,this);
}
var _556=(box.h/2)-(_546.h/2);
var _557=(box.w/2)-(_546.w/2);
if(box.h>=_546.h&&box.w>=_546.w){
_53b.set(this._centerNode,{top:(_556+box.y)+"px",left:(_557+box.x)+"px",display:"block"});
}else{
_53b.set(this._centerNode,"display","none");
}
}else{
_53b.set(this._underlayNode,"display","none");
_53b.set(this._centerNode,"display","none");
}
if(this._resizeCheck===null){
var self=this;
this._resizeCheck=setInterval(function(){
self._size();
},100);
}
}
},_cloneStyles:function(list){
_537.forEach(list,function(s){
_53b.set(this._underlayNode,s,_53b.get(this.target,s));
},this);
},_fadeIn:function(){
var self=this;
var _558=_53e.animateProperty({duration:self.duration,node:self._underlayNode,properties:{opacity:{start:0,end:self.opacity}}});
var _559=_53e.animateProperty({duration:self.duration,node:self._centerNode,properties:{opacity:{start:0,end:1}},onEnd:function(){
self.onShow();
delete self._anim;
}});
this._anim=fx.combine([_558,_559]);
this._anim.play();
},_fadeOut:function(){
var self=this;
var _55a=_53e.animateProperty({duration:self.duration,node:self._underlayNode,properties:{opacity:{start:self.opacity,end:0}},onEnd:function(){
_53b.set(this.node,{"display":"none","zIndex":"-1000"});
}});
var _55b=_53e.animateProperty({duration:self.duration,node:self._centerNode,properties:{opacity:{start:1,end:0}},onEnd:function(){
_53b.set(this.node,{"display":"none","zIndex":"-1000"});
self.onHide();
self._enableOverflow();
delete self._anim;
}});
this._anim=fx.combine([_55a,_55b]);
this._anim.play();
},_ignore:function(e){
if(e){
_538.stop(e);
}
},_scrollerWidths:function(){
var div=_539.create("div");
_53b.set(div,{position:"absolute",opacity:0,overflow:"hidden",width:"50px",height:"50px",zIndex:"-100",top:"-200px",padding:"0px",margin:"0px"});
var iDiv=_539.create("div");
_53b.set(iDiv,{width:"200px",height:"10px"});
div.appendChild(iDiv);
_53d.body().appendChild(div);
var b=_53a.getContentBox(div);
_53b.set(div,"overflow","scroll");
var a=_53a.getContentBox(div);
_53d.body().removeChild(div);
return {v:b.w-a.w,h:b.h-a.h};
},_setTextAttr:function(text){
this._textNode.innerHTML=text;
this.text=text;
},_setColorAttr:function(c){
_53b.set(this._underlayNode,"backgroundColor",c);
this.color=c;
},_setImageTextAttr:function(text){
attr.set(this._imageNode,"alt",text);
this.imageText=text;
},_setImageAttr:function(url){
attr.set(this._imageNode,"src",url);
this.image=url;
},_setCenterIndicatorAttr:function(_55c){
this.centerIndicator=_55c;
if(_55c==="image"){
this._centerNode=this._imageNode;
_53b.set(this._textNode,"display","none");
}else{
this._centerNode=this._textNode;
_53b.set(this._imageNode,"display","none");
}
},_disableOverflow:function(){
if(this.target===_53d.body()||this.target===_53d.doc){
this._overflowDisabled=true;
var body=_53d.body();
if(body.style&&body.style.overflow){
this._oldOverflow=_53b.get(body,"overflow");
}else{
this._oldOverflow="";
}
if(has("ie")&&!has("quirks")){
if(body.parentNode&&body.parentNode.style&&body.parentNode.style.overflow){
this._oldBodyParentOverflow=body.parentNode.style.overflow;
}else{
try{
this._oldBodyParentOverflow=_53b.get(body.parentNode,"overflow");
}
catch(e){
this._oldBodyParentOverflow="scroll";
}
}
_53b.set(body.parentNode,"overflow","hidden");
}
_53b.set(body,"overflow","hidden");
}
},_enableOverflow:function(){
if(this._overflowDisabled){
delete this._overflowDisabled;
var body=_53d.body();
if(has("ie")&&!has("quirks")){
body.parentNode.style.overflow=this._oldBodyParentOverflow;
delete this._oldBodyParentOverflow;
}
_53b.set(body,"overflow",this._oldOverflow);
if(has("webkit")){
var div=_539.create("div",{style:{height:"2px"}});
body.appendChild(div);
setTimeout(function(){
body.removeChild(div);
},0);
}
delete this._oldOverflow;
}
}});
});
},"dojo/string":function(){
define(["./_base/kernel","./_base/lang"],function(_55d,lang){
var _55e=/[&<>'"\/]/g;
var _55f={"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#x27;","/":"&#x2F;"};
var _560={};
lang.setObject("dojo.string",_560);
_560.escape=function(str){
if(!str){
return "";
}
return str.replace(_55e,function(c){
return _55f[c];
});
};
_560.rep=function(str,num){
if(num<=0||!str){
return "";
}
var buf=[];
for(;;){
if(num&1){
buf.push(str);
}
if(!(num>>=1)){
break;
}
str+=str;
}
return buf.join("");
};
_560.pad=function(text,size,ch,end){
if(!ch){
ch="0";
}
var out=String(text),pad=_560.rep(ch,Math.ceil((size-out.length)/ch.length));
return end?out+pad:pad+out;
};
_560.substitute=function(_561,map,_562,_563){
_563=_563||_55d.global;
_562=_562?lang.hitch(_563,_562):function(v){
return v;
};
return _561.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(_564,key,_565){
var _566=lang.getObject(key,false,map);
if(_565){
_566=lang.getObject(_565,false,_563).call(_563,_566,key);
}
return _562(_566,key).toString();
});
};
_560.trim=String.prototype.trim?lang.trim:function(str){
str=str.replace(/^\s+/,"");
for(var i=str.length-1;i>=0;i--){
if(/\S/.test(str.charAt(i))){
str=str.substring(0,i+1);
break;
}
}
return str;
};
return _560;
});
},"dijit/_Contained":function(){
define(["dojo/_base/declare","./registry"],function(_567,_568){
return _567("dijit._Contained",null,{_getSibling:function(_569){
var p=this.getParent();
return (p&&p._getSiblingOfChild&&p._getSiblingOfChild(this,_569=="previous"?-1:1))||null;
},getPreviousSibling:function(){
return this._getSibling("previous");
},getNextSibling:function(){
return this._getSibling("next");
},getIndexInParent:function(){
var p=this.getParent();
if(!p||!p.getIndexOfChild){
return -1;
}
return p.getIndexOfChild(this);
}});
});
},"curam/util/UIMFragment":function(){
define(["curam/util/Request","curam/define","curam/debug","curam/util/ScreenContext"],function(_56a){
curam.define.singleton("curam.util.UIMFragment",{get:function(args){
var _56b=args&&args.pageID;
var url=args&&args.url;
var _56c=args&&args.params;
var _56d=args&&args.onLoad;
var _56e=args&&args.onDownloadError;
var _56f=args&&args.targetID;
if(_56f===""||typeof _56f==="undefined"){
throw "UIMFragment: targetID must be set.";
}
var _570=null;
if(url){
_570=url;
}else{
_570=curam.util.UIMFragment._constructPath(_56b)+curam.util.UIMFragment._addCDEJParameters()+curam.util.UIMFragment._encodeParameters(_56c);
}
curam.debug.log("UIMFragment: GET to "+_570);
curam.util.UIMFragment._doService(_570,_56f,args,_56d,_56e);
},submitForm:function(_571){
var _571=dojo.fixEvent(_571);
var _572=_571.target;
dojo.stopEvent(_571);
var _573={url:curam.util.UIMFragment._constructFormActionPath(_572),form:_572,load:function(data){
var cp=dijit.getEnclosingWidget(_572);
cp.set("content",data);
},error:function(_574){
alert("form error: error!!");
}};
_56a.post(_573);
console.log(_571+" "+_572);
},_constructFormActionPath:function(_575){
var _576="";
if(window===window.top){
_576=curam.config.locale+"/";
}
return _576+_575.getAttribute("action");
},_initForm:function(_577){
var _578=dojo.query("form",dijit.byId(_577).domNode)[0];
if(_578){
dojo.connect(_578,"onsubmit",curam.util.UIMFragment.submitForm);
}
},_constructPath:function(_579){
var _57a=window;
var _57b=window.top;
return curam.util.UIMFragment._constructPathValue(_579,_57a,_57b);
},_constructPathValue:function(_57c,_57d,_57e){
if(_57c===""||typeof _57c==="undefined"){
throw "UIMFragment: pageID must be set.";
}
var _57f="";
if(_57d.location.pathname===_57e.location.pathname){
var _580=_57e.curam&&_57e.curam.config&&_57e.curam.config.locale;
_57f=(_580||"en")+"/";
}
return _57f+_57c+"Page.do";
},_encodeParameters:function(_581){
if(typeof _581==="undefined"||dojo.toJson(_581)==="{}"){
curam.debug.log("UIMFragment: No params included in request.");
return "";
}
var _582=[];
for(var _583 in _581){
_582.push(_583+"="+encodeURIComponent(_581[_583]));
}
return "&"+_582.join("&");
},_addCDEJParameters:function(){
return "?"+jsScreenContext.toRequestString();
},_doService:function(url,_584,args,_585,_586){
var cp=dijit.byId(_584);
cp.onLoad=dojo.hitch(cp,curam.util.UIMFragment._handleLoadSuccess,args,_585);
cp.preventCache=true;
cp.set("href",url);
},_handleDownloadError:function(_587){
curam.debug.log("Error invoking the UIMFragment: "+_587);
return "UIMFragment: Generic Error Handler";
},_handleLoadSuccess:function(_588,_589){
curam.util.UIMFragment._initForm(_588.targetID);
if(_589){
_589(this);
}
curam.debug.log("");
return "UIMFragment: Generic Success Handler";
}});
return curam.util.UIMFragment;
});
},"curam/tab/TabDescriptor":function(){
define(["dojo/_base/declare","curam/tab/TabSessionManager","curam/debug"],function(_58a,_58b,_58c){
var _58d=_58a("curam.tab.TabDescriptor",null,{constructor:function(_58e,_58f){
this.sectionID=_58e?_58e:null;
this.tabID=_58f?_58f:null;
this.tabSignature=null;
this.tabContent=null;
this.tabParamNames=null;
this.isHomePage=false;
this.foregroundTabContent=null;
this.restoreModalInd=false;
},toJson:function(){
var _590={"sectionID":this.sectionID,"tabID":this.tabID,"tabSignature":this.tabSignature,"tabParamNames":this.tabParamNames,"isHomePage":this.isHomePage};
_590.tabContent=this.tabContent?this.tabContent:null;
_590.foregroundTabContent=this.foregroundTabContent?this.foregroundTabContent:null;
_590.restoreModalInd=this.restoreModalInd?this.restoreModalInd:false;
return dojo.toJson(_590);
},setTabContent:function(_591,_592){
if(this.tabContent){
this._log(_58c.getProperty("curam.tab.TabDescriptor.content.changed"));
}else{
this._log(_58c.getProperty("curam.tab.TabDescriptor.content.set"));
}
var _593=dojo.clone(_591.parameters);
dojo.mixin(_593,_591.cdejParameters);
if(!this.tabContent){
this.tabContent={};
}
this.tabContent.parameters=_593;
this.tabContent.pageID=_591.pageID;
if(_592){
this.tabContent.tabName=_592;
}else{
if(!this.tabContent.tabName){
this.tabContent.tabName="";
}
}
this._save();
dojo.publish("/curam/tab/labelUpdated");
},setTabSignature:function(_594,_595,_596){
if(!this.tabSignature){
this.tabParamNames=_594.slice(0);
this.tabParamNames.sort();
this.tabSignature=this._generateSignature(this.tabID,this.tabParamNames,_595);
this._log(_58c.getProperty("curam.tab.TabDescriptor.signature.set"));
this._save();
if(!_596){
this._select();
}
}else{
this._log(_58c.getProperty("curam.tab.TabDescriptor.signature.not.set"));
}
},matchesPageRequest:function(_597){
return this.tabSignature&&this.tabSignature==this._generateSignature(this.tabID,this.tabParamNames,_597);
},_generateSignature:function(_598,_599,_59a){
var _59b=_598;
if(_599){
for(var i=0;i<_599.length;i++){
var name=_599[i];
if(_59a.parameters[name]){
_59b+="|"+name+"="+_59a.parameters[name];
}
}
}
return _59b;
},_save:function(){
if(this.tabContent&&this.tabSignature){
this._log(_58c.getProperty("curam.tab.TabDescriptor.saving"));
new _58b().tabUpdated(this);
}
},_select:function(){
if(this.tabSignature){
this._log(_58c.getProperty("curam.tab.TabDescriptor.selecting"));
new _58b().tabSelected(this);
}
},_log:function(msg){
if(curam.debug.enabled()){
curam.debug.log("TAB DESCRIPTOR: "+msg+" ["+this.toJson()+"]");
}
}});
dojo.mixin(curam.tab.TabDescriptor,{fromJson:function(_59c){
var _59d=null;
if(_59c){
var _59e=dojo.fromJson(_59c);
var _59d=new curam.tab.TabDescriptor(_59e.sectionID,_59e.tabID);
if(_59e.tabSignature){
_59d.tabSignature=_59e.tabSignature;
}
if(_59e.tabContent){
_59d.tabContent=_59e.tabContent;
}
if(_59e.tabParamNames){
_59d.tabParamNames=_59e.tabParamNames;
}
if(_59e.isHomePage){
_59d.isHomePage=_59e.isHomePage;
}
if(_59e.foregroundTabContent){
_59d.foregroundTabContent=_59e.foregroundTabContent;
}
if(_59e.restoreModalInd){
_59d.restoreModalInd=_59e.restoreModalInd;
}
}
return _59d;
}});
return _58d;
});
},"dijit/_Container":function(){
define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(_59f,_5a0,_5a1,_5a2){
return _5a0("dijit._Container",null,{buildRendering:function(){
this.inherited(arguments);
if(!this.containerNode){
this.containerNode=this.domNode;
}
},addChild:function(_5a3,_5a4){
var _5a5=this.containerNode;
if(_5a4>0){
_5a5=_5a5.firstChild;
while(_5a4>0){
if(_5a5.nodeType==1){
_5a4--;
}
_5a5=_5a5.nextSibling;
}
if(_5a5){
_5a4="before";
}else{
_5a5=this.containerNode;
_5a4="last";
}
}
_5a1.place(_5a3.domNode,_5a5,_5a4);
if(this._started&&!_5a3._started){
_5a3.startup();
}
},removeChild:function(_5a6){
if(typeof _5a6=="number"){
_5a6=this.getChildren()[_5a6];
}
if(_5a6){
var node=_5a6.domNode;
if(node&&node.parentNode){
node.parentNode.removeChild(node);
}
}
},hasChildren:function(){
return this.getChildren().length>0;
},_getSiblingOfChild:function(_5a7,dir){
var _5a8=this.getChildren(),idx=_59f.indexOf(_5a8,_5a7);
return _5a8[idx+dir];
},getIndexOfChild:function(_5a9){
return _59f.indexOf(this.getChildren(),_5a9);
}});
});
},"curam/util/ui/form/renderer/CheckboxEditRendererFormEventsAdapter":function(){
define(["dojo/_base/declare","curam/util/ui/form/renderer/GenericRendererFormEventsAdapter"],function(_5aa,_5ab){
var _5ac=_5aa("curam.util.ui.form.renderer.CheckboxEditRendererFormEventsAdapter",_5ab,{setFormElementValue:function(_5ad){
this.element.checked=_5ad;
},getFormElementValue:function(){
return this.getFormElement().checked;
},});
return _5ac;
});
},"dijit/layout/BorderContainer":function(){
define(["dojo/_base/array","dojo/cookie","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/on","dojo/touch","../_WidgetBase","../_Widget","../_TemplatedMixin","./LayoutContainer","./utils"],function(_5ae,_5af,_5b0,_5b1,_5b2,_5b3,_5b4,keys,lang,on,_5b5,_5b6,_5b7,_5b8,_5b9,_5ba){
var _5bb=_5b0("dijit.layout._Splitter",[_5b7,_5b8],{live:true,templateString:"<div class=\"dijitSplitter\" data-dojo-attach-event=\"onkeydown:_onKeyDown,press:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse\" tabIndex=\"0\"><div class=\"dijitSplitterThumb\"></div></div>",constructor:function(){
this._handlers=[];
},postMixInProperties:function(){
this.inherited(arguments);
this.horizontal=/top|bottom/.test(this.region);
this._factor=/top|left/.test(this.region)?1:-1;
this._cookieName=this.container.id+"_"+this.region;
},buildRendering:function(){
this.inherited(arguments);
_5b1.add(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V"));
if(this.container.persist){
var _5bc=_5af(this._cookieName);
if(_5bc){
this.child.domNode.style[this.horizontal?"height":"width"]=_5bc;
}
}
},_computeMaxSize:function(){
var dim=this.horizontal?"h":"w",_5bd=_5b3.getMarginBox(this.child.domNode)[dim],_5be=_5ae.filter(this.container.getChildren(),function(_5bf){
return _5bf.region=="center";
})[0];
var _5c0=_5b3.getContentBox(_5be.domNode)[dim]-10;
return Math.min(this.child.maxSize,_5bd+_5c0);
},_startDrag:function(e){
if(!this.cover){
this.cover=_5b2.place("<div class=dijitSplitterCover></div>",this.child.domNode,"after");
}
_5b1.add(this.cover,"dijitSplitterCoverActive");
if(this.fake){
_5b2.destroy(this.fake);
}
if(!(this._resize=this.live)){
(this.fake=this.domNode.cloneNode(true)).removeAttribute("id");
_5b1.add(this.domNode,"dijitSplitterShadow");
_5b2.place(this.fake,this.domNode,"after");
}
_5b1.add(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active");
if(this.fake){
_5b1.remove(this.fake,"dijitSplitterHover dijitSplitter"+(this.horizontal?"H":"V")+"Hover");
}
var _5c1=this._factor,_5c2=this.horizontal,axis=_5c2?"pageY":"pageX",_5c3=e[axis],_5c4=this.domNode.style,dim=_5c2?"h":"w",_5c5=_5b4.getComputedStyle(this.child.domNode),_5c6=_5b3.getMarginBox(this.child.domNode,_5c5)[dim],max=this._computeMaxSize(),min=Math.max(this.child.minSize,_5b3.getPadBorderExtents(this.child.domNode,_5c5)[dim]+10),_5c7=this.region,_5c8=_5c7=="top"||_5c7=="bottom"?"top":"left",_5c9=parseInt(_5c4[_5c8],10),_5ca=this._resize,_5cb=lang.hitch(this.container,"_layoutChildren",this.child.id),de=this.ownerDocument;
this._handlers=this._handlers.concat([on(de,_5b5.move,this._drag=function(e,_5cc){
var _5cd=e[axis]-_5c3,_5ce=_5c1*_5cd+_5c6,_5cf=Math.max(Math.min(_5ce,max),min);
if(_5ca||_5cc){
_5cb(_5cf);
}
_5c4[_5c8]=_5cd+_5c9+_5c1*(_5cf-_5ce)+"px";
}),on(de,"dragstart",function(e){
e.stopPropagation();
e.preventDefault();
}),on(this.ownerDocumentBody,"selectstart",function(e){
e.stopPropagation();
e.preventDefault();
}),on(de,_5b5.release,lang.hitch(this,"_stopDrag"))]);
e.stopPropagation();
e.preventDefault();
},_onMouse:function(e){
var o=(e.type=="mouseover"||e.type=="mouseenter");
_5b1.toggle(this.domNode,"dijitSplitterHover",o);
_5b1.toggle(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover",o);
},_stopDrag:function(e){
try{
if(this.cover){
_5b1.remove(this.cover,"dijitSplitterCoverActive");
}
if(this.fake){
_5b2.destroy(this.fake);
}
_5b1.remove(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active dijitSplitterShadow");
this._drag(e);
this._drag(e,true);
}
finally{
this._cleanupHandlers();
delete this._drag;
}
if(this.container.persist){
_5af(this._cookieName,this.child.domNode.style[this.horizontal?"height":"width"],{expires:365});
}
},_cleanupHandlers:function(){
var h;
while(h=this._handlers.pop()){
h.remove();
}
},_onKeyDown:function(e){
this._resize=true;
var _5d0=this.horizontal;
var tick=1;
switch(e.keyCode){
case _5d0?keys.UP_ARROW:keys.LEFT_ARROW:
tick*=-1;
case _5d0?keys.DOWN_ARROW:keys.RIGHT_ARROW:
break;
default:
return;
}
var _5d1=_5b3.getMarginSize(this.child.domNode)[_5d0?"h":"w"]+this._factor*tick;
this.container._layoutChildren(this.child.id,Math.max(Math.min(_5d1,this._computeMaxSize()),this.child.minSize));
e.stopPropagation();
e.preventDefault();
},destroy:function(){
this._cleanupHandlers();
delete this.child;
delete this.container;
delete this.cover;
delete this.fake;
this.inherited(arguments);
}});
var _5d2=_5b0("dijit.layout._Gutter",[_5b7,_5b8],{templateString:"<div class=\"dijitGutter\" role=\"presentation\"></div>",postMixInProperties:function(){
this.inherited(arguments);
this.horizontal=/top|bottom/.test(this.region);
},buildRendering:function(){
this.inherited(arguments);
_5b1.add(this.domNode,"dijitGutter"+(this.horizontal?"H":"V"));
}});
var _5d3=_5b0("dijit.layout.BorderContainer",_5b9,{gutters:true,liveSplitters:true,persist:false,baseClass:"dijitBorderContainer",_splitterClass:_5bb,postMixInProperties:function(){
if(!this.gutters){
this.baseClass+="NoGutter";
}
this.inherited(arguments);
},_setupChild:function(_5d4){
this.inherited(arguments);
var _5d5=_5d4.region,ltr=_5d4.isLeftToRight();
if(_5d5=="leading"){
_5d5=ltr?"left":"right";
}
if(_5d5=="trailing"){
_5d5=ltr?"right":"left";
}
if(_5d5){
if(_5d5!="center"&&(_5d4.splitter||this.gutters)&&!_5d4._splitterWidget){
var _5d6=_5d4.splitter?this._splitterClass:_5d2;
if(lang.isString(_5d6)){
_5d6=lang.getObject(_5d6);
}
var _5d7=new _5d6({id:_5d4.id+"_splitter",container:this,child:_5d4,region:_5d5,live:this.liveSplitters});
_5d7.isSplitter=true;
_5d4._splitterWidget=_5d7;
var _5d8=_5d5=="bottom"||_5d5==(this.isLeftToRight()?"right":"left");
_5b2.place(_5d7.domNode,_5d4.domNode,_5d8?"before":"after");
_5d7.startup();
}
}
},layout:function(){
this._layoutChildren();
},removeChild:function(_5d9){
var _5da=_5d9._splitterWidget;
if(_5da){
_5da.destroy();
delete _5d9._splitterWidget;
}
this.inherited(arguments);
},getChildren:function(){
return _5ae.filter(this.inherited(arguments),function(_5db){
return !_5db.isSplitter;
});
},getSplitter:function(_5dc){
return _5ae.filter(this.getChildren(),function(_5dd){
return _5dd.region==_5dc;
})[0]._splitterWidget;
},resize:function(_5de,_5df){
if(!this.cs||!this.pe){
var node=this.domNode;
this.cs=_5b4.getComputedStyle(node);
this.pe=_5b3.getPadExtents(node,this.cs);
this.pe.r=_5b4.toPixelValue(node,this.cs.paddingRight);
this.pe.b=_5b4.toPixelValue(node,this.cs.paddingBottom);
_5b4.set(node,"padding","0px");
}
this.inherited(arguments);
},_layoutChildren:function(_5e0,_5e1){
if(!this._borderBox||!this._borderBox.h){
return;
}
var _5e2=[];
_5ae.forEach(this._getOrderedChildren(),function(pane){
_5e2.push(pane);
if(pane._splitterWidget){
_5e2.push(pane._splitterWidget);
}
});
var dim={l:this.pe.l,t:this.pe.t,w:this._borderBox.w-this.pe.w,h:this._borderBox.h-this.pe.h};
_5ba.layoutChildren(this.domNode,dim,_5e2,_5e0,_5e1);
},destroyRecursive:function(){
_5ae.forEach(this.getChildren(),function(_5e3){
var _5e4=_5e3._splitterWidget;
if(_5e4){
_5e4.destroy();
}
delete _5e3._splitterWidget;
});
this.inherited(arguments);
}});
_5d3.ChildWidgetProperties={splitter:false,minSize:0,maxSize:Infinity};
lang.mixin(_5d3.ChildWidgetProperties,_5b9.ChildWidgetProperties);
lang.extend(_5b6,_5d3.ChildWidgetProperties);
_5d3._Splitter=_5bb;
_5d3._Gutter=_5d2;
return _5d3;
});
},"dojo/dnd/Mover":function(){
define(["../_base/array","../_base/declare","../_base/lang","../sniff","../_base/window","../dom","../dom-geometry","../dom-style","../Evented","../on","../touch","./common","./autoscroll"],function(_5e5,_5e6,lang,has,win,dom,_5e7,_5e8,_5e9,on,_5ea,dnd,_5eb){
return _5e6("dojo.dnd.Mover",[_5e9],{constructor:function(node,e,host){
this.node=dom.byId(node);
this.marginBox={l:e.pageX,t:e.pageY};
this.mouseButton=e.button;
var h=(this.host=host),d=node.ownerDocument;
function _5ec(e){
e.preventDefault();
e.stopPropagation();
};
this.events=[on(d,_5ea.move,lang.hitch(this,"onFirstMove")),on(d,_5ea.move,lang.hitch(this,"onMouseMove")),on(d,_5ea.release,lang.hitch(this,"onMouseUp")),on(d,"dragstart",_5ec),on(d.body,"selectstart",_5ec)];
_5eb.autoScrollStart(d);
if(h&&h.onMoveStart){
h.onMoveStart(this);
}
},onMouseMove:function(e){
_5eb.autoScroll(e);
var m=this.marginBox;
this.host.onMove(this,{l:m.l+e.pageX,t:m.t+e.pageY},e);
e.preventDefault();
e.stopPropagation();
},onMouseUp:function(e){
if(has("webkit")&&has("mac")&&this.mouseButton==2?e.button==0:this.mouseButton==e.button){
this.destroy();
}
e.preventDefault();
e.stopPropagation();
},onFirstMove:function(e){
var s=this.node.style,l,t,h=this.host;
switch(s.position){
case "relative":
case "absolute":
l=Math.round(parseFloat(s.left))||0;
t=Math.round(parseFloat(s.top))||0;
break;
default:
s.position="absolute";
var m=_5e7.getMarginBox(this.node);
var b=win.doc.body;
var bs=_5e8.getComputedStyle(b);
var bm=_5e7.getMarginBox(b,bs);
var bc=_5e7.getContentBox(b,bs);
l=m.l-(bc.l-bm.l);
t=m.t-(bc.t-bm.t);
break;
}
this.marginBox.l=l-this.marginBox.l;
this.marginBox.t=t-this.marginBox.t;
if(h&&h.onFirstMove){
h.onFirstMove(this,e);
}
this.events.shift().remove();
},destroy:function(){
_5e5.forEach(this.events,function(_5ed){
_5ed.remove();
});
var h=this.host;
if(h&&h.onMoveStop){
h.onMoveStop(this);
}
this.events=this.node=this.host=null;
}});
});
},"dijit/form/ComboBoxMixin":function(){
define(["dojo/_base/declare","dojo/Deferred","dojo/_base/kernel","dojo/_base/lang","dojo/store/util/QueryResults","./_AutoCompleterMixin","./_ComboBoxMenu","../_HasDropDown","dojo/text!./templates/DropDownBox.html"],function(_5ee,_5ef,_5f0,lang,_5f1,_5f2,_5f3,_5f4,_5f5){
return _5ee("dijit.form.ComboBoxMixin",[_5f4,_5f2],{dropDownClass:_5f3,hasDownArrow:true,templateString:_5f5,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{"_buttonNode":"dijitDownArrowButton"},_setHasDownArrowAttr:function(val){
this._set("hasDownArrow",val);
this._buttonNode.style.display=val?"":"none";
},_showResultList:function(){
this.displayMessage("");
this.inherited(arguments);
},_setStoreAttr:function(_5f6){
if(!_5f6.get){
lang.mixin(_5f6,{_oldAPI:true,get:function(id){
var _5f7=new _5ef();
this.fetchItemByIdentity({identity:id,onItem:function(_5f8){
_5f7.resolve(_5f8);
},onError:function(_5f9){
_5f7.reject(_5f9);
}});
return _5f7.promise;
},query:function(_5fa,_5fb){
var _5fc=new _5ef(function(){
_5fd.abort&&_5fd.abort();
});
_5fc.total=new _5ef();
var _5fd=this.fetch(lang.mixin({query:_5fa,onBegin:function(_5fe){
_5fc.total.resolve(_5fe);
},onComplete:function(_5ff){
_5fc.resolve(_5ff);
},onError:function(_600){
_5fc.reject(_600);
}},_5fb));
return _5f1(_5fc);
}});
}
this._set("store",_5f6);
},postMixInProperties:function(){
var _601=this.params.store||this.store;
if(_601){
this._setStoreAttr(_601);
}
this.inherited(arguments);
if(!this.params.store&&this.store&&!this.store._oldAPI){
var _602=this.declaredClass;
lang.mixin(this.store,{getValue:function(item,attr){
_5f0.deprecated(_602+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");
return item[attr];
},getLabel:function(item){
_5f0.deprecated(_602+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly","","2.0");
return item.name;
},fetch:function(args){
_5f0.deprecated(_602+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");
var shim=["dojo/data/ObjectStore"];
require(shim,lang.hitch(this,function(_603){
new _603({objectStore:this}).fetch(args);
}));
}});
}
},buildRendering:function(){
this.inherited(arguments);
this.focusNode.setAttribute("aria-autocomplete",this.autoComplete?"both":"list");
}});
});
},"dijit/form/Select":function(){
define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/i18n","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","./_FormSelectWidget","../_HasDropDown","../DropDownMenu","../MenuItem","../MenuSeparator","../Tooltip","../_KeyNavMixin","../registry","dojo/text!./templates/Select.html","dojo/i18n!./nls/validate"],function(_604,_605,_606,_607,_608,i18n,keys,lang,on,has,_609,_60a,_60b,_60c,_60d,_60e,_60f,_610,_611){
var _612=_605("dijit.form._SelectMenu",_60b,{autoFocus:true,buildRendering:function(){
this.inherited(arguments);
this.domNode.setAttribute("role","listbox");
},postCreate:function(){
this.inherited(arguments);
this.own(on(this.domNode,"selectstart",function(evt){
evt.preventDefault();
evt.stopPropagation();
}));
},focus:function(){
var _613=false,val=this.parentWidget.value;
if(lang.isArray(val)){
val=val[val.length-1];
}
if(val){
_604.forEach(this.parentWidget._getChildren(),function(_614){
if(_614.option&&(val===_614.option.value)){
_613=true;
this.focusChild(_614,false);
}
},this);
}
if(!_613){
this.inherited(arguments);
}
}});
var _615=_605("dijit.form.Select"+(has("dojo-bidi")?"_NoBidi":""),[_609,_60a,_60f],{baseClass:"dijitSelect dijitValidationTextBox",templateString:_611,_buttonInputDisabled:has("ie")?"disabled":"",required:false,state:"",message:"",tooltipPosition:[],emptyLabel:"&#160;",_isLoaded:false,_childrenLoaded:false,labelType:"html",_fillContent:function(){
this.inherited(arguments);
if(this.options.length&&!this.value&&this.srcNodeRef){
var si=this.srcNodeRef.selectedIndex||0;
this._set("value",this.options[si>=0?si:0].value);
}
this.dropDown=new _612({id:this.id+"_menu",parentWidget:this});
_607.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "));
},_getMenuItemForOption:function(_616){
if(!_616.value&&!_616.label){
return new _60d({ownerDocument:this.ownerDocument});
}else{
var _617=lang.hitch(this,"_setValueAttr",_616);
var item=new _60c({option:_616,label:(this.labelType==="text"?(_616.label||"").toString().replace(/&/g,"&amp;").replace(/</g,"&lt;"):_616.label)||this.emptyLabel,onClick:_617,ownerDocument:this.ownerDocument,dir:this.dir,textDir:this.textDir,disabled:_616.disabled||false});
item.focusNode.setAttribute("role","option");
return item;
}
},_addOptionItem:function(_618){
if(this.dropDown){
this.dropDown.addChild(this._getMenuItemForOption(_618));
}
},_getChildren:function(){
if(!this.dropDown){
return [];
}
return this.dropDown.getChildren();
},focus:function(){
if(!this.disabled&&this.focusNode.focus){
try{
this.focusNode.focus();
}
catch(e){
}
}
},focusChild:function(_619){
if(_619){
this.set("value",_619.option);
}
},_getFirst:function(){
var _61a=this._getChildren();
return _61a.length?_61a[0]:null;
},_getLast:function(){
var _61b=this._getChildren();
return _61b.length?_61b[_61b.length-1]:null;
},childSelector:function(node){
var node=_610.byNode(node);
return node&&node.getParent()==this.dropDown;
},onKeyboardSearch:function(item,evt,_61c,_61d){
if(item){
this.focusChild(item);
}
},_loadChildren:function(_61e){
if(_61e===true){
if(this.dropDown){
delete this.dropDown.focusedChild;
this.focusedChild=null;
}
if(this.options.length){
this.inherited(arguments);
}else{
_604.forEach(this._getChildren(),function(_61f){
_61f.destroyRecursive();
});
var item=new _60c({ownerDocument:this.ownerDocument,label:this.emptyLabel});
this.dropDown.addChild(item);
}
}else{
this._updateSelection();
}
this._isLoaded=false;
this._childrenLoaded=true;
if(!this._loadingStore){
this._setValueAttr(this.value,false);
}
},_refreshState:function(){
if(this._started){
this.validate(this.focused);
}
},startup:function(){
this.inherited(arguments);
this._refreshState();
},_setValueAttr:function(_620){
this.inherited(arguments);
_606.set(this.valueNode,"value",this.get("value"));
this._refreshState();
},_setNameAttr:"valueNode",_setDisabledAttr:function(_621){
this.inherited(arguments);
this._refreshState();
},_setRequiredAttr:function(_622){
this._set("required",_622);
this.focusNode.setAttribute("aria-required",_622);
this._refreshState();
},_setOptionsAttr:function(_623){
this._isLoaded=false;
this._set("options",_623);
},_setDisplay:function(_624){
var lbl=(this.labelType==="text"?(_624||"").replace(/&/g,"&amp;").replace(/</g,"&lt;"):_624)||this.emptyLabel;
this.containerNode.innerHTML="<span role=\"option\" aria-selected=\"true\" class=\"dijitReset dijitInline "+this.baseClass.replace(/\s+|$/g,"Label ")+"\">"+lbl+"</span>";
},validate:function(_625){
var _626=this.disabled||this.isValid(_625);
this._set("state",_626?"":(this._hasBeenBlurred?"Error":"Incomplete"));
this.focusNode.setAttribute("aria-invalid",_626?"false":"true");
var _627=_626?"":this._missingMsg;
if(_627&&this.focused&&this._hasBeenBlurred){
_60e.show(_627,this.domNode,this.tooltipPosition,!this.isLeftToRight());
}else{
_60e.hide(this.domNode);
}
this._set("message",_627);
return _626;
},isValid:function(){
return (!this.required||this.value===0||!(/^\s*$/.test(this.value||"")));
},reset:function(){
this.inherited(arguments);
_60e.hide(this.domNode);
this._refreshState();
},postMixInProperties:function(){
this.inherited(arguments);
this._missingMsg=i18n.getLocalization("dijit.form","validate",this.lang).missingMessage;
},postCreate:function(){
this.inherited(arguments);
this.own(on(this.domNode,"selectstart",function(evt){
evt.preventDefault();
evt.stopPropagation();
}));
this.domNode.setAttribute("aria-expanded","false");
var _628=this._keyNavCodes;
delete _628[keys.LEFT_ARROW];
delete _628[keys.RIGHT_ARROW];
},_setStyleAttr:function(_629){
this.inherited(arguments);
_607.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width);
},isLoaded:function(){
return this._isLoaded;
},loadDropDown:function(_62a){
this._loadChildren(true);
this._isLoaded=true;
_62a();
},destroy:function(_62b){
if(this.dropDown&&!this.dropDown._destroyed){
this.dropDown.destroyRecursive(_62b);
delete this.dropDown;
}
_60e.hide(this.domNode);
this.inherited(arguments);
},_onFocus:function(){
this.validate(true);
},_onBlur:function(){
_60e.hide(this.domNode);
this.inherited(arguments);
this.validate(false);
}});
if(has("dojo-bidi")){
_615=_605("dijit.form.Select",_615,{_setDisplay:function(_62c){
this.inherited(arguments);
this.applyTextDir(this.containerNode);
}});
}
_615._Menu=_612;
function _62d(_62e){
return function(evt){
if(!this._isLoaded){
this.loadDropDown(lang.hitch(this,_62e,evt));
}else{
this.inherited(_62e,arguments);
}
};
};
_615.prototype._onContainerKeydown=_62d("_onContainerKeydown");
_615.prototype._onContainerKeypress=_62d("_onContainerKeypress");
return _615;
});
},"dijit/_base/manager":function(){
define(["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(_62f,_630,lang,_631,_632){
var _633={};
_62f.forEach(["byId","getUniqueId","findWidgets","_destroyAll","byNode","getEnclosingWidget"],function(name){
_633[name]=_631[name];
});
lang.mixin(_633,{defaultDuration:_630["defaultDuration"]||200});
lang.mixin(_632,_633);
return _632;
});
},"curam/util/ui/form/CuramFormsAPI":function(){
define(["curam/define","curam/debug"],function(_634,_635){
curam.define.singleton("curam.util.ui.form.CuramFormsAPI",{pageID:"",_PATH:"path",_VALUE:"value",_formComponentMap:{},_expectedComponentCount:0,_ready:false,isEnabled:function(){
return curam.util.getTopmostWindow().CURAM_FORMS_API_ENABLED==="true";
},incrementExpectedComponentsCount:function(_636,_637,_638){
this._expectedComponentCount+=1;
curam.debug.log("curam.util.CuramFormsAPI: "+_635.getProperty("curam.util.CuramFormsAPI.expectedComponent"),[this._expectedComponentCount,_637]);
},getComponentCount:function(){
return this._expectedComponentCount;
},isReady:function(){
return this._ready;
},registerComponent:function(_639){
if(!this.isEnabled()){
return;
}
if(!this._formComponentMap[_639.pathID]){
this._formComponentMap[_639.pathID]=_639;
}
if(_639.addChangeListener&&_639.addChangeListener instanceof Function){
_639.addChangeListener(this._handleComponentChanges.bind(this));
}
var _63a=Object.keys(this._formComponentMap).length;
curam.debug.log("curam.util.CuramFormsAPI: "+_635.getProperty("curam.util.CuramFormsAPI.registerComponent"),[_63a,_639.pathID]);
if(_63a===this._expectedComponentCount){
this._ready=true;
curam.util.getTopmostWindow().dojo.publish("curam/util/CuramFormsAPI/ready");
}
},setFormFields:function(_63b,_63c){
if(!this.isEnabled()){
return;
}
if(this.isReady()){
this._setFormFieldsInternal(_63b,_63c);
}else{
this._formPageID=_63b;
this._formData=_63c;
var _63d=curam.util.getTopmostWindow().dojo.subscribe("curam/util/CuramFormsAPI/ready",this,function(){
this._setFormFieldsInternal(this._formPageID,this._formData);
curam.util.getTopmostWindow().dojo.unsubscribe(_63d);
});
}
},_setFormFieldsInternal:function(_63e,_63f){
var _640=_63f.data;
for(var key in this._formComponentMap){
var _641=this._formComponentMap[key];
if(this._formComponentMap.hasOwnProperty(key)&&_641){
var path=key;
var _642=_640.find(function(_643){
return path===_643._PATH&&_643._VALUE!=="";
});
_642&&this._updateComponentWithStoredData(_642,_641);
}
}
},_updateComponentWithStoredData:function(_644,_645){
_645.setFormElementValue(_644._VALUE);
},_handleComponentChanges:function(_646){
var _647=this.getFormComponentDataAsJSON(_646);
var href=location.href;
var _648=window.frameElement.id.replace("iframe-","");
curam.util.getTopmostWindow().dojo.publish("curam/util/CuramFormsAPI/formChange",[{data:_647,"href":href,"frameID":_648}]);
},getFormComponentDataAsJSON:function(){
var _649=[];
for(var key in this._formComponentMap){
var _64a=this._formComponentMap[key];
if(this._formComponentMap.hasOwnProperty(key)&&_64a){
var _64b=key;
_649.push({_PATH:_64b,_VALUE:_64a.getFormElementValue()});
}
}
var _64c=JSON.stringify({data:_649});
return _64c;
},getFormComponentMap:function(){
return this._formComponentMap;
},});
return curam.util.ui.form.CuramFormsAPI;
});
},"dojo/data/ItemFileReadStore":function(){
define(["../_base/kernel","../_base/lang","../_base/declare","../_base/array","../_base/xhr","../Evented","./util/filter","./util/simpleFetch","../date/stamp"],function(_64d,lang,_64e,_64f,xhr,_650,_651,_652,_653){
var _654=_64e("dojo.data.ItemFileReadStore",[_650],{constructor:function(_655){
this._arrayOfAllItems=[];
this._arrayOfTopLevelItems=[];
this._loadFinished=false;
this._jsonFileUrl=_655.url;
this._ccUrl=_655.url;
this.url=_655.url;
this._jsonData=_655.data;
this.data=null;
this._datatypeMap=_655.typeMap||{};
if(!this._datatypeMap["Date"]){
this._datatypeMap["Date"]={type:Date,deserialize:function(_656){
return _653.fromISOString(_656);
}};
}
this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};
this._itemsByIdentity=null;
this._storeRefPropName="_S";
this._itemNumPropName="_0";
this._rootItemPropName="_RI";
this._reverseRefMap="_RRM";
this._loadInProgress=false;
this._queuedFetches=[];
if(_655.urlPreventCache!==undefined){
this.urlPreventCache=_655.urlPreventCache?true:false;
}
if(_655.hierarchical!==undefined){
this.hierarchical=_655.hierarchical?true:false;
}
if(_655.clearOnClose){
this.clearOnClose=true;
}
if("failOk" in _655){
this.failOk=_655.failOk?true:false;
}
},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:false,urlPreventCache:false,failOk:false,hierarchical:true,_assertIsItem:function(item){
if(!this.isItem(item)){
throw new Error(this.declaredClass+": Invalid item argument.");
}
},_assertIsAttribute:function(_657){
if(typeof _657!=="string"){
throw new Error(this.declaredClass+": Invalid attribute argument.");
}
},getValue:function(item,_658,_659){
var _65a=this.getValues(item,_658);
return (_65a.length>0)?_65a[0]:_659;
},getValues:function(item,_65b){
this._assertIsItem(item);
this._assertIsAttribute(_65b);
return (item[_65b]||[]).slice(0);
},getAttributes:function(item){
this._assertIsItem(item);
var _65c=[];
for(var key in item){
if((key!==this._storeRefPropName)&&(key!==this._itemNumPropName)&&(key!==this._rootItemPropName)&&(key!==this._reverseRefMap)){
_65c.push(key);
}
}
return _65c;
},hasAttribute:function(item,_65d){
this._assertIsItem(item);
this._assertIsAttribute(_65d);
return (_65d in item);
},containsValue:function(item,_65e,_65f){
var _660=undefined;
if(typeof _65f==="string"){
_660=_651.patternToRegExp(_65f,false);
}
return this._containsValue(item,_65e,_65f,_660);
},_containsValue:function(item,_661,_662,_663){
return _64f.some(this.getValues(item,_661),function(_664){
if(_664!==null&&!lang.isObject(_664)&&_663){
if(_664.toString().match(_663)){
return true;
}
}else{
if(_662===_664){
return true;
}
}
});
},isItem:function(_665){
if(_665&&_665[this._storeRefPropName]===this){
if(this._arrayOfAllItems[_665[this._itemNumPropName]]===_665){
return true;
}
}
return false;
},isItemLoaded:function(_666){
return this.isItem(_666);
},loadItem:function(_667){
this._assertIsItem(_667.item);
},getFeatures:function(){
return this._features;
},getLabel:function(item){
if(this._labelAttr&&this.isItem(item)){
return this.getValue(item,this._labelAttr);
}
return undefined;
},getLabelAttributes:function(item){
if(this._labelAttr){
return [this._labelAttr];
}
return null;
},filter:function(_668,_669,_66a){
var _66b=[],i,key;
if(_668.query){
var _66c,_66d=_668.queryOptions?_668.queryOptions.ignoreCase:false;
var _66e={};
for(key in _668.query){
_66c=_668.query[key];
if(typeof _66c==="string"){
_66e[key]=_651.patternToRegExp(_66c,_66d);
}else{
if(_66c instanceof RegExp){
_66e[key]=_66c;
}
}
}
for(i=0;i<_669.length;++i){
var _66f=true;
var _670=_669[i];
if(_670===null){
_66f=false;
}else{
for(key in _668.query){
_66c=_668.query[key];
if(!this._containsValue(_670,key,_66c,_66e[key])){
_66f=false;
}
}
}
if(_66f){
_66b.push(_670);
}
}
_66a(_66b,_668);
}else{
for(i=0;i<_669.length;++i){
var item=_669[i];
if(item!==null){
_66b.push(item);
}
}
_66a(_66b,_668);
}
},_fetchItems:function(_671,_672,_673){
var self=this;
if(this._loadFinished){
this.filter(_671,this._getItemsArray(_671.queryOptions),_672);
}else{
if(this._jsonFileUrl!==this._ccUrl){
_64d.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");
this._ccUrl=this._jsonFileUrl;
this.url=this._jsonFileUrl;
}else{
if(this.url!==this._ccUrl){
this._jsonFileUrl=this.url;
this._ccUrl=this.url;
}
}
if(this.data!=null){
this._jsonData=this.data;
this.data=null;
}
if(this._jsonFileUrl){
if(this._loadInProgress){
this._queuedFetches.push({args:_671,filter:lang.hitch(self,"filter"),findCallback:lang.hitch(self,_672)});
}else{
this._loadInProgress=true;
var _674={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};
var _675=xhr.get(_674);
_675.addCallback(function(data){
try{
self._getItemsFromLoadedData(data);
self._loadFinished=true;
self._loadInProgress=false;
self.filter(_671,self._getItemsArray(_671.queryOptions),_672);
self._handleQueuedFetches();
}
catch(e){
self._loadFinished=true;
self._loadInProgress=false;
_673(e,_671);
}
});
_675.addErrback(function(_676){
self._loadInProgress=false;
_673(_676,_671);
});
var _677=null;
if(_671.abort){
_677=_671.abort;
}
_671.abort=function(){
var df=_675;
if(df&&df.fired===-1){
df.cancel();
df=null;
}
if(_677){
_677.call(_671);
}
};
}
}else{
if(this._jsonData){
try{
this._loadFinished=true;
this._getItemsFromLoadedData(this._jsonData);
this._jsonData=null;
self.filter(_671,this._getItemsArray(_671.queryOptions),_672);
}
catch(e){
_673(e,_671);
}
}else{
_673(new Error(this.declaredClass+": No JSON source data was provided as either URL or a nested Javascript object."),_671);
}
}
}
},_handleQueuedFetches:function(){
if(this._queuedFetches.length>0){
for(var i=0;i<this._queuedFetches.length;i++){
var _678=this._queuedFetches[i],_679=_678.args,_67a=_678.filter,_67b=_678.findCallback;
if(_67a){
_67a(_679,this._getItemsArray(_679.queryOptions),_67b);
}else{
this.fetchItemByIdentity(_679);
}
}
this._queuedFetches=[];
}
},_getItemsArray:function(_67c){
if(_67c&&_67c.deep){
return this._arrayOfAllItems;
}
return this._arrayOfTopLevelItems;
},close:function(_67d){
if(this.clearOnClose&&this._loadFinished&&!this._loadInProgress){
if(((this._jsonFileUrl==""||this._jsonFileUrl==null)&&(this.url==""||this.url==null))&&this.data==null){
console.debug(this.declaredClass+": WARNING!  Data reload "+" information has not been provided."+"  Please set 'url' or 'data' to the appropriate value before"+" the next fetch");
}
this._arrayOfAllItems=[];
this._arrayOfTopLevelItems=[];
this._loadFinished=false;
this._itemsByIdentity=null;
this._loadInProgress=false;
this._queuedFetches=[];
}
},_getItemsFromLoadedData:function(_67e){
var _67f=false,self=this;
function _680(_681){
return (_681!==null)&&(typeof _681==="object")&&(!lang.isArray(_681)||_67f)&&(!lang.isFunction(_681))&&(_681.constructor==Object||lang.isArray(_681))&&(typeof _681._reference==="undefined")&&(typeof _681._type==="undefined")&&(typeof _681._value==="undefined")&&self.hierarchical;
};
function _682(_683){
self._arrayOfAllItems.push(_683);
for(var _684 in _683){
var _685=_683[_684];
if(_685){
if(lang.isArray(_685)){
var _686=_685;
for(var k=0;k<_686.length;++k){
var _687=_686[k];
if(_680(_687)){
_682(_687);
}
}
}else{
if(_680(_685)){
_682(_685);
}
}
}
}
};
this._labelAttr=_67e.label;
var i,item;
this._arrayOfAllItems=[];
this._arrayOfTopLevelItems=_67e.items;
for(i=0;i<this._arrayOfTopLevelItems.length;++i){
item=this._arrayOfTopLevelItems[i];
if(lang.isArray(item)){
_67f=true;
}
_682(item);
item[this._rootItemPropName]=true;
}
var _688={},key;
for(i=0;i<this._arrayOfAllItems.length;++i){
item=this._arrayOfAllItems[i];
for(key in item){
if(key!==this._rootItemPropName){
var _689=item[key];
if(_689!==null){
if(!lang.isArray(_689)){
item[key]=[_689];
}
}else{
item[key]=[null];
}
}
_688[key]=key;
}
}
while(_688[this._storeRefPropName]){
this._storeRefPropName+="_";
}
while(_688[this._itemNumPropName]){
this._itemNumPropName+="_";
}
while(_688[this._reverseRefMap]){
this._reverseRefMap+="_";
}
var _68a;
var _68b=_67e.identifier;
if(_68b){
this._itemsByIdentity={};
this._features["dojo.data.api.Identity"]=_68b;
for(i=0;i<this._arrayOfAllItems.length;++i){
item=this._arrayOfAllItems[i];
_68a=item[_68b];
var _68c=_68a[0];
if(!Object.hasOwnProperty.call(this._itemsByIdentity,_68c)){
this._itemsByIdentity[_68c]=item;
}else{
if(this._jsonFileUrl){
throw new Error(this.declaredClass+":  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+_68b+"].  Value collided: ["+_68c+"]");
}else{
if(this._jsonData){
throw new Error(this.declaredClass+":  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+_68b+"].  Value collided: ["+_68c+"]");
}
}
}
}
}else{
this._features["dojo.data.api.Identity"]=Number;
}
for(i=0;i<this._arrayOfAllItems.length;++i){
item=this._arrayOfAllItems[i];
item[this._storeRefPropName]=this;
item[this._itemNumPropName]=i;
}
for(i=0;i<this._arrayOfAllItems.length;++i){
item=this._arrayOfAllItems[i];
for(key in item){
_68a=item[key];
for(var j=0;j<_68a.length;++j){
_689=_68a[j];
if(_689!==null&&typeof _689=="object"){
if(("_type" in _689)&&("_value" in _689)){
var type=_689._type;
var _68d=this._datatypeMap[type];
if(!_68d){
throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+type+"'");
}else{
if(lang.isFunction(_68d)){
_68a[j]=new _68d(_689._value);
}else{
if(lang.isFunction(_68d.deserialize)){
_68a[j]=_68d.deserialize(_689._value);
}else{
throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");
}
}
}
}
if(_689._reference){
var _68e=_689._reference;
if(!lang.isObject(_68e)){
_68a[j]=this._getItemByIdentity(_68e);
}else{
for(var k=0;k<this._arrayOfAllItems.length;++k){
var _68f=this._arrayOfAllItems[k],_690=true;
for(var _691 in _68e){
if(_68f[_691]!=_68e[_691]){
_690=false;
}
}
if(_690){
_68a[j]=_68f;
}
}
}
if(this.referenceIntegrity){
var _692=_68a[j];
if(this.isItem(_692)){
this._addReferenceToMap(_692,item,key);
}
}
}else{
if(this.isItem(_689)){
if(this.referenceIntegrity){
this._addReferenceToMap(_689,item,key);
}
}
}
}
}
}
}
},_addReferenceToMap:function(_693,_694,_695){
},getIdentity:function(item){
var _696=this._features["dojo.data.api.Identity"];
if(_696===Number){
return item[this._itemNumPropName];
}else{
var _697=item[_696];
if(_697){
return _697[0];
}
}
return null;
},fetchItemByIdentity:function(_698){
var item,_699;
if(!this._loadFinished){
var self=this;
if(this._jsonFileUrl!==this._ccUrl){
_64d.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");
this._ccUrl=this._jsonFileUrl;
this.url=this._jsonFileUrl;
}else{
if(this.url!==this._ccUrl){
this._jsonFileUrl=this.url;
this._ccUrl=this.url;
}
}
if(this.data!=null&&this._jsonData==null){
this._jsonData=this.data;
this.data=null;
}
if(this._jsonFileUrl){
if(this._loadInProgress){
this._queuedFetches.push({args:_698});
}else{
this._loadInProgress=true;
var _69a={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};
var _69b=xhr.get(_69a);
_69b.addCallback(function(data){
var _69c=_698.scope?_698.scope:_64d.global;
try{
self._getItemsFromLoadedData(data);
self._loadFinished=true;
self._loadInProgress=false;
item=self._getItemByIdentity(_698.identity);
if(_698.onItem){
_698.onItem.call(_69c,item);
}
self._handleQueuedFetches();
}
catch(error){
self._loadInProgress=false;
if(_698.onError){
_698.onError.call(_69c,error);
}
}
});
_69b.addErrback(function(_69d){
self._loadInProgress=false;
if(_698.onError){
var _69e=_698.scope?_698.scope:_64d.global;
_698.onError.call(_69e,_69d);
}
});
}
}else{
if(this._jsonData){
self._getItemsFromLoadedData(self._jsonData);
self._jsonData=null;
self._loadFinished=true;
item=self._getItemByIdentity(_698.identity);
if(_698.onItem){
_699=_698.scope?_698.scope:_64d.global;
_698.onItem.call(_699,item);
}
}
}
}else{
item=this._getItemByIdentity(_698.identity);
if(_698.onItem){
_699=_698.scope?_698.scope:_64d.global;
_698.onItem.call(_699,item);
}
}
},_getItemByIdentity:function(_69f){
var item=null;
if(this._itemsByIdentity){
if(Object.hasOwnProperty.call(this._itemsByIdentity,_69f)){
item=this._itemsByIdentity[_69f];
}
}else{
if(Object.hasOwnProperty.call(this._arrayOfAllItems,_69f)){
item=this._arrayOfAllItems[_69f];
}
}
if(item===undefined){
item=null;
}
return item;
},getIdentityAttributes:function(item){
var _6a0=this._features["dojo.data.api.Identity"];
if(_6a0===Number){
return null;
}else{
return [_6a0];
}
},_forceLoad:function(){
var self=this;
if(this._jsonFileUrl!==this._ccUrl){
_64d.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");
this._ccUrl=this._jsonFileUrl;
this.url=this._jsonFileUrl;
}else{
if(this.url!==this._ccUrl){
this._jsonFileUrl=this.url;
this._ccUrl=this.url;
}
}
if(this.data!=null){
this._jsonData=this.data;
this.data=null;
}
if(this._jsonFileUrl){
var _6a1={url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:true};
var _6a2=xhr.get(_6a1);
_6a2.addCallback(function(data){
try{
if(self._loadInProgress!==true&&!self._loadFinished){
self._getItemsFromLoadedData(data);
self._loadFinished=true;
}else{
if(self._loadInProgress){
throw new Error(this.declaredClass+":  Unable to perform a synchronous load, an async load is in progress.");
}
}
}
catch(e){
console.log(e);
throw e;
}
});
_6a2.addErrback(function(_6a3){
throw _6a3;
});
}else{
if(this._jsonData){
self._getItemsFromLoadedData(self._jsonData);
self._jsonData=null;
self._loadFinished=true;
}
}
}});
lang.extend(_654,_652);
return _654;
});
},"curam/validation/calendar":function(){
define(["curam/define"],function(){
curam.define.singleton("curam.validation.calendar",{invalidGotoDateEntered:null});
return curam.validation.calendar;
});
},"curam/widget/_TabButton":function(){
define(["dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-style","dojo/has","dojo/i18n","dojo/_base/lang","dojo/text!curam/widget/templates/_TabButton.html","dijit/registry","dojo/_base/connect","curam/inspection/Layer","dijit/layout/StackController","dijit/Menu","dijit/MenuItem","curam/widget/MenuItem","curam/tab"],function(_6a4,dom,_6a5,_6a6,_6a7,has,i18n,lang,_6a8,_6a9,_6aa,_6ab){
_6aa.subscribe("/curam/tab/labelUpdated",function(){
var tabs;
var _6ac=dojo.query(".dijitTabContainerTop-tabs");
_6ac.forEach(function(_6ad){
tabs=dojo.query(".tabLabel",_6ad);
tabs.forEach(function(tab,_6ae){
var _6af=tabs[_6ae].innerHTML;
tab.setAttribute("title",_6af);
var _6b0=tab.nextSibling;
while(_6b0){
if(_6a6.contains(_6b0,"dijitTabCloseButton")){
var _6b1=_6b0.getAttribute("title");
if(_6b1&&_6b1.indexOf(_6af)<0){
_6b0.setAttribute("title",_6b1+" - "+_6af);
}
break;
}
_6b0=_6b0.nextSibling;
}
});
});
});
var _6b2=_6a4("curam.widget._TabButton",dijit.layout._StackButton,{templateString:_6a8,_setNameAttr:"focusNode",scrollOnFocus:false,curamDisabled:false,curamVisible:true,baseClass:"dijitTab",postMixInProperties:function(){
if(!this.iconClass){
this.iconClass="dijitTabButtonIcon";
}
},postCreate:function(){
this.inherited(arguments);
dom.setSelectable(this.containerNode,false);
if(this.iconNode.className=="dijitTabButtonIcon"){
_6a7.set(this.iconNode,"width","1px");
}
_6a5.set(this.focusNode,"id",this.id);
_6ab.register("curam/widget/_TabButton",this);
},startup:function(){
dijit.layout._StackButton.prototype.startup.apply(this,arguments);
},_setCloseButtonAttr:function(disp){
this._set("closeButton",disp);
_6a6.toggle(this.domNode,"dijitClosable",disp);
this.closeNode.style.display=disp?"":"none";
if(disp){
var _6b3=i18n.getLocalization("dijit","common");
if(this.closeNode){
_6a5.set(this.closeNode,"title",_6b3.itemClose);
}
}else{
_6a6.add(this.titleNode,"hasNoCloseButton");
if(this._closeMenu){
this._closeMenu.destroyRecursive();
delete this._closeMenu;
}
}
},_setCuramDisabledAttr:function(_6b4){
this.curamDisabled=_6b4;
this._swapState(this.domNode,this.curamDisabled,"disabled","enabled");
},_setCuramVisibleAttr:function(_6b5){
this.curamVisible=_6b5;
this._swapState(this.domNode,this.curamVisible,"visible","hidden");
},_swapState:function(node,_6b6,_6b7,_6b8){
if(_6b6){
_6a6.replace(node,_6b7,_6b8);
}else{
_6a6.replace(node,_6b8,_6b7);
}
},destroy:function(){
_6aa.publish("/curam/tab/labelUpdated");
if(this._closeMenu){
this._closeMenu.destroyRecursive();
delete this._closeMenu;
}
this.inherited(arguments);
}});
return _6b2;
});
},"dijit/form/ComboButton":function(){
define(["dojo/_base/declare","dojo/keys","../focus","./DropDownButton","dojo/text!./templates/ComboButton.html","../a11yclick"],function(_6b9,keys,_6ba,_6bb,_6bc){
return _6b9("dijit.form.ComboButton",_6bb,{templateString:_6bc,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{"buttonNode":"dijitButtonNode","titleNode":"dijitButtonContents","_popupStateNode":"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyDown:function(evt){
if(evt.keyCode==keys[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]){
_6ba.focus(this._popupStateNode);
evt.stopPropagation();
evt.preventDefault();
}
},_onArrowKeyDown:function(evt){
if(evt.keyCode==keys[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]){
_6ba.focus(this.titleNode);
evt.stopPropagation();
evt.preventDefault();
}
},focus:function(_6bd){
if(!this.disabled){
_6ba.focus(_6bd=="start"?this.titleNode:this._popupStateNode);
}
}});
});
},"curam/pagination/ExpandableListModel":function(){
define(["dojo/_base/declare","dojo/dom-class","dojo/dom-style","dojo/query","curam/debug","curam/util/ExpandableLists","curam/pagination"],function(_6be,_6bf,_6c0,_6c1,_6c2,_6c3,_6c4){
var _6c5=_6be("curam.pagination.ExpandableListModel",null,{_rowCount:null,constructor:function(_6c6){
this.tableNode=_6c1("table.paginated-list-id-"+_6c6)[0];
if(!this.tableNode){
throw "Table node for ID "+_6c6+" not found - failing!";
}
_6c2.log("curam.pagination.ExpandableListModel "+_6c2.getProperty("curam.pagination.ExpandableListModel"),this.tableNode);
this._id=_6c6;
},getId:function(){
return this._id;
},getRowCount:function(){
if(this._rowCount==null){
this._rowCount=0;
var _6c7=dojo.query("tbody > script.hidden-list-rows",this.tableNode),frag=document.createDocumentFragment();
for(var i=0;i<_6c7.length;i++){
var _6c8=_6c7[i];
var _6c9=(i==_6c7.length-1);
if(!_6c9){
this._rowCount+=(_6c4.getNumRowsInBlock(_6c8)*2);
}else{
_6c4.unpackRows(_6c8,frag);
_6c8.innerHTML="";
}
}
this.tableNode.tBodies[0].appendChild(frag);
var _6ca=dojo.query("tbody > tr",this.tableNode).length;
this._rowCount+=_6ca;
}
if(this._rowCount<=1){
return 1;
}else{
return this._rowCount/2;
}
},hideRange:function(_6cb,_6cc){
var rows=this._getRowNodes(_6cb,_6cc);
for(var i=_6cb;i<=_6cc;i++){
var _6cd=(2*i)-2;
var _6ce=(2*i)-1;
_6c0.set(rows[_6cd],"display","none");
_6bf.remove(rows[_6cd],"even-last-row");
_6bf.remove(rows[_6cd],"odd-last-row");
if(rows.length>_6ce){
var _6cf=rows[_6ce];
if(_6cf){
_6cf._curam_pagination_expanded=curam.util.ExpandableLists.isDetailsRowExpanded(_6cf);
curam.util.ExpandableLists.setDetailsRowExpandedState(rows[_6cd],_6cf,false);
}
}
}
},showRange:function(_6d0,_6d1){
var rows=this._getRowNodes(_6d0,_6d1);
var _6d2=(_6d1%2==0)?"even-last-row":"odd-last-row";
_6bf.add(rows[(_6d1*2)-2],_6d2);
for(var i=_6d0;i<=_6d1;i++){
var _6d3=(2*i)-2;
var _6d4=(2*i)-1;
_6c0.set(rows[_6d3],"display","");
if(rows.length>_6d4){
var _6d5=rows[_6d4];
if(_6d5){
curam.util.ExpandableLists.setDetailsRowExpandedState(rows[_6d3],_6d5,_6d5._curam_pagination_expanded);
}
}
}
dojo.publish("curam/update/pagination/rows",[rows,this.getId()]);
},_getRowNodes:function(_6d6,_6d7){
var _6d8=curam.pagination.readListContent(this.tableNode);
for(var i=1;i<=(_6d7*2)&&i<=_6d8.length;i++){
var node=_6d8[i-1];
if(node.tagName=="SCRIPT"){
curam.pagination.unpackRows(node);
_6d8=curam.pagination.readListContent(this.tableNode);
i--;
}
}
return dojo.query("tbody > tr",this.tableNode);
}});
return _6c5;
});
},"curam/widget/SearchTextBox":function(){
define(["dojo/query","dojo/dom-style","dojo/dom-construct","dojo/on","dojo/dom-geometry","dojo/dom-class","curam/util","dojo/dom-attr","dojo/_base/fx","dojo/_base/lang","dijit/form/TextBox","dojo/_base/declare","dojo/text!curam/widget/templates/SearchTextBox.html"],function(_6d9,_6da,_6db,on,_6dc,_6dd,util,_6de,fx,lang,_6df,_6e0,_6e1){
var _6e2=_6e0("curam.widget.SearchTextBox",_6df,{templateString:_6e1,backgroundColor:null,searchTextDiv:null,searchIconDiv:null,searchIcon:null,searchInputField:null,searchInputImg:null,placeholderText:null,applicationSearchDiv:null,searchControlsDiv:null,placeholderText:null,closedHeight:null,searchOptionsDiv:null,searchOptionsDivOpenedColor:null,originalInputColor:null,menuOpenedHeight:60,__populateValues:function(){
if(this.searchControlsDiv==null){
this.searchControlsDiv=_6d9(".search-input-controls");
}
if(this.searchIconDiv==null){
this.searchIconDiv=_6d9(".application-search-anchor-div");
}
if(this.searchIcon==null){
this.searchIcon=_6d9(".application-search-anchor");
}
if(this.searchInputField==null){
this.searchInputField=_6d9(".search-input-controls div.dijitInputField input")[0];
}
if(this.applicationSearchDiv==null){
this.applicationSearchDiv=_6d9(".application-search");
}
if(this.searchOptionsDiv==null){
this.searchOptionsDiv=_6d9(".search-options.no-dropdown");
}
if(this.searchOptionsDiv.length>0&&this.searchOptionsDivOpenedColor==null){
this.searchOptionsDivOpenedColor=_6da.get(this.searchOptionsDiv[0],"color");
}
if(this.searchInputImg==null){
this.searchInputImg=_6d9(".application-search-anchor img");
}
},postCreate:function(){
this.__populateValues();
},__hideElements:function(){
if(this.__isSearchInputFieldPopulated()){
_6da.set(this.searchInputField,"color",_6da.get(this.applicationSearchDiv[0],"color"));
}else{
_6da.set(this.searchInputField,this.originalInputColor);
}
_6dd.remove(this.searchInputField,"input-placeholder-opened");
_6dd.add(this.searchInputField,"input-placeholder-closed");
if(this.searchTextDiv!=null&&_6da.get(this.searchTextDiv[0],"background-color")!=this.backgroundColor){
fx.animateProperty({node:this.searchTextDiv[0],properties:{backgroundColor:{start:this.searchOptionsDivOpenedColor,end:this.backgroundColor}}}).play();
fx.animateProperty({node:this.searchControlsDiv[0],properties:{backgroundColor:{start:this.searchOptionsDivOpenedColor,end:this.backgroundColor}}}).play();
fx.animateProperty({node:this.searchIconDiv[0],properties:{backgroundColor:{start:this.searchOptionsDivOpenedColor,end:this.backgroundColor}}}).play();
this.searchInputImg[0].src=jsBaseURL+"/themes/curam/images/search--20-on-dark.svg";
if(this.searchOptionsDiv.length>0){
_6dd.remove(this.applicationSearchDiv[0],"application-search-upfront-popup");
_6da.set(this.searchOptionsDiv[0],"display","none");
fx.animateProperty({node:this.applicationSearchDiv[0],properties:{height:{start:this.menuOpenedHeight,end:this.closedHeight}}}).play();
this.applicationSearchDiv.style({left:"0px"});
}
}
},__recursive:function(_6e3){
if(_6e3.parentElement!=null){
if(_6dd.contains(_6e3,"application-search")){
return true;
}else{
return this.__recursive(_6e3.parentElement);
}
}
return false;
},__checkBlur:function(evt){
var _6e4=this;
setTimeout(function(){
var _6e5=document.activeElement;
if(!(_6dd.contains(_6e5,"searchTextBox")||_6dd.contains(_6e5,"application-search-anchor")||_6dd.contains(_6e5,"curam")||(_6e5.parentElement!=null&&_6dd.contains(_6e5.parentElement,"search-options"))||_6dd.contains(_6e5,"search-options"))){
_6e4.__hideElements();
}
},1);
},_setPlaceHolderAttr:function(v){
this.__populateValues();
var _6e6=this;
on(_6d9("body.curam"),"click",function(evt){
var _6e7=_6e6.__recursive(evt.target);
if(!_6e7){
_6e6.__hideElements();
}
});
on(_6d9("body.curam"),"touchstart",function(evt){
var _6e8=_6e6.__recursive(evt.target);
if(!_6e8){
_6e6.__hideElements();
}
});
on(this.searchIcon,"blur",function(evt){
_6e6.__checkBlur(evt);
});
if(this.searchOptionsDiv.length>0){
on(this.searchOptionsDiv[0].firstChild,"blur",function(evt){
_6e6.__checkBlur(evt);
});
}
placeholderText=v;
this.searchInputField=this.domNode.firstChild.firstChild;
_6de.set(this.searchInputField,"placeholder",placeholderText);
},__isSearchInputFieldPopulated:function(){
if(this.searchInputField.value.length>0){
return true;
}
return false;
},__onKeyUp:function(evt){
var _6e9=this.__isSearchInputFieldPopulated();
this.__enableOrDisableSearchLink(evt,_6e9);
},__onPaste:function(evt){
var _6ea=evt.clipboardData||window.clipboardData;
var _6eb=_6ea.getData("Text");
var _6ec=(_6eb&&_6eb.length>0)||this.__isSearchInputFieldPopulated();
this.__enableOrDisableSearchLink(evt,_6ec);
},__enableOrDisableSearchLink:function(evt,_6ed){
if(_6ed&&_6ed===true){
_6dd.remove(this.searchIcon[0],"dijitDisabled");
if(evt.keyCode==13){
curam.util.search("__o3.appsearch.searchText","__o3.appsearch.searchType");
}
}else{
_6dd.add(this.searchIcon[0],"dijitDisabled");
}
},__onClick:function(evt){
this.__populateValues();
if(this.searchTextDiv==null){
this.searchTextDiv=_6d9(".search-input-controls div.dijitInputField");
}
if(this.originalInputColor==null){
this.originalInputColor=_6da.get(this.searchInputField,"color");
}
_6da.set(this.searchInputField,"color",this.originalInputColor);
_6dd.remove(this.searchInputField,"input-placeholder-closed");
_6dd.add(this.searchInputField,"input-placeholder-opened");
if(this.searchOptionsDiv.length>0){
var _6ee=_6dc.position(this.searchInputField).x-11;
var _6ef=util.isRtlMode();
if(_6ef!=null){
_6ee=_6dc.position(this.applicationSearchDiv[0]).x-20;
}
if(this.closedHeight==null){
this.closedHeight=_6da.get(this.applicationSearchDiv[0],"height");
}
this.applicationSearchDiv.style({left:_6ee+"px"});
_6dd.add(this.applicationSearchDiv[0],"application-search-upfront-popup");
if(_6da.get(this.applicationSearchDiv[0],"height")!=60){
_6da.set(this.searchOptionsDiv[0],"display","block");
_6da.set(this.searchOptionsDiv[0],"opacity","0");
var _6f0={node:this.searchOptionsDiv[0]};
fx.animateProperty({node:this.applicationSearchDiv[0],properties:{height:{start:this.closedHeight,end:this.menuOpenedHeight}}}).play();
fx.fadeIn(_6f0).play();
}
}
if(this.backgroundColor==null){
this.backgroundColor=_6da.get(this.searchTextDiv[0],"background-color");
}
if(this.searchTextDiv!=null&&_6da.get(this.searchTextDiv[0],"background-color")!=this.searchOptionsDivOpenedColor){
fx.animateProperty({node:this.searchTextDiv[0],properties:{backgroundColor:{start:this.backgroundColor,end:this.searchOptionsDivOpenedColor}}}).play();
fx.animateProperty({node:this.searchControlsDiv[0],properties:{backgroundColor:{start:this.backgroundColor,end:this.searchOptionsDivOpenedColor}}}).play();
fx.animateProperty({node:this.searchIconDiv[0],properties:{backgroundColor:{start:this.backgroundColor,end:this.searchOptionsDivOpenedColor}}}).play();
this.searchInputImg[0].src=jsBaseURL+"/themes/curam/images/search--20-enabled.svg";
}
},__onBlur:function(evt){
this.__populateValues();
if(!this.__isSearchInputFieldPopulated()){
this.searchInputField.value="";
_6de.set(this.searchInputField,"placeholder",placeholderText);
}
this.__checkBlur(evt);
}});
return _6e2;
});
},"dojo/touch":function(){
define(["./_base/kernel","./aspect","./dom","./dom-class","./_base/lang","./on","./has","./mouse","./domReady","./_base/window"],function(dojo,_6f1,dom,_6f2,lang,on,has,_6f3,_6f4,win){
var ios4=has("ios")<5;
var _6f5=has("pointer-events")||has("MSPointer"),_6f6=(function(){
var _6f7={};
for(var type in {down:1,move:1,up:1,cancel:1,over:1,out:1}){
_6f7[type]=has("MSPointer")?"MSPointer"+type.charAt(0).toUpperCase()+type.slice(1):"pointer"+type;
}
return _6f7;
})();
var _6f8=has("touch-events");
var _6f9,_6fa,_6fb=false,_6fc,_6fd,_6fe,_6ff,_700,_701;
var _702;
function _703(_704,_705,_706){
if(_6f5&&_706){
return function(node,_707){
return on(node,_706,_707);
};
}else{
if(_6f8){
return function(node,_708){
var _709=on(node,_705,function(evt){
_708.call(this,evt);
_702=(new Date()).getTime();
}),_70a=on(node,_704,function(evt){
if(!_702||(new Date()).getTime()>_702+1000){
_708.call(this,evt);
}
});
return {remove:function(){
_709.remove();
_70a.remove();
}};
};
}else{
return function(node,_70b){
return on(node,_704,_70b);
};
}
}
};
function _70c(node){
do{
if(node.dojoClick!==undefined){
return node;
}
}while(node=node.parentNode);
};
function _70d(e,_70e,_70f){
if(_6f3.isRight(e)){
return;
}
var _710=_70c(e.target);
_6fa=!e.target.disabled&&_710&&_710.dojoClick;
if(_6fa){
_6fb=(_6fa=="useTarget");
_6fc=(_6fb?_710:e.target);
if(_6fb){
e.preventDefault();
}
_6fd=e.changedTouches?e.changedTouches[0].pageX-win.global.pageXOffset:e.clientX;
_6fe=e.changedTouches?e.changedTouches[0].pageY-win.global.pageYOffset:e.clientY;
_6ff=(typeof _6fa=="object"?_6fa.x:(typeof _6fa=="number"?_6fa:0))||4;
_700=(typeof _6fa=="object"?_6fa.y:(typeof _6fa=="number"?_6fa:0))||4;
if(!_6f9){
_6f9=true;
function _711(e){
if(_6fb){
_6fa=dom.isDescendant(win.doc.elementFromPoint((e.changedTouches?e.changedTouches[0].pageX-win.global.pageXOffset:e.clientX),(e.changedTouches?e.changedTouches[0].pageY-win.global.pageYOffset:e.clientY)),_6fc);
}else{
_6fa=_6fa&&(e.changedTouches?e.changedTouches[0].target:e.target)==_6fc&&Math.abs((e.changedTouches?e.changedTouches[0].pageX-win.global.pageXOffset:e.clientX)-_6fd)<=_6ff&&Math.abs((e.changedTouches?e.changedTouches[0].pageY-win.global.pageYOffset:e.clientY)-_6fe)<=_700;
}
};
win.doc.addEventListener(_70e,function(e){
if(_6f3.isRight(e)){
return;
}
_711(e);
if(_6fb){
e.preventDefault();
}
},true);
win.doc.addEventListener(_70f,function(e){
if(_6f3.isRight(e)){
return;
}
_711(e);
if(_6fa){
_701=(new Date()).getTime();
var _712=(_6fb?_6fc:e.target);
if(_712.tagName==="LABEL"){
_712=dom.byId(_712.getAttribute("for"))||_712;
}
var src=(e.changedTouches)?e.changedTouches[0]:e;
function _713(type){
var evt=document.createEvent("MouseEvents");
evt._dojo_click=true;
evt.initMouseEvent(type,true,true,e.view,e.detail,src.screenX,src.screenY,src.clientX,src.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null);
return evt;
};
var _714=_713("mousedown");
var _715=_713("mouseup");
var _716=_713("click");
setTimeout(function(){
on.emit(_712,"mousedown",_714);
on.emit(_712,"mouseup",_715);
on.emit(_712,"click",_716);
_701=(new Date()).getTime();
},0);
}
},true);
function _717(type){
win.doc.addEventListener(type,function(e){
if(_6fa&&!e._dojo_click&&(new Date()).getTime()<=_701+1000&&!(e.target.tagName=="INPUT"&&_6f2.contains(e.target,"dijitOffScreen"))){
e.stopPropagation();
e.stopImmediatePropagation&&e.stopImmediatePropagation();
if(type=="click"&&(e.target.tagName!="INPUT"||e.target.type=="radio"||e.target.type=="checkbox")&&e.target.tagName!="TEXTAREA"&&e.target.tagName!="AUDIO"&&e.target.tagName!="VIDEO"){
e.preventDefault();
}
}
},true);
};
_717("click");
_717("mousedown");
_717("mouseup");
}
}
};
var _718;
if(has("touch")){
if(_6f5){
_6f4(function(){
win.doc.addEventListener(_6f6.down,function(evt){
_70d(evt,_6f6.move,_6f6.up);
},true);
});
}else{
_6f4(function(){
_718=win.body();
win.doc.addEventListener("touchstart",function(evt){
_702=(new Date()).getTime();
var _719=_718;
_718=evt.target;
on.emit(_719,"dojotouchout",{relatedTarget:_718,bubbles:true});
on.emit(_718,"dojotouchover",{relatedTarget:_719,bubbles:true});
_70d(evt,"touchmove","touchend");
},true);
function _71a(evt){
var _71b=lang.delegate(evt,{bubbles:true});
if(has("ios")>=6){
_71b.touches=evt.touches;
_71b.altKey=evt.altKey;
_71b.changedTouches=evt.changedTouches;
_71b.ctrlKey=evt.ctrlKey;
_71b.metaKey=evt.metaKey;
_71b.shiftKey=evt.shiftKey;
_71b.targetTouches=evt.targetTouches;
}
return _71b;
};
on(win.doc,"touchmove",function(evt){
_702=(new Date()).getTime();
var _71c=win.doc.elementFromPoint(evt.pageX-(ios4?0:win.global.pageXOffset),evt.pageY-(ios4?0:win.global.pageYOffset));
if(_71c){
if(_718!==_71c){
on.emit(_718,"dojotouchout",{relatedTarget:_71c,bubbles:true});
on.emit(_71c,"dojotouchover",{relatedTarget:_718,bubbles:true});
_718=_71c;
}
if(!on.emit(_71c,"dojotouchmove",_71a(evt))){
evt.preventDefault();
}
}
});
on(win.doc,"touchend",function(evt){
_702=(new Date()).getTime();
var node=win.doc.elementFromPoint(evt.pageX-(ios4?0:win.global.pageXOffset),evt.pageY-(ios4?0:win.global.pageYOffset))||win.body();
on.emit(node,"dojotouchend",_71a(evt));
});
});
}
}
var _71d={press:_703("mousedown","touchstart",_6f6.down),move:_703("mousemove","dojotouchmove",_6f6.move),release:_703("mouseup","dojotouchend",_6f6.up),cancel:_703(_6f3.leave,"touchcancel",_6f5?_6f6.cancel:null),over:_703("mouseover","dojotouchover",_6f6.over),out:_703("mouseout","dojotouchout",_6f6.out),enter:_6f3._eventHandler(_703("mouseover","dojotouchover",_6f6.over)),leave:_6f3._eventHandler(_703("mouseout","dojotouchout",_6f6.out))};
1&&(dojo.touch=_71d);
return _71d;
});
},"dojo/cache":function(){
define(["./_base/kernel","./text"],function(dojo){
return dojo.cache;
});
},"dijit/DialogUnderlay":function(){
define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/dom-attr","dojo/dom-style","dojo/on","dojo/window","./_Widget","./_TemplatedMixin","./BackgroundIframe","./Viewport","./main"],function(_71e,lang,_71f,_720,_721,on,_722,_723,_724,_725,_726,_727){
var _728=_71e("dijit.DialogUnderlay",[_723,_724],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' tabIndex='-1' data-dojo-attach-point='node'></div></div>",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(id){
_720.set(this.node,"id",id+"_underlay");
this._set("dialogId",id);
},_setClassAttr:function(_729){
this.node.className="dijitDialogUnderlay "+_729;
this._set("class",_729);
},postCreate:function(){
this.ownerDocumentBody.appendChild(this.domNode);
this.own(on(this.domNode,"keydown",lang.hitch(this,"_onKeyDown")));
this.inherited(arguments);
},layout:function(){
var is=this.node.style,os=this.domNode.style;
os.display="none";
var _72a=_722.getBox(this.ownerDocument);
os.top=_72a.t+"px";
os.left=_72a.l+"px";
is.width=_72a.w+"px";
is.height=_72a.h+"px";
os.display="block";
},show:function(){
this.domNode.style.display="block";
this.open=true;
this.layout();
this.bgIframe=new _725(this.domNode);
var win=_722.get(this.ownerDocument);
this._modalConnects=[_726.on("resize",lang.hitch(this,"layout")),on(win,"scroll",lang.hitch(this,"layout"))];
},hide:function(){
this.bgIframe.destroy();
delete this.bgIframe;
this.domNode.style.display="none";
while(this._modalConnects.length){
(this._modalConnects.pop()).remove();
}
this.open=false;
},destroy:function(){
while(this._modalConnects.length){
(this._modalConnects.pop()).remove();
}
this.inherited(arguments);
},_onKeyDown:function(){
}});
_728.show=function(_72b,_72c){
var _72d=_728._singleton;
if(!_72d||_72d._destroyed){
_72d=_727._underlay=_728._singleton=new _728(_72b);
}else{
if(_72b){
_72d.set(_72b);
}
}
_721.set(_72d.domNode,"zIndex",_72c);
if(!_72d.open){
_72d.show();
}
};
_728.hide=function(){
var _72e=_728._singleton;
if(_72e&&!_72e._destroyed){
_72e.hide();
}
};
return _728;
});
},"dijit/form/_ToggleButtonMixin":function(){
define(["dojo/_base/declare","dojo/dom-attr"],function(_72f,_730){
return _72f("dijit.form._ToggleButtonMixin",null,{checked:false,_aria_attr:"aria-pressed",_onClick:function(evt){
var _731=this.checked;
this._set("checked",!_731);
var ret=this.inherited(arguments);
this.set("checked",ret?this.checked:_731);
return ret;
},_setCheckedAttr:function(_732,_733){
this._set("checked",_732);
var node=this.focusNode||this.domNode;
if(this._created){
if(_730.get(node,"checked")!=!!_732){
_730.set(node,"checked",!!_732);
}
}
node.setAttribute(this._aria_attr,String(_732));
this._handleOnChange(_732,_733);
},postCreate:function(){
this.inherited(arguments);
var node=this.focusNode||this.domNode;
if(this.checked){
node.setAttribute("checked","checked");
}
if(this._resetValue===undefined){
this._lastValueReported=this._resetValue=this.checked;
}
},reset:function(){
this._hasBeenBlurred=false;
this.set("checked",this.params.checked||false);
}});
});
},"curam/layout/CuramStackController":function(){
define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/dom-attr","dijit/form/ToggleButton","dojo/text!curam/layout/resources/CuramStackButton.html","dijit/layout/StackController"],function(_734,lang,_735,attr,_736,_737,_738){
var _739=_734("curam.layout._StackButton",_736,{tabIndex:"0",templateString:_737,imageDefaultSrc:"",imageHoverSrc:"",imageAltText:"",closeButton:false,_aria_attr:"aria-selected",buildRendering:function(evt){
this.inherited(arguments);
(this.focusNode||this.domNode).setAttribute("role","tab");
}});
var _73a=_734("curam.layout.CuramStackController",_738,{baseClass:"curamStackController",buttonWidget:_739,buttonWidgetCloseClass:"dijitStackCloseButton",onAddChild:function(page,_73b){
var _73c="../Images/avatar--20-enabled.svg";
var _73d="../Images/avatar--20-enabled.svg";
var _73e="../Images/list--20-enabled.svg";
var _73f="../Images/list--20-enabled.svg";
var _740=page.get("class").indexOf("stack-container-photo")!=-1?true:false;
var _741=_740?_73c:_73e;
var _742=_740?_73d:_73f;
var Cls=lang.isString(this.buttonWidget)?lang.getObject(this.buttonWidget):this.buttonWidget;
var _743=new Cls({id:this.id+"_"+page.id,name:this.id+"_"+page.id,disabled:page.disabled,ownerDocument:this.ownerDocument,dir:page.dir,lang:page.lang,textDir:page.textDir||this.textDir,showLabel:page.showTitle,imageDefaultSrc:_741,imageHoverSrc:_742,imageAltText:page.title,iconClass:page.iconClass,closeButton:page.closable,title:page.tooltip,page:page});
this.addChild(_743,_73b);
page.controlButton=_743;
if(!this._currentChild){
this.onSelectChild(page);
}
var _744=attr.get(_743.domNode,"widgetid");
if(typeof (_744)!="undefined"){
_744.split("_");
var _745=_744.indexOf("2")!=-1?true:false;
if(_745){
var _746=dojo.query("table.list-body >tbody>tr>td.field.body-first-cell>a.ac",this.ownerDocument);
if(_746){
_735.forEach(_746,function(_747){
attr.set(_747,"class",_747.className.concat("list-view"));
});
}
}
}
var _748=page._wrapper.getAttribute("aria-labelledby")?page._wrapper.getAttribute("aria-labelledby")+" "+_743.id:_743.id;
page._wrapper.removeAttribute("aria-label");
page._wrapper.setAttribute("aria-labelledby",_748);
}});
_73a.StackButton=_739;
return _73a;
});
},"curam/cdsl/types/FrequencyPattern":function(){
define(["dojo/_base/declare","dojo/_base/lang"],function(_749){
var _74a=_749(null,{_code:null,_description:null,constructor:function(code,_74b){
this._code=code;
this._description=_74b;
},getCode:function(){
return this._code;
},getDescription:function(){
return this._description;
}});
return _74a;
});
},"dojo/store/util/SimpleQueryEngine":function(){
define(["../../_base/array"],function(_74c){
return function(_74d,_74e){
switch(typeof _74d){
default:
throw new Error("Can not query with a "+typeof _74d);
case "object":
case "undefined":
var _74f=_74d;
_74d=function(_750){
for(var key in _74f){
var _751=_74f[key];
if(_751&&_751.test){
if(!_751.test(_750[key],_750)){
return false;
}
}else{
if(_751!=_750[key]){
return false;
}
}
}
return true;
};
break;
case "string":
if(!this[_74d]){
throw new Error("No filter function "+_74d+" was found in store");
}
_74d=this[_74d];
case "function":
}
function _752(_753){
var _754=_74c.filter(_753,_74d);
var _755=_74e&&_74e.sort;
if(_755){
_754.sort(typeof _755=="function"?_755:function(a,b){
for(var sort,i=0;sort=_755[i];i++){
var _756=a[sort.attribute];
var _757=b[sort.attribute];
_756=_756!=null?_756.valueOf():_756;
_757=_757!=null?_757.valueOf():_757;
if(_756!=_757){
return !!sort.descending==(_756==null||_756>_757)?-1:1;
}
}
return 0;
});
}
if(_74e&&(_74e.start||_74e.count)){
var _758=_754.length;
_754=_754.slice(_74e.start||0,(_74e.start||0)+(_74e.count||Infinity));
_754.total=_758;
}
return _754;
};
_752.matches=_74d;
return _752;
};
});
},"dijit/_TemplatedMixin":function(){
define(["dojo/cache","dojo/_base/declare","dojo/dom-construct","dojo/_base/lang","dojo/on","dojo/sniff","dojo/string","./_AttachMixin"],function(_759,_75a,_75b,lang,on,has,_75c,_75d){
var _75e=_75a("dijit._TemplatedMixin",_75d,{templateString:null,templatePath:null,_skipNodeCache:false,searchContainerNode:true,_stringRepl:function(tmpl){
var _75f=this.declaredClass,_760=this;
return _75c.substitute(tmpl,this,function(_761,key){
if(key.charAt(0)=="!"){
_761=lang.getObject(key.substr(1),false,_760);
}
if(typeof _761=="undefined"){
throw new Error(_75f+" template:"+key);
}
if(_761==null){
return "";
}
return key.charAt(0)=="!"?_761:this._escapeValue(""+_761);
},this);
},_escapeValue:function(val){
return val.replace(/["'<>&]/g,function(val){
return {"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#x27;"}[val];
});
},buildRendering:function(){
if(!this._rendered){
if(!this.templateString){
this.templateString=_759(this.templatePath,{sanitize:true});
}
var _762=_75e.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument);
var node;
if(lang.isString(_762)){
node=_75b.toDom(this._stringRepl(_762),this.ownerDocument);
if(node.nodeType!=1){
throw new Error("Invalid template: "+_762);
}
}else{
node=_762.cloneNode(true);
}
this.domNode=node;
}
this.inherited(arguments);
if(!this._rendered){
this._fillContent(this.srcNodeRef);
}
this._rendered=true;
},_fillContent:function(_763){
var dest=this.containerNode;
if(_763&&dest){
while(_763.hasChildNodes()){
dest.appendChild(_763.firstChild);
}
}
}});
_75e._templateCache={};
_75e.getCachedTemplate=function(_764,_765,doc){
var _766=_75e._templateCache;
var key=_764;
var _767=_766[key];
if(_767){
try{
if(!_767.ownerDocument||_767.ownerDocument==(doc||document)){
return _767;
}
}
catch(e){
}
_75b.destroy(_767);
}
_764=_75c.trim(_764);
if(_765||_764.match(/\$\{([^\}]+)\}/g)){
return (_766[key]=_764);
}else{
var node=_75b.toDom(_764,doc);
if(node.nodeType!=1){
throw new Error("Invalid template: "+_764);
}
return (_766[key]=node);
}
};
if(has("ie")){
on(window,"unload",function(){
var _768=_75e._templateCache;
for(var key in _768){
var _769=_768[key];
if(typeof _769=="object"){
_75b.destroy(_769);
}
delete _768[key];
}
});
}
return _75e;
});
},"curam/smartPanel":function(){
define(["dojo/dom-attr","curam/tab","curam/util/onLoad","curam/define"],function(_76a){
curam.define.singleton("curam.smartPanel",{setupOnLoad:function(_76b){
curam.util.onLoad.addSubscriber(_76b,curam.smartPanel._handleSmartPanelLoad);
dojo.ready(function(){
var _76c=dojo.query("."+_76b)[0];
if(!_76a.get(_76c,"src")){
var _76d=dojo.query(".outer-navigation-tab")[0];
var _76e=_76d?dijit.byNode(_76d):null;
if(_76e){
var _76f=null;
if(dojo.isBodyLtr()){
_76f=_76e.getSplitter("right");
}else{
_76f=_76e.getSplitter("left");
}
_76f.connect(_76f,"onMouseUp",curam.smartPanel.loadSmartPanelIframe);
}
}
});
},_handleSmartPanelLoad:function(_770,_771){
var _772=dojo.query("."+_770)[0];
var src=_76a.get(_772,"src");
curam.smartPanel.addTitle(_770);
var _773="smartpanel.content.loaded";
if(src){
_772.setAttribute("iframeLoaded","true");
if(_76a.get(_772,"_SPContentLoaded")==="true"){
dojo.publish("smartPanel.loaded",[_772]);
}else{
dojo.subscribe(_773,function(_774){
if(_774!=_772){
return;
}
dojo.publish("smartPanel.loaded",[_772]);
});
}
}
},loadSmartPanelIframe:function(){
var _775=curam.tab.getSmartPanelIframe();
if(_775){
var src=_76a.get(_775,"src");
if(src==""){
var src=_76a.get(_775,"_srcContents");
_76a.set(_775,"src",src);
}
}
},addTitle:function(_776){
var _777=dojo.query("."+_776)[0];
var _778=SMART_PANEL_TITLE+" - "+_777.contentWindow.document.title;
_777.setAttribute("title",_778);
},_addDefaultAndHoverImages:function(_779,_77a){
var _77b=document.createElement("img");
_77b.src="";
_77b.alt="";
_77b.setAttribute("class","default-smart-panel-icon");
_779.iconNodeLink.appendChild(_77b);
var _77c=document.createElement("img");
_77c.src="";
_77c.alt="";
_77c.setAttribute("class","hover-smart-panel-icon");
_779.iconNodeLink.appendChild(_77c);
this._updateSmartPanelImage(_779,_77a);
},_updateSmartPanelImage:function(_77d,_77e){
if(_77e){
if(_77d.orient=="Right"){
_77d.iconNodeLink.children[0].src=require.toUrl("./themes/curam/images/chevron--left20-enabled.svg");
_77d.iconNodeLink.children[1].src=require.toUrl("./themes/curam/images/chevron--left20-enabled.svg");
}else{
_77d.iconNodeLink.children[0].src=require.toUrl("./themes/curam/images/chevron--right20-enabled.svg");
_77d.iconNodeLink.children[1].src=require.toUrl("./themes/curam/images/chevron--right20-enabled.svg");
}
}else{
if(!_77e&&_77d.orient=="Right"){
_77d.iconNodeLink.children[0].src=require.toUrl("./themes/curam/images/chevron--right20-enabled.svg");
_77d.iconNodeLink.children[1].src=require.toUrl("./themes/curam/images/chevron--right20-enabled.svg");
}else{
_77d.iconNodeLink.children[0].src=require.toUrl("./themes/curam/images/chevron--left20-enabled.svg");
_77d.iconNodeLink.children[1].src=require.toUrl("./themes/curam/images/chevron--left20-enabled.svg");
}
}
}});
return curam.smartPanel;
});
},"curam/util/ui/refresh/RefreshEvent":function(){
define(["dojo/_base/declare"],function(_77f){
var _780=_77f("curam.util.ui.refresh.RefreshEvent",null,{TYPE_ONLOAD:"onload",TYPE_ONSUBMIT:"onsubmit",SOURCE_CONTEXT_MAIN:"main-content",SOURCE_CONTEXT_DIALOG:"dialog",SOURCE_CONTEXT_INLINE:"inline",_type:null,_context:null,constructor:function(type,_781){
if(!type||!_781){
throw "Required parameters missing.";
}
if(!(type==this.TYPE_ONLOAD||type==this.TYPE_ONSUBMIT)){
throw "Unknown type: "+type;
}
if(!(_781==this.SOURCE_CONTEXT_DIALOG||_781==this.SOURCE_CONTEXT_INLINE||_781==this.SOURCE_CONTEXT_MAIN)){
throw "Unknown context: "+_781;
}
this._type=type;
this._context=_781;
},equals:function(_782){
if(typeof _782!="object"){
return false;
}
if(_782.declaredClass!=this.declaredClass){
return false;
}
return this._type===_782._type&&this._context===_782._context;
}});
return _780;
});
},"curam/ui/UIMPageAdaptor":function(){
define(["dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/query","curam/tab","curam/define","curam/debug","curam/util","curam/ui/PageRequest"],function(dom,_783,_784,_785,tab,_786,_787){
_786.singleton("curam.ui.UIMPageAdaptor",{initialize:function(){
if(jsScreenContext.hasContextBits("MODAL")){
return;
}
curam.util.connect(dojo.body(),"onclick",curam.ui.UIMPageAdaptor.clickHandler);
var _788=null;
var _789=null;
if(!jsScreenContext.hasContextBits("LIST_ROW_INLINE_PAGE")){
_788=curam.util.getTopmostWindow().dojo;
_789="/iframe-loaded/"+window.jsPageID;
_787.log(_787.getProperty("curam.ui.UIMPageAdaptor.event")+_789);
_788.publish(_789);
}
},externalInitialize:function(){
if(jsScreenContext.hasContextBits("MODAL")){
return;
}
curam.util.connect(dojo.body(),"onclick",curam.ui.UIMPageAdaptor.clickHandler);
},externalClickHandler:function(_78a,_78b){
var _78c=new curam.ui.PageRequest(_78b.href);
var _78d=window.top.dijit.byId("curam-app");
if(_78d!=null){
var _78e=[];
var i=0;
for(param in _78c.parameters){
_78e[i]={paramKey:param,paramValue:_78c.parameters[param]};
i=i+1;
}
var args={pageID:_78c.pageID,param:_78e};
if(_78d._isNavBarItem(_78c.pageID)){
dojo.stopEvent(_78a||window.event);
window.top.displayContent(args);
}else{
if(_78d._isUIMFragment(_78c.pageID)){
dojo.stopEvent(_78a||window.event);
window.top.displayContent(args);
}
}
}
},clickHandler:function(_78f){
var _790=null;
if(_78f.target.nodeName=="A"){
if(curam.ui.UIMPageAdaptor.allowLinkToContinue(_78f.target)){
return;
}
_790=_78f.target;
}else{
if((_78f.target.nodeName=="IMG"&&!_784.contains(_78f.target.parentNode,"file-download"))||(_78f.target.nodeName=="SPAN"&&(_78f.target.className=="middle"||_78f.target.className=="bidi"))){
_790=_785(_78f.target).closest("A")[0];
}
}
if(_790!=null){
if(!_790.href||_790.href.length==0){
dojo.stopEvent(_78f||window.event);
return;
}
if(jsScreenContext.hasContextBits("EXTAPP")){
curam.ui.UIMPageAdaptor.externalClickHandler(_78f,_790);
}else{
dojo.stopEvent(_78f||window.event);
if(curam.ui.UIMPageAdaptor.shouldLinkOpenInNewWindow(_790)){
window.open(_790.href);
}else{
if(curam.ui.UIMPageAdaptor.isLinkValidForTabProcessing(_790)){
var _791=new curam.ui.PageRequest(_790.href);
if(jsScreenContext.hasContextBits("LIST_ROW_INLINE_PAGE")||jsScreenContext.hasContextBits("NESTED_UIM")){
_791.pageHolder=window;
}
if(window.jsPageID===_791.pageID){
_791.forceLoad=true;
}
curam.tab.getTabController().handlePageRequest(_791);
}
}
}
}
},allowLinkToContinue:function(_792){
if(_792&&_792._submitButton){
return true;
}
if(_792&&_792.href){
return (_792.href.indexOf("/servlet/FileDownload")!=-1||_792.href.indexOf("#")!=-1||_792.href.substr(0,7)=="mailto:");
}else{
return false;
}
},isLinkValidForTabProcessing:function(_793){
if(!_793||(_784.contains(_793,"popup-action")||_784.contains(_793,"list-details-row-toggle"))||_793.protocol=="javascript:"){
return false;
}
return true;
},shouldLinkOpenInNewWindow:function(_794){
return _783.has(_794,"target")&&!curam.util.isInternal(_794.href);
},setTabTitleAndName:function(){
var _795=dom.byId("tab-title").innerHTML;
var _796=dom.byId("tab-name").innerHTML;
window.parent.dojo.publish("tab.title.name.set",[window.frameElement,_795,_796]);
}});
return curam.ui.UIMPageAdaptor;
});
},"curam/ModalDialog":function(){
define(["dojo/text!curam/layout/resources/CuramBaseModal.html","dojo/_base/declare","dojo/dom","curam/modal/CuramBaseModal","dijit/Dialog"],function(_797,_798,dom,_799){
tabbingBackwards=null,handleTitlebarIconKeydown=function(e){
};
var _79a=_798("curam.ModalDialog",[dijit.Dialog,_799],{constructor:function(){
this.inherited(arguments);
},postCreate:function(){
this.inherited(arguments);
},handleFocusAtEnd:function(_79b,_79c){
this.handleTabbingForwards(_79b,_79c);
}});
_79a.handleFocusAtEnd=function(_79d){
var _79e=dojo.query("#"+this.id+" .dijitDialogHelpIcon")[0];
curam.ModalDialog.prototype.handleFocusAtEnd(_79d,_79e);
};
return _79a;
});
},"curam/widget/OptimalBrowserMessage":function(){
define(["dojo/_base/declare","dojo/_base/lang","dojo/dom","dojo/dom-class","curam/util","curam/util/UIMFragment","curam/ui/ClientDataAccessor","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/layout/BorderContainer","dijit/layout/ContentPane","dijit/form/Button","dojo/has","dojo/text!curam/widget/templates/OptimalBrowserMessage.html","dojo/dom-attr"],function(_79f,lang,dom,_7a0,util,_7a1,_7a2,_7a3,_7a4,_7a5,_7a6,_7a7,_7a8,has,_7a9,_7aa){
return _79f("curam.widget.OptimalBrowserMessage",[_7a3,_7a4,_7a5],{OPTIMAL_BROWSER_MSG:"optimal-browser-msg",isExternalApp:null,optimalBrowserMsgPaddingCSS:"optimal-browser-banner",optimalBrowserNode:null,appSectionsNode:null,appBannerHeaderNode:null,intApp:"internal",extApp:"external",templateString:_7a9,widgetsInTemplate:true,baseClass:"",optimalBrowserNodeID:"_optimalMessage",_appConfig:null,postMixInProperties:function(){
this.inherited(arguments);
},startup:function(){
this.inherited(arguments);
this._init();
this._loadNodes(this._optimalMessage.id);
},_init:function(){
da=new _7a2();
da.getRaw("/config/tablayout/settings["+curam.config.appID+"]",lang.hitch(this,function(data){
console.log("External App config data:"+data);
this._appConfig=data;
this._getAppConfig();
this._updateOptimalBrowserNode();
}),function(_7ab,args){
console.log("External App config data load error:"+_7ab);
},null);
},_getAppConfig:function(){
var _7ac=this._appConfig.optimalBrowserMessageEnabled;
var _7ad=this._createStorageKey(this.OPTIMAL_BROWSER_MSG);
var _7ae=this;
if(_7ac=="true"|_7ac=="TRUE"){
return _7ae._isOptimalBrowserCheckDue(_7ad,_7ae);
}
return false;
},_updateOptimalBrowserNode:function(){
this.optimalBrowserNode=dom.byId(this._optimalMessage.id);
_7aa.set(optimalBrowserNode,"aria-label",this._appConfig.optimalMessageDivLabel);
},_isOptimalBrowserCheckDue:function(_7af,_7b0){
var _7b1=localStorage[_7af];
if(_7b1&&_7b1!=""){
if(new Date(_7b0._getTargetDate())>new Date(_7b1)){
_7b0._executeBrowserVersionCheck();
return true;
}
}else{
_7b0._executeBrowserVersionCheck();
return true;
}
return false;
},_executeBrowserVersionCheck:function(){
var _7b2=this._appConfig.ieMinVersion;
var _7b3=this._appConfig.ieMaxVersion;
var _7b4=this._appConfig.ffMinVersion;
var _7b5=this._appConfig.ffMaxVersion;
var _7b6=this._appConfig.chromeMinVersion;
var _7b7=this._appConfig.chromeMaxVersion;
var _7b8=this._appConfig.safariMinVersion;
var _7b9=this._appConfig.safariMaxVersion;
var _7ba=dojo.isIE;
var _7bb=has("trident")||has("edge");
var _7bc=dojo.isFF;
var _7bd=dojo.isChrome;
var _7be=dojo.isSafari;
if(_7ba!=undefined&&this.isExternalApp){
return this._isCurrentBrowserVerSupported(_7ba,_7b2,_7b3);
}else{
if(_7bb>6&&this.isExternalApp){
var _7bf=_7b2-4;
var _7c0=_7b3-4;
return this._isCurrentBrowserVerSupported(_7bb,_7bf,_7c0);
}else{
if(_7bc!=undefined&&this.isExternalApp){
return this._isCurrentBrowserVerSupported(_7bc,_7b4,_7b5);
}else{
if(_7bd!=undefined){
return this._isCurrentBrowserVerSupported(_7bd,_7b6,_7b7);
}else{
if(_7be!=undefined&&this.isExternalApp){
return this._isCurrentBrowserVerSupported(_7be,_7b8,_7b9);
}
}
}
}
}
return false;
},_isCurrentBrowserVerSupported:function(_7c1,_7c2,_7c3){
var _7c4=false;
if(_7c2>0){
if(_7c1<_7c2){
_7c4=true;
this._displayOptimalBrowserMsg();
return true;
}
}
if(_7c3>0&&!_7c4){
if(_7c1>_7c3){
this._displayOptimalBrowserMsg();
return true;
}
}
return false;
},_displayOptimalBrowserMsg:function(){
this._addOrRemoveCssForInternalApp(true,this.optimalBrowserMsgPaddingCSS);
_7a1.get({url:"optimal-browser-msg-fragment.jspx",targetID:this._optimalMessage.id});
this._postRenderingTasks();
},_postRenderingTasks:function(){
var _7c5=this._optimalMessage.id;
dojo.addOnLoad(function(){
var _7c6=dom.byId(_7c5);
_7a0.remove(_7c6,_7c6.className);
});
localStorage[this._createStorageKey(this.OPTIMAL_BROWSER_MSG)]=this._getTargetDate(this._appConfig.nextBrowserCheck);
},_loadNodes:function(_7c7){
dojo.addOnLoad(function(){
this.optimalBrowserNode=dom.byId(_7c7);
this.appSectionsNode=dom.byId("app-sections-container-dc");
this.appBannerHeaderNode=dom.byId("app-header-container-dc");
});
},_createStorageKey:function(_7c8){
if(this.isExternalApp){
_7c8=_7c8+"_"+this.extApp;
}else{
_7c8=_7c8+"_"+this.intApp;
}
return _7c8;
},_addOrRemoveCssForInternalApp:function(_7c9,_7ca){
var _7cb=this.isExternalApp;
dojo.addOnLoad(function(){
if(!_7cb){
if(_7c9){
_7a0.add(this.appSectionsNode,_7ca);
if(this.appBannerHeaderNode){
_7a0.add(this.appSectionsNode.children.item(1),_7ca);
_7a0.add(this.appSectionsNode.children.item(2),_7ca);
}
}else{
_7a0.remove(this.appSectionsNode,_7ca);
if(this.appBannerHeaderNode){
_7a0.remove(this.appSectionsNode.children.item(1),_7ca);
_7a0.remove(this.appSectionsNode.children.item(2),_7ca);
}
}
}
});
},_getTargetDate:function(_7cc){
var _7cd=new Date();
if(_7cc==undefined){
_7cd.setDate(_7cd.getDate());
}else{
_7cd.setDate(_7cd.getDate()+_7cc);
}
return _7cd.toUTCString();
},exitOptimalBrowserMessageBox:function(){
var _7ce=dom.byId(this._optimalMessage.id);
if(_7ce){
_7ce.parentNode.removeChild(_7ce);
}
this._addOrRemoveCssForInternalApp(false,this.optimalBrowserMsgPaddingCSS);
}});
});
},"dijit/_KeyNavMixin":function(){
define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/on","dijit/registry","dijit/_FocusMixin"],function(_7cf,_7d0,_7d1,keys,lang,on,_7d2,_7d3){
return _7d0("dijit._KeyNavMixin",_7d3,{tabIndex:"0",childSelector:null,postCreate:function(){
this.inherited(arguments);
_7d1.set(this.domNode,"tabIndex",this.tabIndex);
if(!this._keyNavCodes){
var _7d4=this._keyNavCodes={};
_7d4[keys.HOME]=lang.hitch(this,"focusFirstChild");
_7d4[keys.END]=lang.hitch(this,"focusLastChild");
_7d4[this.isLeftToRight()?keys.LEFT_ARROW:keys.RIGHT_ARROW]=lang.hitch(this,"_onLeftArrow");
_7d4[this.isLeftToRight()?keys.RIGHT_ARROW:keys.LEFT_ARROW]=lang.hitch(this,"_onRightArrow");
_7d4[keys.UP_ARROW]=lang.hitch(this,"_onUpArrow");
_7d4[keys.DOWN_ARROW]=lang.hitch(this,"_onDownArrow");
}
var self=this,_7d5=typeof this.childSelector=="string"?this.childSelector:lang.hitch(this,"childSelector");
this.own(on(this.domNode,"keypress",lang.hitch(this,"_onContainerKeypress")),on(this.domNode,"keydown",lang.hitch(this,"_onContainerKeydown")),on(this.domNode,"focus",lang.hitch(this,"_onContainerFocus")),on(this.containerNode,on.selector(_7d5,"focusin"),function(evt){
self._onChildFocus(_7d2.getEnclosingWidget(this),evt);
}));
},_onLeftArrow:function(){
},_onRightArrow:function(){
},_onUpArrow:function(){
},_onDownArrow:function(){
},focus:function(){
this.focusFirstChild();
},_getFirstFocusableChild:function(){
return this._getNextFocusableChild(null,1);
},_getLastFocusableChild:function(){
return this._getNextFocusableChild(null,-1);
},focusFirstChild:function(){
this.focusChild(this._getFirstFocusableChild());
},focusLastChild:function(){
this.focusChild(this._getLastFocusableChild());
},focusChild:function(_7d6,last){
if(!_7d6){
return;
}
if(this.focusedChild&&_7d6!==this.focusedChild){
this._onChildBlur(this.focusedChild);
}
_7d6.set("tabIndex",this.tabIndex);
_7d6.focus(last?"end":"start");
},_onContainerFocus:function(evt){
if(evt.target!==this.domNode||this.focusedChild){
return;
}
this.focus();
},_onFocus:function(){
_7d1.set(this.domNode,"tabIndex","-1");
this.inherited(arguments);
},_onBlur:function(evt){
_7d1.set(this.domNode,"tabIndex",this.tabIndex);
if(this.focusedChild){
this.focusedChild.set("tabIndex","-1");
this.lastFocusedChild=this.focusedChild;
this._set("focusedChild",null);
}
this.inherited(arguments);
},_onChildFocus:function(_7d7){
if(_7d7&&_7d7!=this.focusedChild){
if(this.focusedChild&&!this.focusedChild._destroyed){
this.focusedChild.set("tabIndex","-1");
}
_7d7.set("tabIndex",this.tabIndex);
this.lastFocused=_7d7;
this._set("focusedChild",_7d7);
}
},_searchString:"",multiCharSearchDuration:1000,onKeyboardSearch:function(item,evt,_7d8,_7d9){
if(item){
this.focusChild(item);
}
},_keyboardSearchCompare:function(item,_7da){
var _7db=item.domNode,text=item.label||(_7db.focusNode?_7db.focusNode.label:"")||_7db.innerText||_7db.textContent||"",_7dc=text.replace(/^\s+/,"").substr(0,_7da.length).toLowerCase();
return (!!_7da.length&&_7dc==_7da)?-1:0;
},_onContainerKeydown:function(evt){
var func=this._keyNavCodes[evt.keyCode];
if(func){
func(evt,this.focusedChild);
evt.stopPropagation();
evt.preventDefault();
this._searchString="";
}else{
if(evt.keyCode==keys.SPACE&&this._searchTimer&&!(evt.ctrlKey||evt.altKey||evt.metaKey)){
evt.stopImmediatePropagation();
evt.preventDefault();
this._keyboardSearch(evt," ");
}
}
},_onContainerKeypress:function(evt){
if(evt.charCode<=keys.SPACE||evt.ctrlKey||evt.altKey||evt.metaKey){
return;
}
evt.preventDefault();
evt.stopPropagation();
this._keyboardSearch(evt,String.fromCharCode(evt.charCode).toLowerCase());
},_keyboardSearch:function(evt,_7dd){
var _7de=null,_7df,_7e0=0,_7e1=lang.hitch(this,function(){
if(this._searchTimer){
this._searchTimer.remove();
}
this._searchString+=_7dd;
var _7e2=/^(.)\1*$/.test(this._searchString);
var _7e3=_7e2?1:this._searchString.length;
_7df=this._searchString.substr(0,_7e3);
this._searchTimer=this.defer(function(){
this._searchTimer=null;
this._searchString="";
},this.multiCharSearchDuration);
var _7e4=this.focusedChild||null;
if(_7e3==1||!_7e4){
_7e4=this._getNextFocusableChild(_7e4,1);
if(!_7e4){
return;
}
}
var stop=_7e4;
do{
var rc=this._keyboardSearchCompare(_7e4,_7df);
if(!!rc&&_7e0++==0){
_7de=_7e4;
}
if(rc==-1){
_7e0=-1;
break;
}
_7e4=this._getNextFocusableChild(_7e4,1);
}while(_7e4&&_7e4!=stop);
});
_7e1();
this.onKeyboardSearch(_7de,evt,_7df,_7e0);
},_onChildBlur:function(){
},_getNextFocusableChild:function(_7e5,dir){
var _7e6=_7e5;
do{
if(!_7e5){
_7e5=this[dir>0?"_getFirst":"_getLast"]();
if(!_7e5){
break;
}
}else{
_7e5=this._getNext(_7e5,dir);
}
if(_7e5!=null&&_7e5!=_7e6&&_7e5.isFocusable()){
return _7e5;
}
}while(_7e5!=_7e6);
return null;
},_getFirst:function(){
return null;
},_getLast:function(){
return null;
},_getNext:function(_7e7,dir){
if(_7e7){
_7e7=_7e7.domNode;
while(_7e7){
_7e7=_7e7[dir<0?"previousSibling":"nextSibling"];
if(_7e7&&"getAttribute" in _7e7){
var w=_7d2.byNode(_7e7);
if(w){
return w;
}
}
}
}
return null;
}});
});
},"curam/util/EditableList":function(){
define(["dojo/dom-class","dojo/dom-attr","curam/debug","curam/define","dojo/query","dojo/NodeList-traverse"],function(_7e8,_7e9,_7ea){
curam.define.singleton("curam.util.EditableList",{onload:function(_7eb){
var _7ec=dojo.query("div.list table tbody td input[type = 'checkbox']");
if(_7ec[0]==null){
return "Outside List";
}
_7ec.forEach(function(node){
curam.debug.log("curam.util.EditableList onload()");
curam.util.EditableList._doToggling(node,_7eb);
});
return "In List";
},toggle:function(_7ed,_7ee){
curam.debug.log("curam.util.EditableList: "+_7ea.getProperty("curam.util.EditableList.toggle"));
_7ed=dojo.fixEvent(_7ed);
if(!_7ed.target){
return "Improper Event";
}
var _7ef=_7ed.target;
curam.util.EditableList._doToggling(_7ef,_7ee);
return "Event Processed";
},_doToggling:function(_7f0,_7f1){
var _7f2=_7f0;
while(_7f2&&!_7e8.contains(_7f2,"list")){
_7f2=_7f2.parentNode;
}
if(_7f2==null){
return "Outside List";
}
var _7f3=dojo.query(_7f0).closest("TR")[0];
if(_7f1){
curam.util.EditableList._updateCheckboxAccessibility(_7f3,_7f1);
}
if(_7f0.checked==true){
isChecked=true;
curam.debug.log(_7ea.getProperty("curam.util.EditableList.ticking"));
}else{
isChecked=false;
curam.debug.log(_7ea.getProperty("curam.util.EditableList.unticking"));
}
if(_7f3==null){
throw new Error("Exception: The TR node is not found");
}
dojo.query("td > *",_7f3).forEach(function(node){
if(_7e8.contains(node,"text")){
if(isChecked){
_7e9.remove(node,"disabled");
_7e8.remove(node,"disabled");
curam.debug.log(_7ea.getProperty("curam.util.EditableList.enable.field"));
}else{
_7e9.set(node,"disabled","disable");
_7e8.add(node,"disabled");
curam.debug.log(_7ea.getProperty("curam.util.EditableList.disable.field"));
}
}else{
if(_7e8.contains(node,"codetable")){
var _7f4=_7e9.get(node,"widgetid");
var _7f5=dijit.byId(_7f4);
if(isChecked){
_7f5.set("disabled",false);
curam.debug.log(_7ea.getProperty("curam.util.EditableList.enable.ct"));
}else{
_7f5.set("disabled",true);
curam.debug.log(_7ea.getProperty("curam.util.EditableList.disable.ct"));
}
}
}
});
return "Toggled";
},_updateCheckboxAccessibility:function(tr,_7f6){
var _7f7=dojo.query("td",tr);
var _7f8=_7f7.parents("table");
var _7f9=_7f7[0];
var _7fa=_7f7[1];
var _7fb="";
var _7fc="";
if(_7f9&&_7f9.firstElementChild){
if(_7f9.firstElementChild.nodeName=="INPUT"&&_7f9.firstElementChild.getAttribute("type")=="checkbox"){
if(_7fa.firstChild){
if(_7fa.firstChild.nodeType==3){
_7fb=_7fa.firstChild.textContent;
}else{
if(_7f9.firstElementChild.nodeName=="INPUT"){
_7fb=_7fa.firstElementChild.getAttribute("value");
}
}
}
if(_7fb&&_7fb.length>0){
_7fc=_7f6+" - "+_7fb;
}else{
_7fc=_7f6;
}
if(_7f8[0]&&_7f8[0].getAttribute("summary")){
_7fc=_7f8[0].getAttribute("summary")+" - "+_7fc;
}
_7f9.firstElementChild.setAttribute("aria-label",_7fc);
_7f9.firstElementChild.title=_7fc;
}
}
return _7f9;
}});
return curam.util.EditableList;
});
},"dijit/form/_TextBoxMixin":function(){
define(["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/sniff","dojo/keys","dojo/_base/lang","dojo/on","../main"],function(_7fd,_7fe,dom,has,keys,lang,on,_7ff){
var _800=_7fe("dijit.form._TextBoxMixin"+(has("dojo-bidi")?"_NoBidi":""),null,{trim:false,uppercase:false,lowercase:false,propercase:false,maxLength:"",selectOnClick:false,placeHolder:"",_getValueAttr:function(){
return this.parse(this.get("displayedValue"),this.constraints);
},_setValueAttr:function(_801,_802,_803){
var _804;
if(_801!==undefined){
_804=this.filter(_801);
if(typeof _803!="string"){
if(_804!==null&&((typeof _804!="number")||!isNaN(_804))){
_803=this.filter(this.format(_804,this.constraints));
}else{
_803="";
}
if(this.compare(_804,this.filter(this.parse(_803,this.constraints)))!=0){
_803=null;
}
}
}
if(_803!=null&&((typeof _803)!="number"||!isNaN(_803))&&this.textbox.value!=_803){
this.textbox.value=_803;
this._set("displayedValue",this.get("displayedValue"));
}
this.inherited(arguments,[_804,_802]);
},displayedValue:"",_getDisplayedValueAttr:function(){
return this.filter(this.textbox.value);
},_setDisplayedValueAttr:function(_805){
if(_805==null){
_805="";
}else{
if(typeof _805!="string"){
_805=String(_805);
}
}
this.textbox.value=_805;
this._setValueAttr(this.get("value"),undefined);
this._set("displayedValue",this.get("displayedValue"));
},format:function(_806){
return _806==null?"":(_806.toString?_806.toString():_806);
},parse:function(_807){
return _807;
},_refreshState:function(){
},onInput:function(){
},_onInput:function(evt){
this._lastInputEventValue=this.textbox.value;
this._processInput(this._lastInputProducingEvent||evt);
delete this._lastInputProducingEvent;
if(this.intermediateChanges){
this._handleOnChange(this.get("value"),false);
}
},_processInput:function(){
this._refreshState();
this._set("displayedValue",this.get("displayedValue"));
},postCreate:function(){
this.textbox.setAttribute("value",this.textbox.value);
this.inherited(arguments);
function _808(e){
var _809;
if(e.type=="keydown"&&e.keyCode!=229){
_809=e.keyCode;
switch(_809){
case keys.SHIFT:
case keys.ALT:
case keys.CTRL:
case keys.META:
case keys.CAPS_LOCK:
case keys.NUM_LOCK:
case keys.SCROLL_LOCK:
return;
}
if(!e.ctrlKey&&!e.metaKey&&!e.altKey){
switch(_809){
case keys.NUMPAD_0:
case keys.NUMPAD_1:
case keys.NUMPAD_2:
case keys.NUMPAD_3:
case keys.NUMPAD_4:
case keys.NUMPAD_5:
case keys.NUMPAD_6:
case keys.NUMPAD_7:
case keys.NUMPAD_8:
case keys.NUMPAD_9:
case keys.NUMPAD_MULTIPLY:
case keys.NUMPAD_PLUS:
case keys.NUMPAD_ENTER:
case keys.NUMPAD_MINUS:
case keys.NUMPAD_PERIOD:
case keys.NUMPAD_DIVIDE:
return;
}
if((_809>=65&&_809<=90)||(_809>=48&&_809<=57)||_809==keys.SPACE){
return;
}
var _80a=false;
for(var i in keys){
if(keys[i]===e.keyCode){
_80a=true;
break;
}
}
if(!_80a){
return;
}
}
}
_809=e.charCode>=32?String.fromCharCode(e.charCode):e.charCode;
if(!_809){
_809=(e.keyCode>=65&&e.keyCode<=90)||(e.keyCode>=48&&e.keyCode<=57)||e.keyCode==keys.SPACE?String.fromCharCode(e.keyCode):e.keyCode;
}
if(!_809){
_809=229;
}
if(e.type=="keypress"){
if(typeof _809!="string"){
return;
}
if((_809>="a"&&_809<="z")||(_809>="A"&&_809<="Z")||(_809>="0"&&_809<="9")||(_809===" ")){
if(e.ctrlKey||e.metaKey||e.altKey){
return;
}
}
}
var faux={faux:true},attr;
for(attr in e){
if(!/^(layer[XY]|returnValue|keyLocation)$/.test(attr)){
var v=e[attr];
if(typeof v!="function"&&typeof v!="undefined"){
faux[attr]=v;
}
}
}
lang.mixin(faux,{charOrCode:_809,_wasConsumed:false,preventDefault:function(){
faux._wasConsumed=true;
e.preventDefault();
},stopPropagation:function(){
e.stopPropagation();
}});
this._lastInputProducingEvent=faux;
if(this.onInput(faux)===false){
faux.preventDefault();
faux.stopPropagation();
}
if(faux._wasConsumed){
return;
}
if(has("ie")<=9){
switch(e.keyCode){
case keys.TAB:
case keys.ESCAPE:
case keys.DOWN_ARROW:
case keys.UP_ARROW:
case keys.LEFT_ARROW:
case keys.RIGHT_ARROW:
break;
default:
if(e.keyCode==keys.ENTER&&this.textbox.tagName.toLowerCase()!="textarea"){
break;
}
this.defer(function(){
if(this.textbox.value!==this._lastInputEventValue){
on.emit(this.textbox,"input",{bubbles:true});
}
});
}
}
};
this.own(on(this.textbox,"keydown, keypress, paste, cut, compositionend",lang.hitch(this,_808)),on(this.textbox,"input",lang.hitch(this,"_onInput")),on(this.domNode,"keypress",function(e){
e.stopPropagation();
}));
},_blankValue:"",filter:function(val){
if(val===null){
return this._blankValue;
}
if(typeof val!="string"){
return val;
}
if(this.trim){
val=lang.trim(val);
}
if(this.uppercase){
val=val.toUpperCase();
}
if(this.lowercase){
val=val.toLowerCase();
}
if(this.propercase){
val=val.replace(/[^\s]+/g,function(word){
return word.substring(0,1).toUpperCase()+word.substring(1);
});
}
return val;
},_setBlurValue:function(){
this._setValueAttr(this.get("value"),true);
},_onBlur:function(e){
if(this.disabled){
return;
}
this._setBlurValue();
this.inherited(arguments);
},_isTextSelected:function(){
return this.textbox.selectionStart!=this.textbox.selectionEnd;
},_onFocus:function(by){
if(this.disabled||this.readOnly){
return;
}
if(this.selectOnClick&&by=="mouse"){
this._selectOnClickHandle=on.once(this.domNode,"mouseup, touchend",lang.hitch(this,function(evt){
if(!this._isTextSelected()){
_800.selectInputText(this.textbox);
}
}));
this.own(this._selectOnClickHandle);
this.defer(function(){
if(this._selectOnClickHandle){
this._selectOnClickHandle.remove();
this._selectOnClickHandle=null;
}
},500);
}
this.inherited(arguments);
this._refreshState();
},reset:function(){
this.textbox.value="";
this.inherited(arguments);
}});
if(has("dojo-bidi")){
_800=_7fe("dijit.form._TextBoxMixin",_800,{_setValueAttr:function(){
this.inherited(arguments);
this.applyTextDir(this.focusNode);
},_setDisplayedValueAttr:function(){
this.inherited(arguments);
this.applyTextDir(this.focusNode);
},_onInput:function(){
this.applyTextDir(this.focusNode);
this.inherited(arguments);
}});
}
_800._setSelectionRange=_7ff._setSelectionRange=function(_80b,_80c,stop){
if(_80b.setSelectionRange){
_80b.setSelectionRange(_80c,stop);
}
};
_800.selectInputText=_7ff.selectInputText=function(_80d,_80e,stop){
_80d=dom.byId(_80d);
if(isNaN(_80e)){
_80e=0;
}
if(isNaN(stop)){
stop=_80d.value?_80d.value.length:0;
}
try{
_80d.focus();
_800._setSelectionRange(_80d,_80e,stop);
}
catch(e){
}
};
return _800;
});
},"dijit/a11y":function(){
define(["dojo/_base/array","dojo/dom","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/sniff","./main"],function(_80f,dom,_810,_811,lang,has,_812){
var _813;
var a11y={_isElementShown:function(elem){
var s=_811.get(elem);
return (s.visibility!="hidden")&&(s.visibility!="collapsed")&&(s.display!="none")&&(_810.get(elem,"type")!="hidden");
},hasDefaultTabStop:function(elem){
switch(elem.nodeName.toLowerCase()){
case "a":
return _810.has(elem,"href");
case "area":
case "button":
case "input":
case "object":
case "select":
case "textarea":
return true;
case "iframe":
var body;
try{
var _814=elem.contentDocument;
if("designMode" in _814&&_814.designMode=="on"){
return true;
}
body=_814.body;
}
catch(e1){
try{
body=elem.contentWindow.document.body;
}
catch(e2){
return false;
}
}
return body&&(body.contentEditable=="true"||(body.firstChild&&body.firstChild.contentEditable=="true"));
default:
return elem.contentEditable=="true";
}
},effectiveTabIndex:function(elem){
if(_810.get(elem,"disabled")){
return _813;
}else{
if(_810.has(elem,"tabIndex")){
return +_810.get(elem,"tabIndex");
}else{
return a11y.hasDefaultTabStop(elem)?0:_813;
}
}
},isTabNavigable:function(elem){
return a11y.effectiveTabIndex(elem)>=0;
},isFocusable:function(elem){
return a11y.effectiveTabIndex(elem)>=-1;
},_getTabNavigable:function(root){
var _815,last,_816,_817,_818,_819,_81a={};
function _81b(node){
return node&&node.tagName.toLowerCase()=="input"&&node.type&&node.type.toLowerCase()=="radio"&&node.name&&node.name.toLowerCase();
};
var _81c=a11y._isElementShown,_81d=a11y.effectiveTabIndex;
var _81e=function(_81f){
for(var _820=_81f.firstChild;_820;_820=_820.nextSibling){
if(_820.nodeType!=1||(has("ie")<=9&&_820.scopeName!=="HTML")||!_81c(_820)){
continue;
}
var _821=_81d(_820);
if(_821>=0){
if(_821==0){
if(!_815){
_815=_820;
}
last=_820;
}else{
if(_821>0){
if(!_816||_821<_817){
_817=_821;
_816=_820;
}
if(!_818||_821>=_819){
_819=_821;
_818=_820;
}
}
}
var rn=_81b(_820);
if(_810.get(_820,"checked")&&rn){
_81a[rn]=_820;
}
}
if(_820.nodeName.toUpperCase()!="SELECT"){
_81e(_820);
}
}
};
if(_81c(root)){
_81e(root);
}
function rs(node){
return _81a[_81b(node)]||node;
};
return {first:rs(_815),last:rs(last),lowest:rs(_816),highest:rs(_818)};
},getFirstInTabbingOrder:function(root,doc){
var _822=a11y._getTabNavigable(dom.byId(root,doc));
return _822.lowest?_822.lowest:_822.first;
},getLastInTabbingOrder:function(root,doc){
var _823=a11y._getTabNavigable(dom.byId(root,doc));
return _823.last?_823.last:_823.highest;
}};
1&&lang.mixin(_812,a11y);
return a11y;
});
},"dijit/form/TextBox":function(){
define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-style","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/sniff","./_FormValueWidget","./_TextBoxMixin","dojo/text!./templates/TextBox.html","../main"],function(_824,_825,_826,_827,lang,on,has,_828,_829,_82a,_82b){
var _82c=_824("dijit.form.TextBox"+(has("dojo-bidi")?"_NoBidi":""),[_828,_829],{templateString:_82a,_singleNodeTemplate:"<input class=\"dijit dijitReset dijitLeft dijitInputField\" data-dojo-attach-point=\"textbox,focusNode\" autocomplete=\"off\" type=\"${type}\" ${!nameAttrSetting} />",_buttonInputDisabled:has("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){
var type=this.type.toLowerCase();
if(this.templateString&&this.templateString.toLowerCase()=="input"||((type=="hidden"||type=="file")&&this.templateString==this.constructor.prototype.templateString)){
this.templateString=this._singleNodeTemplate;
}
this.inherited(arguments);
},postCreate:function(){
this.inherited(arguments);
if(has("ie")<9){
this.defer(function(){
try{
var s=_826.getComputedStyle(this.domNode);
if(s){
var ff=s.fontFamily;
if(ff){
var _82d=this.domNode.getElementsByTagName("INPUT");
if(_82d){
for(var i=0;i<_82d.length;i++){
_82d[i].style.fontFamily=ff;
}
}
}
}
}
catch(e){
}
});
}
},_setPlaceHolderAttr:function(v){
this._set("placeHolder",v);
if(!this._phspan){
this._attachPoints.push("_phspan");
this._phspan=_825.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after");
this.own(on(this._phspan,"mousedown",function(evt){
evt.preventDefault();
}),on(this._phspan,"touchend, pointerup, MSPointerUp",lang.hitch(this,function(){
this.focus();
})));
}
this._phspan.innerHTML="";
this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(v));
this._updatePlaceHolder();
},_onInput:function(evt){
this.inherited(arguments);
this._updatePlaceHolder();
},_updatePlaceHolder:function(){
if(this._phspan){
this._phspan.style.display=(this.placeHolder&&!this.textbox.value)?"":"none";
}
},_setValueAttr:function(_82e,_82f,_830){
this.inherited(arguments);
this._updatePlaceHolder();
},getDisplayedValue:function(){
_827.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");
return this.get("displayedValue");
},setDisplayedValue:function(_831){
_827.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");
this.set("displayedValue",_831);
},_onBlur:function(e){
if(this.disabled){
return;
}
this.inherited(arguments);
this._updatePlaceHolder();
if(has("mozilla")){
if(this.selectOnClick){
this.textbox.selectionStart=this.textbox.selectionEnd=undefined;
}
}
},_onFocus:function(by){
if(this.disabled||this.readOnly){
return;
}
this.inherited(arguments);
this._updatePlaceHolder();
}});
if(has("ie")<9){
_82c.prototype._isTextSelected=function(){
var _832=this.ownerDocument.selection.createRange();
var _833=_832.parentElement();
return _833==this.textbox&&_832.text.length>0;
};
_82b._setSelectionRange=_829._setSelectionRange=function(_834,_835,stop){
if(_834.createTextRange){
var r=_834.createTextRange();
r.collapse(true);
r.moveStart("character",-99999);
r.moveStart("character",_835);
r.moveEnd("character",stop-_835);
r.select();
}
};
}
if(has("dojo-bidi")){
_82c=_824("dijit.form.TextBox",_82c,{_setPlaceHolderAttr:function(v){
this.inherited(arguments);
this.applyTextDir(this._phspan);
}});
}
return _82c;
});
},"dijit/layout/StackContainer":function(){
define(["dojo/_base/array","dojo/cookie","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/has","dojo/_base/lang","dojo/on","dojo/ready","dojo/topic","dojo/when","../registry","../_WidgetBase","./_LayoutWidget"],function(_836,_837,_838,_839,_83a,has,lang,on,_83b,_83c,when,_83d,_83e,_83f){
if(1){
_83b(0,function(){
var _840=["dijit/layout/StackController"];
require(_840);
});
}
var _841=_838("dijit.layout.StackContainer",_83f,{doLayout:true,persist:false,baseClass:"dijitStackContainer",buildRendering:function(){
this.inherited(arguments);
_839.add(this.domNode,"dijitLayoutContainer");
},postCreate:function(){
this.inherited(arguments);
this.own(on(this.domNode,"keydown",lang.hitch(this,"_onKeyDown")));
},startup:function(){
if(this._started){
return;
}
var _842=this.getChildren();
_836.forEach(_842,this._setupChild,this);
if(this.persist){
this.selectedChildWidget=_83d.byId(_837(this.id+"_selectedChild"));
}else{
_836.some(_842,function(_843){
if(_843.selected){
this.selectedChildWidget=_843;
}
return _843.selected;
},this);
}
var _844=this.selectedChildWidget;
if(!_844&&_842[0]){
_844=this.selectedChildWidget=_842[0];
_844.selected=true;
}
_83c.publish(this.id+"-startup",{children:_842,selected:_844,textDir:this.textDir});
this.inherited(arguments);
},resize:function(){
if(!this._hasBeenShown){
this._hasBeenShown=true;
var _845=this.selectedChildWidget;
if(_845){
this._showChild(_845);
}
}
this.inherited(arguments);
},_setupChild:function(_846){
var _847=_846.domNode,_848=_83a.place("<div role='tabpanel' class='"+this.baseClass+"ChildWrapper dijitHidden'>",_846.domNode,"replace"),_849=_846["aria-label"]||_846.title||_846.label;
var _84a=_848.parentElement;
if(_84a&&_84a.parentElement){
var _84b=_84a.parentElement.id+"_tablist";
var _84c=dojo.byId(_84b);
if(_84c&&_84c.style.height.trim()=="0px"){
_848.removeAttribute("role");
}
}
if(_849){
_848.setAttribute("aria-label",_849);
}
_83a.place(_847,_848);
_846._wrapper=_848;
this.inherited(arguments);
if(_847.style.display=="none"){
_847.style.display="block";
}
_846.domNode.removeAttribute("title");
},addChild:function(_84d,_84e){
this.inherited(arguments);
if(this._started){
_83c.publish(this.id+"-addChild",_84d,_84e);
this.layout();
if(!this.selectedChildWidget){
this.selectChild(_84d);
}
}
},removeChild:function(page){
var idx=_836.indexOf(this.getChildren(),page);
this.inherited(arguments);
_83a.destroy(page._wrapper);
delete page._wrapper;
if(this._started){
_83c.publish(this.id+"-removeChild",page);
}
if(this._descendantsBeingDestroyed){
return;
}
if(this.selectedChildWidget===page){
this.selectedChildWidget=undefined;
if(this._started){
var _84f=this.getChildren();
if(_84f.length){
this.selectChild(_84f[Math.max(idx-1,0)]);
}
}
}
if(this._started){
this.layout();
}
},selectChild:function(page,_850){
var d;
page=_83d.byId(page);
if(this.selectedChildWidget!=page){
d=this._transition(page,this.selectedChildWidget,_850);
this._set("selectedChildWidget",page);
_83c.publish(this.id+"-selectChild",page,this._focused);
if(this.persist){
_837(this.id+"_selectedChild",this.selectedChildWidget.id);
}
}else{
if(this._focused&&true==page.closable){
_83c.publish(this.id+"-selectChild",page,this._focused);
}
}
return when(d||true);
},_transition:function(_851,_852){
if(_852){
this._hideChild(_852);
}
var d=this._showChild(_851);
if(_851.resize){
if(this.doLayout){
_851.resize(this._containerContentBox||this._contentBox);
}else{
_851.resize();
}
}
return d;
},_adjacent:function(_853){
var _854=this.getChildren();
var _855=_836.indexOf(_854,this.selectedChildWidget);
_855+=_853?1:_854.length-1;
return _854[_855%_854.length];
},forward:function(){
return this.selectChild(this._adjacent(true),true);
},back:function(){
return this.selectChild(this._adjacent(false),true);
},_onKeyDown:function(e){
_83c.publish(this.id+"-containerKeyDown",{e:e,page:this});
},layout:function(){
var _856=this.selectedChildWidget;
if(_856&&_856.resize){
if(this.doLayout){
_856.resize(this._containerContentBox||this._contentBox);
}else{
_856.resize();
}
}
},_showChild:function(page){
var _857=this.getChildren();
page.isFirstChild=(page==_857[0]);
page.isLastChild=(page==_857[_857.length-1]);
page._set("selected",true);
if(page._wrapper){
_839.replace(page._wrapper,"dijitVisible","dijitHidden");
}
return (page._onShow&&page._onShow())||true;
},_hideChild:function(page){
page._set("selected",false);
if(page._wrapper){
_839.replace(page._wrapper,"dijitHidden","dijitVisible");
}
page.onHide&&page.onHide();
},closeChild:function(page){
var _858=page.onClose&&page.onClose(this,page);
if(_858){
this.removeChild(page);
page.destroyRecursive();
}
},destroyDescendants:function(_859){
this._descendantsBeingDestroyed=true;
this.selectedChildWidget=undefined;
_836.forEach(this.getChildren(),function(_85a){
if(!_859){
this.removeChild(_85a);
}
_85a.destroyRecursive(_859);
},this);
this._descendantsBeingDestroyed=false;
}});
_841.ChildWidgetProperties={selected:false,disabled:false,closable:false,iconClass:"dijitNoIcon",showTitle:true};
lang.extend(_83e,_841.ChildWidgetProperties);
return _841;
});
},"curam/util/external":function(){
define(["curam/util"],function(util){
curam.define.singleton("curam.util.external",{inExternalApp:function(){
return jsScreenContext.hasContextBits("EXTAPP");
},getUimParentWindow:function(){
if(util.getTopmostWindow()===dojo.global){
return null;
}else{
return dojo.global;
}
}});
return curam.util.external;
});
},"curam/modal/CuramBaseModal":function(){
define(["dojo/text!curam/layout/resources/CuramBaseModal.html","dojo/_base/declare","dojo/dom-geometry","dojo/Deferred","dojo/on","dojo/query","dojo/_base/lang","dojo/_base/fx","dojo/window","dojo/sniff","dojo/dom","dojo/dom-attr","dojo/dom-style","dojo/dom-class","dojo/dom-construct","dojo/aspect","dijit/Dialog","curam/inspection/Layer","curam/util/external","curam/dialog","curam/tab","curam/debug","curam/ModalUIMController","curam/widget/ProgressSpinner","curam/util/RuntimeContext"],function(_85b,_85c,_85d,_85e,on,_85f,lang,fx,_860,has,dom,_861,_862,_863,_864,asp,_865,_866,_867,_868,tab,_869,_86a,_86b){
var _86c=_85c("curam.modal.CuramBaseModal",null,{templateString:_85b,autofocus:false,refocus:false,iframeHref:"",iframe:undefined,width:undefined,height:undefined,defaultWidth:800,closeModalText:LOCALISED_MODAL_CLOSE_BUTTON,buttonCloseIcon:MODAL_CLOSE_BUTTON_ICON,buttonCloseIconHover:MODAL_CLOSE_BUTTON_ICON_HOVER,modalPromptText:". "+LOCALISED_MODAL_SCREEN_READER_PROMPT+" .",maximumWidth:null,maximumHeight:null,_determinedWidth:null,_determinedHeight:null,_horizontalModalSpace:100,_verticalModalSpace:100,duration:5,parentWindow:undefined,isRegisteredForClosing:false,unsubscribes:undefined,modalconnects:undefined,onIframeLoadHandler:undefined,initialized:false,initDone:false,initUnsubToken:null,uimController:null,_helpIcon:null,_title:null,_isMobileUA:false,_isMobileUADialogPositioned:false,uimToken:undefined,postCreate:function(){
this.initModal(arguments);
},initModal:function(_86d){
curam.debug.log("curam.modal.CuramBaseModal.postCreate(): w=%s; h=%s",this.width?this.width:"not given",this.height?this.height:"not given");
this._destroyOldModals();
var _86e=curam.util.getTopmostWindow();
if(_86e.curam.config){
this._isMobileUA=_86e.curam.config.mobileUserAgent;
}
if(_86e&&_86e.jsScreenContext){
this._verticalModalSpace=100;
if(_86e.jsScreenContext.hasContextBits("EXTAPP")){
this._verticalModalSpace=50;
curam.debug.log("curam.modal.CuramBaseModal.postCreate(): Detected external app, setting _verticalModalSpace to "+this._verticalModalSpace);
}
}
if(typeof (this._isMobileUA)!="boolean"){
this._isMobileUA=false;
}
this.draggable=!this._isMobileUA;
var _86f=0.9;
this.maximumWidth=(dijit.getViewport().w*_86f)-this._horizontalModalSpace;
this.maximumHeight=(dijit.getViewport().h*_86f)-this._verticalModalSpace;
if(jsScreenContext.hasContextBits("EXTAPP")){
this.maximumHeight-=this._verticalModalSpace;
}
this.inherited(_86d);
this.unsubscribes=[];
this.modalconnects=[];
this._isCDEJModal=(this.iframeHref.indexOf("CDEJ/popups")>-1||this.iframeHref.indexOf("frequency-editor.jsp")>-1);
if(jsScreenContext.hasContextBits("EXTAPP")){
_862.set(this.domNode,"top","1px");
_862.set(this.domNode,"display","");
_862.set(this.domNode,"opacity","0");
_863.add(this.domNode,"modalDialog");
}
this._initParentWindowRef();
if(this.parentWindow){
curam.dialog.pushOntoDialogHierarchy(this.parentWindow);
}else{
curam.dialog.pushOntoDialogHierarchy(curam.util.getTopmostWindow());
}
this.unsubscribes.push(this.subscribe("/dnd/move/start",dojo.hitch(this,this._startDrag)));
this.unsubscribes.push(this.subscribe("/dnd/move/stop",function(){
var ovr=dojo.query(".overlay-iframe")[0];
if(ovr){
_864.destroy(ovr);
}
}));
this._registerInitListener();
var _870=dojo.subscribe("/curam/dialog/iframeUnloaded",this,function(_871,_872){
if(this.id==_871){
curam.debug.log(_869.getProperty("curam.ModalDialog.unload"),_871);
curam.dialog.removeFromDialogHierarchy(_872);
this.initDone=false;
this._registerInitListener();
}
});
this.unsubscribes.push(_870);
var _873=dojo.hitch(this,function(_874,_875){
curam.debug.log(_869.getProperty("curam.ModalDialog.load.init"),_874);
curam.util.onLoad.removeSubscriber(this._getEventIdentifier(),_873);
curam.dialog.pushOntoDialogHierarchy(this.iframe.contentWindow);
this._determineSize(_875);
if(!this.isRegisteredForClosing){
var _876=curam.util.getTopmostWindow();
this.unsubscribes.push(_876.dojo.subscribe("/curam/dialog/close",this,function(_877){
if(this.id==_877){
curam.debug.log("/curam/dialog/close "+_869.getProperty("curam.ModalDialog.event.for"),_877);
this.hide();
}
}));
this.isRegisteredForClosing=true;
}
this.doShow(_875);
this._notifyModalDisplayed();
});
curam.util.onLoad.addSubscriber(this._getEventIdentifier(),_873);
if(this._isCDEJModal){
curam.util.onLoad.addSubscriber(this._getEventIdentifier(),function(_878,_879){
var _87a=dom.byId(_878);
if(_87a){
_87a.focus();
_87a.contentWindow.focusFirst&&_87a.contentWindow.focusFirst();
}
});
}
var _87b=true;
this.onLoadSubsequentHandler=dojo.hitch(this,function(_87c,_87d){
if(_87b){
_87b=false;
}else{
curam.debug.log(_869.getProperty("curam.ModalDialog.load"),_87c);
if(!_87d.modalClosing){
curam.dialog.pushOntoDialogHierarchy(this.iframe.contentWindow);
this._determineSize(_87d);
this._position(true);
this.doShow(_87d);
this._notifyModalDisplayed();
}else{
curam.debug.log(_869.getProperty("curam.ModalDialog.close"));
}
}
var _87e=dom.byId(_87c);
var _87f=_87e.contentWindow.document.title;
_87e.setAttribute("title",LOCALISED_MODAL_FRAME_TITLE+" - "+_87f);
});
curam.util.onLoad.addSubscriber(this._getEventIdentifier(),this.onLoadSubsequentHandler);
this.unsubscribes.push(curam.util.getTopmostWindow().dojo.subscribe("/curam/dialog/iframeFailedToLoad",this,function(_880){
if(this.id==_880){
curam.util.onLoad.removeSubscriber(this._getEventIdentifier(),_873);
this._determineSize({height:450,title:"Error!"});
this.doShow();
this._notifyModalDisplayed();
}
}));
this.unsubscribes.push(curam.util.getTopmostWindow().dojo.subscribe("/curam/dialog/displayed",this,this._setFocusHandler));
this.unsubscribes.push(curam.util.getTopmostWindow().dojo.subscribe("/curam/dialog/displayed",this,function(_881){
if(_881==this.id){
curam.util.getTopmostWindow().dojo.publish("/curam/dialog/AfterDisplay",[_881]);
}
}));
this.unsubscribes.push(curam.util.getTopmostWindow().dojo.subscribe("/curam/dialog/displayed",this,function(){
curam.util._setModalCurrentlyOpening(false);
}));
var _882=function(_883){
return _883.indexOf(":")>0;
};
var _884=_882(this.iframeHref)?this.iframeHref:this._getBaseUrl(curam.util.getTopmostWindow().location.href)+jsL+"/"+this.iframeHref;
this.uimController=new _86a({uid:this.id,url:_884,loadFrameOnCreate:false,inDialog:true,iframeId:this._getEventIdentifier(),width:this._calculateWidth(this.width)+"px",height:this.maximumHeight+"px"});
_866.register("curam/modal/CuramBaseModal",this);
curam.debug.log("DEBUG: ModalDialog.js:postCreate(): uimController: "+this.uimController);
this.iframe=this.uimController.getIFrame();
curam.debug.log("DEBUG: ModalDialog.js:postCreate(): uimController.domNode: "+this.uimController.domNode);
this.modalconnects.push(dojo.connect(this,"onHide",this,this._onHideHandler));
this.set("content",this.uimController.domNode);
_863.add(this.iframe,this._getEventIdentifier());
this.unsubscribes.push(curam.util.getTopmostWindow().dojo.subscribe("/curam/dialog/displayed",this,this._modalDisplayedHandler));
this.unsubscribes.push(curam.util.getTopmostWindow().dojo.subscribe("/curam/dialog/closed",this,this._modalClosedHandler));
this.unsubscribes.push(curam.util.getTopmostWindow().dojo.subscribe("/curam/dialog/spinner",this._displaySpinner(this)));
this._registerOnIframeLoad(dojo.hitch(this,this._loadErrorHandler));
this.uimController.loadPage();
},_displaySpinner:function(_885){
var a1=asp.before(this,"_loadErrorHandler",function(){
curam.util.getTopmostWindow().dojo.publish("curam/progress/unload");
a1.remove();
});
var a2=asp.after(_86b,"dismissSpinner",function(){
a1&&a1.remove();
a2&&a2.remove();
});
curam.util.getTopmostWindow().dojo.publish("/curam/progress/display",[_885.containerNode,100]);
},hide:function(){
if(!this._alreadyInitialized||!this.open){
return;
}
if(this._fadeInDeferred){
this._fadeInDeferred.cancel();
}
var _886=dojo.fadeOut({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,function(){
this.domNode.style.display="none";
dijit.Dialog._DialogLevelManager.hide(this);
this._fadeOutDeferred.resolve(true);
delete this._fadeOutDeferred;
})});
this._fadeOutDeferred=new _85e(dojo.hitch(this,function(){
_886.stop();
delete this._fadeOutDeferred;
}));
var _887=this._fadeOutDeferred.promise;
dojo.hitch(this,"onHide")();
_886.play();
if(this._scrollConnected){
this._scrollConnected=false;
}
var h;
while(h=this._modalconnects.pop()){
h.remove();
}
if(this._relativePosition){
delete this._relativePosition;
}
this._set("open",false);
return _887;
},_getBaseUrl:function(_888){
var _889=_888.indexOf("?");
_888=(_889>-1)?_888.substring(0,_889):_888;
var _88a=_888.lastIndexOf("/");
return _888.substring(0,_88a+1);
},_setupHelpIcon:function(_88b){
var _88c=typeof _88b!="undefined"?_88b.helpEnabled:false,_88d=_88c?_88b.helpExtension:"",_88e=_88c?_88b.pageID:"",_88f=dojo.query(".modalDialog#"+this.id+" .dijitDialogCloseIcon");
for(var i=0;i<_88f.length;i++){
if(_88c&&!this._helpIcon){
this._helpIcon=this._createHelpIcon("dijitDialogHelpIcon","dijitDialogHelpIcon-hover",_88d,_88f[i]);
this._helpIcon.setAttribute("role","button");
this._helpIcon.setAttribute("style","visibility: hidden;");
this._setTabIndex(this._helpIcon,"0");
this.connect(this._helpIcon,"onkeydown",function(_890){
this.handleTabbingBackwards(dojo.fixEvent(_890));
});
this._helpIcon._enabled=false;
}
this._setTabIndex(_88f[i],"0");
}
if(_88c&&this._helpIcon){
this._helpIcon._pageID=_88e;
}
if((_88c&&this._helpIcon&&this._helpIcon._enabled)||(!_88c||!this._helpIcon||!this._helpIcon._enabled)){
return;
}
_862.set(this._helpIcon,"display",_88c?"":"none");
this._helpIcon._enabled=_88c;
},_createHelpIcon:function(_891,_892,_893,_894){
var icon=_864.create("span",{"class":_891,"waiRole":"presentation","title":LOCALISED_MODAL_HELP_TITLE});
_864.place(icon,_894,"before");
this.connect(icon,"onclick",function(){
var _895=curam.config?curam.config.locale:jsL;
var url;
url="./help.jsp?pageID="+this._helpIcon._pageID;
window.open(url);
});
this.connect(icon,"onkeydown",function(){
if(curam.util.enterKeyPress(event)){
var _896=curam.config?curam.config.locale:jsL;
var url;
url="./help.jsp?pageID="+this._helpIcon._pageID;
window.open(url);
}
});
if(_892){
this.connect(icon,"onmouseover",function(){
_863.add(icon,_892);
});
this.connect(icon,"onmouseout",function(){
_863.remove(icon,_892);
});
}
var _897=_864.create("img",{"src":MODAL_HELP_BUTTON_ICON,"alt":LOCALISED_MODAL_HELP_ALT,"class":"button-help-icon-default"});
var _898=_864.create("img",{"src":MODAL_HELP_BUTTON_ICON_HOVER,"alt":LOCALISED_MODAL_HELP_ALT,"class":"button-help-icon-hover"});
_864.place(_897,icon);
_864.place(_898,icon);
return icon;
},_registerInitListener:function(){
if(!this.initUnsubToken){
this.initUnsubToken=dojo.subscribe("/curam/dialog/init",this,function(){
dojo.publish("/curam/dialog/SetId",[this.id]);
this.initDone=true;
if(this.uimToken){
dojo.publish("/curam/dialog/uim/opened/"+this.uimToken,[this.id]);
}
dojo.unsubscribe(this.initUnsubToken);
this.initUnsubToken=false;
});
}
},_getEventIdentifier:function(){
return "iframe-"+this.id;
},_registerOnIframeLoad:function(_899){
if(dojo.isIE&&dojo.isIE<9){
this.onIframeLoadHandler=dojo.hitch(this,function(){
if(typeof this.iframe!="undefined"&&typeof this.iframe.readyState!="undefined"&&this.iframe.readyState=="complete"){
_899();
}
});
this.iframe.attachEvent("onreadystatechange",this.onIframeLoadHandler);
}else{
this.modalconnects.push(dojo.connect(this.iframe,"onload",this,_899));
}
},_startDrag:function(_89a){
if(!this.iframe){
return;
}
if(_89a&&_89a.node&&_89a.node===this.domNode){
var _89b=_864.create("div",{"class":"overlay-iframe"});
_89b.innerHTML="";
_864.place(_89b,this.iframe,"before");
var size=_85d.getContentBox(this.containerNode,_862.getComputedStyle(this.containerNode));
_862.set(_89b,{width:size.w+"px",height:size.h+"px"});
var _89c=_85d.getMarginBoxSimple(dijit._underlay.domNode);
var _89d={l:_89c.w-size.w-10,t:_89c.h-size.h-30};
this._moveable.onMove=function(_89e,_89f,e){
_89f.l=Math.max(5,Math.min(_89f.l,_89d.l));
_89f.t=Math.max(5,Math.min(_89f.t,_89d.t));
dojo.dnd.Moveable.prototype.onMove.apply(this,[_89e,_89f,e]);
};
}
},_loadErrorHandler:function(){
curam.debug.log(_869.getProperty("curam.ModalDialog.onload.notify")+this.iframe.id);
if(!this.initDone){
dojo.unsubscribe(this.initUnsubToken);
curam.debug.log(_869.getProperty("curam.ModalDialog.firing")+" /curam/dialog/iframeFailedToLoad "+_869.getProperty("curam.ModalDialog.for"),this.id);
curam.util.getTopmostWindow().dojo.publish("/curam/dialog/iframeFailedToLoad",[this.id]);
}else{
curam.debug.log("UIM "+_869.getProperty("curam.ModalDialog.onload.success"));
}
if(this.iframe&&this.iframe.contentWindow&&this.iframe.contentWindow.document&&this.iframe.contentWindow.document.title){
curam.debug.log("curam.modal.CuramBaseModal._loadErrorHandler calling curam.util.setBrowserTabTitle");
curam.util.setBrowserTabTitle(this.iframe.contentWindow.document.title);
}
},_setFocusHandler:function(_8a0){
if(_8a0==this.id&&this.initDone){
curam.debug.log("curam.modal.CuramBaseModal_setFocusHandler(): "+_869.getProperty("curam.ModalDialog.execute"),_8a0);
var _8a1=this.iframe.contentWindow;
var that=this;
var _8a2;
if(_8a1.document.getElementsByClassName("skeleton").length>0){
_8a2=setTimeout(function(){
that._setFocusHandler(_8a0);
},300);
}else{
_8a1.dojo.publish("curam/modal/component/ready");
if(_8a2){
clearTimeout(_8a2);
}
if(typeof _8a1.dijit=="object"&&typeof _8a1.dijit.focus=="function"){
_8a1.dijit.focus(this.iframe);
}else{
this.iframe.focus();
}
var _8a3;
dojo.withDoc(this.iframe.contentWindow.document,function(){
_8a3=dojo.byId("error-messages");
var _8a4=window.curam.util.getTopmostWindow();
if(_8a3&&_8a4.curam.__datePickerIds){
var _8a5=_8a4.curam.__datePickerIds;
for(var i=0;i<_8a5.length;i++){
var _8a6=_8a5[i];
var _8a7=dojo.byId(_8a6);
if(_8a7){
_8a7.nextElementSibling.focus();
_8a7.focus();
}
}
_8a4.curam.__datePickerIds=undefined;
}
});
var _8a8=sessionStorage.getItem("curamDefaultActionId");
var _8a9=null;
if(!_8a3&&_8a8){
sessionStorage.removeItem("curamDefaultActionId");
dojo.withDoc(this.iframe.contentWindow.document,function(){
if(dojo.byId(_8a8)){
_8a9=dojo.byId(_8a8).previousSibling;
}else{
_8a9=_8a1.curam.util.doSetFocus();
}
});
}else{
_8a9=_8a1.curam.util.doSetFocus();
if(!_8a9&&this.checkPrimaryButtonOnViewModal&&typeof this.checkPrimaryButtonOnViewModal==="function"){
_8a9=this.checkPrimaryButtonOnViewModal();
}
}
if(_8a9){
if(has("trident")||window.navigator.userAgent.indexOf("Edg/")>-1||has("ie")){
var _8aa=_8a9.ownerDocument.forms["mainForm"];
var _8ab=false;
if(sessionStorage.getItem("suppressCuramModalFocusTimeout")&&sessionStorage.getItem("suppressCuramModalFocusTimeout")==="true"){
_8ab=true;
}
if(_8aa&&(_8a9.tagName==="SELECT"||(_8a9.tagName==="INPUT"&&_861.get(_8a9,"type")==="text"))){
var _8ac=_864.create("input",{"class":"hidden-focus-input","style":"position: absolute; height: 1px; width: 1px; overflow: hidden; clip: rect(1px, 1px, 1px, 1px); white-space: nowrap;","type":"text","aria-hidden":"true","tabindex":"-1"});
_864.place(_8ac,_8aa,"before");
_8ac.focus();
on(_8ac,"blur",function(){
_864.destroy(_8ac);
});
}
var _8ad=function(ff){
return function(){
var _8ae=ff.ownerDocument.activeElement;
if(_8ae.tagName==="INPUT"&&!_8ae.classList.contains("hidden-focus-input")||_8ae.tagName==="TEXTAREA"||(_8ae.tagName==="LABEL"&&_8ae.className=="fileUploadButton")||(_8ae.tagName==="A"&&_8ae.className=="popup-action")||(_8ae.tagName==="IFRAME"&&_8ae.classList.contains("cke_wysiwyg_frame"))){
return;
}else{
ff.focus();
}
};
};
var _8af=_861.get(_8a9,"aria-label");
var _8b0="";
var _8b1=_861.get(_8a9,"objid");
if(_8b1&&_8b1.indexOf("component")==0||_863.contains(_8a9,"dijitReset dijitInputInner")){
_8b0=_8a9.title;
}else{
_8b0=LOCALISED_MODAL_FRAME_TITLE||"Modal Dialog";
}
if(_8a9&&_8a9.id!=="container-messages-ul"){
_861.set(_8a9,"aria-label",_8b0);
}
var _8b2=function(_8b3){
return function(e){
_85f("input|select[aria-label="+_8b0+"]").forEach(function(_8b4){
_8b3&&_861.set(_8b4,"aria-label",_8b3);
!_8b3&&_861.remove(_8b4,"aria-label");
});
};
};
on(_8a9,"blur",_8b2(_8af));
if(!_8ab&&_8a9.tagName==="TEXTAREA"){
setTimeout(_8ad(_8a9),1000);
}else{
if(!_8ab&&(_8a9.tagName==="SELECT"||(_8a9.tagName==="INPUT"&&_861.get(_8a9,"type")==="text"))){
setTimeout(_8ad(_8a9),200);
}else{
_8a9.focus();
}
}
}else{
_8a9.focus();
}
if(sessionStorage.getItem("suppressCuramModalFocusTimeout")){
sessionStorage.removeItem("suppressCuramModalFocusTimeout");
}
}
}
}
},_modalDisplayedHandler:function(_8b5){
if(_8b5==this.id){
curam.debug.log(_869.getProperty("curam.ModalDialog.dialog.open.1")+"("+this.id+")"+_869.getProperty("curam.ModalDialog.dialog.open.2"));
this._markAsActiveDialog(true);
}else{
if(!this.deactivatedBy){
curam.debug.log(_869.getProperty("curam.ModalDialog.dialog.deactivating.1")+"("+this.id+"),"+_869.getProperty("curam.ModalDialog.dialog.deactivating.2"),_8b5);
this._markAsActiveDialog(false);
this.deactivatedBy=_8b5;
}
}
},_modalClosedHandler:function(_8b6){
if(this.deactivatedBy==_8b6){
curam.debug.log(_869.getProperty("curam.ModalDialog.dialog.activating.1")+"("+this.id+"),"+_869.getProperty("curam.ModalDialog.dialog.activating.2"),_8b6);
this._markAsActiveDialog(true);
delete this.deactivatedBy;
}
curam.debug.log("curam.modal.CuramBaseModal._modalClosedHandler calling curam.util.setBrowserTabTitle");
curam.util.setBrowserTabTitle();
},_destroyOldModals:function(){
if(!curam.dialog.oldModalsToDestroy){
curam.dialog.oldModalsToDestroy=[];
}
dojo.forEach(curam.dialog.oldModalsToDestroy,function(_8b7){
_8b7._cleanupIframe();
_8b7.destroyRecursive();
});
curam.dialog.oldModalsToDestroy=[];
},_initParentWindowRef:function(){
if(!this.parentWindow){
var _8b8=null;
if(curam.tab.inTabbedUI()){
_8b8=curam.tab.getContentPanelIframe();
}else{
if(_867.inExternalApp()){
_8b8=_867.getUimParentWindow();
}
}
if(_8b8){
this.parentWindow=_8b8.contentWindow;
}
}else{
if(_863.contains(this.parentWindow.frameElement,"detailsPanelFrame")){
var _8b9=curam.tab.getContentPanelIframe();
var _8ba=curam.util.getLastPathSegmentWithQueryString(_8b9.src);
_8ba=curam.util.removeUrlParam(_8ba,"__o3rpu");
curam.debug.log("o3rpu "+_869.getProperty("curam.ModalDialog.property"),encodeURIComponent(_8ba));
this.iframeHref=curam.util.replaceUrlParam(this.iframeHref,"__o3rpu",encodeURIComponent(_8ba));
this.parentWindow=_8b9.contentWindow;
}
}
},_notifyModalDisplayed:function(){
curam.debug.log(_869.getProperty("curam.ModalDialog.publishing")+" /curam/dialog/displayed "+_869.getProperty("curam.ModalDialog.for"),this.id);
curam.util.getTopmostWindow().dojo.publish("/curam/dialog/displayed",[this.id,{width:this._determinedWidth,height:this._determinedHeight}]);
},_markAsActiveDialog:function(_8bb){
var _8bc="curam-active-modal";
if(_8bb){
_863.add(this.iframe,_8bc);
curam.debug.log(_869.getProperty("curam.ModalDialog.add.class"),[this.id,this.iframeHref]);
}else{
_863.remove(this.iframe,_8bc);
curam.debug.log(_869.getProperty("curam.ModalDialog.remove.class"),[this.id,this.iframe.src]);
}
},_setHrefAttr:function(href){
curam.debug.log("setHrefAttr");
this.iframeHref=href;
this.inherited(arguments);
},_setTabIndex:function(_8bd,_8be){
_8bd.setAttribute("tabIndex",_8be);
},_position:function(_8bf){
curam.debug.log(_869.getProperty("curam.ModalDialog.position"));
if(this._isMobileUADialogPositioned==false&&(this.open||_8bf)){
this.inherited(arguments);
if(this._isMobileUA==true){
this._isMobileUADialogPositioned=true;
}
}else{
curam.debug.log(_869.getProperty("curam.ModalDialog.ignoring")+" curam.ModalDialog_position");
}
},_getUnits:function(){
return "px";
},_calculateWidth:function(_8c0){
if(_8c0){
_8c0=new Number(_8c0);
if(!this._isCDEJModal&&typeof (G11N_MODAL_DIALOG_ADJUSTMENT_FACTOR)!="undefined"){
_8c0*=G11N_MODAL_DIALOG_ADJUSTMENT_FACTOR;
}
if(_8c0>this.maximumWidth){
curam.debug.log(_869.getProperty("curam.ModalDialog.specified.width.over"),this.maximumWidth);
return this.maximumWidth;
}else{
return Math.floor(_8c0);
}
}else{
var _8c1=this.defaultWidth;
if(!this._isCDEJModal&&typeof (G11N_MODAL_DIALOG_ADJUSTMENT_FACTOR)!="undefined"){
_8c1*=G11N_MODAL_DIALOG_ADJUSTMENT_FACTOR;
}
curam.debug.log(_869.getProperty("curam.ModalDialog.default.width"),_8c1);
if(_8c1>this.maximumWidth){
curam.debug.log(_869.getProperty("curam.ModalDialog.default.width.over"),this.maximumWidth);
return this.maximumWidth;
}else{
return Math.floor(_8c1);
}
}
},_calculateHeight:function(_8c2,_8c3){
if(_8c2){
_8c2=isNaN(_8c2)?new Number(_8c2):_8c2;
if(_8c2>this.maximumHeight){
curam.debug.log("specified height exceeds available space, "+"overriding with max available height of ",this.maximumHeight);
return this.maximumHeight;
}else{
if(_8c2<this.modalMinimumHeight){
curam.debug.log(_869.getProperty("curam.ModalDialog.specified.height.over.1"),this.modalMinimumHeight);
return this.modalMinimumHeight;
}else{
return _8c2;
}
}
}else{
curam.debug.log(_869.getProperty("curam.ModalDialog.no.height"),_8c3);
if(_8c3>this.maximumHeight){
curam.debug.log(_869.getProperty("curam.ModalDialog.calculated.height.over.1"),this.maximumHeight);
return this.maximumHeight;
}else{
if(_8c3<this.modalMinimumHeight){
curam.debug.log(_869.getProperty("curam.ModalDialog.calculated.height.over.2"),this.modalMinimumHeight);
return this.modalMinimumHeight;
}else{
return _8c3;
}
}
}
},_determineSize:function(_8c4){
var _8c5=_8c4.height;
var _8c6=_8c4.windowOptions;
curam.debug.log(_869.getProperty("curam.ModalDialog.size"));
try{
var w=this._calculateWidth(this.width);
var h=this._calculateHeight(this.height,_8c5);
if(_8c6){
if(_8c6["width"]||_8c6["height"]){
curam.debug.log(_869.getProperty("curam.ModalDialog.options"));
w=this._calculateWidth(_8c6["width"]);
h=this._calculateHeight(_8c6["height"],_8c5);
}
}
w=w+this._getUnits();
h=h+this._getUnits();
curam.debug.log("curam.ModalDialog:_determineSize() %s x %s",w,h);
if(jsScreenContext.hasContextBits("EXTAPP")){
this.uimController.setDimensionsForModalDialog(w,h,_8c4);
}
this._determinedWidth=w;
this._determinedHeight=h;
this.setTitle(_8c4,w);
}
catch(e){
curam.debug.log("curam.ModalDialog:_determineSize() : "+_869.getProperty("curam.ModalDialog.error")+dojo.toJson(e));
}
},setTitle:function(_8c7,_8c8){
var _8c9=_8c7.title;
if(!_8c9){
curam.debug.log("curam.ModalDialog.setTitle() - "+_869.getProperty("curam.ModalDialog.no.title"));
_8c9="";
}
var _8ca=_8c7.messageTitleAppend;
curam.debug.log("curam.ModalDialog.setTitle('%s')",_8c9);
var _8cb=_8c9.indexOf(_8ca);
if(_8cb!=-1){
var _8cc=_864.create("span",{innerHTML:_8ca,"class":"messagesPresent"});
_8c9=_8c9.split(_8ca).join("<span class=\"messagesPresent\" aria-owns=\"error-messages-container-wrapper\" role=\"alert\"></span>");
}
this.titleNode.innerHTML=_8c9;
_862.set(this.titleBar,{width:_8c8+"px",height:21+"px"});
_862.set(this.titleNode,"width",Math.ceil(_8c8*0.85)+"px");
},doShow:function(_8cd){
curam.debug.log("curam.ModalDialog.doShow(): "+_869.getProperty("curam.ModalDialog.show"));
if(!this.initialized){
this.initialized=true;
}
this._setupHelpIcon(_8cd);
this.show();
this.dismissModalSpinner();
if(jsScreenContext.hasContextBits("EXTAPP")){
var _8ce=dojo.query(".modalDialog#"+this.id+" .dijitDialogCloseIcon");
_862.set(_8ce[0],"visibility","visible");
_862.set(dom.byId("end-"+this.id),"visibility","visible");
_862.set(this.iframe,"visibility","visible");
_862.set(this.domNode,"visibility","visible");
if(this._helpIcon){
_862.set(this._helpIcon,"visibility","visible");
}
}
},dismissModalSpinner:function(){
dojo.publish("/curam/progress/unload");
},_onHideHandler:function(){
curam.util.getTopmostWindow().dojo.publish("/curam/dialog/BeforeClose",[this.id]);
_862.set(this.domNode,{visibility:"hidden",display:"block"});
curam.dialog.removeFromDialogHierarchy(this.iframe.contentWindow);
curam.dialog.removeFromDialogHierarchy(this.parentWindow);
var _8cf=curam.util.getTopmostWindow();
_8cf.dojo.publish("/curam/dialog/closed",[this.id]);
dojo.unsubscribe(this.initUnsubToken);
dojo.forEach(this.unsubscribes,_8cf.dojo.unsubscribe);
this.unsubscribes=[];
dojo.forEach(this.modalconnects,dojo.disconnect);
this.modalconnects=[];
if(dojo.isIE&&dojo.isIE<9){
this.iframe.detachEvent("onreadystatechange",this.onIframeLoadHandler);
}
curam.util.onLoad.removeSubscriber(this._getEventIdentifier(),this.onLoadSubsequentHandler);
if(this._explodeNode&&this._explodeNode.parentNode){
this._explodeNode.parentNode.removeChild(this._explodeNode);
}
curam.debug.log(_869.getProperty("curam.ModalDialog.deactivating",[this.id]));
_8cf.dojo.publish("/curam/dialog/close/appExitConfirmation",[this.id]);
this._markAsActiveDialog(false);
if(typeof this.parentWindow!="undefined"&&this.parentWindow!=null){
this.parentWindow.focus();
}
delete this.parentWindow;
_861.set(this.iframe,"src","");
sessionStorage.removeItem("firstPageHitAfterModalOpened");
curam.dialog.oldModalsToDestroy.push(this);
},handleTabbingForwards:function(e,_8d0){
if(!tabbingBackwards){
if(_8d0){
setTimeout(function(){
_8d0.focus();
},1);
}
}
tabbingBackwards=null;
},handleTabbingBackwards:function(e,_8d1,_8d2){
if(e.shiftKey&&e.keyCode==9){
var elem,evt=e?e:window.event;
if(evt.srcElement){
elem=evt.srcElement;
}else{
if(evt.target){
elem=evt.target;
}else{
throw new Error("handleTabbingBackwards(): No target element found.");
}
}
var _8d3=_8d1&&(elem.previousElementSibling.id==_8d1)&&this.helpIconEnabled;
if(elem.previousSibling.className=="dijitDialogHelpIcon"||_8d3){
return false;
}else{
var _8d4=_8d2?_8d2:elem.parentElement.parentElement.id;
var _8d5=document.getElementById(_8d4);
if(_8d5){
tabbingBackwards=true;
_8d5.focus();
}
}
}
},_cleanupIframe:function(){
delete this.content;
delete this.uimController;
var ifrm=this.iframe;
ifrm.src="";
delete this.iframe;
_864.destroy(ifrm);
}});
return _86c;
});
},"curam/util/Navigation":function(){
define(["curam/util","curam/tab","curam/define"],function(){
curam.define.singleton("curam.util.Navigation",{goToPage:function(_8d6,_8d7){
var url=_8d6+"Page.do"+curam.util.makeQueryString(_8d7);
curam.util.Navigation.goToUrl(url);
},goToUrl:function(_8d8){
curam.tab.getTabController().processURL(_8d8);
}});
return curam.util.Navigation;
});
},"curam/util/RuntimeContext":function(){
define(["dojo/_base/declare"],function(_8d9){
var _8da=_8d9("curam.util.RuntimeContext",null,{_window:null,constructor:function(_8db){
this._window=_8db;
},getHref:function(){
return this._window.location.href;
},getPathName:function(){
return this._window.location.pathName;
},contextObject:function(){
return this._window;
}});
return _8da;
});
},"curam/util/ui/form/renderer/GenericRendererFormEventsAdapter":function(){
define(["dojo/_base/declare","curam/define"],function(_8dc){
var _8dd=_8dc("curam.util.ui.form.renderer.GenericRendererFormEventsAdapter",null,{elementID:"",pathID:"",element:"",constructor:function(id,_8de){
this.elementID=id;
this.pathID=_8de;
this.element=document.getElementById(id);
},addChangeListener:function(_8df){
this.element.addEventListener("change",_8df,this.getFormElement());
},getElementID:function(){
return this.elementID;
},getFormElement:function(){
return this.element;
},setFormElementValue:function(_8e0){
this.element.value=_8e0;
},getFormElementValue:function(){
return this.getFormElement().value;
},});
return _8dd;
});
},"dojox/encoding/digests/_base":function(){
define(["dojo/_base/lang"],function(lang){
var base=lang.getObject("dojox.encoding.digests",true);
base.outputTypes={Base64:0,Hex:1,String:2,Raw:3};
base.addWords=function(a,b){
var l=(a&65535)+(b&65535);
var m=(a>>16)+(b>>16)+(l>>16);
return (m<<16)|(l&65535);
};
var _8e1=8;
var mask=(1<<_8e1)-1;
base.stringToWord=function(s){
var wa=[];
for(var i=0,l=s.length*_8e1;i<l;i+=_8e1){
wa[i>>5]|=(s.charCodeAt(i/_8e1)&mask)<<(i%32);
}
return wa;
};
base.wordToString=function(wa){
var s=[];
for(var i=0,l=wa.length*32;i<l;i+=_8e1){
s.push(String.fromCharCode((wa[i>>5]>>>(i%32))&mask));
}
return s.join("");
};
base.wordToHex=function(wa){
var h="0123456789abcdef",s=[];
for(var i=0,l=wa.length*4;i<l;i++){
s.push(h.charAt((wa[i>>2]>>((i%4)*8+4))&15)+h.charAt((wa[i>>2]>>((i%4)*8))&15));
}
return s.join("");
};
base.wordToBase64=function(wa){
var p="=",tab="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=[];
for(var i=0,l=wa.length*4;i<l;i+=3){
var t=(((wa[i>>2]>>8*(i%4))&255)<<16)|(((wa[i+1>>2]>>8*((i+1)%4))&255)<<8)|((wa[i+2>>2]>>8*((i+2)%4))&255);
for(var j=0;j<4;j++){
if(i*8+j*6>wa.length*32){
s.push(p);
}else{
s.push(tab.charAt((t>>6*(3-j))&63));
}
}
}
return s.join("");
};
base.stringToUtf8=function(_8e2){
var _8e3="";
var i=-1;
var x,y;
while(++i<_8e2.length){
x=_8e2.charCodeAt(i);
y=i+1<_8e2.length?_8e2.charCodeAt(i+1):0;
if(55296<=x&&x<=56319&&56320<=y&&y<=57343){
x=65536+((x&1023)<<10)+(y&1023);
i++;
}
if(x<=127){
_8e3+=String.fromCharCode(x);
}else{
if(x<=2047){
_8e3+=String.fromCharCode(192|((x>>>6)&31),128|(x&63));
}else{
if(x<=65535){
_8e3+=String.fromCharCode(224|((x>>>12)&15),128|((x>>>6)&63),128|(x&63));
}else{
if(x<=2097151){
_8e3+=String.fromCharCode(240|((x>>>18)&7),128|((x>>>12)&63),128|((x>>>6)&63),128|(x&63));
}
}
}
}
}
return _8e3;
};
return base;
});
},"dijit/form/_FormWidgetMixin":function(){
define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/on","dojo/sniff","dojo/window","../a11y"],function(_8e4,_8e5,_8e6,_8e7,lang,_8e8,on,has,_8e9,a11y){
return _8e5("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:false,intermediateChanges:false,scrollOnFocus:true,_setIdAttr:"focusNode",_setDisabledAttr:function(_8ea){
this._set("disabled",_8ea);
if(/^(button|input|select|textarea|optgroup|option|fieldset)$/i.test(this.focusNode.tagName)){
_8e6.set(this.focusNode,"disabled",_8ea);
}else{
this.focusNode.setAttribute("aria-disabled",_8ea?"true":"false");
}
if(this.valueNode){
_8e6.set(this.valueNode,"disabled",_8ea);
}
if(_8ea){
this._set("hovering",false);
this._set("active",false);
var _8eb="tabIndex" in this.attributeMap?this.attributeMap.tabIndex:("_setTabIndexAttr" in this)?this._setTabIndexAttr:"focusNode";
_8e4.forEach(lang.isArray(_8eb)?_8eb:[_8eb],function(_8ec){
var node=this[_8ec];
if(has("webkit")||a11y.hasDefaultTabStop(node)){
node.setAttribute("tabIndex","-1");
}else{
node.removeAttribute("tabIndex");
}
},this);
}else{
if(this.tabIndex!=""){
this.set("tabIndex",this.tabIndex);
}
}
},_onFocus:function(by){
if(by=="mouse"&&this.isFocusable()){
var _8ed=this.own(on(this.focusNode,"focus",function(){
_8ee.remove();
_8ed.remove();
}))[0];
var _8ef=has("pointer-events")?"pointerup":has("MSPointer")?"MSPointerUp":has("touch-events")?"touchend, mouseup":"mouseup";
var _8ee=this.own(on(this.ownerDocumentBody,_8ef,lang.hitch(this,function(evt){
_8ee.remove();
_8ed.remove();
if(this.focused){
if(evt.type=="touchend"){
this.defer("focus");
}else{
this.focus();
}
}
})))[0];
}
if(this.scrollOnFocus){
this.defer(function(){
_8e9.scrollIntoView(this.domNode);
});
}
this.inherited(arguments);
},isFocusable:function(){
return !this.disabled&&this.focusNode&&(_8e7.get(this.domNode,"display")!="none");
},focus:function(){
if(!this.disabled&&this.focusNode.focus){
try{
this.focusNode.focus();
}
catch(e){
}
}
},compare:function(val1,val2){
if(typeof val1=="number"&&typeof val2=="number"){
return (isNaN(val1)&&isNaN(val2))?0:val1-val2;
}else{
if(val1>val2){
return 1;
}else{
if(val1<val2){
return -1;
}else{
return 0;
}
}
}
},onChange:function(){
},_onChangeActive:false,_handleOnChange:function(_8f0,_8f1){
if(this._lastValueReported==undefined&&(_8f1===null||!this._onChangeActive)){
this._resetValue=this._lastValueReported=_8f0;
}
this._pendingOnChange=this._pendingOnChange||(typeof _8f0!=typeof this._lastValueReported)||(this.compare(_8f0,this._lastValueReported)!=0);
if((this.intermediateChanges||_8f1||_8f1===undefined)&&this._pendingOnChange){
this._lastValueReported=_8f0;
this._pendingOnChange=false;
if(this._onChangeActive){
if(this._onChangeHandle){
this._onChangeHandle.remove();
}
this._onChangeHandle=this.defer(function(){
this._onChangeHandle=null;
this.onChange(_8f0);
});
}
}
},create:function(){
this.inherited(arguments);
this._onChangeActive=true;
},destroy:function(){
if(this._onChangeHandle){
this._onChangeHandle.remove();
this.onChange(this._lastValueReported);
}
this.inherited(arguments);
}});
});
},"curam/util/ContextPanel":function(){
define(["dijit/registry","dojo/dom-attr","curam/inspection/Layer","curam/debug","curam/util/onLoad","curam/util","curam/tab","curam/define"],function(_8f2,_8f3,_8f4,_8f5,_8f6){
curam.define.singleton("curam.util.ContextPanel",{CONTENT_URL_ATTRIB:"data-content-url",setupLoadEventPublisher:function(_8f7,_8f8,_8f9){
curam.util.ContextPanel._doSetup(_8f7,_8f8,_8f9,function(_8fa){
return _8f2.byId(_8fa);
});
},_doSetup:function(_8fb,_8fc,_8fd,_8fe){
var _8ff=curam.util.getTopmostWindow().dojo.subscribe(_8fb,function(){
var tab=_8fe(_8fc);
var _900=curam.util.ContextPanel._getIframe(tab);
if(_900){
curam.tab.executeOnTabClose(function(){
var src=_8f3.get(_900,"src");
_8f3.set(_900,"src","");
curam.debug.log("curam.util.ContextPanel: Released iframe content for "+src);
},_8fc);
_8f5.log(_8f5.getProperty("curam.util.ContextPanel.loaded"));
curam.util.getTopmostWindow().dojo.publish("/curam/frame/detailsPanelLoaded",[{loaded:true},_8fc]);
_900._finishedLoading=true;
if(_900._scheduledRefresh){
curam.util.ContextPanel.refresh(tab);
_900._scheduledRefresh=false;
}
}
});
_8f6.addSubscriber(_8fd,curam.util.ContextPanel.addTitle);
curam.tab.unsubscribeOnTabClose(_8ff,_8fc);
curam.tab.executeOnTabClose(function(){
_8f6.removeSubscriber(_8fd,curam.util.ContextPanel.addTitle);
},_8fc);
},refresh:function(tab){
var _901=curam.util.ContextPanel._getIframe(tab);
if(_901){
curam.debug.log(_8f5.getProperty("curam.util.ContextPanel.refresh.prep"));
if(_901._finishedLoading){
curam.debug.log(_8f5.getProperty("curam.util.ContextPanel.refresh"));
_901._finishedLoading=false;
var doc=_901.contentDocument||_901.contentWindow.document;
doc.location.reload(false);
}else{
curam.debug.log(_8f5.getProperty("curam.util.ContextPanel.refresh.delay"));
_901._scheduledRefresh=true;
}
}
},_getIframe:function(tab){
if(tab){
var _902=dojo.query("iframe.detailsPanelFrame",tab.domNode);
return _902[0];
}
},addTitle:function(_903){
var _904=dojo.query("."+_903)[0];
var _905=_904.contentWindow.document.title;
_904.setAttribute("title",CONTEXT_PANEL_TITLE+" - "+_905);
},load:function(tab){
var _906=curam.util.ContextPanel._getIframe(tab);
if(_906){
var _907=_8f3.get(_906,curam.util.ContextPanel.CONTENT_URL_ATTRIB);
if(_907&&_907!="undefined"){
_906[curam.util.ContextPanel.CONTENT_URL_ATTRIB]=undefined;
_8f3.set(_906,"src",_907);
}
}
}});
var _908=curam.util.getTopmostWindow();
if(typeof _908._curamContextPanelTabReadyListenerRegistered!="boolean"){
_908.dojo.subscribe("/curam/application/tab/ready",null,function(_909){
curam.util.ContextPanel.load(_909);
});
_908._curamContextPanelTabReadyListenerRegistered=true;
}
_8f4.register("curam/util/ContextPanel",this);
return curam.util.ContextPanel;
});
},"curam/widget/Menu":function(){
define(["dijit/Menu","dojo/_base/declare","dojo/dom-class","curam/debug","curam/util","dijit/registry","dojo/on","dojo/_base/lang","dojo/has"],function(menu,_90a,_90b,_90c,util,_90d,on,lang,has){
var Menu=_90a("curam.widget.Menu",dijit.Menu,{_CSS_CLASS_ACTIVE_MENU:"curam-active-menu",_EVENT_OPENED:"/curam/menu/opened",_EVENT_CLOSED:"/curam/menu/closed",_amIActive:false,autoFocus:true,mobContext:has("ios"),postCreate:function(){
curam.debug.log(_90c.getProperty("curam.widget.Menu.created",[this.id]));
this.own(on(this,"Open",dojo.hitch(this,function(){
curam.debug.log(_90c.getProperty("curam.widget.Menu.opened",[this.id]));
curam.util.getTopmostWindow().dojo.publish(this._EVENT_OPENED,[this.id]);
this._markAsActive(true);
})));
var _90e=curam.util.getTopmostWindow().dojo.subscribe(this._EVENT_OPENED,this,function(_90f){
_90c.log(_90c.getProperty("curam.widget.Menu.event",[this.id,this._amIActive?"active":"passive",_90f]));
if(this.id!=_90f&&this._amIActive){
_90c.log(_90c.getProperty("curam.widget.Menu.deactivate"));
this._markAsActive(false);
var _910=curam.util.getTopmostWindow().dojo.subscribe(this._EVENT_CLOSED,this,function(_911){
if(_911==_90f){
_90c.log(_90c.getProperty("curam.widget.Menu.reactivate",[_90f,this.id]));
dojo.unsubscribe(_910);
this._markAsActive(true);
}
});
}
});
this.own(on(this,"Close",dojo.hitch(this,function(){
curam.debug.log(_90c.getProperty("curam.widget.Menu.closing",[this.id]));
curam.util.getTopmostWindow().dojo.publish(this._EVENT_CLOSED,[this.id]);
this._markAsActive(false);
dojo.unsubscribe(_90e);
})));
this.inherited(arguments);
},_markAsActive:function(_912){
if(_912){
curam.debug.log(_90c.getProperty("curam.widget.Menu.add.class"),this.id);
_90b.add(this.domNode,this._CSS_CLASS_ACTIVE_MENU);
}else{
curam.debug.log(_90c.getProperty("curam.widget.Menu.remove.class"),this.id);
_90b.remove(this.domNode,this._CSS_CLASS_ACTIVE_MENU);
}
this._amIActive=_912;
},onItemClick:function(item,evt){
if(this.passive_hover_timer){
this.passive_hover_timer.remove();
}
this.focusChild(item);
if(item.disabled){
return false;
}
if(item.popup){
this.set("selected",item);
this.set("activated",true);
var _913=false;
if(this.mobContext){
_913=/click/.test(evt._origType||evt.type);
}else{
_913=/^key/.test(evt._origType||evt.type)||(evt.clientX==0&&evt.clientY==0);
}
this._openItemPopup(item,_913);
}else{
this.onExecute();
item._onClick?item._onClick(evt):item.onClick(evt);
}
}});
return Menu;
});
},"dijit/_BidiMixin":function(){
define([],function(){
var _914={LRM:"‎",LRE:"‪",PDF:"‬",RLM:"‏",RLE:"‫"};
return {textDir:"",getTextDir:function(text){
return this.textDir=="auto"?this._checkContextual(text):this.textDir;
},_checkContextual:function(text){
var fdc=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(text);
return fdc?(fdc[0]<="z"?"ltr":"rtl"):this.dir?this.dir:this.isLeftToRight()?"ltr":"rtl";
},applyTextDir:function(_915,text){
if(this.textDir){
var _916=this.textDir;
if(_916=="auto"){
if(typeof text==="undefined"){
var _917=_915.tagName.toLowerCase();
text=(_917=="input"||_917=="textarea")?_915.value:_915.innerText||_915.textContent||"";
}
_916=this._checkContextual(text);
}
if(_915.dir!=_916){
_915.dir=_916;
}
}
},enforceTextDirWithUcc:function(_918,text){
if(this.textDir){
if(_918){
_918.originalText=text;
}
var dir=this.textDir=="auto"?this._checkContextual(text):this.textDir;
return (dir=="ltr"?_914.LRE:_914.RLE)+text+_914.PDF;
}
return text;
},restoreOriginalText:function(_919){
if(_919.originalText){
_919.text=_919.originalText;
delete _919.originalText;
}
return _919;
},_setTextDirAttr:function(_91a){
if(!this._created||this.textDir!=_91a){
this._set("textDir",_91a);
var node=null;
if(this.displayNode){
node=this.displayNode;
this.displayNode.align=this.dir=="rtl"?"right":"left";
}else{
node=this.textDirNode||this.focusNode||this.textbox;
}
if(node){
this.applyTextDir(node);
}
}
}};
});
},"curam/util/ListSort":function(){
define(["dojo/dom","dojo/dom-construct","dojo/dom-style","dojo/dom-attr","curam/util","curam/debug","dojo/query","dojo/on","dojo/sniff"],function(dom,_91b,_91c,_91d,util,_91e,_91f,on,has){
var _920=_LS=dojo.setObject("curam.util.ListSort",{LIVE:"aria-live",READOUT:"aria-label",BUSY:"aria-busy",SCROLLABLE:"_slh",EVT_SORT_PREP:"/curam/list/toBeSorted",EVT_SORTED:"/curam/list/sorted",sortableTable:null,sortTexts:null,tablesWithListeners:[],sorters:[],headingUpdaters:[],currentUpdater:null,updatesByNow:-1,sortedCell:null,cleaner:null,makeSortable:function(_921,_922,_923,_924,_925,_926){
dojo.addOnLoad(function(){
var _927=dom.byId(_921);
if(!_927){
return;
}
var _928=_91f("tHead tr th",_927);
if(_928==null){
return;
}
_927.ariaListeners=[];
_927.onces=[];
_LS.sortTexts=_925.split("|");
var _929=1+(+_923),body=_927.tBodies[0],rw=body&&body.rows,_92a=rw?rw.length:false,_92b=_92a?_92a-_929:0;
var _92c=function(cell,_92d){
return function(){
_91d.set(cell,_LS.READOUT,_92d);
};
},_92e=function(_92f,_930){
return _92f+"."+_930;
},_931=function(_932,cNum,_933){
var _934=function(pgId,_935,sIx,_936){
if(pgId==_91d.get(_932,"paginationId")){
if(_LS.updatesByNow>0){
var _937=_933+" "+_924;
var _938=null;
if(cNum==_935){
_938=_937+"."+_936;
_937=_92e(_937,_936);
_LS.sortedCell=_932;
if(has("trident")){
_91d.set(_932,_LS.READOUT," ");
_91d.set(_91f("span",_932)[0],_LS.READOUT,_937);
}else{
_91d.set(_932,_LS.READOUT,_937);
}
}else{
_937+="."+_LS.sortTexts[0];
_927.onces.push(_92c(_932,_937));
has("trident")&&_91d.set(_91f("span",_932)[0],_LS.READOUT,_937);
}
_91d.set(_932,_LS.BUSY,"false");
}
if(--_LS.updatesByNow==0){
_LS.doFocus(_927.onces,_938);
}
}
};
_934.cleanUp=function(){
_932=null;
};
return _934;
},_939=function(tbl,_93a,_93b){
return function(pid,_93c){
if(tbl==_93c){
_LS.sortedCell=null;
tbl.onces=[];
_LS.resetReadout(_93a,_93b);
_91d.set(_93a,_LS.BUSY,"true");
}
};
};
_928.forEach(function(_93d,ix){
if(_93d.id&&_93d.childNodes[0]){
var _93e=(_926?dom.byId(_93d.id+_LS.SCROLLABLE):_93d).childNodes[0],_93f=_93e.childNodes[0];
if(_93f&&_93f.nodeType==3){
var _940=dojo.trim(_93f.nodeValue);
if((_940.length>0)&&(_940!=" ")){
_93e.innerHTML="";
var _941=_940+" "+_924,_942=_941+" "+_LS.sortTexts[0];
_91d.set(_93e,{"tabindex":"0","paginationid":_922,"aria-label":_942,className:"listSortable"});
if(has("trident")){
var _941=_941+_LS.sortTexts[0];
_91d.set(_93e,{"onblur":"_LS.updateAriaLabel(this)"});
}
_LS.setPlaceholders(_93e,_940,_941);
_LS.sorters.push(on(_93e,"click, keyup",dojo.partial(_LS.sortTable,_927,_922,ix,_929,_923,_92b)));
_LS.sorters.push(dojo.subscribe(_LS.EVT_SORT_PREP,_939(_927,_93e,_940)));
_927.ariaListeners.push(dojo.subscribe(_LS.EVT_SORTED,_931(_93e,ix,_940)));
}
}
}
});
(_927.ariaListeners.length>0)&&_LS.tablesWithListeners.push(_927);
_91f(".hidden-table-header a").forEach(function(_943){
_91d.set(_943,"tabindex","-1");
});
_927._sortUp=true;
_LS.sortableTable=_927;
_LS.cleaner=on(window,"unload",_LS.cleanUp);
});
},updateAriaLabel:function(_944){
_91d.remove(_944,_920.READOUT);
},cleanUp:function(){
_LS.tablesWithListeners.forEach(function(tbl){
tbl.ariaListeners.forEach(function(lsn){
dojo.unsubscribe(lsn);
});
tbl.ariaListeners=null;
});
_LS.tablesWithListeners=null;
_LS.sorters.forEach(function(srt){
srt.cleanUp&&srt.cleanUp();
});
_LS.sorters=null;
_LS.sortedCell=null;
_LS.sortableTable=null;
_LS.cleaner.remove();
},sortTable:function(_945,pid,col,step,_946,_947,evt){
if(evt&&evt.keyCode&&!(evt.keyCode==13||evt.keyCode==32)){
return;
}
var _948=_945.tBodies[0],_949=_948.rows;
var _94a=_948&&_948.rows.length;
if((_94a<3&&_946)||(_94a<2&&!_946)){
return;
}
var _94b=_945._sortUp?function(a,b){
return a-b;
}:function(a,b){
return b-a;
};
var _94c=function(a,b){
var aa=_LS.getOrd(a.cells[col]);
var bb=_LS.getOrd(b.cells[col]);
return _94b(aa,bb);
};
dojo.publish("curam/sort/earlyAware",[pid]);
dojo.publish(_LS.EVT_SORT_PREP,[pid,_945]);
count=_948&&_948.rows.length;
if(count&&count<=step){
return;
}
var _94d=_LS.getOrd(_949[0].cells[col]);
if(_94d>=0){
var _94e=[];
var i=0;
while(i<count){
var fl=_949[i++];
_94e.push(fl);
_946&&(fl._detailsRow=_949[i++]);
}
_94e.sort(_94c);
_945._sortUp=!_945._sortUp;
var _94f=document.createDocumentFragment(),_950=document.createDocumentFragment();
_94e.forEach(function(_951,ix){
_91d.set(_951,"data-lix",ix);
_951.done=false;
var app=(ix<=_947)?_94f:_950;
app.appendChild(_951);
_951._detailsRow&&app.appendChild(_951._detailsRow);
});
_948.appendChild(_94f);
curam.util.stripeTable(_945,_946,_947);
_948.appendChild(_950);
var _952=0;
if(_94e.length>1){
var _953=_LS.getOrd(_94e[0].cells[col]),_954=_LS.getOrd(_94e[_94e.length-1].cells[col]);
_952=_954==_953?0:(_954>_953)?1:2;
}
var _955=_LS.sortTexts[_952];
_LS.updatesByNow=_945.ariaListeners.length;
dojo.publish(_LS.EVT_SORTED,[pid,col,_952,_955]);
var _956=dojo.exists;
if(_956("curam.listControls."+pid)||_956("curam.listTogglers."+pid)||(_956("curam.listMenus."+pid)&&curam.listMenus[pid].length>0)){
dojo.publish("curam/update/readings/sort",[pid,_94e]);
}
}
return false;
},doFocus:function(_957,_958){
_91d.set(_LS.sortedCell,_LS.LIVE,"polite");
var fn;
while(fn=_957.pop()){
fn();
}
_LS.sortedCell.aux&&_LS.sortedCell.aux.focus();
var to=setTimeout(function(){
clearTimeout(to);
_LS.sortedCell&&_LS.sortedCell.focus();
},500);
if(_958){
var to1=setTimeout(function(){
clearTimeout(to1);
_LS.sortedCell&&_91d.set(_LS.sortedCell,_LS.READOUT,_958);
},2500);
}
},getOrd:function(el){
if(!el){
return -1;
}
if(el.ord){
return el.ord;
}
var sps=_91f("span[data-curam-sort-order]",el)[0];
if(!sps){
el.ord=-1;
return el.ord;
}
var ord=_91d.get(sps,"data-curam-sort-order");
var _959=parseInt(ord),res=isNaN(_959)?-1:_959;
el.ord=res;
return res;
}});
has("trident")?dojo.mixin(_920,{setPlaceholders:function(_95a,_95b,_95c){
_91b.create("p",{"aria-hidden":"true",innerHTML:_95b,className:"sortColText"},_95a);
var _95d=_91b.create("span",{"tabindex":-1,"aria-label":_95c},_95a);
_91c.set(_95d,{"opacity":"0","margin":"0","padding":"0"});
_95a.aux=_95d;
},resetReadout:function(_95e,_95f){
_91d.set(_95e,_920.READOUT,_95f);
}}):dojo.mixin(_920,{setPlaceholders:function(_960,_961,_962){
!/Edg/.test(navigator.userAgent)&&_91d.set(_960,"role","button");
_91b.create("p",{"aria-hidden":"true",innerHTML:_961,className:"sortColText"},_960);
},resetReadout:function(_963,_964){
_91d.remove(_963,_920.LIVE);
_91d.remove(_963,_920.READOUT);
}});
has("ios")&&dojo.mixin(_920,{setPlaceholders:function(_965,_966,_967){
_91d.set(_965,"role","link");
var cTxt=_91b.create("p",{"aria-hidden":"true",innerHTML:"placeholder",className:"sortColText"},_965);
_91c.set(cTxt,{"opacity":"0","margin":"0","padding":"0","position":"absolute","bottom":"0"});
var lnk=_91b.create("a",{"tabindex":0,"aria-label":_966,"href":"#",innerHTML:_966},_965);
}});
return _920;
});
},"dojo/fx":function(){
define(["./_base/lang","./Evented","./_base/kernel","./_base/array","./aspect","./_base/fx","./dom","./dom-style","./dom-geometry","./ready","require"],function(lang,_968,dojo,_969,_96a,_96b,dom,_96c,geom,_96d,_96e){
if(!dojo.isAsync){
_96d(0,function(){
var _96f=["./fx/Toggler"];
_96e(_96f);
});
}
var _970=dojo.fx={};
var _971={_fire:function(evt,args){
if(this[evt]){
this[evt].apply(this,args||[]);
}
return this;
}};
var _972=function(_973){
this._index=-1;
this._animations=_973||[];
this._current=this._onAnimateCtx=this._onEndCtx=null;
this.duration=0;
_969.forEach(this._animations,function(a){
if(a){
if(typeof a.duration!="undefined"){
this.duration+=a.duration;
}
if(a.delay){
this.duration+=a.delay;
}
}
},this);
};
_972.prototype=new _968();
lang.extend(_972,{_onAnimate:function(){
this._fire("onAnimate",arguments);
},_onEnd:function(){
this._onAnimateCtx.remove();
this._onEndCtx.remove();
this._onAnimateCtx=this._onEndCtx=null;
if(this._index+1==this._animations.length){
this._fire("onEnd");
}else{
this._current=this._animations[++this._index];
this._onAnimateCtx=_96a.after(this._current,"onAnimate",lang.hitch(this,"_onAnimate"),true);
this._onEndCtx=_96a.after(this._current,"onEnd",lang.hitch(this,"_onEnd"),true);
this._current.play(0,true);
}
},play:function(_974,_975){
if(!this._current){
this._current=this._animations[this._index=0];
}
if(!_975&&this._current.status()=="playing"){
return this;
}
var _976=_96a.after(this._current,"beforeBegin",lang.hitch(this,function(){
this._fire("beforeBegin");
}),true),_977=_96a.after(this._current,"onBegin",lang.hitch(this,function(arg){
this._fire("onBegin",arguments);
}),true),_978=_96a.after(this._current,"onPlay",lang.hitch(this,function(arg){
this._fire("onPlay",arguments);
_976.remove();
_977.remove();
_978.remove();
}));
if(this._onAnimateCtx){
this._onAnimateCtx.remove();
}
this._onAnimateCtx=_96a.after(this._current,"onAnimate",lang.hitch(this,"_onAnimate"),true);
if(this._onEndCtx){
this._onEndCtx.remove();
}
this._onEndCtx=_96a.after(this._current,"onEnd",lang.hitch(this,"_onEnd"),true);
this._current.play.apply(this._current,arguments);
return this;
},pause:function(){
if(this._current){
var e=_96a.after(this._current,"onPause",lang.hitch(this,function(arg){
this._fire("onPause",arguments);
e.remove();
}),true);
this._current.pause();
}
return this;
},gotoPercent:function(_979,_97a){
this.pause();
var _97b=this.duration*_979;
this._current=null;
_969.some(this._animations,function(a,_97c){
if(_97b<=a.duration){
this._current=a;
this._index=_97c;
return true;
}
_97b-=a.duration;
return false;
},this);
if(this._current){
this._current.gotoPercent(_97b/this._current.duration);
}
if(_97a){
this.play();
}
return this;
},stop:function(_97d){
if(this._current){
if(_97d){
for(;this._index+1<this._animations.length;++this._index){
this._animations[this._index].stop(true);
}
this._current=this._animations[this._index];
}
var e=_96a.after(this._current,"onStop",lang.hitch(this,function(arg){
this._fire("onStop",arguments);
e.remove();
}),true);
this._current.stop();
}
return this;
},status:function(){
return this._current?this._current.status():"stopped";
},destroy:function(){
this.stop();
if(this._onAnimateCtx){
this._onAnimateCtx.remove();
}
if(this._onEndCtx){
this._onEndCtx.remove();
}
}});
lang.extend(_972,_971);
_970.chain=function(_97e){
return new _972(_97e);
};
var _97f=function(_980){
this._animations=_980||[];
this._connects=[];
this._finished=0;
this.duration=0;
_969.forEach(_980,function(a){
var _981=a.duration;
if(a.delay){
_981+=a.delay;
}
if(this.duration<_981){
this.duration=_981;
}
this._connects.push(_96a.after(a,"onEnd",lang.hitch(this,"_onEnd"),true));
},this);
this._pseudoAnimation=new _96b.Animation({curve:[0,1],duration:this.duration});
var self=this;
_969.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop","onEnd"],function(evt){
self._connects.push(_96a.after(self._pseudoAnimation,evt,function(){
self._fire(evt,arguments);
},true));
});
};
lang.extend(_97f,{_doAction:function(_982,args){
_969.forEach(this._animations,function(a){
a[_982].apply(a,args);
});
return this;
},_onEnd:function(){
if(++this._finished>this._animations.length){
this._fire("onEnd");
}
},_call:function(_983,args){
var t=this._pseudoAnimation;
t[_983].apply(t,args);
},play:function(_984,_985){
this._finished=0;
this._doAction("play",arguments);
this._call("play",arguments);
return this;
},pause:function(){
this._doAction("pause",arguments);
this._call("pause",arguments);
return this;
},gotoPercent:function(_986,_987){
var ms=this.duration*_986;
_969.forEach(this._animations,function(a){
a.gotoPercent(a.duration<ms?1:(ms/a.duration),_987);
});
this._call("gotoPercent",arguments);
return this;
},stop:function(_988){
this._doAction("stop",arguments);
this._call("stop",arguments);
return this;
},status:function(){
return this._pseudoAnimation.status();
},destroy:function(){
this.stop();
_969.forEach(this._connects,function(_989){
_989.remove();
});
}});
lang.extend(_97f,_971);
_970.combine=function(_98a){
return new _97f(_98a);
};
_970.wipeIn=function(args){
var node=args.node=dom.byId(args.node),s=node.style,o;
var anim=_96b.animateProperty(lang.mixin({properties:{height:{start:function(){
o=s.overflow;
s.overflow="hidden";
if(s.visibility=="hidden"||s.display=="none"){
s.height="1px";
s.display="";
s.visibility="";
return 1;
}else{
var _98b=_96c.get(node,"height");
return Math.max(_98b,1);
}
},end:function(){
return node.scrollHeight;
}}}},args));
var fini=function(){
s.height="auto";
s.overflow=o;
};
_96a.after(anim,"onStop",fini,true);
_96a.after(anim,"onEnd",fini,true);
return anim;
};
_970.wipeOut=function(args){
var node=args.node=dom.byId(args.node),s=node.style,o;
var anim=_96b.animateProperty(lang.mixin({properties:{height:{end:1}}},args));
_96a.after(anim,"beforeBegin",function(){
o=s.overflow;
s.overflow="hidden";
s.display="";
},true);
var fini=function(){
s.overflow=o;
s.height="auto";
s.display="none";
};
_96a.after(anim,"onStop",fini,true);
_96a.after(anim,"onEnd",fini,true);
return anim;
};
_970.slideTo=function(args){
var node=args.node=dom.byId(args.node),top=null,left=null;
var init=(function(n){
return function(){
var cs=_96c.getComputedStyle(n);
var pos=cs.position;
top=(pos=="absolute"?n.offsetTop:parseInt(cs.top)||0);
left=(pos=="absolute"?n.offsetLeft:parseInt(cs.left)||0);
if(pos!="absolute"&&pos!="relative"){
var ret=geom.position(n,true);
top=ret.y;
left=ret.x;
n.style.position="absolute";
n.style.top=top+"px";
n.style.left=left+"px";
}
};
})(node);
init();
var anim=_96b.animateProperty(lang.mixin({properties:{top:args.top||0,left:args.left||0}},args));
_96a.after(anim,"beforeBegin",init,true);
return anim;
};
return _970;
});
},"curam/inPageNavigation":function(){
define(["dijit/registry","curam/inspection/Layer","curam/tab","curam/ui/PageRequest","curam/debug","dojo/_base/declare","dojo/dom-attr","dojo/dom-style","dojo/dom-class","dojo/dom-geometry"],function(_98c,_98d,tab,_98e,_98f,_990,_991,_992,_993,_994){
var _995=_990("curam.inPageNavigation",null,{title:"",href:"",selected:false,constructor:function(args){
this.title=args.title;
this.href=args.href;
this.selected=args.selected;
_98f.log("curam.inPageNavigation "+_98f.getProperty("curam.inPageNavigation.msg")+this);
_98d.register("curam/inPageNavigation",this);
},getLinks:function(){
var _996=dojo.query(".in-page-navigation-tabs")[0];
var _997=dojo.query("li",_996);
var _998=new Array();
dojo.forEach(_997,function(link){
var _999=dojo.query("a",link)[0];
if(!_999){
return;
}
var _99a=_999.innerText||_999.textContent;
var _99b=false;
dojo.filter(_991.get(_999,"class").split(" "),function(_99c){
if(_99c=="in-page-current-link"){
_99b=true;
return;
}
});
var href=_991.get(_999,"href");
var _99d=new curam.inPageNavigation({"title":_99a,"selected":_99b,"href":href});
_998.push(_99d);
});
return _998;
},processMainContentAreaLinks:function(){
dojo.addOnLoad(function(){
var _99e=dojo.query(".ipn-page")[0];
if(_99e){
var _99f=_98c.byId(_991.get(_99e,"id"));
var _9a0=_99f.getChildren()[0];
_99f.removeChild(_9a0);
if(_99f.getChildren().length==0){
return;
}
var _9a1=dojo.query(".in-page-nav-contentWrapper")[0];
var _9a2=dojo.query("> *",_9a1);
var _9a3=_9a2[_9a2.length-1];
var pos=_994.position(_9a3);
var _9a4=pos.y;
var _9a5="height: "+_9a4+"px;";
_991.set(_9a1,"style",_9a5);
dojo.connect(_99f,"_transition",function(_9a6,_9a7){
var link=dojo.query(".in-page-link",_9a6.id)[0];
var _9a8=new curam.ui.PageRequest(link.href);
if(jsScreenContext.hasContextBits("LIST_ROW_INLINE_PAGE")){
_9a8.pageHolder=window;
}
curam.tab.getTabController().handlePageRequest(_9a8);
});
_992.set(_99e,"visibility","visible");
}
});
}});
return _995;
});
},"curam/util/LocalConfig":function(){
define([],function(){
var _9a9=function(name){
return "curam_util_LocalConfig_"+name;
},_9aa=function(name,_9ab){
var _9ac=_9a9(name);
if(typeof top[_9ac]==="undefined"){
top[_9ac]=_9ab;
}
return top[_9ac];
},_9ad=function(name){
return top&&top!=null?top[_9a9(name)]:undefined;
};
_9aa("seedValues",{}),_9aa("overrides",{});
var _9ae=function(_9af,_9b0){
if(typeof _9af!=="undefined"&&typeof _9af!=="string"){
throw new Error("Invalid "+_9b0+" type: "+typeof _9af+"; expected string");
}
};
var _9b1={seedOption:function(name,_9b2,_9b3){
_9ae(_9b2,"value");
_9ae(_9b3,"defaultValue");
_9ad("seedValues")[name]=(typeof _9b2!=="undefined")?_9b2:_9b3;
},overrideOption:function(name,_9b4){
_9ae(_9b4,"value");
if(typeof (Storage)!=="undefined"){
localStorage[name]=_9b4;
}else{
_9ad("overrides")[name]=_9b4;
}
},readOption:function(name,_9b5){
var _9b6=_9ad("seedValues");
var _9b7=_9ad("overrides");
_9ae(_9b5,"defaultValue");
var _9b8=null;
if(typeof (Storage)!=="undefined"&&localStorage&&typeof localStorage[name]!=="undefined"){
_9b8=localStorage[name];
}else{
if(_9b7&&typeof _9b7[name]!=="undefined"){
_9b8=_9b7[name];
}else{
if(_9b6&&typeof _9b6[name]!=="undefined"){
_9b8=_9b6[name];
}else{
_9b8=_9b5;
}
}
}
return _9b8;
},clearOption:function(name){
if(typeof (Storage)!=="undefined"){
localStorage.removeItem(name);
}
delete _9ad("overrides")[name];
delete _9ad("seedValues")[name];
}};
return _9b1;
});
},"dojo/data/util/sorter":function(){
define(["../../_base/lang"],function(lang){
var _9b9={};
lang.setObject("dojo.data.util.sorter",_9b9);
_9b9.basicComparator=function(a,b){
var r=-1;
if(a===null){
a=undefined;
}
if(b===null){
b=undefined;
}
if(a==b){
r=0;
}else{
if(a>b||a==null){
r=1;
}
}
return r;
};
_9b9.createSortFunction=function(_9ba,_9bb){
var _9bc=[];
function _9bd(attr,dir,comp,s){
return function(_9be,_9bf){
var a=s.getValue(_9be,attr);
var b=s.getValue(_9bf,attr);
return dir*comp(a,b);
};
};
var _9c0;
var map=_9bb.comparatorMap;
var bc=_9b9.basicComparator;
for(var i=0;i<_9ba.length;i++){
_9c0=_9ba[i];
var attr=_9c0.attribute;
if(attr){
var dir=(_9c0.descending)?-1:1;
var comp=bc;
if(map){
if(typeof attr!=="string"&&("toString" in attr)){
attr=attr.toString();
}
comp=map[attr]||bc;
}
_9bc.push(_9bd(attr,dir,comp,_9bb));
}
}
return function(rowA,rowB){
var i=0;
while(i<_9bc.length){
var ret=_9bc[i++](rowA,rowB);
if(ret!==0){
return ret;
}
}
return 0;
};
};
return _9b9;
});
},"curam/ui/PageRequest":function(){
define(["dojo/_base/declare","curam/debug"],function(_9c1,_9c2){
var _9c3=_9c1("curam.ui.PageRequest",null,{forceLoad:false,justRefresh:false,constructor:function(_9c4,_9c5,_9c6){
this.parameters={};
this.cdejParameters={};
this.cdejParameters["o3ctx"]="4096";
if(_9c5){
this.isHomePage=true;
}else{
this.isHomePage=false;
}
if(_9c6){
this.openInCurrentTab=true;
}else{
this.openInCurrentTab=false;
}
this.pageHolder=null;
var url;
if(dojo.isString(_9c4)){
url=_9c4;
curam.debug.log("PAGE REQUEST: "+_9c2.getProperty("curam.ui.PageRequest.url")+" "+url);
}else{
curam.debug.log("PAGE REQUEST: "+_9c2.getProperty("curam.ui.PageRequest.descriptor")+" "+_9c4.toJson());
var tc=_9c4.tabContent;
url=tc.pageID+"Page.do";
var _9c7=true;
for(param in tc.parameters){
if(_9c7){
url+="?";
_9c7=false;
}else{
url+="&";
}
url+=param+"="+encodeURIComponent(tc.parameters[param]);
}
curam.debug.log("PAGE REQUEST: "+_9c2.getProperty("curam.ui.PageRequest.derived")+" "+url);
}
var _9c8=url.split("?");
this.parseUIMPageID(_9c8[0]);
if(_9c8.length==2){
this.parseParameters(_9c8[1]);
}
},parseUIMPageID:function(url){
var _9c9=url.split("/");
var _9ca=_9c9[_9c9.length-1];
this.pageID=_9ca.replace("Page.do","");
},parseParameterName:function(name){
if(name.charAt(0)=="a"&&name.charAt(1)=="m"&&name.charAt(2)=="p"&&name.charAt(3)==";"){
return name.substring(4,name.length);
}else{
return name;
}
},parseParameters:function(_9cb){
var _9cc=_9cb.split("&");
for(var i=0;i<_9cc.length;i++){
var _9cd=_9cc[i].split("=");
var _9ce=this.parseParameterName(_9cd[0]);
if(_9ce.length>0){
if(!this.isCDEJParam(_9ce)){
this.parameters[_9ce]=decodeURIComponent(_9cd[1].replace(/\+/g," "));
}else{
if(_9ce!="o3nocache"){
this.cdejParameters[_9ce]=decodeURIComponent(_9cd[1].replace(/\+/g," "));
}
}
}
}
},isCDEJParam:function(_9cf){
return (_9cf.charAt(0)=="o"&&_9cf.charAt(1)=="3")||(_9cf.charAt(0)=="_"&&_9cf.charAt(1)=="_"&&_9cf.charAt(2)=="o"&&_9cf.charAt(3)=="3");
},getQueryString:function(_9d0){
var _9d1="";
var _9d2;
for(_9d2 in this.parameters){
_9d1+=_9d2+"="+encodeURIComponent(this.parameters[_9d2])+"&";
}
if(!_9d0==true||_9d0==false){
for(_9d2 in this.cdejParameters){
_9d1+=_9d2+"="+encodeURIComponent(this.cdejParameters[_9d2])+"&";
}
}
_9d1=_9d1.substring(0,_9d1.length-1);
this.queryString=_9d1;
return this.queryString;
},getURL:function(_9d3){
var _9d4=this.pageID+"Page.do";
var qs=this.getQueryString(_9d3);
if(qs!=""){
_9d4+="?"+qs;
}
this.url=_9d4;
return this.url;
}});
return _9c3;
});
},"dojo/window":function(){
define(["./_base/lang","./sniff","./_base/window","./dom","./dom-geometry","./dom-style","./dom-construct"],function(lang,has,_9d5,dom,geom,_9d6,_9d7){
has.add("rtl-adjust-position-for-verticalScrollBar",function(win,doc){
var body=_9d5.body(doc),_9d8=_9d7.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},body,"last"),div=_9d7.create("div",{style:{overflow:"hidden",direction:"ltr"}},_9d8,"last"),ret=geom.position(div).x!=0;
_9d8.removeChild(div);
body.removeChild(_9d8);
return ret;
});
has.add("position-fixed-support",function(win,doc){
var body=_9d5.body(doc),_9d9=_9d7.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},body,"last"),_9da=_9d7.create("span",{style:{position:"fixed",left:"0",top:"0"}},_9d9,"last"),ret=geom.position(_9da).x!=geom.position(_9d9).x;
_9d9.removeChild(_9da);
body.removeChild(_9d9);
return ret;
});
var _9db={getBox:function(doc){
doc=doc||_9d5.doc;
var _9dc=(doc.compatMode=="BackCompat")?_9d5.body(doc):doc.documentElement,_9dd=geom.docScroll(doc),w,h;
if(has("touch")){
var _9de=_9db.get(doc);
w=_9de.innerWidth||_9dc.clientWidth;
h=_9de.innerHeight||_9dc.clientHeight;
}else{
w=_9dc.clientWidth;
h=_9dc.clientHeight;
}
return {l:_9dd.x,t:_9dd.y,w:w,h:h};
},get:function(doc){
if(has("ie")&&_9db!==document.parentWindow){
doc.parentWindow.execScript("document._parentWindow = window;","Javascript");
var win=doc._parentWindow;
doc._parentWindow=null;
return win;
}
return doc.parentWindow||doc.defaultView;
},scrollIntoView:function(node,pos){
try{
node=dom.byId(node);
var doc=node.ownerDocument||_9d5.doc,body=_9d5.body(doc),html=doc.documentElement||body.parentNode,isIE=has("ie")||has("trident"),isWK=has("webkit");
if(node==body||node==html){
return;
}
if(!(has("mozilla")||isIE||isWK||has("opera")||has("trident")||has("edge"))&&("scrollIntoView" in node)){
node.scrollIntoView(false);
return;
}
var _9df=doc.compatMode=="BackCompat",_9e0=Math.min(body.clientWidth||html.clientWidth,html.clientWidth||body.clientWidth),_9e1=Math.min(body.clientHeight||html.clientHeight,html.clientHeight||body.clientHeight),_9e2=(isWK||_9df)?body:html,_9e3=pos||geom.position(node),el=node.parentNode,_9e4=function(el){
return (isIE<=6||(isIE==7&&_9df))?false:(has("position-fixed-support")&&(_9d6.get(el,"position").toLowerCase()=="fixed"));
},self=this,_9e5=function(el,x,y){
if(el.tagName=="BODY"||el.tagName=="HTML"){
self.get(el.ownerDocument).scrollBy(x,y);
}else{
x&&(el.scrollLeft+=x);
y&&(el.scrollTop+=y);
}
};
if(_9e4(node)){
return;
}
while(el){
if(el==body){
el=_9e2;
}
var _9e6=geom.position(el),_9e7=_9e4(el),rtl=_9d6.getComputedStyle(el).direction.toLowerCase()=="rtl";
if(el==_9e2){
_9e6.w=_9e0;
_9e6.h=_9e1;
if(_9e2==html&&(isIE||has("trident"))&&rtl){
_9e6.x+=_9e2.offsetWidth-_9e6.w;
}
_9e6.x=0;
_9e6.y=0;
}else{
var pb=geom.getPadBorderExtents(el);
_9e6.w-=pb.w;
_9e6.h-=pb.h;
_9e6.x+=pb.l;
_9e6.y+=pb.t;
var _9e8=el.clientWidth,_9e9=_9e6.w-_9e8;
if(_9e8>0&&_9e9>0){
if(rtl&&has("rtl-adjust-position-for-verticalScrollBar")){
_9e6.x+=_9e9;
}
_9e6.w=_9e8;
}
_9e8=el.clientHeight;
_9e9=_9e6.h-_9e8;
if(_9e8>0&&_9e9>0){
_9e6.h=_9e8;
}
}
if(_9e7){
if(_9e6.y<0){
_9e6.h+=_9e6.y;
_9e6.y=0;
}
if(_9e6.x<0){
_9e6.w+=_9e6.x;
_9e6.x=0;
}
if(_9e6.y+_9e6.h>_9e1){
_9e6.h=_9e1-_9e6.y;
}
if(_9e6.x+_9e6.w>_9e0){
_9e6.w=_9e0-_9e6.x;
}
}
var l=_9e3.x-_9e6.x,t=_9e3.y-_9e6.y,r=l+_9e3.w-_9e6.w,bot=t+_9e3.h-_9e6.h;
var s,old;
if(r*l>0&&(!!el.scrollLeft||el==_9e2||el.scrollWidth>el.offsetHeight)){
s=Math[l<0?"max":"min"](l,r);
if(rtl&&((isIE==8&&!_9df)||has("trident")>=5)){
s=-s;
}
old=el.scrollLeft;
_9e5(el,s,0);
s=el.scrollLeft-old;
_9e3.x-=s;
}
if(bot*t>0&&(!!el.scrollTop||el==_9e2||el.scrollHeight>el.offsetHeight)){
s=Math.ceil(Math[t<0?"max":"min"](t,bot));
old=el.scrollTop;
_9e5(el,0,s);
s=el.scrollTop-old;
_9e3.y-=s;
}
el=(el!=_9e2)&&!_9e7&&el.parentNode;
}
}
catch(error){
console.error("scrollIntoView: "+error);
node.scrollIntoView(false);
}
}};
1&&lang.setObject("dojo.window",_9db);
return _9db;
});
},"dojo/DeferredList":function(){
define(["./_base/kernel","./_base/Deferred","./_base/array"],function(dojo,_9ea,_9eb){
dojo.DeferredList=function(list,_9ec,_9ed,_9ee,_9ef){
var _9f0=[];
_9ea.call(this);
var self=this;
if(list.length===0&&!_9ec){
this.resolve([0,[]]);
}
var _9f1=0;
_9eb.forEach(list,function(item,i){
item.then(function(_9f2){
if(_9ec){
self.resolve([i,_9f2]);
}else{
_9f3(true,_9f2);
}
},function(_9f4){
if(_9ed){
self.reject(_9f4);
}else{
_9f3(false,_9f4);
}
if(_9ee){
return null;
}
throw _9f4;
});
function _9f3(_9f5,_9f6){
_9f0[i]=[_9f5,_9f6];
_9f1++;
if(_9f1===list.length){
self.resolve(_9f0);
}
};
});
};
dojo.DeferredList.prototype=new _9ea();
dojo.DeferredList.prototype.gatherResults=function(_9f7){
var d=new dojo.DeferredList(_9f7,false,true,false);
d.addCallback(function(_9f8){
var ret=[];
_9eb.forEach(_9f8,function(_9f9){
ret.push(_9f9[1]);
});
return ret;
});
return d;
};
return dojo.DeferredList;
});
},"curam/widgets":function(){
define(["dojo/dom","dojo/dom-style","dojo/dom-construct"],function(dom,_9fa,_9fb){
var _9fc=function(_9fd){
this.accordion=new _9fe(_9fd,this);
this.accordion.switchboard=this;
};
var _9ff={updateButtons:function(){
var _a00=this.accordion;
this.collapser.disabled=_a00.staysStill(false);
this.expander.disabled=_a00.staysStill(true);
},switchMode:function(){
if(this.checked){
this.switchboard.accordion.accordMode=false;
this.switchboard.expander.onclick=this.switchboard.accordion.expandRest;
this.switchboard.collapser.style.display="";
this.switchboard.updateButtons();
}else{
this.switchboard.accordion.accordMode=true;
this.switchboard.collapser.style.display="none";
this.switchboard.accordion.collapseAll();
this.switchboard.expander.value="Expand All";
this.switchboard.expander.onclick=this.switchboard.accordion.expandAll;
this.switchboard.expander.disabled=false;
}
}};
dojo.mixin(_9fc.prototype,_9ff);
var _9fe=function(_a01,_a02){
var _a03;
this.panelHeight="250px";
this.accordMode=true;
this.switchboard=_a02;
this.topElement=dom.byId(_a01);
this.tabs=[];
var _a04=dojo.query("div",this.topElement);
for(var i=0;i<_a04.length;i++){
if(_a04[i].className=="accordionTab"){
while(_a04[++i].className!="tabHeader"){
}
_a03=_a04[i];
while(_a04[++i].className!="tabContent"){
}
this.tabs[this.tabs.length]=new _a05(this,_a03,_a04[i]);
}
}
this.lastTab=this.tabs[0];
for(var i=1;i<this.tabs.length;i++){
this.tabs[i].collapse(false);
}
};
var _a06={expandAll:function(){
var _a07=this.switchboard.accordion;
for(var i=0;i<_a07.tabs.length;i++){
_a07.tabs[i].stateExpanded();
}
this.src="../themes/classic/images/evidence-review/CollapseAllButton.png";
this.onclick=_a07.collapseAll;
},collapseAll:function(){
var _a08=this.switchboard.accordion;
for(var i=0;i<_a08.tabs.length;i++){
_a08.tabs[i].collapse(false);
}
_a08.lastTab.expand(false);
this.src="../themes/classic/images/evidence-review/ExpandAllButton.png";
this.onclick=_a08.expandAll;
},expandRest:function(){
if(!this.switchboard.accordion.staysStill(true)){
this.switchboard.accordion.expandAll();
}
this.switchboard.updateButtons();
},collapseRest:function(){
if(!this.switchboard.accordion.staysStill(false)){
this.switchboard.accordion.collapseAll();
}
this.switchboard.updateButtons();
},staysStill:function(_a09){
var _a0a=0;
var _a0b=this.tabs.length;
for(var i=0;i<_a0b;i++){
if(this.tabs[i].expanded==true){
_a0a++;
}
}
return (_a09==true)?(_a0b-_a0a==0):(_a0a==1);
}};
dojo.mixin(_9fe.prototype,_a06);
var _a05=function(_a0c,_a0d,_a0e){
this.accordion=_a0c;
this.switchboard=_a0c.switchboard;
this.header=_a0d;
this.header.tab=this;
this.content=_a0e;
_9fa.set(this.content,{height:_a0c.panelHeight,overflow:"auto"});
this.content.tab=this;
this.expanded=true;
dojo.connect(this.header,"onclick",this.toggleState);
dojo.connect(this.header,"onmouseover",this.hoverStyle);
dojo.connect(this.header,"onmouseout",this.stillStyle);
};
var _a0f={hoverStyle:function(e){
if(!this.tab.expanded){
this.className+=" tabHeaderHover";
}
},stillStyle:function(e){
this.className="tabHeader";
},collapse:function(_a10){
if(this.accordion.lastTab==this){
return;
}
if(this.accordion.staysStill(false)){
return;
}
if(_a10&&this.accordion.accordMode==false){
new _a11(this.content,"down");
}else{
_9fa.set(this.content,{height:"1px",display:"none"});
}
this.expanded=false;
this.content.style.overflow="hidden";
if(this.accordion.accordMode==false){
this.switchboard.updateButtons();
}
},expand:function(_a12){
if(this.accordion.lastTab==this){
return;
}
if(this.accordion.staysStill(true)){
return;
}
var _a13=this.accordion.lastTab;
this.stateExpanded(_a12);
this.accordion.lastTab=this;
if(this.accordion.accordMode==true){
_a13.collapse(true);
}else{
this.switchboard.updateButtons();
}
},stateExpanded:function(_a14){
if(_a14){
this.content.style.display="";
if(this.accordion.accordMode==true){
new _a15(this.content,this.accordion.lastTab.content);
}else{
new _a11(this.content,"up");
}
}else{
_9fa.set(this.content,{height:this.accordion.panelHeight,display:"",overflow:"auto"});
this.expanded=true;
}
},toggleState:function(){
if(this.tab.expanded==true){
this.tab.collapse(true);
}else{
this.tab.expand(true);
}
}};
dojo.mixin(_a05.prototype,_a0f);
var _a11=function(_a16,_a17){
this.contentRef=_a16;
this.direction=_a17;
this.duration=100;
this.steps=6;
this.step();
};
var _a18={step:function(){
var _a19;
if(this.steps<=0){
if(this.direction=="down"){
_9fa.set(this.contentRef,{height:"1px",display:"none"});
this.contentRef.tab.expanded=false;
}else{
this.contentRef.style.height=this.contentRef.tab.accordion.panelHeight;
this.contentRef.tab.expanded=true;
}
this.contentRef.tab.switchboard.updateButtons();
return;
}
if(this.timer){
clearTimeout(this.timer);
}
var _a1a=Math.round(this.duration/this.steps);
if(this.direction=="down"){
_a19=this.steps>0?(parseInt(this.contentRef.offsetHeight)-1)/this.steps:0;
}else{
_a19=this.steps>0?(parseInt(this.contentRef.tab.accordion.panelHeight)-parseInt(this.contentRef.offsetHeight))/this.steps:0;
}
this.resizeBy(_a19);
this.duration-=_a1a;
this.steps--;
this.timer=setTimeout(dojo.hitch(this,this.step),_a1a);
},resizeBy:function(_a1b){
var _a1c=this.contentRef.offsetHeight;
var _a1d=parseInt(_a1b);
if(_a1b!=0){
if(this.direction=="down"){
this.contentRef.style.height=(_a1c-_a1d)+"px";
}else{
this.contentRef.style.height=(_a1c+_a1d)+"px";
}
}
}};
dojo.mixin(_a11.prototype,_a18);
var _a15=function(_a1e,_a1f){
this.collapsingContent=_a1f;
this.collapsingContent.style.overflow="hidden";
this.expandingContent=_a1e;
this.limit=250;
this.duration=100;
this.steps=10;
this.expandingContent.style.display="";
this.step();
};
var _a20={step:function(){
if(this.steps<=0){
_9fa.set(this.collapsingContent,{height:"1px",display:"none"});
_9fa.set(this.collapsingContent,{height:this.limit,overflow:"auto"});
this.collapsingContent.tab.expanded=false;
this.expandingContent.tab.expanded=true;
return;
}
if(this.timer){
clearTimeout(this.timer);
}
var _a21=Math.round(this.duration/this.steps);
var _a22=this.steps>0?(parseInt(this.collapsingContent.style.height)-1)/this.steps:0;
this.resizeBoth(_a22);
this.duration-=_a21;
this.steps--;
this.timer=setTimeout(dojo.hitch(this,this.step),_a21);
},resizeBoth:function(_a23){
var h1=parseInt(this.collapsingContent.style.height);
var h2=parseInt(this.expandingContent.style.height);
var _a24=parseInt(_a23);
if(_a23!=0){
if(h2+_a24<this.limit){
this.collapsingContent.style.height=(h1-_a24)+"px";
this.expandingContent.style.height=(h2+_a24)+"px";
}
}
}};
dojo.mixin(_a15.prototype,_a20);
var _a25={version:"1",AccordionControl:_9fc,AccordionWidget:_9fe,AccordionTab:_a05,SingleSlowMotion:_a11,SynchroSlowMotion:_a15,registerAccordion:function(id){
_9fc.constructor(id);
}};
var _a26=function(_a27){
this.steps=_a27;
this.regions=new Array();
this.RGB=new Array(256);
var k=0;
var hex=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F");
for(var i=0;i<16;i++){
for(j=0;j<16;j++){
this.RGB[k]=hex[i]+hex[j];
k++;
}
}
};
var _a28={addRegion:function(_a29){
this.regions[this.regions.length]=_a29;
},drawMap:function(){
var _a2a;
if(this.steps%2==0){
_a2a=this.steps/2;
}else{
_a2a=(this.steps-1)/2;
}
var step=parseInt(255/_a2a);
var red,_a2b,blue;
for(var i=0;i<this.steps;++i){
var _a2c;
if(i==0){
_a2c="#ff0000";
}else{
if(i==(this.steps-1)){
_a2c="#0000ff";
}else{
if(i==_a2a){
_a2c="#ffffff";
}else{
if(i>_a2a){
var _a2b=255;
var red=255;
_a2b-=(i-_a2a)*step;
red-=(i-_a2a)*step;
_a2c=this.rgbToHex(red,_a2b,255);
}else{
if(i<_a2a){
_a2b=0;
blue=0;
_a2b+=step*i;
blue+=step*i;
_a2c=this.rgbToHex(255,_a2b,blue);
}
}
}
}
}
var _a2d=dom.byId("heatmapTable");
if(_a2d){
var _a2e=_a2d.getElementsByTagName("td");
for(var j=0;j<_a2e.length;j++){
if(_a2e[j].className.indexOf("region"+this.regions[i])>-1){
_a2e[j].style.background=_a2c;
if(i>_a2a){
_9fa.set(dojo.query("a",_a2e[j])[0],"color","white");
}
}
}
}
_9fa.set(dom.byId("legendImage"+this.regions[i]),{color:_a2c,background:_a2c});
}
},rgbToHex:function(r,g,b){
var rr=this.RGB[r];
var gg=this.RGB[g];
var bb=this.RGB[b];
return "#"+rr+gg+bb;
}};
dojo.mixin(_a26.prototype,_a28);
dojo.global.getDataIn=function(_a2f){
return eval(_a2f);
};
dojo.global.Widgets=_a25;
dojo.global.HeatMap=_a26;
return _a25;
});
},"dijit/registry":function(){
define(["dojo/_base/array","dojo/_base/window","./main"],function(_a30,win,_a31){
var _a32={},hash={};
var _a33={length:0,add:function(_a34){
if(hash[_a34.id]){
throw new Error("Tried to register widget with id=="+_a34.id+" but that id is already registered");
}
hash[_a34.id]=_a34;
this.length++;
},remove:function(id){
if(hash[id]){
delete hash[id];
this.length--;
}
},byId:function(id){
return typeof id=="string"?hash[id]:id;
},byNode:function(node){
return hash[node.getAttribute("widgetId")];
},toArray:function(){
var ar=[];
for(var id in hash){
ar.push(hash[id]);
}
return ar;
},getUniqueId:function(_a35){
var id;
do{
id=_a35+"_"+(_a35 in _a32?++_a32[_a35]:_a32[_a35]=0);
}while(hash[id]);
return _a31._scopeName=="dijit"?id:_a31._scopeName+"_"+id;
},findWidgets:function(root,_a36){
var _a37=[];
function _a38(root){
for(var node=root.firstChild;node;node=node.nextSibling){
if(node.nodeType==1){
var _a39=node.getAttribute("widgetId");
if(_a39){
var _a3a=hash[_a39];
if(_a3a){
_a37.push(_a3a);
}
}else{
if(node!==_a36){
_a38(node);
}
}
}
}
};
_a38(root);
return _a37;
},_destroyAll:function(){
_a31._curFocus=null;
_a31._prevFocus=null;
_a31._activeStack=[];
_a30.forEach(_a33.findWidgets(win.body()),function(_a3b){
if(!_a3b._destroyed){
if(_a3b.destroyRecursive){
_a3b.destroyRecursive();
}else{
if(_a3b.destroy){
_a3b.destroy();
}
}
}
});
},getEnclosingWidget:function(node){
while(node){
var id=node.nodeType==1&&node.getAttribute("widgetId");
if(id){
return hash[id];
}
node=node.parentNode;
}
return null;
},_hash:hash};
_a31.registry=_a33;
return _a33;
});
},"curam/validation":function(){
define(["dojo/dom","curam/define","curam/date"],function(dom){
curam.define.singleton("curam.validation",{FILE_UPLOAD_FLGS:[],fileUploadChecker:null,invalidPathMsg:null,preventKeyPress:function(_a3c){
if(dojo.isIE){
_a3c.cancelBubble=true;
_a3c.returnValue=false;
return false;
}
return true;
},activateFileUploadChecker:function(code){
if(!curam.validation.fileUploadChecker){
curam.validation.fileUploadChecker=function(){
var form=dom.byId("mainForm");
var _a3d=function(evt){
var _a3e=curam.validation.FILE_UPLOAD_FLGS;
for(var i=0;i<_a3e.length;i++){
var _a3f=_a3e[i];
var _a40=cm.nextSibling(dom.byId(_a3f),"input");
if(!curam.validation.isValidFilePath(_a40.value)){
dojo.stopEvent(evt);
alert(curam.validation.invalidPathMsg+" '"+_a40.value+"'");
cm.setFormSubmitted(form,0);
return false;
}
}
return true;
};
dojo.connect(form,"onsubmit",_a3d);
};
dojo.addOnLoad(curam.validation.fileUploadChecker);
}
},isValidFilePath:function(path){
return true;
},validateDate:function(_a41){
var _a42={valid:curam.date.isDate(_a41,jsDF),validFormat:jsDF.toLowerCase()};
return _a42;
}});
return curam.validation;
});
},"dijit/PopupMenuBarItem":function(){
define(["dojo/_base/declare","./PopupMenuItem","./MenuBarItem"],function(_a43,_a44,_a45){
var _a46=_a45._MenuBarItemMixin;
return _a43("dijit.PopupMenuBarItem",[_a44,_a46],{});
});
},"dijit/form/_FormMixin":function(){
define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/window"],function(_a47,_a48,_a49,lang,on,_a4a){
return _a48("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(_a4b){
var res=[];
_a47.forEach(_a4b||this.getChildren(),function(_a4c){
if("value" in _a4c){
res.push(_a4c);
}else{
res=res.concat(this._getDescendantFormWidgets(_a4c.getChildren()));
}
},this);
return res;
},reset:function(){
_a47.forEach(this._getDescendantFormWidgets(),function(_a4d){
if(_a4d.reset){
_a4d.reset();
}
});
},validate:function(){
var _a4e=false;
return _a47.every(_a47.map(this._getDescendantFormWidgets(),function(_a4f){
_a4f._hasBeenBlurred=true;
var _a50=_a4f.disabled||!_a4f.validate||_a4f.validate();
if(!_a50&&!_a4e){
_a4a.scrollIntoView(_a4f.containerNode||_a4f.domNode);
_a4f.focus();
_a4e=true;
}
return _a50;
}),function(item){
return item;
});
},setValues:function(val){
_a49.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");
return this.set("value",val);
},_setValueAttr:function(obj){
var map={};
_a47.forEach(this._getDescendantFormWidgets(),function(_a51){
if(!_a51.name){
return;
}
var _a52=map[_a51.name]||(map[_a51.name]=[]);
_a52.push(_a51);
});
for(var name in map){
if(!map.hasOwnProperty(name)){
continue;
}
var _a53=map[name],_a54=lang.getObject(name,false,obj);
if(_a54===undefined){
continue;
}
_a54=[].concat(_a54);
if(typeof _a53[0].checked=="boolean"){
_a47.forEach(_a53,function(w){
w.set("value",_a47.indexOf(_a54,w._get("value"))!=-1);
});
}else{
if(_a53[0].multiple){
_a53[0].set("value",_a54);
}else{
_a47.forEach(_a53,function(w,i){
w.set("value",_a54[i]);
});
}
}
}
},getValues:function(){
_a49.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");
return this.get("value");
},_getValueAttr:function(){
var obj={};
_a47.forEach(this._getDescendantFormWidgets(),function(_a55){
var name=_a55.name;
if(!name||_a55.disabled){
return;
}
var _a56=_a55.get("value");
if(typeof _a55.checked=="boolean"){
if(/Radio/.test(_a55.declaredClass)){
if(_a56!==false){
lang.setObject(name,_a56,obj);
}else{
_a56=lang.getObject(name,false,obj);
if(_a56===undefined){
lang.setObject(name,null,obj);
}
}
}else{
var ary=lang.getObject(name,false,obj);
if(!ary){
ary=[];
lang.setObject(name,ary,obj);
}
if(_a56!==false){
ary.push(_a56);
}
}
}else{
var prev=lang.getObject(name,false,obj);
if(typeof prev!="undefined"){
if(lang.isArray(prev)){
prev.push(_a56);
}else{
lang.setObject(name,[prev,_a56],obj);
}
}else{
lang.setObject(name,_a56,obj);
}
}
});
return obj;
},isValid:function(){
return this.state=="";
},onValidStateChange:function(){
},_getState:function(){
var _a57=_a47.map(this._descendants,function(w){
return w.get("state")||"";
});
return _a47.indexOf(_a57,"Error")>=0?"Error":_a47.indexOf(_a57,"Incomplete")>=0?"Incomplete":"";
},disconnectChildren:function(){
},connectChildren:function(_a58){
this._descendants=this._getDescendantFormWidgets();
_a47.forEach(this._descendants,function(_a59){
if(!_a59._started){
_a59.startup();
}
});
if(!_a58){
this._onChildChange();
}
},_onChildChange:function(attr){
if(!attr||attr=="state"||attr=="disabled"){
this._set("state",this._getState());
}
if(!attr||attr=="value"||attr=="disabled"||attr=="checked"){
if(this._onChangeDelayTimer){
this._onChangeDelayTimer.remove();
}
this._onChangeDelayTimer=this.defer(function(){
delete this._onChangeDelayTimer;
this._set("value",this.get("value"));
},10);
}
},startup:function(){
this.inherited(arguments);
this._descendants=this._getDescendantFormWidgets();
this.value=this.get("value");
this.state=this._getState();
var self=this;
this.own(on(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(evt){
if(evt.target==self.domNode){
return;
}
self._onChildChange(evt.type.replace("attrmodified-",""));
}));
this.watch("state",function(attr,_a5a,_a5b){
this.onValidStateChange(_a5b=="");
});
},destroy:function(){
this.inherited(arguments);
}});
});
},"dijit/BackgroundIframe":function(){
define(["require","./main","dojo/_base/config","dojo/dom-construct","dojo/dom-style","dojo/_base/lang","dojo/on","dojo/sniff"],function(_a5c,_a5d,_a5e,_a5f,_a60,lang,on,has){
has.add("config-bgIframe",(has("ie")&&!/IEMobile\/10\.0/.test(navigator.userAgent))||(has("trident")&&/Windows NT 6.[01]/.test(navigator.userAgent)));
var _a61=new function(){
var _a62=[];
this.pop=function(){
var _a63;
if(_a62.length){
_a63=_a62.pop();
_a63.style.display="";
}else{
if(has("ie")<9){
var burl=_a5e["dojoBlankHtmlUrl"]||_a5c.toUrl("dojo/resources/blank.html")||"javascript:\"\"";
var html="<iframe src='"+burl+"' role='presentation'"+" style='position: absolute; left: 0px; top: 0px;"+"z-index: -1; filter:Alpha(Opacity=\"0\");'>";
_a63=document.createElement(html);
}else{
_a63=_a5f.create("iframe");
_a63.src="javascript:\"\"";
_a63.className="dijitBackgroundIframe";
_a63.setAttribute("role","presentation");
_a60.set(_a63,"opacity",0.1);
}
_a63.tabIndex=-1;
}
return _a63;
};
this.push=function(_a64){
_a64.style.display="none";
_a62.push(_a64);
};
}();
_a5d.BackgroundIframe=function(node){
if(!node.id){
throw new Error("no id");
}
if(has("config-bgIframe")){
var _a65=(this.iframe=_a61.pop());
node.appendChild(_a65);
if(has("ie")<7||has("quirks")){
this.resize(node);
this._conn=on(node,"resize",lang.hitch(this,"resize",node));
}else{
_a60.set(_a65,{width:"100%",height:"100%"});
}
}
};
lang.extend(_a5d.BackgroundIframe,{resize:function(node){
if(this.iframe){
_a60.set(this.iframe,{width:node.offsetWidth+"px",height:node.offsetHeight+"px"});
}
},destroy:function(){
if(this._conn){
this._conn.remove();
this._conn=null;
}
if(this.iframe){
this.iframe.parentNode.removeChild(this.iframe);
_a61.push(this.iframe);
delete this.iframe;
}
}});
return _a5d.BackgroundIframe;
});
},"dijit/layout/TabController":function(){
define(["dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/has","dojo/i18n","dojo/_base/lang","./StackController","../registry","../Menu","../MenuItem","curam/inspection/Layer","dojo/text!./templates/_TabButton.html","curam/widget/_TabButton","curam/widget/MenuItem","dojo/i18n!../nls/common"],function(_a66,dom,_a67,_a68,has,i18n,lang,_a69,_a6a,Menu,_a6b,lm,_a6c,_a6d,_a6e){
var _a6f=_a6d;
if(has("dojo-bidi")){
_a6f=_a66("dijit.layout._TabButton",_a6f,{_setLabelAttr:function(_a70){
this.inherited(arguments);
this.applyTextDir(this.iconNode,this.iconNode.alt);
}});
}
var _a71=_a66("dijit.layout.TabController",_a69,{baseClass:"dijitTabController",templateString:"<div role='tablist' data-dojo-attach-event='onkeydown:onkeydown'></div>",tabPosition:"top",buttonWidget:_a6f,startup:function(){
this.inherited(arguments);
this.connect(this,"onAddChild",function(page,_a72){
var _a73=this;
page.controlButton._curamPageId=page.id;
page.controlButton.connect(page.controlButton,"_setCuramVisibleAttr",function(){
if(page.controlButton.curamVisible){
var _a74=dojo.map(_a73.getChildren(),function(btn){
return btn._curamPageId;
});
var _a75=curam.tab.getTabWidgetId(curam.tab.getContainerTab(page.domNode));
var _a76=curam.util.TabNavigation.getInsertIndex(_a75,_a74,page.id);
var _a77=false;
if(curam.util.getTopmostWindow().curam.util.tabButtonClicked&&(document.activeElement===curam.util.getTopmostWindow().curam.util.tabButtonClicked)){
_a77=true;
}
_a73.addChild(page.controlButton,_a76);
if(_a77&&(document.activeElement!==curam.util.getTopmostWindow().curam.util.tabButtonClicked)){
curam.util.getTopmostWindow().curam.util.tabButtonClicked.focus();
}
}else{
var _a78=page.controlButton;
if(dojo.indexOf(_a73.getChildren(),_a78)!=-1){
_a73.removeChild(_a78);
}
}
});
});
},buttonWidgetCloseClass:"dijitTabCloseButton",postCreate:function(){
this.inherited(arguments);
lm.register("dijit/layout/TabController",this);
var _a79=new Menu({id:this.id+"_Menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,targetNodeIds:[this.domNode],selector:function(node){
return _a68.contains(node,"dijitClosable")&&!_a68.contains(node,"dijitTabDisabled");
}});
this.own(_a79);
var _a7a=i18n.getLocalization("dijit","common"),_a7b=this;
_a79.addChild(new _a6b({label:_a7a.itemClose,ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,onClick:function(evt){
var _a7c=_a6a.byNode(this.getParent().currentTarget);
_a7b.onCloseButtonClick(_a7c.page);
}}));
var _a7d=i18n.getLocalization("curam.application","TabMenu"),_a7e=new _a6e({onClickValue:"_onClickAll",label:_a7d["close.all.tabs.text"],dir:this.dir,lang:this.lang,textDir:this.textDir,onClick:function(evt){
this._onClickAll();
}});
_a79.addChild(_a7e);
},onButtonClick:function(page){
if(!page.controlButton.get("curamDisabled")){
var _a7f=dijit.byId(this.containerId);
_a7f.selectChild(page);
}
}});
_a71.TabButton=_a6f;
return _a71;
});
},"dijit/_MenuBase":function(){
define(["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/lang","dojo/mouse","dojo/on","dojo/window","./a11yclick","./registry","./_Widget","./_CssStateMixin","./_KeyNavContainer","./_TemplatedMixin"],function(_a80,_a81,dom,_a82,_a83,lang,_a84,on,_a85,_a86,_a87,_a88,_a89,_a8a,_a8b){
return _a81("dijit._MenuBase",[_a88,_a8b,_a8a,_a89],{selected:null,_setSelectedAttr:function(item){
if(this.selected!=item){
if(this.selected){
this.selected._setSelected(false);
this._onChildDeselect(this.selected);
}
if(item){
item._setSelected(true);
}
this._set("selected",item);
}
},activated:false,_setActivatedAttr:function(val){
_a83.toggle(this.domNode,"dijitMenuActive",val);
_a83.toggle(this.domNode,"dijitMenuPassive",!val);
this._set("activated",val);
},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:false,childSelector:function(node){
var _a8c=_a87.byNode(node);
return node.parentNode==this.containerNode&&_a8c&&_a8c.focus;
},postCreate:function(){
var self=this,_a8d=typeof this.childSelector=="string"?this.childSelector:lang.hitch(this,"childSelector");
this.own(on(this.containerNode,on.selector(_a8d,_a84.enter),function(){
self.onItemHover(_a87.byNode(this));
}),on(this.containerNode,on.selector(_a8d,_a84.leave),function(){
self.onItemUnhover(_a87.byNode(this));
}),on(this.containerNode,on.selector(_a8d,_a86),function(evt){
self.onItemClick(_a87.byNode(this),evt);
evt.stopPropagation();
}),on(this.containerNode,on.selector(_a8d,"focusin"),function(){
self._onItemFocus(_a87.byNode(this));
}));
this.inherited(arguments);
},onKeyboardSearch:function(item,evt,_a8e,_a8f){
this.inherited(arguments);
if(!!item&&(_a8f==-1||(!!item.popup&&_a8f==1))){
this.onItemClick(item,evt);
}
},_keyboardSearchCompare:function(item,_a90){
if(!!item.shortcutKey){
return _a90==item.shortcutKey.toLowerCase()?-1:0;
}
return this.inherited(arguments)?1:0;
},onExecute:function(){
},onCancel:function(){
},_moveToPopup:function(evt){
if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled){
this.onItemClick(this.focusedChild,evt);
}else{
var _a91=this._getTopMenu();
if(_a91&&_a91._isMenuBar){
_a91.focusNext();
}
}
},_onPopupHover:function(){
this.set("selected",this.currentPopupItem);
this._stopPendingCloseTimer();
},onItemHover:function(item){
if(this.activated){
this.set("selected",item);
if(item.popup&&!item.disabled&&!this.hover_timer){
this.hover_timer=this.defer(function(){
this._openItemPopup(item);
},this.popupDelay);
}
}else{
if(this.passivePopupDelay<Infinity){
if(this.passive_hover_timer){
this.passive_hover_timer.remove();
}
this.passive_hover_timer=this.defer(function(){
this.onItemClick(item,{type:"click"});
},this.passivePopupDelay);
}
}
this._hoveredChild=item;
item._set("hovering",true);
},_onChildDeselect:function(item){
this._stopPopupTimer();
if(this.currentPopupItem==item){
this._stopPendingCloseTimer();
this._pendingClose_timer=this.defer(function(){
this._pendingClose_timer=null;
this.currentPopupItem=null;
item._closePopup();
},this.popupDelay);
}
},onItemUnhover:function(item){
if(this._hoveredChild==item){
this._hoveredChild=null;
}
if(this.passive_hover_timer){
this.passive_hover_timer.remove();
this.passive_hover_timer=null;
}
item._set("hovering",false);
},_stopPopupTimer:function(){
if(this.hover_timer){
this.hover_timer=this.hover_timer.remove();
}
},_stopPendingCloseTimer:function(){
if(this._pendingClose_timer){
this._pendingClose_timer=this._pendingClose_timer.remove();
}
},_getTopMenu:function(){
for(var top=this;top.parentMenu;top=top.parentMenu){
}
return top;
},onItemClick:function(item,evt){
if(this.passive_hover_timer){
this.passive_hover_timer.remove();
}
this.focusChild(item);
if(item.disabled){
return false;
}
if(item.popup){
this.set("selected",item);
this.set("activated",true);
var _a92=/^key/.test(evt._origType||evt.type)||(evt.clientX==0&&evt.clientY==0);
this._openItemPopup(item,_a92);
}else{
this.onExecute();
item._onClick?item._onClick(evt):item.onClick(evt);
}
},_openItemPopup:function(_a93,_a94){
if(_a93==this.currentPopupItem){
return;
}
if(this.currentPopupItem){
this._stopPendingCloseTimer();
this.currentPopupItem._closePopup();
}
this._stopPopupTimer();
var _a95=_a93.popup;
_a95.parentMenu=this;
this.own(this._mouseoverHandle=on.once(_a95.domNode,"mouseover",lang.hitch(this,"_onPopupHover")));
var self=this;
_a93._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){
if(_a94){
self.focusChild(_a93);
}
self._cleanUp();
},onExecute:lang.hitch(this,"_cleanUp",true),onClose:function(){
if(self._mouseoverHandle){
self._mouseoverHandle.remove();
delete self._mouseoverHandle;
}
}},_a94);
this.currentPopupItem=_a93;
},onOpen:function(){
this.isShowingNow=true;
this.set("activated",true);
},onClose:function(){
this.set("activated",false);
this.set("selected",null);
this.isShowingNow=false;
this.parentMenu=null;
},_closeChild:function(){
this._stopPopupTimer();
if(this.currentPopupItem){
if(this.focused){
_a82.set(this.selected.focusNode,"tabIndex",this.tabIndex);
this.selected.focusNode.focus();
}
this.currentPopupItem._closePopup();
this.currentPopupItem=null;
}
},_onItemFocus:function(item){
if(this._hoveredChild&&this._hoveredChild!=item){
this.onItemUnhover(this._hoveredChild);
}
this.set("selected",item);
},_onBlur:function(){
this._cleanUp(true);
this.inherited(arguments);
},_cleanUp:function(_a96){
this._closeChild();
if(typeof this.isShowingNow=="undefined"){
this.set("activated",false);
}
if(_a96){
this.set("selected",null);
}
}});
});
},"curam/ModalUIMController":function(){
define(["dojo/text!curam/layout/resources/ModalUIMController.html","dojo/_base/declare","dojo/parser","curam/inspection/Layer","curam/UIMController","curam/debug","curam/util/onLoad"],function(_a97,_a98,_a99,_a9a,_a9b){
var _a9c=_a98("curam.ModalUIMController",[_a9b],{startModalUIMController:LOCALISED_ACCESSIBILITY_MODAL_START,endModalUIMController:LOCALISED_ACCESSIBILITY_MODAL_END,templateString:_a97,constructor:function(args){
_a9a.register("curam/ModalUIMController",this);
}});
return _a9c;
});
},"dijit/layout/ScrollingTabController":function(){
define(["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/fx","dojo/_base/lang","dojo/on","dojo/query","dojo/dom-attr","curam/debug","dojo/sniff","../registry","dojo/text!./templates/ScrollingTabController.html","dojo/text!./templates/_ScrollingTabControllerButton.html","./TabController","./utils","../_WidgetsInTemplateMixin","../Menu","../MenuItem","../form/Button","../_HasDropDown","dojo/NodeList-dom","../a11yclick"],function(_a9d,_a9e,_a9f,_aa0,_aa1,fx,lang,on,_aa2,_aa3,_aa4,has,_aa5,_aa6,_aa7,_aa8,_aa9,_aaa,Menu,_aab,_aac,_aad){
var _aae=_a9e("dijit.layout.ScrollingTabController",[_aa8,_aaa],{baseClass:"dijitTabController dijitScrollingTabController",templateString:_aa6,useMenu:true,useSlider:true,tabStripClass:"",_minScroll:5,_setClassAttr:{node:"containerNode",type:"class"},_tabsWidth:-1,_tablistMenuItemIdSuffix:"_stcMi",buildRendering:function(){
this.inherited(arguments);
var n=this.domNode;
this.scrollNode=this.tablistWrapper;
this._initButtons();
if(!this.tabStripClass){
this.tabStripClass="dijitTabContainer"+this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"")+"None";
_a9f.add(n,"tabStrip-disabled");
}
_a9f.add(this.tablistWrapper,this.tabStripClass);
},onStartup:function(){
this.inherited(arguments);
this._postStartup=true;
this.own(on(this.containerNode,"attrmodified-label, attrmodified-iconclass",lang.hitch(this,function(evt){
if(this._dim){
this.resize(this._dim);
}
this.bustSizeCache=true;
this._tabsWidth=-1;
evt.detail.widget.domNode._width=0;
})));
},onAddChild:function(page,_aaf){
this.inherited(arguments);
var _ab0=page.id;
this.bustSizeCache=true;
this._tabsWidth=-1;
var _ab1=function(pid,_ab2){
var _ab3=null;
if(_ab2._menuBtn.dropDown){
var _ab4=dojo.query(pid+_ab2._tablistMenuItemIdSuffix,_ab2._menuBtn.dropDown.domNode)[0];
if(_ab4){
_ab3=dijit.byNode(_ab4);
}
}
return _ab3;
};
this.pane2button(_ab0).connect(this.pane2button(_ab0),"_setCuramVisibleAttr",lang.hitch(this,function(){
var _ab5=_ab1(_ab0,this);
if(_ab5){
this._setCuramVisibility(_ab5,_ab0);
}
}));
this.pane2button(_ab0).connect(this.pane2button(_ab0),"_setCuramDisabledAttr",lang.hitch(this,function(){
var _ab6=_ab1(_ab0,this);
if(_ab6){
this._setCuramAvailability(_ab6,_ab0);
}
}));
_aa1.set(this.containerNode,"width",(_aa1.get(this.containerNode,"width")+200)+"px");
this.containerNode._width=0;
},_setCuramVisibility:function(_ab7,_ab8){
var _ab9=this.pane2button(_ab8).curamVisible;
if(_ab9){
dojo.replaceClass(_ab7.domNode,"visible","hidden");
}else{
dojo.replaceClass(_ab7.domNode,"hidden","visible");
}
},_setCuramAvailability:function(_aba,_abb){
var _abc=!this.pane2button(_abb).curamDisabled;
_aba.disabled=!_abc;
if(_abc){
dojo.replaceClass(_aba.domNode,"enabled","disabled");
}else{
dojo.replaceClass(_aba.domNode,"disabled","enabled");
}
},_getNodeWidth:function(node){
if(!node._width){
node._width=_aa1.get(node,"width");
}
return node._width;
},destroyRendering:function(_abd){
_a9d.forEach(this._attachPoints,function(_abe){
delete this[_abe];
},this);
this._attachPoints=[];
_a9d.forEach(this._attachEvents,this.disconnect,this);
this.attachEvents=[];
},destroy:function(){
if(this._menuBtn){
this._menuBtn._curamOwnerController=null;
}
this.inherited(arguments);
},onRemoveChild:function(page,_abf){
var _ac0=this.pane2button(page.id);
if(this._selectedTab===_ac0.domNode){
this._selectedTab=null;
}
this.inherited(arguments);
this.bustSizeCache=true;
this._tabsWidth=-1;
},_initButtons:function(){
this.subscribe("tab.title.name.finished",this._measureBtns);
this._btnWidth=0;
this._buttons=_aa2("> .tabStripButton",this.domNode).filter(function(btn){
if((this.useMenu&&btn==this._menuBtn.domNode)||(this.useSlider&&(btn==this._rightBtn.domNode||btn==this._leftBtn.domNode))){
this._btnWidth+=_aa0.getMarginBoxSimple(btn).w;
_aa3.set(this._menuBtn,"title",_aa4.getProperty("dijit.layout.ScrollingTabController.navMenu.title"));
_aa3.set(this._menuBtn,"role","presentation");
_aa3.set(this._menuBtn,"tabindex",0);
return true;
}else{
_aa1.set(btn,"display","none");
return false;
}
},this);
this._menuBtn._curamOwnerController=this;
},_getTabsWidth:function(){
if(this._tabsWidth>-1){
return this._tabsWidth;
}
var _ac1=this.getChildren();
if(_ac1.length){
var _ac2=_ac1[this.isLeftToRight()?_ac1.length-1:0].domNode;
var _ac3=this._getNodeWidth(_ac2);
if(this.isLeftToRight()){
this._tabsWidth=_ac2.offsetLeft+_ac3;
}else{
var _ac4=_ac1[_ac1.length-1].domNode;
this._tabsWidth=_ac2.offsetLeft+_ac3-_ac4.offsetLeft;
}
return this._tabsWidth;
}else{
return 0;
}
},_enableBtn:function(_ac5){
var _ac6=this._getTabsWidth();
_ac5=_ac5||_aa1.get(this.scrollNode,"width");
return _ac6>0&&_ac5<_ac6;
},_measureBtns:function(){
if(this._enableBtn()&&this._rightBtn.domNode.style.display=="none"){
this.resize(this._dim);
if(this.isLeftToRight()){
this._rightBtn.set("disabled",true);
}else{
this._leftBtn.set("disabled",true);
}
}
},resize:function(dim){
if(dojo.query("> *",this.containerNode).length<1){
if(this.domNode.style.height!="1px"){
_aa1.set(this.domNode,"height","1px");
}
return;
}
if(!this.bustSizeCache&&this._dim&&dim&&this._dim.w==dim.w){
return;
}
this.bustSizeCache=false;
this.scrollNodeHeight=this.scrollNodeHeight||this.scrollNode.offsetHeight;
this._dim=dim;
this.scrollNode.style.height="auto";
var cb=this._contentBox=_aa9.marginBox2contentBox(this.domNode,{h:0,w:dim.w});
cb.h=this.scrollNodeHeight;
_aa0.setContentSize(this.domNode,cb);
var _ac7=this._enableBtn(this._contentBox.w);
this._buttons.style("display",_ac7?"":"none");
this._leftBtn.region="left";
this._rightBtn.region="right";
this._menuBtn.region=this.isLeftToRight()?"right":"left";
_aa3.set(this._leftBtn,"title",_aa4.getProperty("dijit.layout.ScrollingTabController.navLeft.title"));
_aa3.set(this._rightBtn,"title",_aa4.getProperty("dijit.layout.ScrollingTabController.navRight.title"));
_aa3.set(this._rightBtn,"role","presentation");
_aa3.set(this._leftBtn,"role","presentation");
var _ac8;
if(_ac7){
_ac8=dijit.layout.utils.layoutChildren(this.domNode,this._contentBox,[this._menuBtn,this._leftBtn,this._rightBtn,{domNode:this.scrollNode,layoutAlign:"client",fakeWidget:true}]);
}else{
_ac8=dijit.layout.utils.layoutChildren(this.domNode,this._contentBox,[{domNode:this.scrollNode,layoutAlign:"client",fakeWidget:true}]);
}
this.scrollNode._width=_ac8.client.w;
if(this._selectedTab){
if(this._anim&&this._anim.status()=="playing"){
this._anim.stop();
}
this.scrollNode.scrollLeft=this._convertToScrollLeft(this._getScrollForSelectedTab());
}
this._setButtonClass(this._getScroll());
this._postResize=true;
return {h:this._contentBox.h,w:dim.w};
},_getScroll:function(){
return (this.isLeftToRight()||has("ie")<8||(has("trident")&&has("quirks"))||has("webkit"))?this.scrollNode.scrollLeft:_aa1.get(this.containerNode,"width")-_aa1.get(this.scrollNode,"width")+(has("trident")||has("edge")?-1:1)*this.scrollNode.scrollLeft;
},_convertToScrollLeft:function(val){
if(this.isLeftToRight()||has("ie")<8||(has("trident")&&has("quirks"))||has("webkit")){
return val;
}else{
var _ac9=_aa1.get(this.containerNode,"width")-_aa1.get(this.scrollNode,"width");
return (has("trident")||has("edge")?-1:1)*(val-_ac9);
}
},onSelectChild:function(page,_aca){
var tab=this.pane2button(page.id);
if(!tab){
return;
}
var node=tab.domNode;
if(node!=this._selectedTab){
this._selectedTab=node;
if(this._postResize){
var _acb=this._getNodeWidth(this.scrollNode);
if(this._getTabsWidth()<_acb){
tab.onClick(null);
tab.focus();
}else{
var sl=this._getScroll();
if(sl>node.offsetLeft||sl+_acb<node.offsetLeft+this._getNodeWidth(node)){
var anim=this.createSmoothScroll();
if(_aca){
anim.onEnd=function(){
tab.focus();
};
}
anim.play();
}else{
if(_aca){
tab.focus();
}
}
}
}
}
this.inherited(arguments);
var _acc=document.activeElement;
if(typeof _acc!=="undefined"&&_acc!=null){
if(_acc.className=="tabLabel"&&(_aa2(_acc).closest(".nav-panel")).length>0){
curam.util.setTabButtonClicked(_acc);
}
}
},_getScrollBounds:function(){
var _acd=this.getChildren(),_ace=this._getNodeWidth(this.scrollNode),_acf=this._getNodeWidth(this.containerNode),_ad0=_acf-_ace,_ad1=this._getTabsWidth();
if(_acd.length&&_ad1>_ace){
return {min:this.isLeftToRight()?0:_acd[_acd.length-1].domNode.offsetLeft,max:this.isLeftToRight()?_ad1-_ace:_ad0};
}else{
var _ad2=this.isLeftToRight()?0:_ad0;
return {min:_ad2,max:_ad2};
}
},_getScrollForSelectedTab:function(){
var w=this.scrollNode,n=this._selectedTab,_ad3=_aa1.get(this.scrollNode,"width"),_ad4=this._getScrollBounds();
var pos=(n.offsetLeft+_aa1.get(n,"width")/2)-_ad3/2;
pos=Math.min(Math.max(pos,_ad4.min),_ad4.max);
return pos;
},createSmoothScroll:function(x){
if(arguments.length>0){
var _ad5=this._getScrollBounds();
x=Math.min(Math.max(x,_ad5.min),_ad5.max);
}else{
x=this._getScrollForSelectedTab();
}
if(this._anim&&this._anim.status()=="playing"){
this._anim.stop();
}
var self=this,w=this.scrollNode,anim=new fx.Animation({beforeBegin:function(){
if(this.curve){
delete this.curve;
}
var oldS=w.scrollLeft,newS=self._convertToScrollLeft(x);
anim.curve=new fx._Line(oldS,newS);
},onAnimate:function(val){
w.scrollLeft=val;
}});
this._anim=anim;
this._setButtonClass(x);
return anim;
},_getBtnNode:function(e){
var n=e.target;
while(n&&!_a9f.contains(n,"tabStripButton")){
n=n.parentNode;
}
return n;
},doSlideRight:function(e){
this.doSlide(1,this._getBtnNode(e));
},doSlideLeft:function(e){
this.doSlide(-1,this._getBtnNode(e));
},doSlide:function(_ad6,node){
if(node&&_a9f.contains(node,"dijitTabDisabled")){
return;
}
var _ad7=_aa1.get(this.scrollNode,"width");
var d=(_ad7*0.75)*_ad6;
var to=this._getScroll()+d;
this._setButtonClass(to);
this.createSmoothScroll(to).play();
},_setButtonClass:function(_ad8){
var _ad9=this._getScrollBounds();
this._leftBtn.set("disabled",_ad8<=_ad9.min);
this._rightBtn.set("disabled",_ad8>=_ad9.max);
}});
var _ada=_a9e("dijit.layout._ScrollingTabControllerButtonMixin",null,{baseClass:"dijitTab tabStripButton",templateString:_aa7,tabIndex:"",isFocusable:function(){
return false;
}});
_a9e("dijit.layout._ScrollingTabControllerButton",[_aac,_ada]);
_a9e("dijit.layout._ScrollingTabControllerMenuButton",[_aac,_aad,_ada],{containerId:"",tabIndex:"-1",isLoaded:function(){
return false;
},loadDropDown:function(_adb){
this.dropDown=new Menu({id:this.containerId+"_menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir});
var _adc=_aa5.byId(this.containerId);
_a9d.forEach(_adc.getChildren(),function(page){
var _add=new _aab({id:page.id+"_stcMi",label:page.title,iconClass:page.iconClass,disabled:page.disabled,ownerDocument:this.ownerDocument,dir:page.dir,lang:page.lang,textDir:page.textDir||_adc.textDir,onClick:function(){
_adc.selectChild(page);
}});
this.dropDown.addChild(_add);
},this);
dojo.forEach(this.dropDown.getChildren(),lang.hitch(this,function(_ade){
var _adf=_ade.id.split(this._curamOwnerController._tablistMenuItemIdSuffix)[0];
this._curamOwnerController._setCuramAvailability(_ade,_adf);
this._curamOwnerController._setCuramVisibility(_ade,_adf);
dojo.connect(_ade,"destroy",function(){
setDynState=null;
});
}));
_adb();
},closeDropDown:function(_ae0){
this.inherited(arguments);
if(this.dropDown){
this._popupStateNode.removeAttribute("aria-owns");
this.dropDown.destroyRecursive();
delete this.dropDown;
}
}});
return _aae;
});
},"dijit/form/_ListMouseMixin":function(){
define(["dojo/_base/declare","dojo/on","dojo/touch","./_ListBase"],function(_ae1,on,_ae2,_ae3){
return _ae1("dijit.form._ListMouseMixin",_ae3,{postCreate:function(){
this.inherited(arguments);
this.domNode.dojoClick=true;
this._listConnect("click","_onClick");
this._listConnect("mousedown","_onMouseDown");
this._listConnect("mouseup","_onMouseUp");
this._listConnect("mouseover","_onMouseOver");
this._listConnect("mouseout","_onMouseOut");
},_onClick:function(evt,_ae4){
this._setSelectedAttr(_ae4,false);
if(this._deferredClick){
this._deferredClick.remove();
}
this._deferredClick=this.defer(function(){
this._deferredClick=null;
this.onClick(_ae4);
});
},_onMouseDown:function(evt,_ae5){
if(this._hoveredNode){
this.onUnhover(this._hoveredNode);
this._hoveredNode=null;
}
this._isDragging=true;
this._setSelectedAttr(_ae5,false);
},_onMouseUp:function(evt,_ae6){
this._isDragging=false;
var _ae7=this.selected;
var _ae8=this._hoveredNode;
if(_ae7&&_ae6==_ae7){
this.defer(function(){
this._onClick(evt,_ae7);
});
}else{
if(_ae8){
this.defer(function(){
this._onClick(evt,_ae8);
});
}
}
},_onMouseOut:function(evt,_ae9){
if(this._hoveredNode){
this.onUnhover(this._hoveredNode);
this._hoveredNode=null;
}
if(this._isDragging){
this._cancelDrag=(new Date()).getTime()+1000;
}
},_onMouseOver:function(evt,_aea){
if(this._cancelDrag){
var time=(new Date()).getTime();
if(time>this._cancelDrag){
this._isDragging=false;
}
this._cancelDrag=null;
}
this._hoveredNode=_aea;
this.onHover(_aea);
if(this._isDragging){
this._setSelectedAttr(_aea,false);
}
}});
});
},"curam/util/Constants":function(){
define(["curam/define"],function(){
curam.define.singleton("curam.util.Constants",{RETURN_PAGE_PARAM:"__o3rpu"});
return curam.util.Constants;
});
},"curam/tab/TabSessionManager":function(){
define(["dojo/_base/declare","curam/debug","curam/tab","curam/util/AutoRecoveryAPI"],function(_aeb,_aec,tab,_aed){
var _aee=_aeb("curam.tab.TabSessionManager",null,{init:function(_aef){
if(_aef){
this._directBrowseURL=_aef;
}
new curam.ui.ClientDataAccessor().getRaw("/data/tab/get",dojo.hitch(this,this._restoreTabSession),dojo.hitch(this,this._handleGetTabFailure));
},_handleGetTabFailure:function(_af0,_af1){
var _af2=curam.tab.getTabContainer();
var _af3=dojo.toJson(_af0);
this._log(_aec.getProperty("curam.tab.TabSessionManager.error")+_af3);
var tab=new dojox.layout.ContentPane({title:"Error",closable:true,content:"An error occurred. Try refreshing the browser or contact your "+"administrator if it persists. Error: "+_af0.message});
_af2.addChild(tab);
},_restoreTabSession:function(_af4,_af5){
var _af6=[];
var _af7=[];
var _af8=[];
curam.tab.getTabController().MAX_NUM_TABS=_af4.maxTabs;
curam.tab.getTabController().TABS_SEQUENTIAL_ORDER=_af4.tabsInSequence;
curam.widget.ProgressSpinner.PROGRESS_WIDGET_ENABLED=_af4.progressWidgetEnabled;
curam.widget.ProgressSpinner.PROGRESS_WIDGET_DEFAULT_THRESHOLD=_af4.progressWidgetThreshold;
curam.widget.ProgressSpinner.PROGRESS_WIDGET_TIMEOUT_MAX=_af4.progressWidgetTimeoutMax;
curam.widget.ProgressSpinner.init();
var _af9=this._isNewSession();
var _afa=_af9?null:this._getPrevSelectedTab();
var _afb=this._getHomePageTab();
_afa=_afa?_afa:_afb;
this.tabSelected(_afa);
_af8[_afb.sectionID]=true;
if(_af4&&_af4.tabs&&_af4.tabs.length>0){
var tabs=_af4.tabs;
this._log(_aec.getProperty("curam.tab.TabSessionManager.previous")+tabs.length+" "+_aec.getProperty("curam.tab.TabSessionManager.tabs"));
for(var i=0;i<tabs.length;i++){
var _afc=curam.tab.TabDescriptor.fromJson(tabs[i]);
if(_afc.tabSignature==_afb.tabSignature){
if(!_af9){
if(this._directBrowseURL){
_afa=_afc;
}else{
_afb=_afc;
}
}
}else{
if(_afc.sectionID==_afa.sectionID){
_af6.push(_afc);
}else{
_af7.push(_afc);
}
}
_af8[_afc.sectionID]=true;
}
if(_afb.sectionID==_afa.sectionID){
_af6.unshift(_afb);
}else{
_af7.unshift(_afb);
}
}else{
this._log(_aec.getProperty("curam.tab.TabSessionManager.no.session"));
_af6.push(_afb);
}
this._restoreSectionTabs(_af6,_afa);
this._restoreSectionTabs(_af7,null);
this._selectedTD=_afa;
if(AUTORECOVERY_ENABLED==="true"){
this._restoreModal(_af6,_af7);
}
this._connectSelectionListeners(_af8);
if(this._directBrowseURL){
var _afd=this._createDirectBrowseClosure();
var _afe=curam.util.getTopmostWindow();
var _aff=_afe.dojo.subscribe("/curam/main-content/page/loaded",null,function(_b00,_b01){
var that=_afd.getThis();
var _b02=that._directBrowseURL;
var _b03=that._selectedTD.tabContent.pageID;
if(_b00===_b03){
require(["curam/util/Navigation"],function(nav){
nav.goToUrl(_b02);
});
that._selectedTD.tabContent.pageID=_b02.replace(/Page.do\??.*/,"");
that.tabSelected(that._selectedTD);
dojo.unsubscribe(_aff);
}
});
}
},_createDirectBrowseClosure:function(){
var that=this;
return {getThis:function(){
return that;
}};
},_restoreSectionTabs:function(_b04,_b05){
this._log(_aec.getProperty("curam.tab.TabSessionManager.saved.tabs"));
for(var i=0;i<_b04.length;i++){
var _b06=_b04[i];
this._log(_aec.getProperty("curam.tab.TabSessionManager.saved.tab"),_b06,i);
dojo.publish(curam.tab.getTabController().TAB_TOPIC,[new curam.ui.OpenTabEvent(_b06,null,this._isOpenInBackground(_b06,_b05,i))]);
}
},_restoreModal:function(_b07,_b08){
this._log(_aec.getProperty("curam.tab.TabSessionManager.restore.modal"));
this._tabLoadedCount=0;
this._tabCountForCurrentSection=_b07.length;
this._tabCountForOtherSections=0;
var _b09=[];
for(var i=0;i<_b08.length;i++){
if(!_b09.includes(_b08[i].sectionID)){
_b09.push(_b08[i].sectionID);
this._tabCountForOtherSections++;
}
}
var _b0a=curam.util.getTopmostWindow().dojo.subscribe("/curam/main-content/page/loaded",this,function(_b0b,_b0c,_b0d){
this._tabLoadedCount++;
var _b0e=false;
if(_b0d.tabDescriptor.openInBackground===false){
_b0e=true;
}else{
if(this._tabCountForCurrentSection===0&&this._tabLoadedCount===this._tabCountForOtherSections){
_b0e=true;
}else{
if(this._tabCountForCurrentSection+this._tabCountForOtherSections<=1){
_b0e=true;
}
}
}
if(_b0e){
dojo.publish("curam/tab/restoreModal");
dojo.unsubscribe(_b0a);
}
});
},_connectSelectionListeners:function(_b0f){
var _b10=false;
for(var _b11 in _b0f){
if(curam.tab.getTabContainer(_b11)){
dojo.subscribe(curam.tab.getTabContainer(_b11).id+"-selectChild",dojo.hitch(this,this.tabContentPaneSelected));
_b10=true;
}
}
dojo.subscribe(curam.tab.SECTION_TAB_CONTAINER_ID+"-selectChild",dojo.hitch(this,this.tabSectionSelected));
return _b10;
},tabUpdated:function(_b12){
var _b13=sessionStorage.getItem("fileEditWigetDialog");
if(!_b13){
this._log(_aec.getProperty("curam.tab.TabSessionManager.saving.tab"),_b12);
new curam.ui.ClientDataAccessor().set("/data/tab/update",_b12.toJson());
}else{
sessionStorage.removeItem("fileEditWigetDialog");
}
},tabClosed:function(_b14){
this._log(_aec.getProperty("curam.tab.TabSessionManager.tab.closed"),_b14);
new curam.ui.ClientDataAccessor().set("/data/tab/close",_b14.toJson());
},tabSelected:function(_b15){
this._log(_aec.getProperty("curam.tab.TabSessionManager.selected.tab"),_b15);
if(_b15.tabSignature){
localStorage[curam.tab.TabSessionManager.SELECTED_TAB_KEY]=_b15.toJson();
this._log(_aec.getProperty("curam.tab.TabSessionManager.recorded"),_b15);
}else{
this._log(_aec.getProperty("curam.tab.TabSessionManager.not.recorded"),_b15);
}
curam.debug.log("curam.tab.TabSessionManager.tabSelected calling curam.util.setBrowserTabTitle");
curam.util.setBrowserTabTitle();
},tabContentPaneSelected:function(_b16){
if(_b16.tabDescriptor){
this.tabSelected(_b16.tabDescriptor);
dojo.publish("curam/tab/selected",[_b16.id]);
}else{
this._log(_aec.getProperty("curam.tab.TabSessionManager.no.descriptor"));
}
if(_b16.isLoaded){
curam.util.TabActionsMenu.setInlinedTabMenuItemsDisplayed(_b16.id);
}
},tabSectionSelected:function(_b17){
var _b18=false;
if(_b17){
var id=_b17.id;
this._log(_aec.getProperty("curam.tab.TabSessionManager.new.section")+" '"+id+"'.");
var _b19=id.substring(0,id.length-4);
var _b1a=curam.tab.getSelectedTab(_b19);
if(_b1a){
this._log(_aec.getProperty("curam.tab.TabSessionManager.changing.selection"));
this.tabContentPaneSelected(_b1a);
_b18=true;
}else{
this._log(_aec.getProperty("curam.tab.TabSessionManager.not.changing.selection"));
}
}else{
this._log(_aec.getProperty("curam.tab.TabSessionManager.no.container"));
}
curam.debug.log("curam.tab.TabSessionManager.tabSectionSelected calling curam.util.setBrowserTabTitle");
curam.util.setBrowserTabTitle();
return _b18;
},_isNewSession:function(){
return false;
},_getPrevSelectedTab:function(){
this._log(_aec.getProperty("curam.tab.TabSessionManager.previous.tab"));
var _b1b;
_b1b=localStorage[curam.tab.TabSessionManager.SELECTED_TAB_KEY];
var _b1c=null;
if(_b1b){
_b1c=curam.tab.TabDescriptor.fromJson(_b1b);
this._log(_aec.getProperty("curam.tab.TabSessionManager.previous.tab.found"),_b1c);
}else{
this._log(_aec.getProperty("curam.tab.TabSessionManager.previous.tab.not.found"));
}
return _b1c;
},_getPrevSelectedModal:function(){
this._log(_aec.getProperty("curam.tab.TabSessionManager.previous.modal"));
var _b1d;
_b1d=localStorage[curam.tab.TabSessionManager.PREVIOUSLY_SELECTED_MODAL_KEY];
var _b1e=null;
if(_b1d){
_b1e=curam.tab.TabDescriptor.fromJson(_b1d);
this._log(_aec.getProperty("curam.tab.TabSessionManager.previous.modal.found"),_b1e);
}else{
this._log(_aec.getProperty("curam.tab.TabSessionManager.previous.modal.not.found"));
}
return _b1e;
},_isOpenInBackground:function(_b1f,_b20,pos){
var _b21=true;
if(_b20&&_b20.tabSignature==_b1f.tabSignature){
this._log(_aec.getProperty("curam.tab.TabSessionManager.foreground"),_b1f,pos);
_b21=false;
}else{
this._log(_aec.getProperty("curam.tab.TabSessionManager.background"),_b1f,pos);
}
return _b21;
},_getHomePageTab:function(){
this._log(_aec.getProperty("curam.tab.TabSessionManager.home.page")+" '"+USER_HOME_PAGE_ID+"'.");
if(!USER_HOME_PAGE_TAB_ASSOC.tabIDs||!USER_HOME_PAGE_TAB_ASSOC.sectionID){
throw new Error("The application cannot be launched because the home page, '"+USER_HOME_PAGE_ID+"', has not been associated with a section or "+" tab.");
}
var _b22=USER_HOME_PAGE_TAB_ASSOC.tabIDs[0];
var _b23=USER_HOME_PAGE_TAB_ASSOC.sectionID;
var _b24=new curam.tab.TabDescriptor(_b23,_b22);
var _b25=new curam.ui.PageRequest(USER_HOME_PAGE_ID,true);
_b24.isHomePage=true;
_b24.setTabSignature([],_b25,true);
_b24.setTabContent(_b25);
this._log(_aec.getProperty("curam.tab.TabSessionManager.created"),_b24);
return _b24;
},_log:function(msg,_b26,pos){
if(curam.debug.enabled()){
var _b27="TAB SESSION";
if(typeof pos=="number"){
_b27+=" [pos="+pos+"]";
}
curam.debug.log(_b27+": "+msg+(_b26?" "+_b26.toJson():""));
}
}});
dojo.mixin(curam.tab.TabSessionManager,{SELECTED_TAB_KEY:"curam_selected_tab",PREVIOUSLY_SELECTED_MODAL_KEY:"curam_previously_selected_modal",SELECTED_TAB_SESSION_KEY:"curam_selected_tab_session"});
return _aee;
});
},"dijit/tree/_dndSelector":function(){
define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/dnd/common","dojo/dom","dojo/mouse","dojo/on","dojo/touch","../a11yclick","./_dndContainer"],function(_b28,_b29,_b2a,lang,_b2b,dom,_b2c,on,_b2d,_b2e,_b2f){
return _b29("dijit.tree._dndSelector",_b2f,{constructor:function(){
this.selection={};
this.anchor=null;
this.events.push(on(this.tree.domNode,_b2d.press,lang.hitch(this,"onMouseDown")),on(this.tree.domNode,_b2d.release,lang.hitch(this,"onMouseUp")),on(this.tree.domNode,_b2d.move,lang.hitch(this,"onMouseMove")),on(this.tree.domNode,_b2e.press,lang.hitch(this,"onClickPress")),on(this.tree.domNode,_b2e.release,lang.hitch(this,"onClickRelease")));
},singular:false,getSelectedTreeNodes:function(){
var _b30=[],sel=this.selection;
for(var i in sel){
_b30.push(sel[i]);
}
return _b30;
},selectNone:function(){
this.setSelection([]);
return this;
},destroy:function(){
this.inherited(arguments);
this.selection=this.anchor=null;
},addTreeNode:function(node,_b31){
this.setSelection(this.getSelectedTreeNodes().concat([node]));
if(_b31){
this.anchor=node;
}
return node;
},removeTreeNode:function(node){
var _b32=_b28.filter(this.getSelectedTreeNodes(),function(_b33){
return !dom.isDescendant(_b33.domNode,node.domNode);
});
this.setSelection(_b32);
return node;
},isTreeNodeSelected:function(node){
return node.id&&!!this.selection[node.id];
},setSelection:function(_b34){
var _b35=this.getSelectedTreeNodes();
_b28.forEach(this._setDifference(_b35,_b34),lang.hitch(this,function(node){
node.setSelected(false);
if(this.anchor==node){
delete this.anchor;
}
delete this.selection[node.id];
}));
_b28.forEach(this._setDifference(_b34,_b35),lang.hitch(this,function(node){
node.setSelected(true);
this.selection[node.id]=node;
}));
this._updateSelectionProperties();
},_setDifference:function(xs,ys){
_b28.forEach(ys,function(y){
y.__exclude__=true;
});
var ret=_b28.filter(xs,function(x){
return !x.__exclude__;
});
_b28.forEach(ys,function(y){
delete y["__exclude__"];
});
return ret;
},_updateSelectionProperties:function(){
var _b36=this.getSelectedTreeNodes();
var _b37=[],_b38=[];
_b28.forEach(_b36,function(node){
var ary=node.getTreePath();
_b38.push(node);
_b37.push(ary);
},this);
var _b39=_b28.map(_b38,function(node){
return node.item;
});
this.tree._set("paths",_b37);
this.tree._set("path",_b37[0]||[]);
this.tree._set("selectedNodes",_b38);
this.tree._set("selectedNode",_b38[0]||null);
this.tree._set("selectedItems",_b39);
this.tree._set("selectedItem",_b39[0]||null);
},onClickPress:function(e){
if(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(e.target,this.current)){
return;
}
if(e.type=="mousedown"&&_b2c.isLeft(e)){
e.preventDefault();
}
var _b3a=e.type=="keydown"?this.tree.focusedChild:this.current;
if(!_b3a){
return;
}
var copy=_b2b.getCopyKeyState(e),id=_b3a.id;
if(!this.singular&&!e.shiftKey&&this.selection[id]){
this._doDeselect=true;
return;
}else{
this._doDeselect=false;
}
this.userSelect(_b3a,copy,e.shiftKey);
},onClickRelease:function(e){
if(!this._doDeselect){
return;
}
this._doDeselect=false;
this.userSelect(e.type=="keyup"?this.tree.focusedChild:this.current,_b2b.getCopyKeyState(e),e.shiftKey);
},onMouseMove:function(){
this._doDeselect=false;
},onMouseDown:function(){
},onMouseUp:function(){
},_compareNodes:function(n1,n2){
if(n1===n2){
return 0;
}
if("sourceIndex" in document.documentElement){
return n1.sourceIndex-n2.sourceIndex;
}else{
if("compareDocumentPosition" in document.documentElement){
return n1.compareDocumentPosition(n2)&2?1:-1;
}else{
if(document.createRange){
var r1=doc.createRange();
r1.setStartBefore(n1);
var r2=doc.createRange();
r2.setStartBefore(n2);
return r1.compareBoundaryPoints(r1.END_TO_END,r2);
}else{
throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");
}
}
}
},userSelect:function(node,_b3b,_b3c){
if(this.singular){
if(this.anchor==node&&_b3b){
this.selectNone();
}else{
this.setSelection([node]);
this.anchor=node;
}
}else{
if(_b3c&&this.anchor){
var cr=this._compareNodes(this.anchor.rowNode,node.rowNode),_b3d,end,_b3e=this.anchor;
if(cr<0){
_b3d=_b3e;
end=node;
}else{
_b3d=node;
end=_b3e;
}
var _b3f=[];
while(_b3d!=end){
_b3f.push(_b3d);
_b3d=this.tree._getNext(_b3d);
}
_b3f.push(end);
this.setSelection(_b3f);
}else{
if(this.selection[node.id]&&_b3b){
this.removeTreeNode(node);
}else{
if(_b3b){
this.addTreeNode(node,true);
}else{
this.setSelection([node]);
this.anchor=node;
}
}
}
}
},getItem:function(key){
var _b40=this.selection[key];
return {data:_b40,type:["treeNode"]};
},forInSelectedItems:function(f,o){
o=o||_b2a.global;
for(var id in this.selection){
f.call(o,this.getItem(id),id,this);
}
}});
});
},"dijit/_OnDijitClickMixin":function(){
define(["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/has","./a11yclick"],function(on,_b41,keys,_b42,has,_b43){
var ret=_b42("dijit._OnDijitClickMixin",null,{connect:function(obj,_b44,_b45){
return this.inherited(arguments,[obj,_b44=="ondijitclick"?_b43:_b44,_b45]);
}});
ret.a11yclick=_b43;
return ret;
});
},"curam/pagination":function(){
define(["dojo/parser","dojo/dom-class","dojo/dom-construct","dojo/dom-attr","curam/debug","curam/define","curam/pagination/ControlPanel","curam/pagination/StateController"],function(_b46,_b47,_b48,_b49,_b4a){
curam.define.singleton("curam.pagination",{defaultPageSize:15,threshold:15,listModels:{},ROW_COUNT_CLASS_NAME:"numRows-",ESC_SCRIPT_START:"<!--@pg@",ESC_SCRIPT_END:"@pg@-->",localizedStrings:{firstPage_btn:"|<",firstPage_title:"$not-localized$ First page",prevPage_btn:"<",prevPage_title:"$not-localized$ Previous page",nextPage_btn:">",nextPage_title:"$not-localized$ Next page",lastPage_btn:">|",lastPage_title:"$not-localized$ Last page",pageSize_title:"$not-localized$ Page size",pagination_info:"$not-localized$ Displaying rows %s to %s out of %s",page_title:"Go to page"},addPagination:function(_b4b,_b4c){
var _b4d=_b4b.getRowCount();
var _b4e=_b4b.getId();
if(_b4d<=curam.pagination.threshold){
dojo.setObject("curam.shortlist."+_b4e,true);
_b4b.showRange(1,_b4d);
return;
}
_b4a.log("curam.pagination.addPagination: listId: ",_b4e);
if(curam.pagination.listModels[_b4e]){
throw "Pagination on this list has already been initialized: "+_b4e;
}
curam.pagination.listModels[_b4e]=_b4b;
_b4a.log("curam.pagination.listModels : ",curam.pagination.listModels);
var gui=new curam.pagination.ControlPanel(_b4c);
var _b4f=new curam.pagination.StateController(_b4b,gui);
_b4b._controller=_b4f;
dojo.subscribe("/curam/list/toBeSorted",this,function(_b50){
_b4a.log(_b4a.getProperty("curam.omega3-util.received")+" /curam/list/toBeSorted "+_b4a.getProperty("curam.omega3-util.for")+":",_b50);
var _b51=curam.pagination.listModels[_b50];
_b51&&curam.pagination.unpackAll(_b51);
});
dojo.subscribe("/curam/list/sorted",this,function(_b52){
_b4a.log(_b4a.getProperty("curam.omega3-util.received")+" /curam/list/sorted "+_b4a.getProperty("curam.omega3-util.for")+":",_b52);
var _b53=curam.pagination.listModels[_b52];
_b53&&curam.pagination.paginatedListSorted(_b53);
});
_b4f.gotoFirst();
},paginatedListSorted:function(_b54){
_b54._controller.reset();
},unpackRows:function(_b55,_b56){
var _b57=_b55.innerHTML;
var _b58=_b47.contains(_b55,"has-row-actions");
if(_b58){
_b57=_b57.replace(new RegExp(curam.pagination.ESC_SCRIPT_START,"g"),"<script type=\"text/javascript\">");
_b57=_b57.replace(new RegExp(curam.pagination.ESC_SCRIPT_END,"g"),"</script>");
}
var _b59=_b48.toDom(_b57);
if(_b58){
dojo.query("script",_b59).forEach(function(s){
eval(s.innerHTML);
});
_b46.parse(_b59);
}
if(_b56){
_b56.appendChild(_b59);
}else{
_b48.place(_b59,_b55,"replace");
}
},unpackAll:function(_b5a){
_b5a._controller.gotoLast();
},readListContent:function(_b5b){
return dojo.query("tbody > *",_b5b).filter(function(n){
return typeof (n.tagName)!="undefined"&&(n.tagName=="TR"||(n.tagName=="SCRIPT"&&_b49.get(n,"type")=="list-row-container"));
});
},getNumRowsInBlock:function(_b5c){
var _b5d=dojo.filter(_b5c.className.split(" "),function(cn){
return cn.indexOf(curam.pagination.ROW_COUNT_CLASS_NAME)==0;
});
return parseInt(_b5d[0].split(curam.pagination.ROW_COUNT_CLASS_NAME)[1]);
}});
return curam.pagination;
});
},"dijit/layout/StackController":function(){
define(["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/keys","dojo/_base/lang","dojo/on","dojo/topic","../focus","../registry","../_Widget","../_TemplatedMixin","../_Container","../form/ToggleButton","dojo/touch"],function(_b5e,_b5f,_b60,_b61,keys,lang,on,_b62,_b63,_b64,_b65,_b66,_b67,_b68){
var _b69=_b5f("dijit.layout._StackButton",_b68,{tabIndex:"-1",closeButton:false,_aria_attr:"aria-selected",buildRendering:function(evt){
this.inherited(arguments);
(this.focusNode||this.domNode).setAttribute("role","tab");
}});
var _b6a=_b5f("dijit.layout.StackController",[_b65,_b66,_b67],{baseClass:"dijitStackController",templateString:"<span role='tablist' data-dojo-attach-event='onkeydown'></span>",containerId:"",buttonWidget:_b69,buttonWidgetCloseClass:"dijitStackCloseButton",pane2button:function(id){
return _b64.byId(this.id+"_"+id);
},postCreate:function(){
this.inherited(arguments);
this.own(_b62.subscribe(this.containerId+"-startup",lang.hitch(this,"onStartup")),_b62.subscribe(this.containerId+"-addChild",lang.hitch(this,"onAddChild")),_b62.subscribe(this.containerId+"-removeChild",lang.hitch(this,"onRemoveChild")),_b62.subscribe(this.containerId+"-selectChild",lang.hitch(this,"onSelectChild")),_b62.subscribe(this.containerId+"-containerKeyDown",lang.hitch(this,"onContainerKeyDown")));
this.containerNode.dojoClick=true;
this.own(on(this.containerNode,"click",lang.hitch(this,function(evt){
var _b6b=_b64.getEnclosingWidget(evt.target);
if(_b6b!=this.containerNode&&!_b6b.disabled&&_b6b.page){
for(var _b6c=evt.target;_b6c!==this.containerNode;_b6c=_b6c.parentNode){
if(_b60.contains(_b6c,this.buttonWidgetCloseClass)){
this.onCloseButtonClick(_b6b.page);
break;
}else{
if(_b6c==_b6b.domNode){
this.onButtonClick(_b6b.page);
break;
}
}
}
}
})));
},onStartup:function(info){
this.textDir=info.textDir;
_b5e.forEach(info.children,this.onAddChild,this);
if(info.selected){
this.onSelectChild(info.selected);
}
var _b6d=_b64.byId(this.containerId).containerNode,_b6e=lang.hitch(this,"pane2button"),_b6f={"title":"label","showtitle":"showLabel","iconclass":"iconClass","closable":"closeButton","tooltip":"title","disabled":"disabled","textdir":"textdir"},_b70=function(attr,_b71){
return on(_b6d,"attrmodified-"+attr,function(evt){
var _b72=_b6e(evt.detail&&evt.detail.widget&&evt.detail.widget.id);
if(_b72){
_b72.set(_b71,evt.detail.newValue);
}
});
};
for(var attr in _b6f){
this.own(_b70(attr,_b6f[attr]));
}
},destroy:function(_b73){
this.destroyDescendants(_b73);
this.inherited(arguments);
},onAddChild:function(page,_b74){
var Cls=lang.isString(this.buttonWidget)?lang.getObject(this.buttonWidget):this.buttonWidget;
var _b75=new Cls({id:this.id+"_"+page.id,name:this.id+"_"+page.id,label:page.title,disabled:page.disabled,ownerDocument:this.ownerDocument,dir:page.dir,lang:page.lang,textDir:page.textDir||this.textDir,showLabel:page.showTitle,iconClass:page.iconClass,closeButton:page.closable,title:page.tooltip,page:page});
this.addChild(_b75,_b74);
page.controlButton=_b75;
if(!this._currentChild){
this.onSelectChild(page);
}
var _b76=page._wrapper.getAttribute("aria-labelledby")?page._wrapper.getAttribute("aria-labelledby")+" "+_b75.id:_b75.id;
page._wrapper.removeAttribute("aria-label");
page._wrapper.setAttribute("aria-labelledby",_b76);
},onRemoveChild:function(page){
if(this._currentChild===page){
this._currentChild=null;
}
var _b77=this.pane2button(page.id);
if(_b77){
this.removeChild(_b77);
_b77.destroy();
}
delete page.controlButton;
},onSelectChild:function(page){
if(!page){
return;
}
if(this._currentChild){
var _b78=this.pane2button(this._currentChild.id);
_b78.set("checked",false);
_b78.focusNode.setAttribute("tabIndex","-1");
}
var _b79=this.pane2button(page.id);
_b79.set("checked",true);
this._currentChild=page;
_b79.focusNode.setAttribute("tabIndex","0");
var _b7a=_b64.byId(this.containerId);
},onButtonClick:function(page){
var _b7b=this.pane2button(page.id);
_b63.focus(_b7b.focusNode);
if(this._currentChild&&this._currentChild.id===page.id){
_b7b.set("checked",true);
}
var _b7c=_b64.byId(this.containerId);
_b7c.selectChild(page);
},onCloseButtonClick:function(page){
var _b7d=_b64.byId(this.containerId);
_b7d.closeChild(page);
if(this._currentChild){
var b=this.pane2button(this._currentChild.id);
if(b){
_b63.focus(b.focusNode||b.domNode);
}
}
},adjacent:function(_b7e){
if(!this.isLeftToRight()&&(!this.tabPosition||/top|bottom/.test(this.tabPosition))){
_b7e=!_b7e;
}
var _b7f=this.getChildren();
var idx=_b5e.indexOf(_b7f,this.pane2button(this._currentChild.id)),_b80=_b7f[idx];
var _b81;
do{
idx=(idx+(_b7e?1:_b7f.length-1))%_b7f.length;
_b81=_b7f[idx];
}while(_b81.disabled&&_b81!=_b80);
return _b81;
},onkeydown:function(e,_b82){
if(this.disabled||e.altKey){
return;
}
var _b83=null;
if(e.ctrlKey||!e._djpage){
switch(e.keyCode){
case keys.LEFT_ARROW:
case keys.UP_ARROW:
if(!e._djpage){
_b83=false;
}
break;
case keys.PAGE_UP:
if(e.ctrlKey){
_b83=false;
}
break;
case keys.RIGHT_ARROW:
case keys.DOWN_ARROW:
if(!e._djpage){
_b83=true;
}
break;
case keys.PAGE_DOWN:
if(e.ctrlKey){
_b83=true;
}
break;
case keys.HOME:
var _b84=this.getChildren();
for(var idx=0;idx<_b84.length;idx++){
var _b85=_b84[idx];
if(!_b85.disabled){
this.onButtonClick(_b85.page);
break;
}
}
e.stopPropagation();
e.preventDefault();
break;
case keys.END:
var _b84=this.getChildren();
for(var idx=_b84.length-1;idx>=0;idx--){
var _b85=_b84[idx];
if(!_b85.disabled){
this.onButtonClick(_b85.page);
break;
}
}
e.stopPropagation();
e.preventDefault();
break;
case keys.DELETE:
case "W".charCodeAt(0):
if(this._currentChild.closable&&(e.keyCode==keys.DELETE||e.ctrlKey)){
this.onCloseButtonClick(this._currentChild);
e.stopPropagation();
e.preventDefault();
}
break;
case keys.TAB:
if(e.ctrlKey){
this.onButtonClick(this.adjacent(!e.shiftKey).page);
e.stopPropagation();
e.preventDefault();
}
break;
}
if(_b83!==null){
this.onButtonClick(this.adjacent(_b83).page);
e.stopPropagation();
e.preventDefault();
}
}
},onContainerKeyDown:function(info){
info.e._djpage=info.page;
this.onkeydown(info.e);
}});
_b6a.StackButton=_b69;
return _b6a;
});
},"dojox/layout/ExpandoPane":function(){
define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/_base/connect","dojo/_base/event","dojo/_base/fx","dojo/dom-style","dojo/dom-class","dojo/dom-geometry","dojo/text!./resources/ExpandoPane.html","dijit/layout/ContentPane","dijit/_TemplatedMixin","dijit/_Contained","dijit/_Container"],function(_b86,lang,_b87,_b88,_b89,_b8a,_b8b,_b8c,_b8d,_b8e,_b8f,_b90,_b91,_b92,_b93){
_b86.experimental("dojox.layout.ExpandoPane");
return _b87("dojox.layout.ExpandoPane",[_b90,_b91,_b92,_b93],{attributeMap:lang.delegate(_b90.prototype.attributeMap,{title:{node:"titleNode",type:"innerHTML"}}),templateString:_b8f,easeOut:"dojo._DefaultEasing",easeIn:"dojo._DefaultEasing",duration:420,startExpanded:true,previewOpacity:0.75,previewOnDblClick:false,tabIndex:"0",_setTabIndexAttr:"iconNode",baseClass:"dijitExpandoPane",postCreate:function(){
this.inherited(arguments);
this._animConnects=[];
this._isHorizontal=true;
if(lang.isString(this.easeOut)){
this.easeOut=lang.getObject(this.easeOut);
}
if(lang.isString(this.easeIn)){
this.easeIn=lang.getObject(this.easeIn);
}
var _b94="",rtl=!this.isLeftToRight();
if(this.region){
switch(this.region){
case "trailing":
case "right":
_b94=rtl?"Left":"Right";
this._needsPosition="left";
break;
case "leading":
case "left":
_b94=rtl?"Right":"Left";
break;
case "top":
_b94="Top";
break;
case "bottom":
this._needsPosition="top";
_b94="Bottom";
break;
}
_b8d.add(this.domNode,"dojoxExpando"+_b94);
_b8d.add(this.iconNode,"dojoxExpandoIcon"+_b94);
this._isHorizontal=/top|bottom/.test(this.region);
}
_b8c.set(this.domNode,{overflow:"hidden",padding:0});
this.connect(this.domNode,"ondblclick",this.previewOnDblClick?"preview":"toggle");
this.iconNode.setAttribute("aria-controls",this.id);
this.iconNode.setAttribute("role","button");
this.iconNode.setAttribute("aria-label",this.titleNode.innerHTML);
if(this.previewOnDblClick){
this.connect(this.getParent(),"_layoutChildren",lang.hitch(this,function(){
this._isonlypreview=false;
}));
}
},_startupSizes:function(){
this._container=this.getParent();
this._closedSize=this._titleHeight=_b8e.getMarginBox(this.titleWrapper).h;
if(this.splitter){
var myid=this.id;
_b88.forEach(dijit.registry.toArray(),function(w){
if(w&&w.child&&w.child.id==myid){
this.connect(w,"_stopDrag","_afterResize");
}
},this);
}
this._currentSize=_b8e.getContentBox(this.domNode);
this._showSize=this._currentSize[(this._isHorizontal?"h":"w")];
this._setupAnims();
if(this.startExpanded){
this._showing=true;
}else{
this._showing=false;
this._hideWrapper();
this._hideAnim.gotoPercent(99,true);
}
this.domNode.setAttribute("aria-expanded",this._showing);
this._hasSizes=true;
},_afterResize:function(e){
var tmp=this._currentSize;
this._currentSize=_b8e.getMarginBox(this.domNode);
var n=this._currentSize[(this._isHorizontal?"h":"w")];
if(n>this._titleHeight){
if(!this._showing){
this._showing=!this._showing;
this._showEnd();
}
this._showSize=n;
this._setupAnims();
}else{
this._showSize=tmp[(this._isHorizontal?"h":"w")];
this._showing=false;
this._hideWrapper();
this._hideAnim.gotoPercent(89,true);
}
},_setupAnims:function(){
_b88.forEach(this._animConnects,_b89.disconnect);
var _b95={node:this.domNode,duration:this.duration},_b96=this._isHorizontal,_b97={},_b98=this._showSize,_b99=this._closedSize,_b9a={},_b9b=_b96?"height":"width",also=this._needsPosition;
_b97[_b9b]={end:_b98};
_b9a[_b9b]={end:_b99};
if(also){
_b97[also]={end:function(n){
var c=parseInt(n.style[also],10);
return c-_b98+_b99;
}};
_b9a[also]={end:function(n){
var c=parseInt(n.style[also],10);
return c+_b98-_b99;
}};
}
this._showAnim=_b8b.animateProperty(lang.mixin(_b95,{easing:this.easeIn,properties:_b97}));
this._hideAnim=_b8b.animateProperty(lang.mixin(_b95,{easing:this.easeOut,properties:_b9a}));
this._animConnects=[_b89.connect(this._showAnim,"onEnd",this,"_showEnd"),_b89.connect(this._hideAnim,"onEnd",this,"_hideEnd")];
},preview:function(){
if(!this._showing){
this._isonlypreview=!this._isonlypreview;
}
this.toggle();
},toggle:function(){
if(this._showing){
this._hideWrapper();
this._showAnim&&this._showAnim.stop();
this._hideAnim.play();
}else{
this._hideAnim&&this._hideAnim.stop();
this._showAnim.play();
}
this._showing=!this._showing;
this.domNode.setAttribute("aria-expanded",this._showing);
},_hideWrapper:function(){
_b8d.add(this.domNode,"dojoxExpandoClosed");
_b8c.set(this.cwrapper,{visibility:"hidden",opacity:"0",overflow:"hidden"});
},_showEnd:function(){
_b8c.set(this.cwrapper,{opacity:0,visibility:"visible"});
_b8b.anim(this.cwrapper,{opacity:this._isonlypreview?this.previewOpacity:1},227);
_b8d.remove(this.domNode,"dojoxExpandoClosed");
if(!this._isonlypreview){
setTimeout(lang.hitch(this._container,"layout"),15);
}else{
this._previewShowing=true;
this.resize();
}
},_hideEnd:function(){
if(!this._isonlypreview){
setTimeout(lang.hitch(this._container,"layout"),25);
}else{
this._previewShowing=false;
}
this._isonlypreview=false;
},resize:function(_b9c){
if(!this._hasSizes){
this._startupSizes(_b9c);
}
var _b9d=_b8e.getMarginBox(this.domNode);
this._contentBox={w:_b9c&&"w" in _b9c?_b9c.w:_b9d.w,h:(_b9c&&"h" in _b9c?_b9c.h:_b9d.h)-this._titleHeight};
_b8c.set(this.containerNode,"height",this._contentBox.h+"px");
if(_b9c){
_b8e.setMarginBox(this.domNode,_b9c);
}
this._layoutChildren();
this._setupAnims();
},_trap:function(e){
_b8a.stop(e);
}});
});
},"curam/layout/ExpandoPane":function(){
define(["dojo/_base/declare","curam/inspection/Layer","curam/smartPanel","curam/debug","curam/util","dojo/_base/lang","dojo/_base/array","dojo/dom-geometry","dojo/dom-style","dojo/_base/fx","dojo/dom-class","dojo/text!curam/layout/resources/ExpandoPane.html","dojo/dom-construct","dijit/focus","dojox/layout/ExpandoPane"],function(_b9e,_b9f,_ba0,_ba1,util,lang,_ba2,_ba3,_ba4,_ba5,_ba6,_ba7,_ba8,_ba9){
var _baa=_b9e("curam.layout.ExpandoPane",dojox.layout.ExpandoPane,{templateString:_ba7,startupCls:"",expandIconAlt:"",splitterAriaLabel:"",orient:"",postMixInProperties:function(){
var _bab="",rtl=!this.isLeftToRight();
if(this.region){
switch(this.region){
case "trailing":
case "right":
_bab=rtl?"Left":"Right";
this._needsPosition="left";
break;
case "leading":
case "left":
_bab=rtl?"Right":"Left";
break;
case "top":
_bab="Top";
break;
case "bottom":
this._needsPosition="top";
_bab="Bottom";
break;
}
this.orient=_bab;
}
if(!this.startExpanded){
this.startupCls="dojoxExpandoClosed";
}
this._openWidth=null;
if(!this.startExpanded){
if(this.srcNodeRef&&this.srcNodeRef.style.width){
this._openWidth=_ba4.get(this.srcNodeRef,"width");
var _bac=this.style;
if(_bac&&_bac.toLowerCase().indexOf("width")>-1){
var _bad=_bac.split(";");
var pair;
for(var i=0;i<_bad.length;i++){
if(dojo.trim(_bad[i]).length==0){
_bad.splice(i,1);
i--;
}else{
pair=_bad[i].split(":");
if(dojo.trim(pair[0]).toLowerCase()=="width"){
_bad.splice(i,1);
i--;
}
}
}
this.style=_bad.length>0?_bad.join(";")+";":"";
}
}
}
_b9f.register("curam/layout/ExpandoPane",this);
},postCreate:function(){
this.inherited(arguments);
this.connect(this.domNode,"ondblclick",this.previewOnDblClick?"preview":"toggle");
this.iconNode.setAttribute("aria-controls",this.id);
if(_ba6.contains(this.domNode,"smart-panel")){
_ba0._addDefaultAndHoverImages(this,!this.startExpanded);
}else{
var img=document.createElement("img");
img.src="";
img.alt="";
img.setAttribute("class","shortcutsPanelIcon");
this.iconNodeLink.appendChild(img);
this._updateImage(!this.startExpanded,false,this);
}
if(this.previewOnDblClick){
this.connect(this.getParent(),"_layoutChildren",dojo.hitch(this,function(){
this._isonlypreview=false;
}));
}
},_startupSizes:function(){
this._container=this.getParent();
this._closedSize=this._titleHeight=_ba3.getMarginBoxSimple(this.titleWrapper).h;
curam.debug.log(_ba1.getProperty("curam.layout.ExpandoPane.size")+" "+this._closedSize);
if(this.splitter){
var myid=this.id;
_ba2.forEach(dijit.registry.toArray(),function(w){
if(w&&w.child&&w.child.id==myid){
this.connect(w,"_stopDrag","_afterResize");
w.setAttribute("aria-label",this.splitterAriaLabel);
}
},this);
}
this._currentSize=_ba3.getContentBox(this.domNode);
if(this._openWidth){
_ba1.log(_ba1.getProperty("curam.layout.ExpandoPane.changing.size.changing")+"currentSize.w "+_ba1.getProperty("curam.layout.ExpandoPane.changing.size.from")+this._currentSize.w+" "+_ba1.getProperty("curam.layout.ExpandoPane.changing.size.to")+this._openWidth);
this._currentSize.w=this._openWidth;
}
curam.debug.log("this._currentSize = ",this._currentSize);
this._showSize=this._currentSize[(this._isHorizontal?"h":"w")];
this._setupAnims();
if(this.startExpanded){
this._showing=true;
}else{
this._showing=false;
this._hideWrapper();
}
this.domNode.setAttribute("aria-expanded",this._showing);
this.iconNode.firstElementChild.setAttribute("aria-expanded",this._showing);
this.iconNode.firstElementChild.setAttribute("aria-label",this.iconNode.getAttribute("aria-label"));
this.iconNode.setAttribute("aria-expanded",this._showing);
this._hasSizes=true;
},resize:function(_bae){
if(!this._hasSizes){
this._startupSizes(_bae);
}
var _baf=_ba3.getMarginBoxSimple(this.domNode);
this._contentBox={w:_bae&&"w" in _bae?_bae.w:_baf.w,h:(_bae&&"h" in _bae?_bae.h:_baf.h)-this._titleHeight};
_ba4.set(this.containerNode,"height",this._contentBox.h+"px");
if(_bae){
_ba3.setMarginBox(this.domNode,_bae);
}
this._layoutChildren();
},_afterResize:function(e){
var _bb0=dojox.layout.ExpandoPane.prototype._afterResize;
_bb0._useMarginBoxSimple=true;
_bb0.apply(this,arguments);
delete _bb0._useMarginBoxSimple;
},enterCheck:function(evt){
if(evt.keyCode==13){
this.toggle();
dojo.stopEvent(evt);
}
},toggle:function(){
if(!this._showing){
if(_ba6.contains(this.domNode,"smart-panel")){
_ba0.loadSmartPanelIframe(this.domNode);
}
}
this.inherited(arguments);
var _bb1=dojo.query(".dijitExpandoPane .dijitAccordionTitle").last();
if(_bb1.length>0){
_ba6.add(_bb1,"dijitAccordionTitle-last");
}
this.iconNode.firstElementChild.setAttribute("aria-expanded",this._showing);
this.iconNode.setAttribute("aria-expanded",this._showing);
},_hideWrapper:function(){
_ba6.add(this.domNode,"dojoxExpandoClosed");
this._updateImage(true,_ba6.contains(this.domNode,"smart-panel"),this);
_ba4.set(this.cwrapper,{opacity:"0"});
},_updateImage:function(_bb2,_bb3,_bb4){
if(_bb3){
_ba0._updateSmartPanelImage(_bb4,_bb2);
}else{
this._updateShortcutsPanelImage(_bb2);
}
},_updateShortcutsPanelImage:function(_bb5){
if(_bb5){
if(this.orient=="Right"){
this.iconNodeLink.children[0].src=require.toUrl("./themes/curam/images/chevron--left20-on-dark.svg");
}else{
this.iconNodeLink.children[0].src=require.toUrl("./themes/curam/images/chevron--right20-on-dark.svg");
}
}else{
if(!_bb5&&this.orient=="Right"){
this.iconNodeLink.children[0].src=require.toUrl("./themes/curam/images/chevron--right20-on-dark.svg");
}else{
this.iconNodeLink.children[0].src=require.toUrl("./themes/curam/images/chevron--left20-on-dark.svg");
}
}
},_showEnd:function(){
this._updateImage(false,_ba6.contains(this.domNode,"smart-panel"),this);
_ba4.set(this.cwrapper,{opacity:0});
_ba5.anim(this.cwrapper,{opacity:this._isonlypreview?this.previewOpacity:1},227);
_ba6.remove(this.domNode,"dojoxExpandoClosed");
if(!this._isonlypreview){
setTimeout(lang.hitch(this._container,"layout"),15);
}else{
this._previewShowing=true;
this.resize();
}
}});
return _baa;
});
},"curam/cdsl/connection/CuramConnection":function(){
define(["dojo/_base/declare","dojo/request/registry","curam/cdsl/_base/_Connection","curam/util"],function(_bb6,_bb7,_bb8,util){
var _bb9=_bb6(_bb8,{_baseUrl:null,constructor:function(_bba){
this._baseUrl=_bba;
},invoke:function(_bbb,_bbc){
this.inherited(arguments);
var _bbd=util.getTopmostWindow();
return _bb7(_bbb.url(this._baseUrl),{data:_bbb.toJson(),method:"POST",headers:{"Content-Encoding":"UTF-8","csrfToken":_bbd.csrfToken},query:null,preventCache:true,timeout:_bbc?_bbc:this._DEFAULT_REQUEST_TIMEOUT,handleAs:"text"});
}});
return _bb9;
});
},"dijit/form/_FormValueMixin":function(){
define(["dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/on","./_FormWidgetMixin"],function(_bbe,_bbf,keys,lang,on,_bc0){
return _bbe("dijit.form._FormValueMixin",_bc0,{readOnly:false,_setReadOnlyAttr:function(_bc1){
_bbf.set(this.focusNode,"readOnly",_bc1);
this._set("readOnly",_bc1);
},postCreate:function(){
this.inherited(arguments);
if(this._resetValue===undefined){
this._lastValueReported=this._resetValue=this.value;
}
},_setValueAttr:function(_bc2,_bc3){
this._handleOnChange(_bc2,_bc3);
},_handleOnChange:function(_bc4,_bc5){
this._set("value",_bc4);
this.inherited(arguments);
},undo:function(){
this._setValueAttr(this._lastValueReported,false);
},reset:function(){
this._hasBeenBlurred=false;
this._setValueAttr(this._resetValue,true);
}});
});
},"dojo/date/stamp":function(){
define(["../_base/lang","../_base/array"],function(lang,_bc6){
var _bc7={};
lang.setObject("dojo.date.stamp",_bc7);
_bc7.fromISOString=function(_bc8,_bc9){
if(!_bc7._isoRegExp){
_bc7._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;
}
var _bca=_bc7._isoRegExp.exec(_bc8),_bcb=null;
if(_bca){
_bca.shift();
if(_bca[1]){
_bca[1]--;
}
if(_bca[6]){
_bca[6]*=1000;
}
if(_bc9){
_bc9=new Date(_bc9);
_bc6.forEach(_bc6.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(prop){
return _bc9["get"+prop]();
}),function(_bcc,_bcd){
_bca[_bcd]=_bca[_bcd]||_bcc;
});
}
_bcb=new Date(_bca[0]||1970,_bca[1]||0,_bca[2]||1,_bca[3]||0,_bca[4]||0,_bca[5]||0,_bca[6]||0);
if(_bca[0]<100){
_bcb.setFullYear(_bca[0]||1970);
}
var _bce=0,_bcf=_bca[7]&&_bca[7].charAt(0);
if(_bcf!="Z"){
_bce=((_bca[8]||0)*60)+(Number(_bca[9])||0);
if(_bcf!="-"){
_bce*=-1;
}
}
if(_bcf){
_bce-=_bcb.getTimezoneOffset();
}
if(_bce){
_bcb.setTime(_bcb.getTime()+_bce*60000);
}
}
return _bcb;
};
_bc7.toISOString=function(_bd0,_bd1){
var _bd2=function(n){
return (n<10)?"0"+n:n;
};
_bd1=_bd1||{};
var _bd3=[],_bd4=_bd1.zulu?"getUTC":"get",date="";
if(_bd1.selector!="time"){
var year=_bd0[_bd4+"FullYear"]();
date=["0000".substr((year+"").length)+year,_bd2(_bd0[_bd4+"Month"]()+1),_bd2(_bd0[_bd4+"Date"]())].join("-");
}
_bd3.push(date);
if(_bd1.selector!="date"){
var time=[_bd2(_bd0[_bd4+"Hours"]()),_bd2(_bd0[_bd4+"Minutes"]()),_bd2(_bd0[_bd4+"Seconds"]())].join(":");
var _bd5=_bd0[_bd4+"Milliseconds"]();
if(_bd1.milliseconds){
time+="."+(_bd5<100?"0":"")+_bd2(_bd5);
}
if(_bd1.zulu){
time+="Z";
}else{
if(_bd1.selector!="time"){
var _bd6=_bd0.getTimezoneOffset();
var _bd7=Math.abs(_bd6);
time+=(_bd6>0?"-":"+")+_bd2(Math.floor(_bd7/60))+":"+_bd2(_bd7%60);
}
}
_bd3.push(time);
}
return _bd3.join("T");
};
return _bc7;
});
},"dijit/layout/AccordionPane":function(){
define(["dojo/_base/declare","dojo/_base/kernel","./ContentPane"],function(_bd8,_bd9,_bda){
return _bd8("dijit.layout.AccordionPane",_bda,{constructor:function(){
_bd9.deprecated("dijit.layout.AccordionPane deprecated, use ContentPane instead","","2.0");
},onSelected:function(){
}});
});
},"curam/omega3-util":function(){
define(["dojo/dom-geometry","dojo/dom","dojo/dom-class","dojo/dom-attr","dojo/dom-style","dojo/dom-construct","dojo/sniff","dijit/registry","curam/util/EditableList","curam/debug","curam/validation","curam/util","curam/html","curam/GlobalVars","cm/_base/_dom","cm/_base/_form","curam/util/RuntimeContext"],function(_bdb,dom,_bdc,_bdd,_bde,_bdf,has,_be0,_be1,_be2,_be3,util){
var _be4={PopupMapping:function(name,_be5){
this.name=name;
this.targetWidgetID=_be5;
},openPopupFromCTCode:function(_be6,_be7,_be8,_be9,_bea,_beb){
var _bec;
var list=_be8.parentNode.parentNode.parentNode.childNodes[0];
var _bed=dijit.byNode(list);
if(_bed){
_bec=_bed.getValue();
}else{
var _bee=_be8.parentNode.parentNode.parentNode.childNodes[1];
try{
_bec=_bee.options[_bee.selectedIndex].value;
}
catch(e){
}
if(_bec===undefined){
try{
_bec=list.options[list.selectedIndex].value;
}
catch(e){
}
}
if(_bec===undefined){
try{
var _bef=_be8.parentNode.parentNode.parentNode.childNodes[0];
_bec=_bef.firstChild.value;
}
catch(e){
}
}
if(_bec===undefined){
curam.debug.log("Error: cannot find element containing codetable value in dropdown");
}
}
if(_bec!=""){
if(curam.popupCTCodeMappings[_bec]){
openPopupFromDomain(_be6,_be7,curam.popupCTCodeMappings[_bec],_be9,false,_bea,_beb);
}
}
},openPopupFromCTCodeNoDomain:function(_bf0,_bf1,_bf2,_bf3,_bf4,_bf5){
var list=_bf2.parentNode.parentNode.parentNode.childNodes[2];
var _bf6=dijit.byNode(list);
var _bf7;
var _bf8;
var _bf9;
var _bfa;
var _bfb;
var _bfc;
var _bfd;
var _bfe;
if(_bf6){
var _bff=_bf6.getValue();
}else{
var list=_bf2.parentNode.parentNode.parentNode.childNodes[1];
var _bff=list.options[list.selectedIndex].value;
}
if(_bff!=""){
if(curam.popupCTCodeMappings[_bff]){
_bf7=getPopupProperties(curam.popupCTCodeMappings[_bff]);
_bf8=_bf7.pageID;
_bf9=_bf7.createPageID;
_bfa=_bf7.height;
_bfb=_bf7.width;
_bfc=_bf7.scrollBars;
_bfd=_bf7.insertMode;
_bfe=_bf7.codeTableCode;
var _c00=_bf7.uimType;
if(_c00=="DYNAMIC"){
openPopup(_bf0,_bf1,null,_bf8,_bf9,_bfb,_bfa,_bfc,_bfd,null,null,_bf3,false,_bf4,_bf5);
}
}
}
},openPopupFromDomain:function(_c01,_c02,_c03,_c04,_c05,_c06,_c07){
var _c08=getPopupProperties(_c03);
var _c09=_c08.pageID;
var _c0a=_c08.createPageID;
var _c0b=_c08.height;
var _c0c=_c08.width;
var _c0d=_c08.scrollBars;
var _c0e=_c08.insertMode;
var _c0f=_c08.codeTableCode;
var _c10=dojo.byId(_c01).previousElementSibling;
_c10&&curam.util.addPlaceholderFocusClassToEventOrAnchorTag(_c10,window);
openPopup(_c01,_c02,_c03,_c09,_c0a,_c0c,_c0b,_c0d,_c0e,_c0f,_c04,_c05,_c06,_c07);
},openPopupNoDomain:function(_c11,_c12,_c13,_c14,_c15,_c16,_c17,_c18,_c19,_c1a,_c1b,_c1c){
openPopup(_c11,_c12,null,_c13,_c14,_c15,_c16,_c17,_c18,null,null,_c19,_c1a,_c1b,_c1c);
var _c1d=dojo.byId(_c11).previousElementSibling;
_bdc.add(_c1d,"placeholder-for-focus");
},openPopup:function(_c1e,_c1f,_c20,_c21,_c22,_c23,_c24,_c25,_c26,_c27,_c28,_c29,_c2a,_c2b){
setMappingsLoaded(_c1f);
if(curam.popupWindow&&!curam.popupWindow.closed){
curam.popupWindow.close();
}
curam.currentPopupInstanceName=_c1f;
curam.currentPopupProps=setPopupProperties(_c21,_c20,_c27,_c23,_c24,_c25,_c22,_c26,null);
var ctx=jsScreenContext;
ctx.addContextBits("POPUP");
ctx.clear("TAB|TREE|AGENDA");
var url="";
var _c2c;
if(_c29==true){
url=_c22;
if(_c2b&&_c2b.length>0){
_c2c="&"+curam.util.secureURLsHashTokenParam+"="+_c2b;
}
}else{
url=_c21;
if(_c2a&&_c2a.length>0){
_c2c="&"+curam.util.secureURLsHashTokenParam+"="+_c2a;
}
}
if(_c28&&_c28.length>0){
url=url+"?"+_c28;
_c2c?url+=_c2c+"&":url+="&";
}else{
url+="?";
}
url+=ctx.toRequestString();
if(window.curam.util.showModalDialog){
curam.util.showModalDialog(url,null,_c23,_c24,0,0,false,null,null);
}
},addPopupMapping:function(_c2d,_c2e,_c2f){
var _c30=curam.popupMappingRepository;
if(curam.popupMappingLoaded[_c2d]==true){
return;
}
if(_c30[_c2d]==null){
_c30[_c2d]=[];
_c30[_c2d][_c2e]=[];
_c30[_c2d][_c2e][0]=_c2f;
}else{
if(_c30[_c2d][_c2e]==null){
_c30[_c2d][_c2e]=[];
_c30[_c2d][_c2e][0]=_c2f;
}else{
var _c31=_c30[_c2d][_c2e].length;
_c30[_c2d][_c2e][_c31]=_c2f;
}
}
},setMappingsLoaded:function(_c32){
curam.popupMappingLoaded[_c32]=true;
},executeMapping:function(_c33,_c34){
dojo.body().setAttribute("tabIndex","-1");
var pmr=curam.popupMappingRepository;
var cpin=curam.currentPopupInstanceName;
if(!pmr||!pmr[cpin]||pmr[cpin][_c33]==null){
return;
}
var _c35=null;
for(var i=0;i<pmr[cpin][_c33].length;i++){
var _c36=null;
_c36=dom.byId(pmr[cpin][_c33][i]);
_c35=_c36;
if(_c36.tagName=="SPAN"){
_c36.innerHTML=curam.html.splitWithTag(_c34,null,null,escapeXML);
_c36.setAttribute("title",_c34);
_c36._reposition=_c36._reposition||dojo.query("div",_c36).length>0;
if(_c36._reposition){
var _c37=cm.nextSibling(_c36,"span");
if(_c37){
var _c38=_bdb.getMarginBoxSimple(_c36).h;
var _c39=_bdb.getMarginBoxSimple(_c37).h;
_bde.set(_c37,"position","relative");
var diff=_c38-_c39-((dojo.isIE&&dojo.isIE<9)?2:0);
_bde.set(_c37,"bottom","-"+(diff)+"px");
}
}
}else{
if(_c36.tagName=="TEXTAREA"){
if(curam.currentPopupProps.insertMode=="insert"){
insertAtCursor(_c36,escapeXML(_c34));
}else{
if(curam.currentPopupProps.insertMode=="append"){
_c36.value+=_c34;
}else{
_c36.value=_c34;
}
}
}else{
if(_be0.byId(pmr[cpin][_c33][i])){
_be0.byId(pmr[cpin][_c33][i]).set("value",_c34);
_c36.value=_c34;
}else{
_c36.value=_c34;
var _c3a=_c36.id;
if(_c3a.indexOf("_value")>0){
var _c3b=_c3a.replace("_value","_clear");
var _c3c=dom.byId(_c3b);
_c3c.classList.remove("bx--search-close--hidden");
}
}
}
}
}
setTimeout(function(){
if(_c35){
_c35.setAttribute("value",_c34);
_c35.setAttribute("aria-label",_c34);
_c35.focus();
}
},300);
dojo.body().setAttribute("tabIndex","0");
},insertAtCursor:function(_c3d,_c3e){
if(document.selection){
_c3d.focus();
sel=document.selection.createRange();
sel.text=_c3e;
}else{
if(_c3d.selectionStart||_c3d.selectionStart=="0"){
var _c3f=_c3d.selectionStart;
var _c40=_c3d.selectionEnd;
_c3d.value=_c3d.value.substring(0,_c3f)+_c3e+_c3d.value.substring(_c40,_c3d.value.length);
}else{
_c3d.value+=_c3e;
}
}
},escapeXML:function(_c41){
return _c41.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace(/"/g,"&#34;").replace(/'/g,"&#39;");
},executeOpenerMapping:function(_c42,_c43){
var _c44=undefined;
if(curam.util.isModalWindow()){
_c44=curam.dialog.getParentWindow(window);
}else{
if(window.dialogArguments){
_c44=window.dialogArguments[0];
}
}
if((_c44)&&(!_c44.closed)){
_c44.executeMapping(_c42,_c43);
}else{
_be2.log("curam.omega3-util.executeOpenerMapping:, "+_be2.getProperty("curam.omega3-util.parent"));
}
},storePopupInputFromWidget:function(name,_c45){
var _c46=null;
_c46=dom.byId(_c45).value;
if(_c46){
curam.popupInputs[name]=_c46;
}else{
curam.popupInputs[name]="";
}
},getPopupInput:function(name){
if(curam.popupInputs[name]!=null){
return curam.popupInputs[name];
}else{
return "";
}
},PopupProperties:function(_c47,_c48,_c49,_c4a,_c4b,_c4c,_c4d){
this.width=_c48;
this.height=_c49;
this.scrollBars=_c4a;
this.pageID=_c47;
this.createPageID=_c4b;
if(_c4c==null){
this.insertMode="overwrite";
}else{
this.insertMode=_c4c;
}
if(_c4d!=null){
this.uimType=_c4d;
}
},setPopupProperties:function(_c4e,_c4f,_c50,_c51,_c52,_c53,_c54,_c55,_c56){
if(_c50){
curam.popupCTCodeMappings[_c50]=_c4f;
}
curam.popupPropertiesRepository[_c4f]=new PopupProperties(_c4e,_c51,_c52,_c53,_c54,_c55,_c56);
},getPopupAttributes:function(_c57,_c58,_c59){
var _c5a="width="+_c57+","+"height="+_c58+","+"scrollbars="+(_c59?"yes":"no")+",";
return _c5a;
},getPopupAttributesIEModal:function(_c5b){
var _c5c="dialogWidth:"+curam.popupPropertiesRepository[_c5b].width+"px;"+"dialogHeight:"+curam.popupPropertiesRepository[_c5b].height+"px;";
return _c5c;
},trimFileExtension:function(_c5d){
var _c5e=_c5d.lastIndexOf("/")+1;
if(_c5e==-1){
_c5e=_c5d.lastIndexOf("\\")+1;
}
if(_c5e==-1){
_c5e=0;
}
return _c5d.substring(_c5e,_c5d.lastIndexOf("."));
},getPopupProperties:function(_c5f){
return curam.popupPropertiesRepository[_c5f];
},validateDate:function(_c60){
return curam.validation.validateDate(_c60).valid;
},addStartDate:function(_c61){
var _c62=dom.byId("startDate").value;
var _c63=curam.validation.validateDate(_c62);
if(_c63.valid){
var _c64=dom.byId("gotoDate");
_c64.href=curam.util.replaceUrlParam(_c64.href,"startDate",_c62);
return true;
}else{
require(["curam/validation/calendar"],function(_c65){
alert(_c65.invalidGotoDateEntered.replace("%s",_c62).replace("%s",jsDFs));
});
dojo.stopEvent(_c61);
return false;
}
},checkEnter:function(_c66){
if(_c66.keyCode==13){
if(addStartDate(_c66)){
var _c67=dom.byId("gotoDate");
window.location=_c67.href;
return true;
}
return false;
}
return true;
},createWindowName:function(_c68){
var _c69=new String("");
for(var i=0;i<_c68.length;i++){
var ch=_c68.charAt(i);
if(ch=="$"||ch=="."){
_c69+="_";
}else{
_c69+=ch;
}
}
return _c69;
},clearPopup:function(_c6a,_c6b){
var _c6c=_c6a.id.substring(0,_c6a.id.indexOf("_clear"));
var _c6d=_c6c+"_value";
var _c6e=_c6c+"_desc";
var _c6f=_c6c+"_deschf";
var _c70=dom.byId(_c6a);
_c70.classList.add("bx--search-close--hidden");
var _c71=dom.byId(_c6d);
if(_c71){
if(_c71.tagName=="INPUT"){
_c71.value="";
}else{
if(_c71.tagName=="TEXTAREA"){
_c71.value="";
}
}
if(_c71.tagName=="SPAN"){
_c71.innerHTML=curam.POPUP_EMPTY_SPAN_VALUE;
}
}
var _c72=dom.byId(_c6e);
if(_c72){
if(_c72.tagName=="INPUT"){
_c72.value="";
}else{
if(_c72.tagName=="TEXTAREA"){
_c72.value="";
}else{
if(_c72.tagName=="SPAN"){
_c72.innerHTML=curam.POPUP_EMPTY_SPAN_VALUE;
_bdd.set(_c72,"title",_bdd.get(_c72,"data-field-label"));
}
}
}
}
var _c73=dom.byId(_c6f);
if(_c73){
if(_c73.tagName=="INPUT"){
_c73.value="";
}else{
_c73.innerHTML="&nbsp";
}
}
if(_c6b){
_c6b=dojo.fixEvent(_c6b);
dojo.stopEvent(_c6b);
}
return false;
},showClearIcon:function(_c74){
var _c75=dom.byId(_c74+"_clear");
var _c76=dom.byId(_c74+"_value");
if(_c76.value==""){
_c75.classList.add("bx--search-close--hidden");
}else{
_c75.classList.remove("bx--search-close--hidden");
}
},swapImage:function(_c77,_c78){
dom.byId(_c77).src=_c78;
},appendTabColumn:function(_c79,_c7a){
var _c7b;
var _c7c=[];
dojo.query("input[name='"+_c79+"']").filter(function(_c7d){
return _c7d.checked;
}).forEach(function(_c7e){
_c7c.push(_c7e.value);
});
_c7b=_c7c.join("\t");
_c7a.href=_c7a.href+(_c7a.href.indexOf("?")==-1?"?":"&");
if(_c7b!=""){
_c7a.href=_c7a.href+_c79+"="+encodeURIComponent(_c7b);
}else{
_c7a.href=_c7a.href+_c79+"=";
}
},ToggleAll:function(e,_c7f){
dojo.query("input[name='"+_c7f+"']").forEach(function(_c80){
if(_c80.checked===true){
_c80.checked=false;
}else{
_c80.checked=true;
}
});
},ToggleSelectAll:function(e,_c81){
if(e.checked){
CheckAll(_c81);
}else{
ClearAll(_c81);
}
},CheckAll:function(_c82){
dojo.query("input[name^='"+_c82+"'][onclick]").forEach(function(_c83){
_c83.checked=true;
_be1._doToggling(_c83);
});
},ClearAll:function(_c84){
dojo.query("input[name^='"+_c84+"'][onclick]").forEach(function(_c85){
_c85.checked=false;
_be1._doToggling(_c85);
});
},Check:function(e){
e.checked=true;
},Clear:function(e){
e.checked=false;
},ChooseSelectAll:function(e,_c86,_c87){
var sAll=dom.byId(_c86);
if(sAll){
if(dojo.query("input[name='"+_c87+"']").every("return item.checked")){
Check(sAll);
}else{
Clear(sAll);
}
}
_be1._doToggling(e);
},ChooseCheckbox:function(e,_c88){
var _c89=dom.byId(_c88);
if(_c89){
if(e.checked){
Clear(_c88);
}else{
Check(_c88);
}
}
_be1._doToggling(e);
},selectAllIfNeeded:function(_c8a,_c8b){
if(dojo.query("input[name='"+_c8b+"']").some("return !item.checked")){
return;
}
var sAll=dom.byId(_c8a);
if(sAll){
Check(sAll);
}
},dc:function(_c8c,_c8d,_c8e){
if(cm.wasFormSubmitted(_c8c)){
var evt=dojo.fixEvent(_c8e);
dojo.stopEvent(evt);
return false;
}
cm.setFormSubmitted(_c8c,1);
var _c8f=dojo.query(".curam-default-action")[0];
if(_c8f!==null&&_c8f!==undefined){
sessionStorage.setItem("curamDefaultActionId",_c8f.id);
}
return true;
},setFocus:function(){
curam.util.setFocus();
},setParentFocus:function(_c90){
_be2.log("curam.omega3-util.setParentFocus: "+_be2.getProperty("curam.omega3-util.called"));
var _c91=curam.dialog.getParentWindow(window);
if(!_c91.closed){
var _c92=dojo.query("button..bx--search-close.placeholder-for-focus",_c91.document);
if(_c92.length==1){
_c92[0].focus();
_bdc.remove(_c92[0],"placeholder-for-focus");
}else{
_c91.focus();
var _c93=dojo.query(".placeholder-for-focus",_c91.document);
if(_c93.length==1){
_bdc.remove(_c93[0],"placeholder-for-focus");
}
}
}else{
alert("The parent window has been closed");
}
if(_c90||window.event){
dojo.stopEvent(_c90||window.event);
}
curam.dialog.closeModalDialog();
},getParentWin:function(){
return curam.dialog.getParentWindow(window);
},addQuestionsFromPopup:function(evt){
evt=dojo.fixEvent(evt);
dojo.stopEvent(evt);
if(window._questionsAdded){
return;
}
window._questionsAdded=true;
var _c94=getParentWin();
var _c95=dojo.query("INPUT");
var _c96=[];
dojo.query("INPUT[type='checkbox']").forEach(function(item){
if(item.checked&&item.id.indexOf("__o3mswa")<0){
_c96.push(item.value);
}
});
var _c97=dojo.toJson(_c96);
_c94.newQuestions=_c97;
_c94.curam.matrix.Constants.container.matrix.addQuestionsFromPopup();
curam.dialog.closeModalDialog();
return false;
},getRequestParams:function(_c98){
var _c99=[];
var uri=new dojo._Url(_c98);
if(uri.query!=null){
var _c9a=uri.query.split("&");
for(var i=0;i<_c9a.length;i++){
var arr=_c9a[i].split("=");
_c99[arr[0]]=arr[1];
}
}
return _c99;
},openModalDialog:function(_c9b,_c9c,left,top){
curam.util.openModalDialog(_c9b,_c9c,left,top);
},initCluster:function(_c9d){
var _c9e=_c9d.parentNode;
var _c9f=dojo.query("div.toggle-group",_c9e);
if(_c9f.length>=1){
return _c9f[0];
}
var next=cm.nextSibling(_c9d,"p")||cm.nextSibling(_c9d,"table");
if(!next){
return;
}
_c9f=_bdf.create("div",{"class":"toggle-group"},next,"before");
var arr=[];
var _ca0=dojo.query("p.description",_c9d)[0];
if(_ca0){
arr.push(_ca0);
var _ca1=_bde.get(_c9d,"marginBottom");
_bde.set(_c9d,"marginBottom",0);
_bde.set(_ca0,"marginBottom",_ca1+"px");
}
var _ca2=_c9e;
while(_ca2&&!(_bdc.contains(_ca2,"cluster")||_bdc.contains(_ca2,"list"))){
_ca2=_ca2.parentNode;
}
_c9f.isClosed=_bdc.contains(_ca2,"uncollapse")?true:false;
if(_c9f.isClosed){
_bde.set(_c9f,"display","none");
}
for(var _ca3=0;_ca3<_c9e.childNodes.length;_ca3++){
if(_c9e.childNodes[_ca3]==_c9d||_c9e.childNodes[_ca3]==_c9f){
continue;
}
arr.push(_c9e.childNodes[_ca3]);
}
for(var _ca3=0;_ca3<arr.length;_ca3++){
_c9f.appendChild(arr[_ca3]);
}
return _c9f;
},initClusterHeight:function(_ca4,_ca5,_ca6){
if(_ca4.correctHeight){
return;
}
var _ca7=dojo._getBorderBox(_ca5).h;
var _ca8=0,_ca9;
for(var _caa=0;_caa<_ca4.childNodes.length;_caa++){
_ca9=_ca4.childNodes[_caa];
if(_ca9==_ca5){
continue;
}
_ca8+=dojo._getBorderBox(_ca9).h;
}
if(_ca8==0){
return;
}
if(_ca6){
_bde.set(_ca5.parentNode,"height","");
}
_ca4.correctHeight=_ca8;
},getCursorPosition:function(e){
e=e||dojo.global().event;
var _cab={x:0,y:0};
if(e.pageX||e.pageY){
_cab.x=e.pageX;
_cab.y=e.pageY;
}else{
var de=dojo.doc().documentElement;
var db=dojo.body();
_cab.x=e.clientX+((de||db)["scrollLeft"])-((de||db)["clientLeft"]);
_cab.y=e.clientY+((de||db)["scrollTop"])-((de||db)["clientTop"]);
}
return _cab;
},overElement:function(_cac,e){
_cac=dom.byId(_cac);
var _cad=getCursorPosition(e);
var bb=dojo._getBorderBox(_cac);
var _cae=dojo._abs(_cac,true);
var top=_cae.y;
var _caf=top+bb.h;
var left=_cae.x;
var _cb0=left+bb.w;
return (_cad.x>=left&&_cad.x<=_cb0&&_cad.y>=top&&_cad.y<=_caf);
},_getToggleImages:function(){
var _cb1="../themes/curam/images/chevron--down20-enabled.svg";
var _cb2="../themes/curam/images/chevron--down20-enabled.svg";
var _cb3;
var _cb4;
var _cb5=util.isRtlMode();
if(_cb5){
_cb3="../themes/curam/images/chevron--right20-enabled.svg";
_cb4="../themes/curam/images/chevron--right20-enabled.svg";
}else{
_cb3="../themes/curam/images/chevron--left20-enabled.svg";
_cb4="../themes/curam/images/chevron--left20-enabled.svg";
}
return [_cb1,_cb3,_cb2,_cb4];
},setToggleClusterIcon:function(img){
var _cb6=this._getToggleImages();
var _cb7=_cb6[0];
if(img.className=="hoverIcon"){
_cb7=_cb6[2];
}
var _cb8=img;
while(_cb8&&!(_bdc.contains(_cb8,"cluster")||_bdc.contains(_cb8,"list"))){
_cb8=_cb8.parentNode;
}
if(_bdc.contains(_cb8,"is-collapsed")){
if(img.className=="hoverIcon"){
_cb7=_cb6[3];
}else{
_cb7=_cb6[1];
}
}
img.onload=null;
img.src=_cb7;
img.alt="";
},toggleCluster:function(_cb9,_cba){
var _cbb=_cb9;
var img;
var _cbc;
var _cbd=dojo.query("img",_cb9);
if(_cbd&&_cbd.length==2){
img=_cbd[0];
_cbc=_cbd[1];
}
var _cbe=this._getToggleImages();
var _cbf=_cbe[0];
var _cc0=_cbe[1];
var _cc1=_cbe[2];
var _cc2=_cbe[3];
while(_cb9&&!(_bdc.contains(_cb9,"cluster")||_bdc.contains(_cb9,"list"))){
_cb9=_cb9.parentNode;
}
var _cc3=false;
var _cc4=dojo.query(" > :not(.header-wrapper) ",_cb9.childNodes[0]);
if(!_bdc.contains(_cc4[0],"toggleDiv")){
var _cc5=_bdf.create("div",{className:"toggleDiv"},_cc4[0].parentNode);
var _cc6=_bdf.create("div",{className:"toggleDiv2"},_cc4[0].parentNode);
_cc4.forEach(function(node){
var _cc7;
var _cc8;
dojo.query(".cke",node).forEach(function(_cc9){
_cc7=dojo.query("textarea",_cc9.parentElement)[0].id;
for(var i in CKEDITOR.instances){
if(CKEDITOR.instances[i].name.includes(_cc7)){
_cc8=CKEDITOR.instances[i].config.customConfig;
CKEDITOR.instances[i].destroy();
}
}
});
if(node.tagName!="DIV"){
_cc5.appendChild(node);
}else{
_cc6.appendChild(node);
}
if(_cc7){
CKEDITOR.replace(_cc7,{customConfig:_cc8});
}
});
}else{
var _cc5=_cc4[0];
var _cc6=_cc4[1];
}
var desc=dojo.query(" > .header-wrapper p ",_cb9.childNodes[0])[0];
if(typeof desc!="undefined"){
_cc3=true;
}
if(_bdc.contains(_cb9,"init-collapsed")){
_bdc.remove(_cb9,"init-collapsed");
_bde.set(_cc5,"display","none");
}
if(!_cc5||_cc5.inAnimation){
return;
}
require(["dojo/fx"],function(fx){
var _cca={node:_cc5,duration:600,onBegin:function(){
_cc5.inAnimation=true;
_bdc.remove(_cb9,"is-collapsed");
_bdc.add(_cb9,"is-uncollapsed");
_bdd.set(_cbb,"aria-expanded","true");
dojo.stopEvent(_cba);
},onEnd:function(){
_cc5.inAnimation=false;
}};
var _ccb={node:_cc5,duration:600,onBegin:function(){
_cc5.inAnimation=true;
_bdc.remove(_cb9,"is-uncollapsed");
_bdc.add(_cb9,"is-collapsed");
_bdd.set(_cbb,"aria-expanded","false");
dojo.stopEvent(_cba);
},onEnd:function(){
_cc5.inAnimation=false;
}};
if(_cc6.hasChildNodes()){
var _ccc={node:_cc6,duration:600};
var _ccd={node:_cc6,duration:600};
}
if(_cc3){
var _cce={node:desc,duration:100};
var _ccf={node:desc,duration:100,delay:500};
}
if(_bdc.contains(_cb9,"is-collapsed")){
if(typeof _cce!="undefined"){
fx.wipeIn(_cce).play();
}
fx.wipeIn(_cca).play();
if(typeof _ccc!="undefined"){
fx.wipeIn(_ccc).play();
}
if(img){
img.src=_cbf;
}
if(_cbc){
_cbc.src=_cc1;
}
}else{
if(_bdc.contains(_cb9,"is-uncollapsed")){
if(typeof _ccd!="undefined"){
fx.wipeOut(_ccd).play();
}
fx.wipeOut(_ccb).play();
if(typeof _ccf!="undefined"){
fx.wipeOut(_ccf).play();
}
if(img){
img.src=_cc0;
}
if(_cbc){
_cbc.src=_cc2;
}
}else{
_be2.log("The cluster does not have a class name indicating"+"its collapsed/uncollapsed state");
}
}
});
},disableClusterToggle:function(node){
dojo.addOnLoad(function(){
node=dom.byId(node);
var body=dojo.body();
while(node&&node!=body){
if(_bdc.contains(node,"is-collapsed")||_bdc.contains(node,"is-uncollapsed")){
_bdc.remove(node,"is-collapsed");
_bdc.remove(node,"is-uncollapsed");
_bdd.remove(dojo.query("BUTTON.grouptoggleArrow",node)[0],"onclick");
}
node=node.parentNode;
}
});
},addClassToPositionQuestionaireStatic:function(){
var body=document.getElementsByTagName("body")[0];
body.className=body.className+" static-print-position";
},openUserPrefsEditor:function(_cd0){
_cd0=dojo.fixEvent(_cd0);
var _cd1=_cd0.target;
while(_cd1&&_cd1.tagName!="A"){
_cd1=_cd1.parentNode;
}
var _cd2={location:{href:_cd1.href}};
var rtc=new curam.util.RuntimeContext(_cd2);
var href=curam.util.setRpu("user-locale-selector.jspx",rtc);
openModalDialog({href:href},"width=500,height=300",200,150,false);
return false;
},calendarOpenModalDialog:function(_cd3,_cd4){
dojo.stopEvent(_cd3);
curam.util.openModalDialog(_cd4,"");
},clickMarker:function(){
return true;
}};
for(prop in _be4){
dojo.global[prop]=_be4[prop];
}
return _be4;
});
},"curam/widget/_ComboBoxMenu":function(){
define(["dojo/_base/declare","dojo/dom-attr","curam/util/ResourceBundle","dijit/form/_ComboBoxMenu"],function(_cd5,_cd6,_cd7){
var _cd8=new _cd7("FilteringSelect");
var _cd9=_cd5("curam.widget._ComboBoxMenu",[dijit.form._ComboBoxMenu],{_createOption:function(item,_cda){
var _cdb=this._createMenuItem();
var _cdc=_cda(item);
if(_cdc.html){
_cdb.innerHTML=_cdc.label;
}else{
_cdb.appendChild(_cdb.ownerDocument.createTextNode(_cdc.label));
}
if(_cdb.innerHTML==""){
_cd6.set(_cdb,"aria-label",_cd8.getProperty("curam.select.option.blank"));
_cd6.set(_cdb,"title",_cd8.getProperty("curam.select.option.blank"));
}else{
var _cdd=/<[a-zA-Z\/][^>]*>/g;
var _cde=_cdb.innerHTML;
_cdb.title=_cde.replace(_cdd,"");
}
return _cdb;
}});
return _cd9;
});
},"dijit/form/_AutoCompleterMixin":function(){
define(["dojo/aspect","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/query","dojo/regexp","dojo/sniff","./DataList","./_TextBoxMixin","./_SearchMixin"],function(_cdf,_ce0,_ce1,keys,lang,_ce2,_ce3,has,_ce4,_ce5,_ce6){
var _ce7=_ce0("dijit.form._AutoCompleterMixin",_ce6,{item:null,autoComplete:true,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:false,_getCaretPos:function(_ce8){
var pos=0;
if(typeof (_ce8.selectionStart)=="number"){
pos=_ce8.selectionStart;
}else{
if(has("ie")){
var tr=_ce8.ownerDocument.selection.createRange().duplicate();
var ntr=_ce8.createTextRange();
tr.move("character",0);
ntr.move("character",0);
try{
ntr.setEndPoint("EndToEnd",tr);
pos=String(ntr.text).replace(/\r/g,"").length;
}
catch(e){
}
}
}
return pos;
},_setCaretPos:function(_ce9,_cea){
_cea=parseInt(_cea);
_ce5.selectInputText(_ce9,_cea,_cea);
},_setDisabledAttr:function(_ceb){
this.inherited(arguments);
this.domNode.setAttribute("aria-disabled",_ceb?"true":"false");
},_onKey:function(evt){
if(evt.charCode>=32){
return;
}
var key=evt.charCode||evt.keyCode;
if(key==keys.ALT||key==keys.CTRL||key==keys.META||key==keys.SHIFT){
return;
}
var pw=this.dropDown;
var _cec=null;
this._abortQuery();
this.inherited(arguments);
if(evt.altKey||evt.ctrlKey||evt.metaKey){
return;
}
if(this._opened){
_cec=pw.getHighlightedOption();
}
switch(key){
case keys.PAGE_DOWN:
case keys.DOWN_ARROW:
case keys.PAGE_UP:
case keys.UP_ARROW:
if(this._opened){
this._announceOption(_cec);
}
evt.stopPropagation();
evt.preventDefault();
break;
case keys.ENTER:
if(_cec){
if(_cec==pw.nextButton){
this._nextSearch(1);
evt.stopPropagation();
evt.preventDefault();
break;
}else{
if(_cec==pw.previousButton){
this._nextSearch(-1);
evt.stopPropagation();
evt.preventDefault();
break;
}
}
evt.stopPropagation();
evt.preventDefault();
}else{
this._setBlurValue();
this._setCaretPos(this.focusNode,this.focusNode.value.length);
}
case keys.TAB:
var _ced=this.get("displayedValue");
if(pw&&(_ced==pw._messages["previousMessage"]||_ced==pw._messages["nextMessage"])){
break;
}
if(_cec){
this._selectOption(_cec);
}
case keys.ESCAPE:
if(this._opened){
this._lastQuery=null;
this.closeDropDown();
}
break;
}
},_autoCompleteText:function(text){
var fn=this.focusNode;
_ce5.selectInputText(fn,fn.value.length);
var _cee=this.ignoreCase?"toLowerCase":"substr";
if(text[_cee](0).indexOf(this.focusNode.value[_cee](0))==0){
var cpos=this.autoComplete?this._getCaretPos(fn):fn.value.length;
if((cpos+1)>fn.value.length){
fn.value=text;
_ce5.selectInputText(fn,cpos);
}
}else{
fn.value=text;
_ce5.selectInputText(fn);
}
},_openResultList:function(_cef,_cf0,_cf1){
var _cf2=this.dropDown.getHighlightedOption();
this.dropDown.clearResultList();
if(!_cef.length&&_cf1.start==0){
this.closeDropDown();
return;
}
this._nextSearch=this.dropDown.onPage=lang.hitch(this,function(_cf3){
_cef.nextPage(_cf3!==-1);
this.focus();
});
this.dropDown.createOptions(_cef,_cf1,lang.hitch(this,"_getMenuLabelFromItem"));
this._showResultList();
if("direction" in _cf1){
if(_cf1.direction){
this.dropDown.highlightFirstOption();
}else{
if(!_cf1.direction){
this.dropDown.highlightLastOption();
}
}
if(_cf2){
this._announceOption(this.dropDown.getHighlightedOption());
}
}else{
if(this.autoComplete&&!this._prev_key_backspace&&!/^[*]+$/.test(_cf0[this.searchAttr].toString())){
this._announceOption(this.dropDown.containerNode.firstChild.nextSibling);
}
}
},_showResultList:function(){
this.closeDropDown(true);
this.openDropDown();
this.domNode.setAttribute("aria-expanded","true");
},loadDropDown:function(){
this._startSearchAll();
},isLoaded:function(){
return false;
},closeDropDown:function(){
this._abortQuery();
if(this._opened){
this.inherited(arguments);
this.domNode.setAttribute("aria-expanded","false");
}
},_setBlurValue:function(){
var _cf4=this.get("displayedValue");
var pw=this.dropDown;
if(pw&&(_cf4==pw._messages["previousMessage"]||_cf4==pw._messages["nextMessage"])){
this._setValueAttr(this._lastValueReported,true);
}else{
if(typeof this.item=="undefined"){
this.item=null;
this.set("displayedValue",_cf4);
}else{
if(this.value!=this._lastValueReported){
this._handleOnChange(this.value,true);
}
this._refreshState();
}
}
this.focusNode.removeAttribute("aria-activedescendant");
},_setItemAttr:function(item,_cf5,_cf6){
var _cf7="";
if(item){
if(!_cf6){
_cf6=this.store._oldAPI?this.store.getValue(item,this.searchAttr):item[this.searchAttr];
}
_cf7=this._getValueField()!=this.searchAttr?this.store.getIdentity(item):_cf6;
}
this.set("value",_cf7,_cf5,_cf6,item);
},_announceOption:function(node){
if(!node){
return;
}
var _cf8;
if(node==this.dropDown.nextButton||node==this.dropDown.previousButton){
_cf8=node.innerHTML;
this.item=undefined;
this.value="";
}else{
var item=this.dropDown.items[node.getAttribute("item")];
_cf8=(this.store._oldAPI?this.store.getValue(item,this.searchAttr):item[this.searchAttr]).toString();
this.set("item",item,false,_cf8);
}
this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);
this.focusNode.setAttribute("aria-activedescendant",_ce1.get(node,"id"));
this._autoCompleteText(_cf8);
},_selectOption:function(_cf9){
this.closeDropDown();
if(_cf9){
this._announceOption(_cf9);
}
this._setCaretPos(this.focusNode,this.focusNode.value.length);
this._handleOnChange(this.value,true);
this.focusNode.removeAttribute("aria-activedescendant");
},_startSearchAll:function(){
this._startSearch("");
},_startSearchFromInput:function(){
this.item=undefined;
this.inherited(arguments);
},_startSearch:function(key){
if(!this.dropDown){
var _cfa=this.id+"_popup",_cfb=lang.isString(this.dropDownClass)?lang.getObject(this.dropDownClass,false):this.dropDownClass;
this.dropDown=new _cfb({onChange:lang.hitch(this,this._selectOption),id:_cfa,dir:this.dir,textDir:this.textDir});
}
this._lastInput=key;
this.inherited(arguments);
},_getValueField:function(){
return this.searchAttr;
},postMixInProperties:function(){
this.inherited(arguments);
if(!this.store&&this.srcNodeRef){
var _cfc=this.srcNodeRef;
this.store=new _ce4({},_cfc);
if(!("value" in this.params)){
var item=(this.item=this.store.fetchSelectedItem());
if(item){
var _cfd=this._getValueField();
this.value=this.store._oldAPI?this.store.getValue(item,_cfd):item[_cfd];
}
}
}
},postCreate:function(){
var _cfe=_ce2("label[for=\""+this.id+"\"]");
if(_cfe.length){
if(!_cfe[0].id){
_cfe[0].id=this.id+"_label";
}
this.domNode.setAttribute("aria-labelledby",_cfe[0].id);
}
this.inherited(arguments);
_cdf.after(this,"onSearch",lang.hitch(this,"_openResultList"),true);
},_getMenuLabelFromItem:function(item){
var _cff=this.labelFunc(item,this.store),_d00=this.labelType;
if(this.highlightMatch!="none"&&this.labelType=="text"&&this._lastInput){
_cff=this.doHighlight(_cff,this._lastInput);
_d00="html";
}
return {html:_d00=="html",label:_cff};
},doHighlight:function(_d01,find){
var _d02=(this.ignoreCase?"i":"")+(this.highlightMatch=="all"?"g":""),i=this.queryExpr.indexOf("${0}");
find=_ce3.escapeString(find);
return this._escapeHtml(_d01.replace(new RegExp((i==0?"^":"")+"("+find+")"+(i==(this.queryExpr.length-4)?"$":""),_d02),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,"<span class=\"dijitComboBoxHighlightMatch\">$1</span>");
},_escapeHtml:function(str){
str=String(str).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");
return str;
},reset:function(){
this.item=null;
this.inherited(arguments);
},labelFunc:function(item,_d03){
return (_d03._oldAPI?_d03.getValue(item,this.labelAttr||this.searchAttr):item[this.labelAttr||this.searchAttr]).toString();
},_setValueAttr:function(_d04,_d05,_d06,item){
this._set("item",item||null);
if(_d04==null){
_d04="";
}
this.inherited(arguments);
}});
if(has("dojo-bidi")){
_ce7.extend({_setTextDirAttr:function(_d07){
this.inherited(arguments);
if(this.dropDown){
this.dropDown._set("textDir",_d07);
}
}});
}
return _ce7;
});
},"dijit/TitlePane":function(){
define(["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/fx","dojo/has","dojo/_base/kernel","dojo/keys","./_CssStateMixin","./_TemplatedMixin","./layout/ContentPane","dojo/text!./templates/TitlePane.html","./_base/manager","./a11yclick"],function(_d08,_d09,dom,_d0a,_d0b,_d0c,_d0d,has,_d0e,keys,_d0f,_d10,_d11,_d12,_d13){
var _d14=_d09("dijit.TitlePane",[_d11,_d10,_d0f],{title:"",_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:true,toggleable:true,tabIndex:"0",duration:_d13.defaultDuration,baseClass:"dijitTitlePane",templateString:_d12,doLayout:false,_setTooltipAttr:{node:"focusNode",type:"attribute",attribute:"title"},buildRendering:function(){
this.inherited(arguments);
dom.setSelectable(this.titleNode,false);
},postCreate:function(){
this.inherited(arguments);
if(this.toggleable){
this._trackMouseState(this.titleBarNode,this.baseClass+"Title");
}
var _d15=this.hideNode,_d16=this.wipeNode;
this._wipeIn=_d0d.wipeIn({node:_d16,duration:this.duration,beforeBegin:function(){
_d15.style.display="";
}});
this._wipeOut=_d0d.wipeOut({node:_d16,duration:this.duration,onEnd:function(){
_d15.style.display="none";
}});
},_setOpenAttr:function(open,_d17){
_d08.forEach([this._wipeIn,this._wipeOut],function(_d18){
if(_d18&&_d18.status()=="playing"){
_d18.stop();
}
});
if(_d17){
var anim=this[open?"_wipeIn":"_wipeOut"];
anim.play();
}else{
this.hideNode.style.display=this.wipeNode.style.display=open?"":"none";
}
if(this._started){
if(open){
this._onShow();
}else{
this.onHide();
}
}
this.containerNode.setAttribute("aria-hidden",open?"false":"true");
this.focusNode.setAttribute("aria-pressed",open?"true":"false");
this._set("open",open);
this._setCss();
},_setToggleableAttr:function(_d19){
this.focusNode.setAttribute("role",_d19?"button":"heading");
if(_d19){
this.focusNode.setAttribute("aria-controls",this.id+"_pane");
this.focusNode.setAttribute("tabIndex",this.tabIndex);
this.focusNode.setAttribute("aria-pressed",this.open);
}else{
_d0a.remove(this.focusNode,"aria-controls");
_d0a.remove(this.focusNode,"tabIndex");
_d0a.remove(this.focusNode,"aria-pressed");
}
this._set("toggleable",_d19);
this._setCss();
},_setContentAttr:function(_d1a){
if(!this.open||!this._wipeOut||this._wipeOut.status()=="playing"){
this.inherited(arguments);
}else{
if(this._wipeIn&&this._wipeIn.status()=="playing"){
this._wipeIn.stop();
}
_d0c.setMarginBox(this.wipeNode,{h:_d0c.getMarginBox(this.wipeNode).h});
this.inherited(arguments);
if(this._wipeIn){
this._wipeIn.play();
}else{
this.hideNode.style.display="";
}
}
},toggle:function(){
this._setOpenAttr(!this.open,true);
},_setCss:function(){
var node=this.titleBarNode||this.focusNode;
var _d1b=this._titleBarClass;
this._titleBarClass=this.baseClass+"Title"+(this.toggleable?"":"Fixed")+(this.open?"Open":"Closed");
_d0b.replace(node,this._titleBarClass,_d1b||"");
_d0b.replace(node,this._titleBarClass.replace("TitlePaneTitle",""),(_d1b||"").replace("TitlePaneTitle",""));
this.arrowNodeInner.innerHTML=this.open?"-":"+";
},_onTitleKey:function(e){
if(e.keyCode==keys.DOWN_ARROW&&this.open){
this.containerNode.focus();
e.preventDefault();
}
},_onTitleClick:function(){
if(this.toggleable){
this.toggle();
}
},setTitle:function(_d1c){
_d0e.deprecated("dijit.TitlePane.setTitle() is deprecated.  Use set('title', ...) instead.","","2.0");
this.set("title",_d1c);
}});
if(has("dojo-bidi")){
_d14.extend({_setTitleAttr:function(_d1d){
this._set("title",_d1d);
this.titleNode.innerHTML=_d1d;
this.applyTextDir(this.titleNode);
},_setTooltipAttr:function(_d1e){
this._set("tooltip",_d1e);
if(this.textDir){
_d1e=this.enforceTextDirWithUcc(null,_d1e);
}
_d0a.set(this.focusNode,"title",_d1e);
},_setTextDirAttr:function(_d1f){
if(this._created&&this.textDir!=_d1f){
this._set("textDir",_d1f);
this.set("title",this.title);
this.set("tooltip",this.tooltip);
}
}});
}
return _d14;
});
},"curam/layout/EmptyContentPane":function(){
define(["dojo/_base/declare","dijit/layout/ContentPane"],function(_d20){
var _d21=_d20("curam.layout.EmptyContentPane",dijit.layout.ContentPane,{baseClass:"",_layoutChildren:function(){
},resize:function(){
}});
return _d21;
});
},"dijit/place":function(){
define(["dojo/_base/array","dojo/dom-geometry","dojo/dom-style","dojo/_base/kernel","dojo/_base/window","./Viewport","./main"],function(_d22,_d23,_d24,_d25,win,_d26,_d27){
function _d28(node,_d29,_d2a,_d2b){
var view=_d26.getEffectiveBox(node.ownerDocument);
if(!node.parentNode||String(node.parentNode.tagName).toLowerCase()!="body"){
win.body(node.ownerDocument).appendChild(node);
}
var best=null;
_d22.some(_d29,function(_d2c){
var _d2d=_d2c.corner;
var pos=_d2c.pos;
var _d2e=0;
var _d2f={w:{"L":view.l+view.w-pos.x,"R":pos.x-view.l,"M":view.w}[_d2d.charAt(1)],h:{"T":view.t+view.h-pos.y,"B":pos.y-view.t,"M":view.h}[_d2d.charAt(0)]};
var s=node.style;
s.left=s.right="auto";
if(_d2a){
var res=_d2a(node,_d2c.aroundCorner,_d2d,_d2f,_d2b);
_d2e=typeof res=="undefined"?0:res;
}
var _d30=node.style;
var _d31=_d30.display;
var _d32=_d30.visibility;
if(_d30.display=="none"){
_d30.visibility="hidden";
_d30.display="";
}
var bb=_d23.position(node);
_d30.display=_d31;
_d30.visibility=_d32;
var _d33={"L":pos.x,"R":pos.x-bb.w,"M":Math.max(view.l,Math.min(view.l+view.w,pos.x+(bb.w>>1))-bb.w)}[_d2d.charAt(1)],_d34={"T":pos.y,"B":pos.y-bb.h,"M":Math.max(view.t,Math.min(view.t+view.h,pos.y+(bb.h>>1))-bb.h)}[_d2d.charAt(0)],_d35=Math.max(view.l,_d33),_d36=Math.max(view.t,_d34),endX=Math.min(view.l+view.w,_d33+bb.w),endY=Math.min(view.t+view.h,_d34+bb.h),_d37=endX-_d35,_d38=endY-_d36;
_d2e+=(bb.w-_d37)+(bb.h-_d38);
if(best==null||_d2e<best.overflow){
best={corner:_d2d,aroundCorner:_d2c.aroundCorner,x:_d35,y:_d36,w:_d37,h:_d38,overflow:_d2e,spaceAvailable:_d2f};
}
return !_d2e;
});
if(best.overflow&&_d2a){
_d2a(node,best.aroundCorner,best.corner,best.spaceAvailable,_d2b);
}
var top=best.y,side=best.x,body=win.body(node.ownerDocument);
if(/relative|absolute/.test(_d24.get(body,"position"))){
top-=_d24.get(body,"marginTop");
side-=_d24.get(body,"marginLeft");
}
var s=node.style;
s.top=top+"px";
s.left=side+"px";
s.right="auto";
return best;
};
var _d39={"TL":"BR","TR":"BL","BL":"TR","BR":"TL"};
var _d3a={at:function(node,pos,_d3b,_d3c,_d3d){
var _d3e=_d22.map(_d3b,function(_d3f){
var c={corner:_d3f,aroundCorner:_d39[_d3f],pos:{x:pos.x,y:pos.y}};
if(_d3c){
c.pos.x+=_d3f.charAt(1)=="L"?_d3c.x:-_d3c.x;
c.pos.y+=_d3f.charAt(0)=="T"?_d3c.y:-_d3c.y;
}
return c;
});
return _d28(node,_d3e,_d3d);
},around:function(node,_d40,_d41,_d42,_d43){
var _d44;
if(typeof _d40=="string"||"offsetWidth" in _d40||"ownerSVGElement" in _d40){
_d44=_d23.position(_d40,true);
if(/^(above|below)/.test(_d41[0])){
var _d45=_d23.getBorderExtents(_d40),_d46=_d40.firstChild?_d23.getBorderExtents(_d40.firstChild):{t:0,l:0,b:0,r:0},_d47=_d23.getBorderExtents(node),_d48=node.firstChild?_d23.getBorderExtents(node.firstChild):{t:0,l:0,b:0,r:0};
_d44.y+=Math.min(_d45.t+_d46.t,_d47.t+_d48.t);
_d44.h-=Math.min(_d45.t+_d46.t,_d47.t+_d48.t)+Math.min(_d45.b+_d46.b,_d47.b+_d48.b);
}
}else{
_d44=_d40;
}
if(_d40.parentNode){
var _d49=_d24.getComputedStyle(_d40).position=="absolute";
var _d4a=_d40.parentNode;
while(_d4a&&_d4a.nodeType==1&&_d4a.nodeName!="BODY"){
var _d4b=_d23.position(_d4a,true),pcs=_d24.getComputedStyle(_d4a);
if(/relative|absolute/.test(pcs.position)){
_d49=false;
}
if(!_d49&&/hidden|auto|scroll/.test(pcs.overflow)){
var _d4c=Math.min(_d44.y+_d44.h,_d4b.y+_d4b.h);
var _d4d=Math.min(_d44.x+_d44.w,_d4b.x+_d4b.w);
_d44.x=Math.max(_d44.x,_d4b.x);
_d44.y=Math.max(_d44.y,_d4b.y);
_d44.h=_d4c-_d44.y;
_d44.w=_d4d-_d44.x;
}
if(pcs.position=="absolute"){
_d49=true;
}
_d4a=_d4a.parentNode;
}
}
var x=_d44.x,y=_d44.y,_d4e="w" in _d44?_d44.w:(_d44.w=_d44.width),_d4f="h" in _d44?_d44.h:(_d25.deprecated("place.around: dijit/place.__Rectangle: { x:"+x+", y:"+y+", height:"+_d44.height+", width:"+_d4e+" } has been deprecated.  Please use { x:"+x+", y:"+y+", h:"+_d44.height+", w:"+_d4e+" }","","2.0"),_d44.h=_d44.height);
var _d50=[];
function push(_d51,_d52){
_d50.push({aroundCorner:_d51,corner:_d52,pos:{x:{"L":x,"R":x+_d4e,"M":x+(_d4e>>1)}[_d51.charAt(1)],y:{"T":y,"B":y+_d4f,"M":y+(_d4f>>1)}[_d51.charAt(0)]}});
};
_d22.forEach(_d41,function(pos){
var ltr=_d42;
switch(pos){
case "above-centered":
push("TM","BM");
break;
case "below-centered":
push("BM","TM");
break;
case "after-centered":
ltr=!ltr;
case "before-centered":
push(ltr?"ML":"MR",ltr?"MR":"ML");
break;
case "after":
ltr=!ltr;
case "before":
push(ltr?"TL":"TR",ltr?"TR":"TL");
push(ltr?"BL":"BR",ltr?"BR":"BL");
break;
case "below-alt":
ltr=!ltr;
case "below":
push(ltr?"BL":"BR",ltr?"TL":"TR");
push(ltr?"BR":"BL",ltr?"TR":"TL");
break;
case "above-alt":
ltr=!ltr;
case "above":
push(ltr?"TL":"TR",ltr?"BL":"BR");
push(ltr?"TR":"TL",ltr?"BR":"BL");
break;
default:
push(pos.aroundCorner,pos.corner);
}
});
var _d53=_d28(node,_d50,_d43,{w:_d4e,h:_d4f});
_d53.aroundNodePos=_d44;
return _d53;
}};
return _d27.place=_d3a;
});
},"dijit/form/ComboBox":function(){
define(["dojo/_base/declare","./ValidationTextBox","./ComboBoxMixin"],function(_d54,_d55,_d56){
return _d54("dijit.form.ComboBox",[_d55,_d56],{});
});
},"dijit/layout/_LayoutWidget":function(){
define(["dojo/_base/lang","../_Widget","../_Container","../_Contained","../Viewport","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style"],function(lang,_d57,_d58,_d59,_d5a,_d5b,_d5c,_d5d,_d5e){
return _d5b("dijit.layout._LayoutWidget",[_d57,_d58,_d59],{baseClass:"dijitLayoutContainer",isLayoutContainer:true,_setTitleAttr:null,buildRendering:function(){
this.inherited(arguments);
_d5c.add(this.domNode,"dijitContainer");
},startup:function(){
if(this._started){
return;
}
this.inherited(arguments);
var _d5f=this.getParent&&this.getParent();
if(!(_d5f&&_d5f.isLayoutContainer)){
this.resize();
this.own(_d5a.on("resize",lang.hitch(this,"resize")));
}
},resize:function(_d60,_d61){
var node=this.domNode;
if(_d60){
_d5d.setMarginBox(node,_d60);
}
var mb=_d61||{};
lang.mixin(mb,_d60||{});
if(!("h" in mb)||!("w" in mb)){
mb=lang.mixin(_d5d.getMarginBox(node),mb);
}
var cs=_d5e.getComputedStyle(node);
var me=_d5d.getMarginExtents(node,cs);
var be=_d5d.getBorderExtents(node,cs);
var bb=(this._borderBox={w:mb.w-(me.w+be.w),h:mb.h-(me.h+be.h)});
var pe=_d5d.getPadExtents(node,cs);
this._contentBox={l:_d5e.toPixelValue(node,cs.paddingLeft),t:_d5e.toPixelValue(node,cs.paddingTop),w:bb.w-pe.w,h:bb.h-pe.h};
this.layout();
},layout:function(){
},_setupChild:function(_d62){
var cls=this.baseClass+"-child "+(_d62.baseClass?this.baseClass+"-"+_d62.baseClass:"");
_d5c.add(_d62.domNode,cls);
},addChild:function(_d63,_d64){
this.inherited(arguments);
if(this._started){
this._setupChild(_d63);
}
},removeChild:function(_d65){
var cls=this.baseClass+"-child"+(_d65.baseClass?" "+this.baseClass+"-"+_d65.baseClass:"");
_d5c.remove(_d65.domNode,cls);
this.inherited(arguments);
}});
});
},"dojo/cldr/supplemental":function(){
define(["../_base/lang","../i18n"],function(lang,i18n){
var _d66={};
lang.setObject("dojo.cldr.supplemental",_d66);
_d66.getFirstDayOfWeek=function(_d67){
var _d68={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0};
var _d69=_d66._region(_d67);
var dow=_d68[_d69];
return (dow===undefined)?1:dow;
};
_d66._region=function(_d6a){
_d6a=i18n.normalizeLocale(_d6a);
var tags=_d6a.split("-");
var _d6b=tags[1];
if(!_d6b){
_d6b={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[tags[0]];
}else{
if(_d6b.length==4){
_d6b=tags[2];
}
}
return _d6b;
};
_d66.getWeekend=function(_d6c){
var _d6d={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5},_d6e={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6},_d6f=_d66._region(_d6c),_d70=_d6d[_d6f],end=_d6e[_d6f];
if(_d70===undefined){
_d70=6;
}
if(end===undefined){
end=0;
}
return {start:_d70,end:end};
};
return _d66;
});
},"dijit/layout/_ContentPaneResizeMixin":function(){
define(["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/query","../registry","../Viewport","./utils"],function(_d71,_d72,_d73,_d74,_d75,lang,_d76,_d77,_d78,_d79){
return _d72("dijit.layout._ContentPaneResizeMixin",null,{doLayout:true,isLayoutContainer:true,startup:function(){
if(this._started){
return;
}
var _d7a=this.getParent();
this._childOfLayoutWidget=_d7a&&_d7a.isLayoutContainer;
this._needLayout=!this._childOfLayoutWidget;
this.inherited(arguments);
if(this._isShown()){
this._onShow();
}
if(!this._childOfLayoutWidget){
this.own(_d78.on("resize",lang.hitch(this,"resize")));
}
},_checkIfSingleChild:function(){
if(!this.doLayout){
return;
}
var _d7b=[],_d7c=false;
_d76("> *",this.containerNode).some(function(node){
var _d7d=_d77.byNode(node);
if(_d7d&&_d7d.resize){
_d7b.push(_d7d);
}else{
if(!/script|link|style/i.test(node.nodeName)&&node.offsetHeight){
_d7c=true;
}
}
});
this._singleChild=_d7b.length==1&&!_d7c?_d7b[0]:null;
_d73.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild);
},resize:function(_d7e,_d7f){
this._resizeCalled=true;
this._scheduleLayout(_d7e,_d7f);
},_scheduleLayout:function(_d80,_d81){
if(this._isShown()){
this._layout(_d80,_d81);
}else{
this._needLayout=true;
this._changeSize=_d80;
this._resultSize=_d81;
}
},_layout:function(_d82,_d83){
delete this._needLayout;
if(!this._wasShown&&this.open!==false){
this._onShow();
}
if(_d82){
_d74.setMarginBox(this.domNode,_d82);
}
var cn=this.containerNode;
if(cn===this.domNode){
var mb=_d83||{};
lang.mixin(mb,_d82||{});
if(!("h" in mb)||!("w" in mb)){
mb=lang.mixin(_d74.getMarginBox(cn),mb);
}
this._contentBox=_d79.marginBox2contentBox(cn,mb);
}else{
this._contentBox=_d74.getContentBox(cn);
}
this._layoutChildren();
},_layoutChildren:function(){
this._checkIfSingleChild();
if(this._singleChild&&this._singleChild.resize){
var cb=this._contentBox||_d74.getContentBox(this.containerNode);
this._singleChild.resize({w:cb.w,h:cb.h});
}else{
var _d84=this.getChildren(),_d85,i=0;
while(_d85=_d84[i++]){
if(_d85.resize){
_d85.resize();
}
}
}
},_isShown:function(){
if(this._childOfLayoutWidget){
if(this._resizeCalled&&"open" in this){
return this.open;
}
return this._resizeCalled;
}else{
if("open" in this){
return this.open;
}else{
var node=this.domNode,_d86=this.domNode.parentNode;
return (node.style.display!="none")&&(node.style.visibility!="hidden")&&!_d73.contains(node,"dijitHidden")&&_d86&&_d86.style&&(_d86.style.display!="none");
}
}
},_onShow:function(){
this._wasShown=true;
if(this._needLayout){
this._layout(this._changeSize,this._resultSize);
}
this.inherited(arguments);
}});
});
},"curam/util/DatePicker":function(){
define(["dojo/_base/declare"],function(_d87){
var _d88=_d87("curam.util.DatePicker",null,{constructor:function(){
},setDate:function(_d89,_d8a){
if(_d89){
var _d8b=_d89.lastIndexOf("_wrapper")!=-1?_d89.substring(0,_d89.lastIndexOf("_wrapper")):_d89;
curam.util.getTopmostWindow().dojo.publish("/curam/datePicker/setDate",[_d8b,_d8a]);
}
}});
return _d88;
});
},"dijit/form/_ButtonMixin":function(){
define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(_d8c,dom,has,_d8d){
var _d8e=_d8c("dijit.form._ButtonMixin"+(has("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(e){
e.stopPropagation();
e.preventDefault();
if(!this.disabled){
this.valueNode.click(e);
}
return false;
},_onClick:function(e){
if(this.disabled){
e.stopPropagation();
e.preventDefault();
return false;
}
if(this.onClick(e)===false){
e.preventDefault();
}
var _d8f=e.defaultPrevented;
if(!_d8f&&this.type=="submit"&&!(this.valueNode||this.focusNode).form){
for(var node=this.domNode;node.parentNode;node=node.parentNode){
var _d90=_d8d.byNode(node);
if(_d90&&typeof _d90._onSubmit=="function"){
_d90._onSubmit(e);
e.preventDefault();
_d8f=true;
break;
}
}
}
return !_d8f;
},postCreate:function(){
this.inherited(arguments);
dom.setSelectable(this.focusNode,false);
},onClick:function(){
return true;
},_setLabelAttr:function(_d91){
this._set("label",_d91);
var _d92=this.containerNode||this.focusNode;
_d92.innerHTML=_d91;
}});
if(has("dojo-bidi")){
_d8e=_d8c("dijit.form._ButtonMixin",_d8e,{_setLabelAttr:function(){
this.inherited(arguments);
var _d93=this.containerNode||this.focusNode;
this.applyTextDir(_d93);
}});
}
return _d8e;
});
},"curam/pagination/StateController":function(){
define(["dojo/_base/declare","curam/pagination","curam/debug"],function(_d94){
var _d95=_d94("curam.pagination.StateController",null,{pageSize:undefined,currentPage:0,_listModel:undefined,_gui:undefined,constructor:function(_d96,gui){
this.pageSize=curam.pagination.defaultPageSize;
this._listModel=_d96;
this.pageSize=curam.pagination.defaultPageSize;
this._gui=gui;
var _d97={};
_d97.pageSizeOptions=[15,30,45];
_d97.pageSizeOptions.contains=function(val){
for(var i=0;i<_d97.pageSizeOptions.length;i++){
if(_d97.pageSizeOptions[i]==val){
return true;
}
}
return false;
};
if(!_d97.pageSizeOptions.contains(curam.pagination.defaultPageSize)){
_d97.pageSizeOptions.push(curam.pagination.defaultPageSize);
_d97.pageSizeOptions.sort(function(a,b){
return a-b;
});
}
_d97.currentPageSize=this.pageSize;
_d97.directLinkRangeWidth=3;
_d97.lastPage=this._getLastPageNumber();
this._gui.updateState(_d97);
var _d98={};
_d98.first=dojo.hitch(this,this.gotoFirst);
_d98.last=dojo.hitch(this,this.gotoLast);
_d98.previous=dojo.hitch(this,this.gotoPrevious);
_d98.next=dojo.hitch(this,this.gotoNext);
_d98.page=dojo.hitch(this,this.gotoPage);
_d98.pageSize=dojo.hitch(this,this.changePageSize);
this._gui.setHandlers(_d98);
},reset:function(){
this._listModel.hideRange(1,this._listModel.getRowCount());
this.currentPage=0;
this._gui.reset();
this.gotoFirst();
},gotoFirst:function(){
if(this.currentPage!=1){
this.gotoPage(1);
}
},gotoLast:function(){
var _d99=this._getLastPageNumber();
if(this.currentPage!=_d99){
this.gotoPage(_d99);
}
},gotoPrevious:function(){
if(this.currentPage>1){
this.gotoPage(this.currentPage-1);
}
},gotoNext:function(){
curam.debug.log("curam.pagination.StateController.gotoNext");
var _d9a=this._getLastPageNumber();
if(this.currentPage<_d9a){
this.gotoPage(this.currentPage+1);
}
},gotoPage:function(_d9b){
curam.debug.log("curam.pagination.StateController.gotoPage: ",_d9b);
if(this.currentPage!=0){
this._listModel.hideRange(this._calcRangeStart(this.currentPage),this._calcRangeEnd(this.currentPage));
}
this._listModel.showRange(this._calcRangeStart(_d9b),this._calcRangeEnd(_d9b));
this.currentPage=_d9b;
this._updateGui();
},changePageSize:function(_d9c){
curam.debug.log("curam.pagination.StateController.changePageSize: ",_d9c);
this.pageSize=_d9c;
var _d9d={};
_d9d.currentPageSize=_d9c;
_d9d.lastPage=this._getLastPageNumber();
this._gui.updateState(_d9d);
dojo.publish("curam/update/readings/pagination",[this._listModel.getId(),_d9c]);
this.reset();
},_calcRangeStart:function(_d9e){
return (_d9e*this.pageSize)-this.pageSize+1;
},_calcRangeEnd:function(_d9f){
if(_d9f!=this._getLastPageNumber()){
return _d9f*this.pageSize;
}else{
return this._listModel.getRowCount();
}
},_getLastPageNumber:function(){
var _da0=this._listModel.getRowCount();
var mod=_da0%this.pageSize;
return ((_da0-mod)/this.pageSize)+(mod>0?1:0);
},_updateGui:function(){
var _da1={};
_da1.first=this.currentPage>1;
_da1.previous=_da1.first;
_da1.next=this.currentPage<this._getLastPageNumber();
_da1.last=_da1.next;
_da1.currentPage=this.currentPage;
_da1.rowInfo=[this._calcRangeStart(this.currentPage),this._calcRangeEnd(this.currentPage),this._listModel.getRowCount()];
this._gui.updateState(_da1);
}});
return _d95;
});
},"curam/util/TabActionsMenu":function(){
define(["dijit/registry","dojo/query","curam/inspection/Layer","curam/tab","curam/debug","curam/define","curam/util","curam/util/Refresh"],function(_da2,_da3,_da4,tab,_da5){
curam.define.singleton("curam.util.TabActionsMenu",{_tabMenuStates:{},maxNumToDisplayInline:2,inlineMenuConfig:{contentPanelID:"",numItemsDisplayedInline:"",inlineItemsDisplayed:[],numOverflowItemsDisplayed:null},classNameHidden:"bx--btn-hidden",getRefreshParams:function(_da6){
curam.debug.log("curam.util.TabActionsMenu.getRefreshParams(%s)",_da6);
if(!curam.util.TabActionsMenu.dynamicMenuBarData[_da6]){
curam.debug.log(_da5.getProperty("curam.util.TabActionsMenu.no.dynamic"));
return null;
}
var _da7="menuId="+curam.util.TabActionsMenu.dynamicMenuBarData[_da6].menuBarId;
_da7+="&menuItemIds="+curam.util.toCommaSeparatedList(curam.util.TabActionsMenu.dynamicMenuBarData[_da6].dynamicMenuItemIds);
_da7+="&menuLoaders="+curam.util.toCommaSeparatedList(curam.util.TabActionsMenu.dynamicMenuBarData[_da6].dynamicMenuLoaders);
_da7+="&menuPageParameters="+curam.util.TabActionsMenu.dynamicMenuBarData[_da6].pageParameters;
return _da7;
},updateMenuItemStates:function(_da8,data){
var _da9=data.menuData;
for(var i=0;i<_da9.itemStates.length;i++){
var _daa=_da9.itemStates[i];
dojo.publish("/curam/tabactions/menuitemstate",[_da8,_daa.id,_daa.enabled,_daa.visible]);
}
curam.util.TabActionsMenu.manageInlineTabMenuStates(_da8);
var _dab=function(){
for(var i=0;i<_da9.itemStates.length;i++){
curam.util.TabActionsMenu.updateMenuItemState(_da9.itemStates[i],_da8);
}
};
if(curam.util.TabActionsMenu._isMenuCreated(_da8)){
_dab();
}else{
var _dac=curam.util.getTopmostWindow();
var _dad=_dac.dojo.subscribe("/curam/menu/created",this,function(_dae){
_da5.log("Received /curam/menu/created "+_da5.getProperty("curam.util.ExpandableLists.load.for"),_dae);
if(_dae==_da8){
_da5.log(_da5.getProperty("curam.util.TabActionsMenu.match"));
curam.util.TabActionsMenu._tabMenuStates[_dae]=true;
_dab();
_dac.dojo.unsubscribe(_dad);
}
});
curam.tab.unsubscribeOnTabClose(_dad,_da8);
}
},_isMenuCreated:function(_daf){
return curam.util.TabActionsMenu._tabMenuStates[_daf]==true;
},updateMenuItemState:function(_db0,_db1){
var _db2=_da2.byId("menuItem_"+_db1+"_"+_db0.id);
var _db3=_db2!=null?_db2:_da2.byId("overflowItem_"+_db1+"_"+_db0.id);
if(_db3!=null){
_db3.disabled=!_db0.enabled;
curam.util.swapState(_db3.domNode,_db0.enabled,"enabled","disabled");
curam.util.swapState(_db3.domNode,_db0.visible,"visible","hidden");
if(_db3.disabled){
_db3.domNode.setAttribute("aria-disabled","true");
}
}
},setupHandlers:function(_db4){
curam.util.Refresh.setMenuBarCallbacks(curam.util.TabActionsMenu.updateMenuItemStates,curam.util.TabActionsMenu.getRefreshParams);
},handleOnClick:function(url,_db5){
if(_db5){
curam.tab.getTabController().handleDownLoadClick(url);
}else{
curam.tab.getTabController().handleLinkClick(url);
}
},handleOnClickModal:function(url,_db6){
var _db7={dialogOptions:_db6};
curam.tab.getTabController().handleLinkClick(url,_db7);
},updateInlineTabMenuState:function(){
dojo.subscribe("/curam/tabactions/menuitemstate",this,function(_db8,id,_db9,_dba){
var _dbb="inlinedItem_"+_db8+"_"+id;
var _dbc=document.getElementById("inlinedItem_"+_db8+"_"+id);
if(_dbc){
if(_db9){
_da5.log("curam.util.TabActionsMenu.updateInlineTabMenuState() - ENABLING inlined item: "+_dbb);
if(_dbc.classList.contains("disabled")){
_dbc.classList.remove("disabled");
}
if(_dbc.hasAttribute("disabled")){
_dbc.removeAttribute("disabled");
}
}else{
_da5.log("curam.util.TabActionsMenu.updateInlineTabMenuState() - DISABLING inlined item: "+_dbb);
if(!_dbc.classList.contains("disabled")){
_dbc.classList.add("disabled");
}
_dbc.setAttribute("disabled","");
}
if(_dba){
_da5.log("curam.util.TabActionsMenu.updateInlineTabMenuState() - DISPLAYING inlined item: "+_dbb);
if(_dbc.classList.contains(curam.util.TabActionsMenu.classNameHidden)){
_dbc.classList.remove(curam.util.TabActionsMenu.classNameHidden);
}
}else{
_da5.log("curam.util.TabActionsMenu.updateInlineTabMenuState() - HIDING inlined item: "+_dbb);
if(!_dbc.classList.contains(curam.util.TabActionsMenu.classNameHidden)){
_dbc.classList.add(curam.util.TabActionsMenu.classNameHidden);
}
}
}
});
},_getTabMenuItemsDisplayedInline:function(_dbd){
return _da3("#"+_dbd+" .bx--btn-tab-menu:not(."+curam.util.TabActionsMenu.classNameHidden+")");
},setInlinedTabMenuItemsDisplayed:function(_dbe,_dbf){
var _dc0;
var _dc1=curam.util.TabActionsMenu.inlineMenuConfig;
if(_dc1&&_dc1.contentPanelID!=_dbe){
_dc0=_dbf?_dbf:curam.util.TabActionsMenu._getTabMenuItemsDisplayedInline(_dbe);
if(_dc0&&_dc0.length>0){
var _dc2={};
_dc2.contentPanelID=_dbe;
_dc2.numItemsDisplayedInline=_dc0.length;
var _dc3=[];
for(var i=0;i<_dc0.length;i++){
var id=_dc0[i].id;
_dc3.push(id);
}
_dc2.inlineItemsDisplayed=_dc3;
var _dc1=curam.util.TabActionsMenu.inlineMenuConfig;
curam.util.TabActionsMenu.inlineMenuConfig=_dc2;
}
}
},hideTabMenuOverflowItems:function(_dc4,_dc5){
var _dc6=curam.util.TabActionsMenu.inlineMenuConfig;
if(_dc6&&_dc6.contentPanelID==_dc4){
var _dc7=_da3("tr::not(.dijitMenuSeparator):not(.hidden)",_dc5);
var _dc8=_dc6.numOverflowItemsDisplayed;
var _dc9=_dc8&&_dc8!=_dc7.length;
var _dca=!_dc8||_dc9;
if(_dc7&&_dc7.length>0&&_dca){
if(_dc9){
var _dcb=_dc6.inlineItemsDisplayed;
if(_dcb){
for(var x=0;x<_dcb.length;x++){
var _dcc=_dcb[x];
var _dcd=_dcc.substring(_dcc.indexOf(_dc4),_dcc.length);
var _dce=document.getElementById("overflowItem_"+_dcd);
if(_dce&&!_dce.classList.contains("hidden")){
_da5.log("curam.util.TabActionsMenu.hideTabMenuOverflowItems() - HIDING oveflow item: "+"overflowItem_"+_dcd);
curam.util.swapState(_dce,false,"visible","hidden");
}
}
}
}else{
for(var i=0;i<_dc6.numItemsDisplayedInline;i++){
var _dce=_dc7[i];
if(_dce){
_da5.log("curam.util.TabActionsMenu.hideTabMenuOverflowItems() - dynamic update recored");
_da5.log("curam.util.TabActionsMenu.hideTabMenuOverflowItems() - HIDING oveflow item: "+"overflowItem_"+_dcd);
curam.util.swapState(_dce,false,"visible","hidden");
}
}
}
_dc7=_da3("tr::not(.dijitMenuSeparator):not(.hidden)",_dc5);
_da5.log("curam.util.TabActionsMenu.hideTabMenuOverflowItems() - setting number of overflow items to be: "+_dc7.length);
curam.util.TabActionsMenu.inlineMenuConfig.numOverflowItemsDisplayed=_dc7.length;
}
}
},manageInlineTabMenuStates:function(_dcf){
var _dd0=+curam.util.TabActionsMenu.maxNumToDisplayInline;
var _dd1=_dd0;
curam.util.TabActionsMenu.inlineMenuItemIds=[];
var _dd2=curam.util.TabActionsMenu._getTabMenuItemsDisplayedInline(_dcf);
var _dd3=_dd2&&_dd2.length>0;
var _dd4=[];
if(_dd3){
var _dd5=_dd2[0].parentNode;
if(_dd2.length>_dd0){
for(var i=_dd0;i<_dd2.length;i++){
_da5.log("curam.util.TabActionsMenu.manageInlineTabMenuStates() - HIDING inlined tab action item: "+_dd2[i].id);
_dd2[i].classList.add(curam.util.TabActionsMenu.classNameHidden);
}
}else{
_dd1=_dd2.length;
if(_dd1>0){
var _dd6=_da3("img",_dd5);
if(_dd6&&_dd6.length>0){
_dd6[0].classList.add(curam.util.TabActionsMenu.classNameHidden);
}
}
}
_da5.log("curam.util.TabActionsMenu.manageInlineTabMenuStates() - REMOVING mask for action items on tab menu bar: "+_dd5.id);
_dd5.classList.remove(curam.util.TabActionsMenu.classNameHidden);
for(var i=0;i<_dd1;i++){
_dd4.push(_dd2[i]);
}
curam.util.TabActionsMenu.setInlinedTabMenuItemsDisplayed(_dcf,_dd4);
}
}});
_da4.register("curam/util/TabActionsMenu",this);
return curam.util.TabActionsMenu;
});
},"curam/util/AutoRecoveryAPI":function(){
define(["dojo/request/xhr","curam/define","dojo/_base/declare","curam/debug"],function(xhr,_dd7,_dd8,_dd9){
var _dda=_dd8("curam.util.AutoRecoveryAPI",null,{_pageID:"",_pageParams:"",_iFrameID:"",_unsubscribes:[],_unsubscribesFormEvent:[],_subscribeCloseModal:null,_throttle:[],constructor:function(){
this._unset();
this._unsubscribes.push(dojo.subscribe("curam/tab/restoreModal",this,function(){
this._getAutoRecoveryService();
}));
if(!this._subscribeCloseModal){
dojo.subscribe("/curam/dialog/BeforeClose",this._beforeCloseHandler.bind(this));
}
this._throttle={enabled:AUTORECOVERY_THROTTLE_INTERVAL>0,gateOpen:true,queuedPost:[]};
this.tabSessionManager=new curam.tab.TabSessionManager();
},initialize:function(wRef){
var _ddb=wRef.frameElement.id.replace("iframe-","");
if(!this._iFrameID){
this._iFrameID=_ddb;
}
var _ddc=this._iFrameID===_ddb;
var _ddd=wRef.location.href.includes("Action.do");
var _dde=_ddc&&!_ddd;
if(_dde){
this._uninstall(this._unsubscribesFormEvent);
var _ddf=new curam.ui.PageRequest(wRef.location.href);
this._pageParams=_ddf.parameters;
this._pageID=_ddf.pageID;
var _de0=this.tabSessionManager._getPrevSelectedTab();
this._updateTabContent(_de0);
if(!_de0.restoreModalInd){
this._createAutorecoveryHandler(_de0);
}else{
this._getAutoRecoveryService(wRef);
}
var _de1=this._registerFormChangeHandler.bind(this);
this._unsubscribesFormEvent.push(dojo.subscribe("curam/util/CuramFormsAPI/formChange",_de1));
}
},_beforeCloseHandler:function(_de2){
if(this._iFrameID===_de2){
this._deleteAutoRecoveryService();
this._unset();
this._unsetSelectedTD();
}
},_unsetSelectedTD:function(){
var _de3=this.tabSessionManager._getPrevSelectedTab();
_de3.foregroundTabContent=null;
_de3.restoreModalInd=false;
curam.debug.log("curam.modal.CuramCarbonModal: "+_dd9.getProperty("curam.modal.CuramCarbonModal.foreground.removed"),_de3);
localStorage[curam.tab.TabSessionManager.SELECTED_TAB_KEY]=_de3.toJson();
},_createAutorecoveryHandler:function(_de4){
var _de5={pageID:this._pageID,params:this._pageParams};
var _de6="";
var _de7=false;
this._postAutoRecoveryService(_de5,_de6,_de7,_de4);
},_updateTabContent:function(_de8){
curam.debug.log("curam.util.AutoRecoveryAPI: "+_dd9.getProperty("curam.util.AutoRecoveryAPI.foreground.added"),_de8);
if(!_de8.foregroundTabContent){
this._updateForegroundTabContent(_de8);
}else{
if(_de8.foregroundTabContent.pageID!==this._pageID){
_de8.restoreModalInd=false;
this._updateForegroundTabContent(_de8);
}
}
},_updateForegroundTabContent:function(_de9){
var _dea={"pageID":this._pageID,"pageParams":this._pageParams};
_de9.foregroundTabContent=_dea;
localStorage[curam.tab.TabSessionManager.SELECTED_TAB_KEY]=_de9.toJson();
},_unset:function(){
this._uninstall(this._unsubscribes,this._unsubscribesFormEvent);
this._pageID="";
this._pageParams="";
this._iFrameID="";
this._unsubscribes=[];
this._unsubscribesFormEvent=[];
},_uninstall:function(_deb,_dec){
_deb&&_deb.forEach(function(hh){
hh.remove();
});
_dec&&_dec.forEach(function(hh){
hh.remove();
});
},_registerFormChangeHandler:function(_ded){
if(this._iFrameID===_ded.frameID){
curam.debug.log("curam.util.AutoRecoveryAPI: "+_dd9.getProperty("curam.util.AutoRecoveryAPI.register.form.change.handler"));
var _dee=_ded.data;
var _def={pageID:this._pageID,params:this._pageParams};
var _df0=true;
this._postAutoRecoveryService(_def,_dee,_df0);
}
},_getSelectedTD:function(_df1,_df2){
curam.debug.log("curam.util.AutoRecoveryAPI: "+_dd9.getProperty("curam.util.AutoRecoveryAPI.previous.modal.background"));
var _df3="";
if(_df1){
_df3=this.tabSessionManager._getPrevSelectedModal();
}else{
curam.debug.log("curam.util.AutoRecoveryAPI: "+_dd9.getProperty("curam.util.AutoRecoveryAPI.previous.modal.background.set"));
_df3=!_df2?this.tabSessionManager._getPrevSelectedTab():_df2;
_df3.restoreModalInd=true;
localStorage[curam.tab.TabSessionManager.PREVIOUSLY_SELECTED_MODAL_KEY]=_df3.toJson();
}
return _df3;
},_postAutoRecoveryService:function(_df4,_df5,_df6){
curam.debug.log("curam.util.AutoRecoveryAPI: "+_dd9.getProperty("curam.util.AutoRecoveryAPI.post.throttle"));
if(this._throttle.enabled===false){
curam.debug.log("curam.util.AutoRecoveryAPI: "+_dd9.getProperty("curam.util.AutoRecoveryAPI.post.throttle.disabled"));
this._postAutoRecoveryServiceUnthrottled(_df4,_df5,this._getSelectedTD(_df6));
return;
}
curam.debug.log("curam.util.AutoRecoveryAPI: "+_dd9.getProperty("curam.util.AutoRecoveryAPI.post.throttle.gateStatus")+this._throttle.gateOpen);
var _df7=this._throttle.gateOpen;
this._throttle.gateOpen=false;
if(arguments.length>0){
this._throttle.queuedPost={foregroundPage:_df4,foregroundPageData:_df5,backgroundSelectedTD:this._getSelectedTD(_df6)};
curam.debug.log("curam.util.AutoRecoveryAPI: "+_dd9.getProperty("curam.util.AutoRecoveryAPI.post.throttle.storeRequest")+", foregroundPage: "+this._throttle.queuedPost.foregroundPage.pageID+", foregroundPageData: "+this._throttle.queuedPost.foregroundPageData+", backgroundSelectedTD: "+this._throttle.queuedPost.backgroundSelectedTD.tabID);
}
if(_df7===true){
curam.debug.log("curam.util.AutoRecoveryAPI: "+_dd9.getProperty("curam.util.AutoRecoveryAPI.post.throttle.post")+", foregroundPage: "+this._throttle.queuedPost.foregroundPage.pageID+", foregroundPageData: "+this._throttle.queuedPost.foregroundPageData+", backgroundSelectedTD: "+this._throttle.queuedPost.backgroundSelectedTD.tabID);
var _df4=this._throttle.queuedPost.foregroundPage;
var _df5=this._throttle.queuedPost.foregroundPageData;
var _df8=this._throttle.queuedPost.backgroundSelectedTD;
this._throttle.queuedPost=[];
this._postAutoRecoveryServiceUnthrottled(_df4,_df5,_df8);
curam.debug.log("curam.util.AutoRecoveryAPI: "+_dd9.getProperty("curam.util.AutoRecoveryAPI.post.throttle.setTimer")+AUTORECOVERY_THROTTLE_INTERVAL);
this._throttle.timeoutID=setTimeout(function(){
curam.debug.log("curam.util.AutoRecoveryAPI: "+_dd9.getProperty("curam.util.AutoRecoveryAPI.post.throttle.timerElapsed"));
this._throttle.gateOpen=true;
if(Object.keys(this._throttle.queuedPost).length!==0){
curam.debug.log("curam.util.AutoRecoveryAPI: "+_dd9.getProperty("curam.util.AutoRecoveryAPI.post.throttle.processQueuedRequest"));
this._postAutoRecoveryService();
}
}.bind(this),AUTORECOVERY_THROTTLE_INTERVAL);
}
},_postAutoRecoveryServiceUnthrottled:function(_df9,_dfa,_dfb){
curam.debug.log("curam.util.AutoRecoveryAPI: "+_dd9.getProperty("curam.util.AutoRecoveryAPI.post"));
var _dfc="servlet/autorecovery?command=save";
xhr.post(_dfc,{data:{foregroundPage:JSON.stringify(_df9),foregroundPageData:_dfa,backgroundTD:JSON.stringify(_dfb),requestSentTimeStamp:Date.now()}}).then(function(resp){
try{
if(resp!="OK"){
curam.debug.log("curam.util.AutoRecoveryAPI: "+_dd9.getProperty("curam.util.AutoRecoveryAPI.post.error"));
return;
}else{
curam.debug.log("curam.util.AutoRecoveryAPI: "+_dd9.getProperty("curam.util.AutoRecoveryAPI.post.success"));
}
}
catch(e){
curam.debug.log("curam.util.AutoRecoveryAPI: "+_dd9.getProperty("curam.util.AutoRecoveryAPI.post.catch.error")+" '"+e+"'.");
}
},function(_dfd){
curam.debug.log("curam.util.AutoRecoveryAPI: "+_dd9.getProperty("curam.util.AutoRecoveryAPI.post.function.error")+" '"+_dfd+"'.");
});
},_deleteAutoRecoveryService:function(){
curam.debug.log("curam.util.AutoRecoveryAPI: "+_dd9.getProperty("curam.util.AutoRecoveryAPI.delete"));
clearTimeout(this._throttle.timeoutID);
var _dfe="servlet/autorecovery?command=delete";
xhr.post(_dfe,{}).then(function(resp){
try{
if(resp!="OK"){
curam.debug.log("curam.util.AutoRecoveryAPI: "+_dd9.getProperty("curam.util.AutoRecoveryAPI.delete.error"));
return;
}else{
curam.debug.log("curam.util.AutoRecoveryAPI: "+_dd9.getProperty("curam.util.AutoRecoveryAPI.delete.complete"));
}
}
catch(e){
curam.debug.log("curam.util.AutoRecoveryAPI: "+_dd9.getProperty("curam.util.AutoRecoveryAPI.delete.catch.error")+" '"+e+"'.");
}
},function(_dff){
curam.debug.log("curam.util.AutoRecoveryAPI: "+_dd9.getProperty("curam.util.AutoRecoveryAPI.delete.function.error")+" '"+_dff+"'.");
});
},_loadModal:function(_e00,_e01){
curam.debug.log("curam.util.AutoRecoveryAPI: "+_dd9.getProperty("curam.util.AutoRecoveryAPI._loadModal"));
localStorage[curam.tab.TabSessionManager.SELECTED_TAB_KEY]=_e01;
var _e02=_e00.pageID;
var _e03=_e00.params;
curam.util.UimDialog.open(_e02+"Page.do",_e03);
},_getAutoRecoveryService:function(_e04){
curam.debug.log("curam.util.AutoRecoveryAPI: "+_dd9.getProperty("curam.util.AutoRecoveryAPI.get"));
var self=this;
var _e05="servlet/autorecovery?command=load";
xhr.post(_e05,{}).then(function(resp){
try{
if(resp&&resp.length>0){
var _e06=JSON.parse(resp);
curam.debug.log("curam.util.AutoRecoveryAPI: "+_dd9.getProperty("curam.util.AutoRecoveryAPI.get.success"));
var _e07=JSON.parse(_e06.foregroundPage);
if(!_e04){
var _e08=JSON.parse(_e06.backgroundTD);
self._loadModal(_e07,JSON.stringify(_e08));
}else{
var page="Curam_"+_e07.pageID;
if(_e04.document.getElementById(page)){
if(_e06.foregroundPageData){
curam.debug.log("curam.util.AutoRecoveryAPI: "+_dd9.getProperty("curam.util.AutoRecoveryAPI.get.setFormFields"));
var _e09=JSON.parse(_e06.foregroundPageData);
_e04.curam.util.ui.form.CuramFormsAPI.setFormFields(_e07,_e09);
}
}else{
self._createAutorecoveryHandler();
}
}
}else{
curam.debug.log("curam.util.AutoRecoveryAPI: "+_dd9.getProperty("curam.util.AutoRecoveryAPI.get.no.record"));
}
}
catch(e){
curam.debug.log("curam.util.AutoRecoveryAPI: "+_dd9.getProperty("curam.util.AutoRecoveryAPI.get.catch.error")+" '"+e+"'.");
}
},function(_e0a){
curam.debug.log("curam.util.AutoRecoveryAPI: "+_dd9.getProperty("curam.util.AutoRecoveryAPI.get.function.error")+" '"+_e0a+"'.");
});
}});
return _dda;
});
},"dijit/tree/TreeStoreModel":function(){
define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(_e0b,_e0c,_e0d,lang){
return _e0d("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:false,constructor:function(args){
lang.mixin(this,args);
this.connects=[];
var _e0e=this.store;
if(!_e0e.getFeatures()["dojo.data.api.Identity"]){
throw new Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");
}
if(_e0e.getFeatures()["dojo.data.api.Notification"]){
this.connects=this.connects.concat([_e0c.after(_e0e,"onNew",lang.hitch(this,"onNewItem"),true),_e0c.after(_e0e,"onDelete",lang.hitch(this,"onDeleteItem"),true),_e0c.after(_e0e,"onSet",lang.hitch(this,"onSetItem"),true)]);
}
},destroy:function(){
var h;
while(h=this.connects.pop()){
h.remove();
}
},getRoot:function(_e0f,_e10){
if(this.root){
_e0f(this.root);
}else{
this.store.fetch({query:this.query,onComplete:lang.hitch(this,function(_e11){
if(_e11.length!=1){
throw new Error("dijit.tree.TreeStoreModel: root query returned "+_e11.length+" items, but must return exactly one");
}
this.root=_e11[0];
_e0f(this.root);
}),onError:_e10});
}
},mayHaveChildren:function(item){
return _e0b.some(this.childrenAttrs,function(attr){
return this.store.hasAttribute(item,attr);
},this);
},getChildren:function(_e12,_e13,_e14){
var _e15=this.store;
if(!_e15.isItemLoaded(_e12)){
var _e16=lang.hitch(this,arguments.callee);
_e15.loadItem({item:_e12,onItem:function(_e17){
_e16(_e17,_e13,_e14);
},onError:_e14});
return;
}
var _e18=[];
for(var i=0;i<this.childrenAttrs.length;i++){
var vals=_e15.getValues(_e12,this.childrenAttrs[i]);
_e18=_e18.concat(vals);
}
var _e19=0;
if(!this.deferItemLoadingUntilExpand){
_e0b.forEach(_e18,function(item){
if(!_e15.isItemLoaded(item)){
_e19++;
}
});
}
if(_e19==0){
_e13(_e18);
}else{
_e0b.forEach(_e18,function(item,idx){
if(!_e15.isItemLoaded(item)){
_e15.loadItem({item:item,onItem:function(item){
_e18[idx]=item;
if(--_e19==0){
_e13(_e18);
}
},onError:_e14});
}
});
}
},isItem:function(_e1a){
return this.store.isItem(_e1a);
},fetchItemByIdentity:function(_e1b){
this.store.fetchItemByIdentity(_e1b);
},getIdentity:function(item){
return this.store.getIdentity(item);
},getLabel:function(item){
if(this.labelAttr){
return this.store.getValue(item,this.labelAttr);
}else{
return this.store.getLabel(item);
}
},newItem:function(args,_e1c,_e1d){
var _e1e={parent:_e1c,attribute:this.childrenAttrs[0]},_e1f;
if(this.newItemIdAttr&&args[this.newItemIdAttr]){
this.fetchItemByIdentity({identity:args[this.newItemIdAttr],scope:this,onItem:function(item){
if(item){
this.pasteItem(item,null,_e1c,true,_e1d);
}else{
_e1f=this.store.newItem(args,_e1e);
if(_e1f&&(_e1d!=undefined)){
this.pasteItem(_e1f,_e1c,_e1c,false,_e1d);
}
}
}});
}else{
_e1f=this.store.newItem(args,_e1e);
if(_e1f&&(_e1d!=undefined)){
this.pasteItem(_e1f,_e1c,_e1c,false,_e1d);
}
}
},pasteItem:function(_e20,_e21,_e22,_e23,_e24){
var _e25=this.store,_e26=this.childrenAttrs[0];
if(_e21){
_e0b.forEach(this.childrenAttrs,function(attr){
if(_e25.containsValue(_e21,attr,_e20)){
if(!_e23){
var _e27=_e0b.filter(_e25.getValues(_e21,attr),function(x){
return x!=_e20;
});
_e25.setValues(_e21,attr,_e27);
}
_e26=attr;
}
});
}
if(_e22){
if(typeof _e24=="number"){
var _e28=_e25.getValues(_e22,_e26).slice();
_e28.splice(_e24,0,_e20);
_e25.setValues(_e22,_e26,_e28);
}else{
_e25.setValues(_e22,_e26,_e25.getValues(_e22,_e26).concat(_e20));
}
}
},onChange:function(){
},onChildrenChange:function(){
},onDelete:function(){
},onNewItem:function(item,_e29){
if(!_e29){
return;
}
this.getChildren(_e29.item,lang.hitch(this,function(_e2a){
this.onChildrenChange(_e29.item,_e2a);
}));
},onDeleteItem:function(item){
this.onDelete(item);
},onSetItem:function(item,_e2b){
if(_e0b.indexOf(this.childrenAttrs,_e2b)!=-1){
this.getChildren(item,lang.hitch(this,function(_e2c){
this.onChildrenChange(item,_e2c);
}));
}else{
this.onChange(item);
}
}});
});
},"curam/layout/ScrollingTabController":function(){
define(["dojo/_base/declare","dojo/dom-class","dijit/layout/ScrollingTabController","curam/inspection/Layer","curam/debug","curam/widget/_HasDropDown","dojo/text!curam/layout/resources/ScrollingTabController.html"],function(_e2d,_e2e,_e2f,_e30,_e31,_e32,_e33){
var _e34=_e2d("curam.layout.ScrollingTabController",_e2f,{templateString:_e33,onStartup:function(){
this.inherited(arguments);
_e30.register("curam/layout/ScrollingTabController",this);
},updateTabStyle:function(){
var kids=this.getChildren();
curam.debug.log("curam.layout.ScrollingTabController.updateTabStyle kids = ",this.domNode);
dojo.forEach(kids,function(_e35,_e36,_e37){
_e2e.remove(_e35.domNode,["first-class","last-class"]);
if(_e36==0){
_e2e.add(_e35.domNode,"first");
}else{
if(_e36==_e37.length-1){
_e2e.add(_e35.domNode,"last");
}
}
});
var _e38=dojo.query(".nowrapTabStrip",this.domNode)[0];
_e2e.replace(_e38,"nowrapSecTabStrip","nowrapTabStrip");
var _e39=document.createElement("div");
_e2e.add(_e39,"block-slope");
_e2e.add(_e39,"dijitTab");
_e39.innerHTML="&#x200B;";
_e38.appendChild(_e39);
}});
_e2d("curam.layout._ScrollingTabControllerMenuButton",[dijit.layout._ScrollingTabControllerMenuButton,_e32],{closeDropDown:function(_e3a){
this.inherited(arguments);
if(this.dropDown){
this._popupStateNode.removeAttribute("aria-owns");
this.dropDown.destroyRecursive();
delete this.dropDown;
}
}});
return _e34;
});
},"dojo/dnd/TimedMoveable":function(){
define(["../_base/declare","./Moveable"],function(_e3b,_e3c){
var _e3d=_e3c.prototype.onMove;
return _e3b("dojo.dnd.TimedMoveable",_e3c,{timeout:40,constructor:function(node,_e3e){
if(!_e3e){
_e3e={};
}
if(_e3e.timeout&&typeof _e3e.timeout=="number"&&_e3e.timeout>=0){
this.timeout=_e3e.timeout;
}
},onMoveStop:function(_e3f){
if(_e3f._timer){
clearTimeout(_e3f._timer);
_e3d.call(this,_e3f,_e3f._leftTop);
}
_e3c.prototype.onMoveStop.apply(this,arguments);
},onMove:function(_e40,_e41){
_e40._leftTop=_e41;
if(!_e40._timer){
var _e42=this;
_e40._timer=setTimeout(function(){
_e40._timer=null;
_e3d.call(_e42,_e40,_e40._leftTop);
},this.timeout);
}
}});
});
},"dijit/a11yclick":function(){
define(["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(keys,_e43,on,_e44){
function _e45(e){
if((e.keyCode===keys.ENTER||e.keyCode===keys.SPACE)&&!/input|button|textarea/i.test(e.target.nodeName)){
for(var node=e.target;node;node=node.parentNode){
if(node.dojoClick){
return true;
}
}
}
};
var _e46;
on(document,"keydown",function(e){
if(_e45(e)){
_e46=e.target;
e.preventDefault();
}else{
_e46=null;
}
});
on(document,"keyup",function(e){
if(_e45(e)&&e.target==_e46){
_e46=null;
on.emit(e.target,"click",{cancelable:true,bubbles:true,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,altKey:e.altKey,_origType:e.type});
}
});
var _e47=function(node,_e48){
node.dojoClick=true;
return on(node,"click",_e48);
};
_e47.click=_e47;
_e47.press=function(node,_e49){
var _e4a=on(node,_e44.press,function(evt){
if(evt.type=="mousedown"&&!_e43.isLeft(evt)){
return;
}
_e49(evt);
}),_e4b=on(node,"keydown",function(evt){
if(evt.keyCode===keys.ENTER||evt.keyCode===keys.SPACE){
_e49(evt);
}
});
return {remove:function(){
_e4a.remove();
_e4b.remove();
}};
};
_e47.release=function(node,_e4c){
var _e4d=on(node,_e44.release,function(evt){
if(evt.type=="mouseup"&&!_e43.isLeft(evt)){
return;
}
_e4c(evt);
}),_e4e=on(node,"keyup",function(evt){
if(evt.keyCode===keys.ENTER||evt.keyCode===keys.SPACE){
_e4c(evt);
}
});
return {remove:function(){
_e4d.remove();
_e4e.remove();
}};
};
_e47.move=_e44.move;
return _e47;
});
},"curam/cdsl/_base/FacadeMethodResponse":function(){
define(["dojo/_base/declare","curam/cdsl/Struct","dojo/json","dojo/string"],function(_e4f,_e50,json,_e51){
var _e52="for(;;);";
var _e53=function(_e54,_e55){
var ret=[],_e56=_e55?Array(_e55+1).join("  "):"";
dojo.forEach(_e54,function(e){
ret.push(_e51.substitute("${indent}Type: ${type}\n"+"${indent}Message: ${msg}\n"+"${indent}Stack trace:\n"+"${indent}  ${stackTrace}",{type:e.type,msg:e.message,stackTrace:e.stackTrace,indent:_e56}));
if(e.nestedError){
ret.push("\n-- nested error --");
ret.push(_e53([e.nestedError],_e55?_e55+1:1));
}
});
return ret.join("\n");
};
var _e57=_e4f(null,{_request:null,_data:null,_metadataRegistry:null,constructor:function(_e58,_e59,_e5a){
if(!_e58||!_e59){
throw new Error("Missing parameter.");
}
if(typeof _e59=="string"){
this._data=json.parse(_e59.substr(_e52.length,_e59.length));
}else{
if(typeof _e59=="object"){
this._data=_e59;
}else{
throw new Error("Wrong parameter type: "+typeof _e58+", "+typeof _e59);
}
}
this._request=_e58;
this._metadataRegistry=_e5a;
},returnValue:function(){
return new _e50(this._data.data,{bareInput:true,fixups:this._data.metadata&&this._data.metadata.fixups?this._data.metadata.fixups:null,metadataRegistry:this._metadataRegistry,dataAdapter:this._request.dataAdapter()});
},failed:function(){
return this._data.code!==0;
},getError:function(){
var _e5b=this._data.errors;
if(_e5b){
var e=new Error("Server returned "+_e5b.length+(_e5b.length==1?" error":" errors")+".");
e.errors=_e5b;
e.toString=function(){
return _e53(_e5b);
};
return e;
}
return null;
},hasCodetables:function(){
return this._data.metadata&&this._data.metadata.codetables&&this._data.metadata.codetables.length>0;
},getCodetablesData:function(){
return this._data.metadata.codetables;
},devMode:function(){
var dm=false;
if(this._data.metadata&&this._data.metadata.devMode){
dm=(this._data.metadata.devMode===true);
}
return dm;
},request:function(){
return this._request;
}});
return _e57;
});
},"dojo/request/registry":function(){
define(["require","../_base/array","./default!platform","./util"],function(_e5c,_e5d,_e5e,util){
var _e5f=[];
function _e60(url,_e61){
var _e62=_e5f.slice(0),i=0,_e63;
while(_e63=_e62[i++]){
if(_e63(url,_e61)){
return _e63.request.call(null,url,_e61);
}
}
return _e5e.apply(null,arguments);
};
function _e64(_e65,_e66){
var _e67;
if(_e66){
if(_e65.test){
_e67=function(url){
return _e65.test(url);
};
}else{
if(_e65.apply&&_e65.call){
_e67=function(){
return _e65.apply(null,arguments);
};
}else{
_e67=function(url){
return url===_e65;
};
}
}
_e67.request=_e66;
}else{
_e67=function(){
return true;
};
_e67.request=_e65;
}
return _e67;
};
_e60.register=function(url,_e68,_e69){
var _e6a=_e64(url,_e68);
_e5f[(_e69?"unshift":"push")](_e6a);
return {remove:function(){
var idx;
if(~(idx=_e5d.indexOf(_e5f,_e6a))){
_e5f.splice(idx,1);
}
}};
};
_e60.load=function(id,_e6b,_e6c,_e6d){
if(id){
_e5c([id],function(_e6e){
_e5e=_e6e;
_e6c(_e60);
});
}else{
_e6c(_e60);
}
};
util.addCommonMethods(_e60);
return _e60;
});
},"curam/cdsl/_base/PreferenceMap":function(){
define(["dojo/_base/declare","dojo/_base/lang"],function(_e6f,lang){
var _e70=_e6f(null,{_preferences:null,_preferenceNames:null,constructor:function(){
this._preferences={};
this._preferenceNames=[];
},getPreference:function(name){
return this._preferences[name];
},getPreferenceNames:function(){
return this._preferenceNames;
},addPreference:function(name,_e71){
this._preferences[name]=_e71;
this._preferenceNames[this._preferenceNames.length]=name;
}});
return _e70;
});
},"dijit/hccss":function(){
define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(_e72,has,_e73,win){
_e73(function(){
if(has("highcontrast")){
_e72.add(win.body(),"dijit_a11y");
}
});
return has;
});
},"dijit/popup":function(){
define("dijit/popup",["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","./place","./BackgroundIframe","./Viewport","./main","dojo/touch"],function(_e74,_e75,_e76,dom,_e77,_e78,_e79,_e7a,_e7b,has,keys,lang,on,_e7c,_e7d,_e7e,_e7f){
function _e80(){
if(this._popupWrapper){
_e79.destroy(this._popupWrapper);
delete this._popupWrapper;
}
};
var _e81=_e76(null,{_stack:[],_beginZIndex:1000,_idGen:1,_repositionAll:function(){
if(this._firstAroundNode){
var _e82=this._firstAroundPosition,_e83=_e7a.position(this._firstAroundNode,true),dx=_e83.x-_e82.x,dy=_e83.y-_e82.y;
if(dx||dy){
this._firstAroundPosition=_e83;
for(var i=0;i<this._stack.length;i++){
var _e84=this._stack[i].wrapper.style;
_e84.top=(parseFloat(_e84.top)+dy)+"px";
if(_e84.right=="auto"){
_e84.left=(parseFloat(_e84.left)+dx)+"px";
}else{
_e84.right=(parseFloat(_e84.right)-dx)+"px";
}
}
}
this._aroundMoveListener=setTimeout(lang.hitch(this,"_repositionAll"),dx||dy?10:50);
}
},_createWrapper:function(_e85){
var _e86=_e85._popupWrapper,node=_e85.domNode;
if(!_e86){
_e86=_e79.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":_e85["aria-label"]||_e85.label||_e85.name||_e85.id},_e85.ownerDocumentBody);
_e86.appendChild(node);
var s=node.style;
s.display="";
s.visibility="";
s.position="";
s.top="0px";
_e85._popupWrapper=_e86;
_e75.after(_e85,"destroy",_e80,true);
if("ontouchend" in document){
on(_e86,"touchend",function(evt){
if(!/^(input|button|textarea)$/i.test(evt.target.tagName)){
evt.preventDefault();
}
});
}
_e86.dojoClick=true;
}
return _e86;
},moveOffScreen:function(_e87){
var _e88=this._createWrapper(_e87);
var ltr=_e7a.isBodyLtr(_e87.ownerDocument),_e89={visibility:"hidden",top:"-9999px",display:""};
_e89[ltr?"left":"right"]="-9999px";
_e89[ltr?"right":"left"]="auto";
_e7b.set(_e88,_e89);
return _e88;
},hide:function(_e8a){
var _e8b=this._createWrapper(_e8a);
if(dojo.hasClass(_e8b,"dijitMenuPopup")&&(has("trident")||has("edge")||has("ie"))){
_e77.set(_e8b,"aria-hidden","true");
_e7b.set(_e8b,{position:"absolute",overflow:"hidden",clip:"rect(0 0 0 0)",height:"1px",width:"1px",margin:"-1px",padding:"0",border:"0"});
setTimeout(function(){
if(_e77.get(_e8b,"aria-hidden","true")){
_e7b.set(_e8b,{display:"none",height:"auto",overflowY:"visible",border:"",position:"",overflow:"",clip:"",width:"",margin:"",padding:""});
}
},200,_e8b);
}else{
_e7b.set(_e8b,{display:"none",height:"auto",overflowY:"visible",border:""});
}
var node=_e8a.domNode;
if("_originalStyle" in node){
node.style.cssText=node._originalStyle;
}
},getTopPopup:function(){
var _e8c=this._stack;
for(var pi=_e8c.length-1;pi>0&&_e8c[pi].parent===_e8c[pi-1].widget;pi--){
}
return _e8c[pi];
},open:function(args){
var _e8d=this._stack,_e8e=args.popup,node=_e8e.domNode,_e8f=args.orient||["below","below-alt","above","above-alt"],ltr=args.parent?args.parent.isLeftToRight():_e7a.isBodyLtr(_e8e.ownerDocument),_e90=args.around,id=(args.around&&args.around.id)?(args.around.id+"_dropdown"):("popup_"+this._idGen++);
while(_e8d.length&&(!args.parent||!dom.isDescendant(args.parent.domNode,_e8d[_e8d.length-1].widget.domNode))){
this.close(_e8d[_e8d.length-1].widget);
}
var _e91=this.moveOffScreen(_e8e);
if(_e8e.startup&&!_e8e._started){
_e8e.startup();
}
var _e92,_e93=_e7a.position(node);
if("maxHeight" in args&&args.maxHeight!=-1){
_e92=args.maxHeight||Infinity;
}else{
var _e94=_e7e.getEffectiveBox(this.ownerDocument),_e95=_e90?_e7a.position(_e90,false):{y:args.y-(args.padding||0),h:(args.padding||0)*2};
_e92=Math.floor(Math.max(_e95.y,_e94.h-(_e95.y+_e95.h)));
}
if(_e93.h>_e92){
var cs=_e7b.getComputedStyle(node),_e96=cs.borderLeftWidth+" "+cs.borderLeftStyle+" "+cs.borderLeftColor;
_e7b.set(_e91,{overflowY:"scroll",height:(_e92-2)+"px",border:_e96});
node._originalStyle=node.style.cssText;
node.style.border="none";
}
_e77.set(_e91,{id:id,style:{zIndex:this._beginZIndex+_e8d.length},"class":"dijitPopup "+(_e8e.baseClass||_e8e["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:args.parent?args.parent.id:""});
if(dojo.hasClass(_e91,"dijitMenuPopup")&&(has("trident")||has("edge")||has("ie"))){
if(_e77.get(_e91,"aria-hidden")==="true"){
_e7b.set(_e91,{position:"",clip:"",width:"",margin:"",padding:"",border:""});
}
_e77.set(_e91,"aria-hidden","false");
}
if(_e8d.length==0&&_e90){
this._firstAroundNode=_e90;
this._firstAroundPosition=_e7a.position(_e90,true);
this._aroundMoveListener=setTimeout(lang.hitch(this,"_repositionAll"),50);
}
if(has("config-bgIframe")&&!_e8e.bgIframe){
_e8e.bgIframe=new _e7d(_e91);
}
var _e97=_e8e.orient?lang.hitch(_e8e,"orient"):null,best=_e90?_e7c.around(_e91,_e90,_e8f,ltr,_e97):_e7c.at(_e91,args,_e8f=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],args.padding,_e97);
_e91.style.visibility="visible";
node.style.visibility="visible";
var _e98=[];
_e98.push(on(_e91,"keydown",lang.hitch(this,function(evt){
if(evt.keyCode==keys.ESCAPE&&args.onCancel){
evt.stopPropagation();
evt.preventDefault();
args.onCancel(evt);
}else{
if(evt.keyCode==keys.TAB){
evt.stopPropagation();
evt.preventDefault();
var _e99=this.getTopPopup();
if(_e99&&_e99.onCancel){
_e99.onCancel(evt);
}
}
}
})));
if(_e8e.onCancel&&args.onCancel){
_e98.push(_e8e.on("cancel",args.onCancel));
}
_e98.push(_e8e.on(_e8e.onExecute?"execute":"change",lang.hitch(this,function(){
var _e9a=this.getTopPopup();
if(_e9a&&_e9a.onExecute){
_e9a.onExecute();
}
})));
_e8d.push({widget:_e8e,wrapper:_e91,parent:args.parent,onExecute:args.onExecute,onCancel:args.onCancel,onClose:args.onClose,handlers:_e98});
if(_e8e.onOpen){
_e8e.onOpen(best);
}
return best;
},close:function(_e9b){
var _e9c=this._stack;
while((_e9b&&_e74.some(_e9c,function(elem){
return elem.widget==_e9b;
}))||(!_e9b&&_e9c.length)){
var top=_e9c.pop(),_e9d=top.widget,_e9e=top.onClose;
if(_e9d.bgIframe){
_e9d.bgIframe.destroy();
delete _e9d.bgIframe;
}
if(_e9d.onClose){
_e9d.onClose();
}
var h;
while(h=top.handlers.pop()){
h.remove();
}
if(_e9d&&_e9d.domNode){
this.hide(_e9d);
}
if(_e9e){
_e9e();
}
}
if(_e9c.length==0&&this._aroundMoveListener){
clearTimeout(this._aroundMoveListener);
this._firstAroundNode=this._firstAroundPosition=this._aroundMoveListener=null;
}
}});
return (_e7f.popup=new _e81());
});
},"dijit/layout/TabContainer":function(){
define(["dojo/_base/lang","dojo/_base/declare","./_TabContainerBase","./TabController","./ScrollingTabController"],function(lang,_e9f,_ea0,_ea1,_ea2){
return _e9f("dijit.layout.TabContainer",_ea0,{useMenu:true,useSlider:true,controllerWidget:"",_makeController:function(_ea3){
var cls=this.baseClass+"-tabs"+(this.doLayout?"":" dijitTabNoLayout"),_ea1=typeof this.controllerWidget=="string"?lang.getObject(this.controllerWidget):this.controllerWidget;
return new _ea1({id:this.id+"_tablist",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,tabPosition:this.tabPosition,doLayout:this.doLayout,containerId:this.id,"class":cls,nested:this.nested,useMenu:this.useMenu,useSlider:this.useSlider,tabStripClass:this.tabStrip?this.baseClass+(this.tabStrip?"":"No")+"Strip":null},_ea3);
},postMixInProperties:function(){
this.inherited(arguments);
if(!this.controllerWidget){
this.controllerWidget=(this.tabPosition=="top"||this.tabPosition=="bottom")&&!this.nested?_ea2:_ea1;
}
}});
});
},"curam/cdsl/request/CuramService":function(){
define(["dojo/_base/declare","curam/cdsl/Struct","curam/cdsl/_base/FacadeMethodResponse","dojo/_base/lang","curam/cdsl/_base/_Connection","curam/cdsl/_base/FacadeMethodCall"],function(_ea4,_ea5,_ea6,lang){
var _ea7={dataAdapter:null},_ea8=function(_ea9){
var o=lang.clone(_ea7);
o=lang.mixin(o,_ea9);
return o;
},rule="********************************************************",_eaa=_ea4(null,{_connection:null,_dataAdapter:null,constructor:function(_eab,opts){
var _eac=_ea8(opts);
this._connection=_eab;
this._dataAdapter=_eac.dataAdapter;
},call:function(_ead,_eae){
var _eaf=_ead[0];
if(!_eaf.dataAdapter()){
_eaf.dataAdapter(this._dataAdapter);
}
var _eb0=this._connection.invoke(_eaf,_eae);
return _eb0.then(lang.hitch(this,function(_eb1){
var _eb2=new _ea6(_eaf,_eb1,this._connection.metadata());
if(_eb2.failed()){
var e=_eb2.getError();
if(_eb2.devMode()){
console.log(rule);
console.log(e.toString());
console.log(rule);
}
throw e;
}
this._connection.updateMetadata(_eb2);
return [_eb2.returnValue()];
}));
}});
return _eaa;
});
},"dijit/form/_FormValueWidget":function(){
define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(_eb3,has,_eb4,_eb5){
return _eb3("dijit.form._FormValueWidget",[_eb4,_eb5],{_layoutHackIE7:function(){
if(has("ie")==7){
var _eb6=this.domNode;
var _eb7=_eb6.parentNode;
var _eb8=_eb6.firstChild||_eb6;
var _eb9=_eb8.style.filter;
var _eba=this;
while(_eb7&&_eb7.clientHeight==0){
(function ping(){
var _ebb=_eba.connect(_eb7,"onscroll",function(){
_eba.disconnect(_ebb);
_eb8.style.filter=(new Date()).getMilliseconds();
_eba.defer(function(){
_eb8.style.filter=_eb9;
});
});
})();
_eb7=_eb7.parentNode;
}
}
}});
});
},"dijit/_BidiSupport":function(){
define(["dojo/has","./_WidgetBase","./_BidiMixin"],function(has,_ebc,_ebd){
_ebc.extend(_ebd);
has.add("dojo-bidi",true);
return _ebc;
});
},"curam/util/UimDialog":function(){
define(["curam/util/RuntimeContext","curam/util/external","curam/util","curam/define","curam/dialog","curam/util/DialogObject"],function(_ebe,_ebf){
curam.define.singleton("curam.util.UimDialog",{open:function(path,_ec0,_ec1){
var url=path+curam.util.makeQueryString(_ec0);
return this.openUrl(url,_ec1);
},openUrl:function(url,_ec2){
var _ec3=curam.util.getCacheBusterParameter();
var _ec4=new curam.util.DialogObject(_ec3);
var _ec5=null;
if(_ec2){
_ec5="width="+_ec2.width+",height="+_ec2.height;
}
curam.util.openModalDialog({href:this._addRpu(url)},_ec5,null,null,_ec3);
return _ec4;
},_addRpu:function(url){
var _ec6=url;
if(curam.tab.inTabbedUI()){
var _ec7=curam.tab.getContentPanelIframe();
if(_ec7){
_ec6=curam.util.setRpu(url,new _ebe(_ec7.contentWindow));
}
}else{
if(_ebf.inExternalApp()){
var _ec8=_ebf.getUimParentWindow();
if(_ec8){
_ec6=curam.util.setRpu(url,new _ebe(_ec8));
}
}
}
return _ec6;
},get:function(){
if(curam.dialog._id==null){
throw "Dialog infrastructure not ready.";
}
return new curam.util.DialogObject(null,curam.dialog._id);
},ready:function(_ec9){
if(curam.dialog._id==null){
dojo.subscribe("/curam/dialog/ready",_ec9);
}else{
_ec9();
}
},_getDialogFrameWindow:function(_eca){
var _ecb=window.top.dijit.byId(_eca);
return _ecb.uimController.getIFrame().contentWindow;
}});
return curam.util.UimDialog;
});
},"dijit/tree/_dndContainer":function(){
define(["dojo/aspect","dojo/_base/declare","dojo/dom-class","dojo/_base/lang","dojo/on","dojo/touch"],function(_ecc,_ecd,_ece,lang,on,_ecf){
return _ecd("dijit.tree._dndContainer",null,{constructor:function(tree,_ed0){
this.tree=tree;
this.node=tree.domNode;
lang.mixin(this,_ed0);
this.containerState="";
_ece.add(this.node,"dojoDndContainer");
this.events=[on(this.node,_ecf.enter,lang.hitch(this,"onOverEvent")),on(this.node,_ecf.leave,lang.hitch(this,"onOutEvent")),_ecc.after(this.tree,"_onNodeMouseEnter",lang.hitch(this,"onMouseOver"),true),_ecc.after(this.tree,"_onNodeMouseLeave",lang.hitch(this,"onMouseOut"),true),on(this.node,"dragstart, selectstart",function(evt){
evt.preventDefault();
})];
},destroy:function(){
var h;
while(h=this.events.pop()){
h.remove();
}
this.node=this.parent=null;
},onMouseOver:function(_ed1){
this.current=_ed1;
},onMouseOut:function(){
this.current=null;
},_changeState:function(type,_ed2){
var _ed3="dojoDnd"+type;
var _ed4=type.toLowerCase()+"State";
_ece.replace(this.node,_ed3+_ed2,_ed3+this[_ed4]);
this[_ed4]=_ed2;
},_addItemClass:function(node,type){
_ece.add(node,"dojoDndItem"+type);
},_removeItemClass:function(node,type){
_ece.remove(node,"dojoDndItem"+type);
},onOverEvent:function(){
this._changeState("Container","Over");
},onOutEvent:function(){
this._changeState("Container","");
}});
});
},"dijit/focus":function(){
define(["dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/Evented","dojo/_base/lang","dojo/on","dojo/domReady","dojo/sniff","dojo/Stateful","dojo/_base/window","dojo/window","./a11y","./registry","./main"],function(_ed5,_ed6,dom,_ed7,_ed8,_ed9,_eda,lang,on,_edb,has,_edc,win,_edd,a11y,_ede,_edf){
var _ee0;
var _ee1;
var _ee2=_ed6([_edc,_eda],{curNode:null,activeStack:[],constructor:function(){
var _ee3=lang.hitch(this,function(node){
if(dom.isDescendant(this.curNode,node)){
this.set("curNode",null);
}
if(dom.isDescendant(this.prevNode,node)){
this.set("prevNode",null);
}
});
_ed5.before(_ed9,"empty",_ee3);
_ed5.before(_ed9,"destroy",_ee3);
},registerIframe:function(_ee4){
return this.registerWin(_ee4.contentWindow,_ee4);
},registerWin:function(_ee5,_ee6){
var _ee7=this,body=_ee5.document&&_ee5.document.body;
if(body){
var _ee8=has("pointer-events")?"pointerdown":has("MSPointer")?"MSPointerDown":has("touch-events")?"mousedown, touchstart":"mousedown";
var mdh=on(_ee5.document,_ee8,function(evt){
if(evt&&evt.target&&evt.target.parentNode==null){
return;
}
_ee7._onTouchNode(_ee6||evt.target,"mouse");
});
var fih=on(body,"focusin",function(evt){
if(!evt.target.tagName){
return;
}
var tag=evt.target.tagName.toLowerCase();
if(tag=="#document"||tag=="body"){
return;
}
if(a11y.isFocusable(evt.target)){
_ee7._onFocusNode(_ee6||evt.target);
}else{
_ee7._onTouchNode(_ee6||evt.target);
}
});
var foh=on(body,"focusout",function(evt){
_ee7._onBlurNode(_ee6||evt.target);
});
return {remove:function(){
mdh.remove();
fih.remove();
foh.remove();
mdh=fih=foh=null;
body=null;
}};
}
},_onBlurNode:function(node){
var now=(new Date()).getTime();
if(now<_ee0+100){
return;
}
if(this._clearFocusTimer){
clearTimeout(this._clearFocusTimer);
}
this._clearFocusTimer=setTimeout(lang.hitch(this,function(){
this.set("prevNode",this.curNode);
this.set("curNode",null);
}),0);
if(this._clearActiveWidgetsTimer){
clearTimeout(this._clearActiveWidgetsTimer);
}
if(now<_ee1+100){
return;
}
this._clearActiveWidgetsTimer=setTimeout(lang.hitch(this,function(){
delete this._clearActiveWidgetsTimer;
this._setStack([]);
}),0);
},_onTouchNode:function(node,by){
_ee1=(new Date()).getTime();
if(this._clearActiveWidgetsTimer){
clearTimeout(this._clearActiveWidgetsTimer);
delete this._clearActiveWidgetsTimer;
}
if(_ed8.contains(node,"dijitPopup")){
node=node.firstChild;
}
var _ee9=[];
try{
while(node){
var _eea=_ed7.get(node,"dijitPopupParent");
if(_eea){
node=_ede.byId(_eea).domNode;
}else{
if(node.tagName&&node.tagName.toLowerCase()=="body"){
if(node===win.body()){
break;
}
node=_edd.get(node.ownerDocument).frameElement;
}else{
var id=node.getAttribute&&node.getAttribute("widgetId"),_eeb=id&&_ede.byId(id);
if(_eeb&&!(by=="mouse"&&_eeb.get("disabled"))){
_ee9.unshift(id);
}
node=node.parentNode;
}
}
}
}
catch(e){
}
this._setStack(_ee9,by);
},_onFocusNode:function(node){
if(!node){
return;
}
if(node.nodeType==9){
return;
}
_ee0=(new Date()).getTime();
if(this._clearFocusTimer){
clearTimeout(this._clearFocusTimer);
delete this._clearFocusTimer;
}
this._onTouchNode(node);
if(node==this.curNode){
return;
}
this.set("prevNode",this.curNode);
this.set("curNode",node);
},_setStack:function(_eec,by){
var _eed=this.activeStack,_eee=_eed.length-1,_eef=_eec.length-1;
if(_eec[_eef]==_eed[_eee]){
return;
}
this.set("activeStack",_eec);
var _ef0,i;
for(i=_eee;i>=0&&_eed[i]!=_eec[i];i--){
_ef0=_ede.byId(_eed[i]);
if(_ef0){
_ef0._hasBeenBlurred=true;
_ef0.set("focused",false);
if(_ef0._focusManager==this){
_ef0._onBlur(by);
}
this.emit("widget-blur",_ef0,by);
}
}
for(i++;i<=_eef;i++){
_ef0=_ede.byId(_eec[i]);
if(_ef0){
_ef0.set("focused",true);
if(_ef0._focusManager==this){
_ef0._onFocus(by);
}
this.emit("widget-focus",_ef0,by);
}
}
},focus:function(node){
if(node){
try{
node.focus();
}
catch(e){
}
}
}});
var _ef1=new _ee2();
_edb(function(){
var _ef2=_ef1.registerWin(_edd.get(document));
if(has("ie")){
on(window,"unload",function(){
if(_ef2){
_ef2.remove();
_ef2=null;
}
});
}
});
_edf.focus=function(node){
_ef1.focus(node);
};
for(var attr in _ef1){
if(!/^_/.test(attr)){
_edf.focus[attr]=typeof _ef1[attr]=="function"?lang.hitch(_ef1,attr):_ef1[attr];
}
}
_ef1.watch(function(attr,_ef3,_ef4){
_edf.focus[attr]=_ef4;
});
return _ef1;
});
},"curam/util/ExpandableLists":function(){
define(["dojo/dom","dojo/dom-construct","dojo/_base/window","dojo/dom-style","dojo/dom-class","dojo/dom-attr","dojo/query","dojo/sniff","dijit/registry","curam/inspection/Layer","curam/util","curam/debug","curam/UIMController","curam/util/ui/refresh/RefreshEvent","curam/define","curam/contentPanel"],function(dom,_ef5,win,_ef6,_ef7,_ef8,_ef9,has,_efa,_efb,util,_efc){
curam.define.singleton("curam.util.ExpandableLists",{_minimumExpandedHeight:[],stateData:[],_LIST_ID_PREFIX:"list-id-",_ROW_ID_PREFIX:"row-id-",_EVENT_TOGGLE:"/curam/list/row/toggle",_EVENT_TYPE_EXPANDED:"Expanded",_EVENT_TYPE_COLLAPSED:"Collapsed",setupToggleHandler:function(){
dojo.ready(function(){
var _efd=curam.util.ExpandableLists;
var _efe=function(_eff,_f00,_f01){
if(_eff){
curam.debug.log(_efc.getProperty("curam.util.ExpandableLists.event1",[_f01,_eff,_f00]));
}else{
curam.debug.log(_efc.getProperty("curam.util.ExpandableLists.event2",[_f01]));
}
if(_f01==_efd._EVENT_TYPE_EXPANDED){
var _f02=_efd._getListData(_eff);
var _f03=dojo.filter(_f02.expandedRows,function(item){
return item==_f00;
});
if(_f03.length==0){
_f02.expandedRows.push(_f00);
}
}else{
var _f02=_efd._getListData(_eff);
_f02.expandedRows=dojo.filter(_f02.expandedRows,function(item){
return item!=_f00;
});
if(_f02.expandedRows.length==0){
_efd._removeListData(_eff);
}
}
curam.debug.log("curam.util.ExpandableLists.setupToggleHandler stateData: ",_efd.stateData);
};
dojo.subscribe(_efd._EVENT_TOGGLE,this,_efe);
dojo.subscribe("/curam/page/refresh",this,_efd._saveStateData);
});
},_saveStateData:function(){
var _f04=curam.util.ExpandableLists;
curam.debug.log("/curam/page/refresh"+_efc.getProperty("curam.util.ExpandableLists.refresh"),_f04.stateData);
try{
dojo.forEach(_f04.stateData,function(item){
var data=dojo.toJson(item);
curam.debug.log(_efc.getProperty("curam.util.ExpandableLists.exception"),data);
localStorage[_f04._sanitizeKey(item.listId)]=data;
});
}
catch(e){
curam.debug.log(_efc.getProperty("curam.util.ExpandableLists.exception"),e);
}
},_sanitizeKey:function(key){
return key.replace("-","_");
},loadStateData:function(_f05){
if(typeof (window.curamDialogRedirecting)!="undefined"){
curam.debug.log("curam.util.ExpandableLists.loadStateData "+_efc.getProperty("curam.util.ExpandableLists.load.exit"));
return;
}
var _f06=curam.util.ExpandableLists;
var _f07=function(){
curam.debug.log("curam.util.ExpandableLists.loadStateData "+ +_efc.getProperty("curam.util.ExpandableLists.load.for"),_f05);
var _f08=localStorage[_f06._sanitizeKey(_f05)];
if(_f08&&_f08!=""){
var _f09=dojo.fromJson(_f08);
var _f0a=_ef9("table."+_f06._LIST_ID_PREFIX+_f05);
dojo.forEach(_f09.expandedRows,function(item){
curam.debug.log(_efc.getProperty("curam.util.ExpandableLists.load.row"),item);
var _f0b=_ef9("tr."+_f06._ROW_ID_PREFIX+item,_f0a[0]);
if(_f0b.length>0){
var _f0c=_f0b[0].prev("tr").children();
var _f0d=_f0c.children("a.list-details-row-toggle")[0];
if(_f0d){
_f06._toggleDetailsRow(_f0d);
}else{
curam.debug.log(_efc.getProperty("curam.util.ExpandableLists.load.button"+".disabled"));
}
}else{
curam.debug.log(_efc.getProperty("curam.util.ExpandableLists.load.row.disabled"));
}
});
localStorage.removeItem(_f06._sanitizeKey(_f05));
}else{
curam.debug.log(_efc.getProperty("curam.util.ExpandableLists.load.no.data"));
}
};
dojo.ready(function(){
_f07();
});
},_getListData:function(_f0e){
var _f0f=curam.util.ExpandableLists.stateData;
var _f10=dojo.filter(_f0f,function(item){
return item.listId==_f0e;
});
if(_f10.length==0){
_f10.push({listId:_f0e,expandedRows:[]});
_f0f.push(_f10[0]);
}
return _f10[0];
},_removeListData:function(_f11){
var _f12=curam.util.ExpandableLists;
_f12.stateData=dojo.filter(_f12.stateData,function(item){
return item.listId!=_f11;
});
},toggleListDetailsRow:function(_f13){
if(_f13){
_f13=dojo.fixEvent(_f13);
dojo.stopEvent(_f13);
var _f14=_f13.currentTarget;
curam.util.ExpandableLists._toggleDetailsRow(_f14);
}
},_generateUimController:function(_f15){
var _f16=_ef9("td",_f15)[0];
var _f17=_ef9("div",_f15)[0];
var _f18=new curam.UIMController({uid:_ef8.get(_f17,"uid"),url:_ef8.get(_f17,"url"),iframeId:_ef8.get(_f17,"iframeId"),iframeClassList:_ef8.get(_f17,"iframeClassList"),loadFrameOnCreate:_ef8.get(_f17,"loadFrameOnCreate")});
_f16.appendChild(_f18.domNode);
if(_f17&&_f16){
_f16.removeChild(_f17);
}
return _f18;
},_toggleDetailsRow:function(_f19){
curam.debug.log("curam.util.ExpandableLists._toggleDetailsRow "+_efc.getProperty("curam.util.ExpandableLists.load.for"),_f19);
var _f1a=curam.util.ExpandableLists;
var _f1b=_ef9(_f19).closest("tr")[0];
var _f1c=_ef9(_f1b).next("tr")[0];
var _f1d=!_f1a.isDetailsRowExpanded(_f1c);
_f1a._handleStripingAndRoundedCorners(_f1b,_f1c,_f1d);
var _f1e=_ef9("div.uimController",_f1c);
var _f1f=null;
var _f20=null;
if(_f1e==null||_f1e.length==0){
_f20=_f1a._generateUimController(_f1c);
}else{
_f1f=_f1e[0];
_f20=_efa.byNode(_f1f);
}
if(typeof (_f20)=="undefined"||_f20==null){
throw "UIMController Dijit not found for node: "+_f1f;
}
var _f21=_ef8.get(_f20.frame,"src");
var _f22=false;
_f1a.setDetailsRowExpandedState(_f1b,_f1c,_f1d,_f19);
var def=new dojo.Deferred();
if(!_f21||_f21==null||_f21==""){
_f20.loadPage(def);
}else{
_f22=true;
def.callback();
}
def.addCallback(function(){
var _f23=_f20.hasInPageNavigation();
_f22=_f22||_f23;
if(_f23){
_f20.showTabContainer(_f1d);
}
if(_f22){
curam.util.ExpandableLists.resizeExpandableListAncestors(window);
}
var _f24=_f1d?_f1a._EVENT_TYPE_EXPANDED:_f1a._EVENT_TYPE_COLLAPSED;
var _f25=_f1a._findListId(_f1c);
var _f26=curam.util.getSuffixFromClass(_f1c,_f1a._ROW_ID_PREFIX);
dojo.publish(_f1a._EVENT_TOGGLE,[_f25,_f26,_f24]);
if(!curam.util.ExpandableLists._isExternalApp(window)){
var _f24=_f1d?"ListDetailsRow.Expand":"ListDetailsRow.Collapse";
var _f27={url:_ef8.get(_f20.frame,"src"),eventType:_f24};
var _f28=curam.tab.getSelectedTab();
if(_f28){
var _f29=curam.tab.getTabWidgetId(_f28);
curam.util.getTopmostWindow().dojo.publish("expandedList.toggle",[window.frameElement,_f27,_f29]);
}
}
});
},_handleStripingAndRoundedCorners:function(_f2a,_f2b,_f2c){
var odd="odd";
var even="even";
var _f2d="row-no-border";
var _f2e="odd-last-row";
var _f2f="even-last-row";
if(!curam.util.ExpandableLists._isLastRow(_f2a,_f2b)){
if(_ef7.contains(_f2a,odd)){
_ef7.add(_f2b,odd);
}else{
if(_ef7.contains(_f2a,even)){
_ef7.add(_f2b,even);
}
}
}else{
if(_f2c){
if(_ef7.contains(_f2a,_f2e)){
_ef7.remove(_f2a,_f2e);
_ef7.add(_f2a,odd);
_ef7.add(_f2b,odd);
_ef7.add(_f2b,_f2e);
}else{
if(_ef7.contains(_f2a,_f2f)){
_ef7.remove(_f2a,_f2f);
_ef7.add(_f2a,even);
_ef7.add(_f2b,even);
_ef7.add(_f2b,_f2f);
}
}
}else{
if(_ef7.contains(_f2a,odd)){
_ef7.remove(_f2a,odd);
_ef7.add(_f2a,_f2e);
_ef7.remove(_f2b,_f2e);
_ef7.remove(_f2b,odd);
}else{
if(_ef7.contains(_f2a,even)){
_ef7.remove(_f2a,even);
_ef7.add(_f2a,_f2f);
_ef7.remove(_f2b,even);
_ef7.remove(_f2b,_f2f);
}
}
}
}
if(_f2c){
_ef7.add(_f2a,_f2d);
}else{
_ef7.remove(_f2a,_f2d);
}
if(_ef7.contains(_f2a,_f2d)){
_ef7.remove(_f2b,"collapsed");
}else{
_ef7.add(_f2b,"collapsed");
}
},setDetailsRowExpandedState:function(_f30,_f31,_f32,_f33){
var _f34=curam.util.ExpandableLists.isDetailsRowExpanded(_f31);
_ef7.remove(_f31,"collapsed");
if(!_f34){
_ef7.add(_f31,"collapsed");
}
if(_f30.style.display=="none"){
_f31.setAttribute("style","display:none");
}else{
_f31.removeAttribute("style");
}
if(_f33){
var _f35=_ef9("img",_f33)[0];
if(_f32){
_ef7.add(_f33,"expanded");
_ef8.set(_f33,"aria-expanded","true");
if(_f35){
_ef8.set(_f35,"src",require.toUrl("../themes/curam/images/chevron--down20-enabled.svg"));
}
}else{
_ef7.remove(_f33,"expanded");
_ef8.set(_f33,"aria-expanded","false");
if(_f35&&curam.util.isRtlMode()){
_ef8.set(_f35,"src",require.toUrl("../themes/curam/images/chevron--left20-enabled.svg"));
}else{
_ef8.set(_f35,"src",require.toUrl("../themes/curam/images/chevron--right20-enabled.svg"));
}
}
}
},_isLastRow:function(_f36,_f37){
return _ef7.contains(_f36,"even-last-row")||_ef7.contains(_f36,"odd-last-row")||_ef7.contains(_f37,"even-last-row")||_ef7.contains(_f37,"odd-last-row");
},isDetailsRowExpanded:function(_f38){
return !_ef7.contains(_f38,"collapsed");
},listRowFrameLoaded:function(_f39,_f3a){
curam.debug.log("========= "+_efc.getProperty("curam.util.ExpandableLists.page.load")+" =======");
curam.debug.log(_f39);
curam.debug.log(dojo.toJson(_f3a));
var _f3b=dom.byId(_f39);
if(!_f3b){
throw "List Row Expanded: No iframe found";
}
if(!_f3b._spExpListPageLoadListener){
_f3b._spExpListPageLoadListener="true";
dojo.addOnUnload(function(){
if(sessionStorage.getItem("addOnUnloadTriggeredByFileDownload")==null){
_ef8.set(_f3b,"src","");
}
});
}else{
if(!curam.util.ExpandableLists._isExternalApp(window)){
curam.contentPanel.publishSmartPanelExpListPageLoad(_f3b);
}
}
var _f3c=curam.util.ExpandableLists._findListId(_f3b);
var _f3d=curam.util.ExpandableLists.getMinimumExpandedHeight(_f3c);
var _f3e=_f3a.height;
if(_f3e<_f3d){
curam.debug.log(_efc.getProperty("curam.util.ExpandableLists.min.height",[_f3d]));
_f3e=_f3d;
}else{
curam.debug.log(_efc.getProperty("curam.util.ExpandableLists.height",[_f3e]));
}
curam.util.ExpandableLists._resizeIframe(_f3b,_f3e);
curam.util.ExpandableLists.resizeExpandableListAncestors(window);
curam.util.ExpandableLists._setFrameTitle(_f3b,_f3a);
if(!curam.util.ExpandableLists._isExternalApp(window)){
var _f3f=curam.tab.getSelectedTab();
if(_f3f){
var _f40=curam.tab.getTabWidgetId(_f3f);
var _f41=curam.util.getTopmostWindow();
_f41.curam.util.Refresh.getController(_f40).pageLoaded(_f3a.pageID,curam.util.ui.refresh.RefreshEvent.prototype.SOURCE_CONTEXT_INLINE);
}
}
curam.debug.log("================================================");
},_resizeIframe:function(_f42,_f43){
_ef6.set(_f42,{height:_f43+"px"});
curam.util.ExpandableLists._addMediaPrintToIframe(_f42,_f43);
},_addMediaPrintToIframe:function(_f44,_f45){
var _f46=_f44.id;
var _f47=_f44.contentWindow.frames.parent;
var _f48=0;
var _f49=false;
var _f4a=false;
var _f4b=_f44.contentWindow.document;
win.withDoc(_f4b,function(){
var _f4c=dojo.query(".person-container-panel")[0];
if(_f4c){
_f49=true;
if(has("ie")||has("trident")){
var body=_f4b.body;
body.setAttribute("style","overflow: hidden !important");
}
}
if(dojo.query(".context-panel-wrapper")[0]){
_f49=true;
}
if(_f49){
var _f4d=dojo.query(".pane");
var _f4e=dojo.query(".intake-user")[0]||dojo.query(".pd-case-owner")[0]||dojo.query(".ic-case-owner")[0];
if(_f4d.length>1){
_f48=_f4d[0].scrollHeight*(_f4d.length-1);
}else{
if(_f4e){
if(_f4e.scrollHeight>20){
_f48=_f4e.scrollHeight;
}
}
}
if(dojo.query(".Intakecontainer-panel")[0]){
_f4a=true;
}
}
},this);
if(_f49){
var css="";
if(_f4a){
css="@media print { ."+_f46+" {"+"min-height: calc( "+_f48+"px + "+_f45+"px) !important;  "+"min-width: 1300px !important;  "+"-ms-transform: scale(0.85);"+"-ms-transform-origin: 0 0;"+"-moz-transform: scale(0.85);"+"-moz-transform-origin: 0 0;"+"-webkit-transform: scale(0.70);"+"-webkit-transform-origin: 0 0;} }";
}else{
css="@media print { ."+_f46+" {"+"min-height: calc( "+_f48+"px + "+_f45+"px) !important;  "+"min-width: 1200px !important;  "+"-ms-transform: scale(0.9);"+"-ms-transform-origin: 0 0;"+"-moz-transform: scale(0.9);"+"-moz-transform-origin: 0 0;"+"-webkit-transform: scale(0.85);"+"-webkit-transform-origin: 0 0;} }";
}
}else{
var css="@media print { ."+_f46+" { min-height: calc( 300px + "+_f45+"px) !important;  } }";
}
var _f4f=_f47.window.document;
win.withDoc(_f4f,function(){
if(_ef9("#"+_f44.id+"_print").length>0){
dom.byId(_f44.id+"_print").innerHTML=css;
}else{
_ef5.create("style",{id:_f44.id+"_print",innerHTML:css},win.body());
}
});
},_setFrameTitle:function(_f50,_f51){
_f50.title=_f50.title+" "+_f51.title;
},_findListId:function(_f52){
return curam.util.getSuffixFromClass(_ef9(_f52).closest("table")[0],curam.util.ExpandableLists._LIST_ID_PREFIX);
},resizeExpandableListAncestors:function(_f53){
curam.debug.log("curam.util.ExpandableLists.resizeExpandableListAncestors: ",_f53.location.href);
if(_f53&&_f53!==window.top&&typeof (_f53.frameElement)!="undefined"&&(_ef7.contains(_f53.frameElement,"expanded_row_iframe")||curam.util.ExpandableLists.isNestedUIM(_f53))){
var _f54=_f53.curam.util.getPageHeight();
curam.debug.log("curam.util.ExpandableLists"+".resizeExpandableListAncestors: "+_efc.getProperty("curam.util.ExpandableLists.resize.height"),_f54);
curam.util.ExpandableLists._resizeIframe(_f53.frameElement,_f54);
curam.util.ExpandableLists.resizeExpandableListAncestors(_f53.parent);
}else{
curam.debug.log("curam.util.ExpandableLists"+".resizeExpandableListAncestors: "+_efc.getProperty("curam.util.ExpandableLists.resize.end"));
return;
}
},isNestedUIM:function(_f55){
if(_f55&&_f55.jsScreenContext){
return _f55.jsScreenContext.hasContextBits("NESTED_UIM");
}else{
return false;
}
},_isExternalApp:function(_f56){
if(_f56&&_f56.jsScreenContext){
return _f56.jsScreenContext.hasContextBits("EXTAPP");
}else{
return false;
}
},setMinimumExpandedHeight:function(_f57,_f58){
curam.util.ExpandableLists._minimumExpandedHeight.push({listId:_f57,minExpHeight:_f58});
},getMinimumExpandedHeight:function(_f59){
var data=dojo.filter(curam.util.ExpandableLists._minimumExpandedHeight,function(item){
return item.listId==_f59;
});
if(data.length==1){
return data[0].minExpHeight;
}else{
curam.debug.log(_efc.getProperty("curam.util.ExpandableLists.default.height"),_f59);
return 30;
}
}});
_efb.register("curam/util/ExpandableLists",this);
return curam.util.ExpandableLists;
});
},"curam/cdsl/_base/_Connection":function(){
define(["dojo/_base/declare","./MetadataRegistry","./PreferenceMap"],function(_f5a,_f5b,_f5c){
var _f5d=_f5a(null,{_DEFAULT_REQUEST_TIMEOUT:60000,_metadata:null,_preferences:null,constructor:function(){
this._metadata=new _f5b();
this._preferences=new _f5c();
},invoke:function(_f5e,_f5f){
this._metadata.setFlags(_f5e);
},updateMetadata:function(_f60){
this._metadata.update(_f60);
},metadata:function(){
return this._metadata;
},preferences:function(){
return this._preferences;
}});
return _f5d;
});
},"curam/tab":function(){
define(["dijit/registry","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/dom-class","curam/inspection/Layer","curam/define","curam/util","curam/util/ScreenContext"],function(_f61,dom,_f62,_f63,_f64,_f65){
curam.define.singleton("curam.tab",{SECTION_TAB_CONTAINER_ID:"app-sections-container-dc",SMART_PANEL_IFRAME_ID:"curam_tab_SmartPanelIframe",toBeExecutedOnTabClose:[],_mockSelectedTab:null,getSelectedTab:function(_f66){
if(curam.tab._mockSelectedTab){
return curam.tab._mockSelectedTab;
}
if(curam.tab.getTabContainer(_f66)){
return curam.tab.getTabContainer(_f66).selectedChildWidget;
}
},getTabContainer:function(_f67){
return curam.tab.getTabContainerFromSectionID(_f67||curam.tab.getCurrentSectionId());
},getCurrentSectionId:function(_f68){
var _f69=curam.util.getTopmostWindow().dijit.byId(curam.tab.SECTION_TAB_CONTAINER_ID);
if(_f69){
var _f6a=_f69.selectedChildWidget.domNode.id;
return _f6a.substring(0,_f6a.length-4);
}else{
if(!_f68){
throw new Error("curam.tab.getCurrentSectionId() - application section"+" tab container not found");
}
}
return null;
},inTabbedUI:function(){
return curam.tab.getCurrentSectionId(true)!=null;
},getTabContainerFromSectionID:function(_f6b){
var _f6c=_f61.byId(_f6b+"-stc");
if(!_f6c&&window.parent&&window.parent!=window){
_f6c=curam.util.getTopmostWindow().dijit.byId(_f6b+"-stc");
}
return _f6c;
},getTabWidgetId:function(tab){
return tab.id;
},getSelectedTabWidgetId:function(){
return curam.tab.getTabWidgetId(curam.tab.getSelectedTab());
},getContainerTab:function(node){
var _f6d=dijit.getEnclosingWidget(node);
if(_f6d&&!_f6d.tabDescriptor){
_f6d=curam.tab.getContainerTab(_f6d.domNode.parentNode);
}
if(!_f6d||!_f6d.tabDescriptor){
throw "Containing tab widget could not be found for node: "+node;
}
return _f6d;
},getContentPanelIframe:function(tab){
var _f6e=tab?tab:curam.tab.getSelectedTab(),_f6f=null;
if(_f6e){
_f6f=dojo.query("iframe",_f6e.domNode).filter(function(item){
return _f62.get(item,"iscpiframe")=="true";
})[0];
}
return _f6f?_f6f:null;
},refreshMainContentPanel:function(tab){
var _f70=tab?tab:curam.tab.getSelectedTab();
curam.util.getTopmostWindow().dojo.publish("/curam/progress/display",[_f70.domNode]);
var _f71=curam.tab.getContentPanelIframe(tab);
_f71.contentWindow.curam.util.publishRefreshEvent();
_f71.contentWindow.location.reload(false);
},getSmartPanelIframe:function(tab){
var _f72=tab?tab:curam.tab.getSelectedTab();
var _f73=dojo.query("iframe",_f72.domNode).filter(function(item){
return item.id==curam.tab.SMART_PANEL_IFRAME_ID;
})[0];
return _f73;
},unsubscribeOnTabClose:function(_f74,_f75){
curam.tab.toBeExecutedOnTabClose.push(function(_f76){
if(_f75==_f76){
dojo.unsubscribe(_f74);
return true;
}
return false;
});
},executeOnTabClose:function(func,_f77){
curam.tab.toBeExecutedOnTabClose.push(function(_f78){
if(_f77==_f78){
func();
return true;
}
return false;
});
},doExecuteOnTabClose:function(_f79){
var _f7a=new Array();
for(var i=0;i<curam.tab.toBeExecutedOnTabClose.length;i++){
var func=curam.tab.toBeExecutedOnTabClose[i];
if(!func(_f79)){
_f7a.push(func);
}
}
curam.tab.toBeExecutedOnTabClose=_f7a;
},getHandlerForTab:function(_f7b,_f7c){
return function(_f7d,_f7e){
if(_f7e==_f7c){
_f7b(_f7d,_f7c);
}else{
}
};
},getTabController:function(){
return curam.util.getTopmostWindow().curam.ui.UIController;
},initTabLinks:function(_f7f){
dojo.query("a").forEach(function(link){
if(link.href.indexOf("#")!=0&&link.href.indexOf("javascript:")!=0&&(link.href.indexOf("Page.do")>-1||link.href.indexOf("Frame.do")>-1)){
if(link.href.indexOf("&o3ctx")<0&&link.href.indexOf("?o3ctx")<0){
var _f80=(link.href.indexOf("?")>-1)?"&":"?";
link.href+=_f80+jsScreenContext.toRequestString();
}
}
});
elements=document.forms;
for(var i=0;i<elements.length;++i){
elem=elements[i];
var _f81=dom.byId("o3ctx");
if(!_f81){
var ctx=new curam.util.ScreenContext();
ctx.setContextBits("ACTION");
_f63.create("input",{"type":"hidden","name":"o3ctx","value":ctx.getValue()},elem);
}
_f63.create("input",{"type":"hidden","name":"o3prv","value":jsPageID},elem);
}
if(elements.length>0){
curam.util.getTopmostWindow().dojo.publish("curam.fireNextRequest",[]);
}
},initContent:function(_f82,_f83){
var _f84=dom.byId("content");
_f64.remove(_f84,"hidden-panel");
return;
},setupSectionSelectionListener:function(){
dojo.subscribe(curam.tab.SECTION_TAB_CONTAINER_ID+"-selectChild",curam.tab.onSectionSelected);
},onSectionSelected:function(_f85){
if(_f85.curamDefaultPageID){
var _f86;
if(_f85.id.substring(_f85.id.length-4,_f85.id.length)=="-sbc"){
var _f87=_f85.id.substring(0,_f85.id.length-4);
_f86=curam.tab.getTabContainer(_f87);
}else{
_f86=_f85;
}
if(_f86&&_f86.getChildren().length==0){
curam.tab.getTabController().handleUIMPageID(_f85.curamDefaultPageID,true);
}
return true;
}
return false;
},setSectionDefaultPage:function(_f88,_f89){
var _f8a=_f61.byId(_f88);
if(_f8a){
_f8a.curamDefaultPageID=_f89;
}else{
throw "curam.tab.setSectionDefaultPage() - cannot find section dijit ID:"+_f88;
}
},publishSmartPanelContentReady:function(){
var _f8b="smartpanel.content.loaded";
var _f8c=window.frameElement;
_f8c.setAttribute("_SPContentLoaded","true");
curam.util.getTopmostWindow().dojo.publish(_f8b,[_f8c]);
}});
_f65.register("curam/tab",curam.tab);
return curam.tab;
});
},"dojo/text":function(){
define(["./_base/kernel","require","./has","./request"],function(dojo,_f8d,has,_f8e){
var _f8f;
if(1){
_f8f=function(url,sync,load){
_f8e(url,{sync:!!sync,headers:{"X-Requested-With":null}}).then(load);
};
}else{
if(_f8d.getText){
_f8f=_f8d.getText;
}else{
console.error("dojo/text plugin failed to load because loader does not support getText");
}
}
var _f90={},_f91=function(text){
if(text){
text=text.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");
var _f92=text.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);
if(_f92){
text=_f92[1];
}
}else{
text="";
}
return text;
},_f93={},_f94={};
dojo.cache=function(_f95,url,_f96){
var key;
if(typeof _f95=="string"){
if(/\//.test(_f95)){
key=_f95;
_f96=url;
}else{
key=_f8d.toUrl(_f95.replace(/\./g,"/")+(url?("/"+url):""));
}
}else{
key=_f95+"";
_f96=url;
}
var val=(_f96!=undefined&&typeof _f96!="string")?_f96.value:_f96,_f97=_f96&&_f96.sanitize;
if(typeof val=="string"){
_f90[key]=val;
return _f97?_f91(val):val;
}else{
if(val===null){
delete _f90[key];
return null;
}else{
if(!(key in _f90)){
_f8f(key,true,function(text){
_f90[key]=text;
});
}
return _f97?_f91(_f90[key]):_f90[key];
}
}
};
return {dynamic:true,normalize:function(id,_f98){
var _f99=id.split("!"),url=_f99[0];
return (/^\./.test(url)?_f98(url):url)+(_f99[1]?"!"+_f99[1]:"");
},load:function(id,_f9a,load){
var _f9b=id.split("!"),_f9c=_f9b.length>1,_f9d=_f9b[0],url=_f9a.toUrl(_f9b[0]),_f9e="url:"+url,text=_f93,_f9f=function(text){
load(_f9c?_f91(text):text);
};
if(_f9d in _f90){
text=_f90[_f9d];
}else{
if(_f9a.cache&&_f9e in _f9a.cache){
text=_f9a.cache[_f9e];
}else{
if(url in _f90){
text=_f90[url];
}
}
}
if(text===_f93){
if(_f94[url]){
_f94[url].push(_f9f);
}else{
var _fa0=_f94[url]=[_f9f];
_f8f(url,!_f9a.async,function(text){
_f90[_f9d]=_f90[url]=text;
for(var i=0;i<_fa0.length;){
_fa0[i++](text);
}
delete _f94[url];
});
}
}else{
_f9f(text);
}
}};
});
},"curam/i18n":function(){
define(["curam/define"],function(){
curam.define.singleton("curam.i18n",{values:{},set:function(key,_fa1){
curam.i18n.values[key]=_fa1;
},get:function(key){
return curam.i18n.values[key];
}});
return curam.i18n;
});
},"dojo/i18n":function(){
define(["./_base/kernel","require","./has","./_base/array","./_base/config","./_base/lang","./_base/xhr","./json","module"],function(dojo,_fa2,has,_fa3,_fa4,lang,xhr,json,_fa5){
has.add("dojo-preload-i18n-Api",1);
1||has.add("dojo-v1x-i18n-Api",1);
var _fa6=dojo.i18n={},_fa7=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,_fa8=function(root,_fa9,_faa,_fab){
for(var _fac=[_faa+_fab],_fad=_fa9.split("-"),_fae="",i=0;i<_fad.length;i++){
_fae+=(_fae?"-":"")+_fad[i];
if(!root||root[_fae]){
_fac.push(_faa+_fae+"/"+_fab);
_fac.specificity=_fae;
}
}
return _fac;
},_faf={},_fb0=function(_fb1,_fb2,_fb3){
_fb3=_fb3?_fb3.toLowerCase():dojo.locale;
_fb1=_fb1.replace(/\./g,"/");
_fb2=_fb2.replace(/\./g,"/");
return (/root/i.test(_fb3))?(_fb1+"/nls/"+_fb2):(_fb1+"/nls/"+_fb3+"/"+_fb2);
},_fb4=dojo.getL10nName=function(_fb5,_fb6,_fb7){
return _fb5=_fa5.id+"!"+_fb0(_fb5,_fb6,_fb7);
},_fb8=function(_fb9,_fba,_fbb,_fbc,_fbd,load){
_fb9([_fba],function(root){
var _fbe=lang.clone(root.root||root.ROOT),_fbf=_fa8(!root._v1x&&root,_fbd,_fbb,_fbc);
_fb9(_fbf,function(){
for(var i=1;i<_fbf.length;i++){
_fbe=lang.mixin(lang.clone(_fbe),arguments[i]);
}
var _fc0=_fba+"/"+_fbd;
_faf[_fc0]=_fbe;
_fbe.$locale=_fbf.specificity;
load();
});
});
},_fc1=function(id,_fc2){
return /^\./.test(id)?_fc2(id):id;
},_fc3=function(_fc4){
var list=_fa4.extraLocale||[];
list=lang.isArray(list)?list:[list];
list.push(_fc4);
return list;
},load=function(id,_fc5,load){
if(has("dojo-preload-i18n-Api")){
var _fc6=id.split("*"),_fc7=_fc6[1]=="preload";
if(_fc7){
if(!_faf[id]){
_faf[id]=1;
_fc8(_fc6[2],json.parse(_fc6[3]),1,_fc5);
}
load(1);
}
if(_fc7||_fc9(id,_fc5,load)){
return;
}
}
var _fca=_fa7.exec(id),_fcb=_fca[1]+"/",_fcc=_fca[5]||_fca[4],_fcd=_fcb+_fcc,_fce=(_fca[5]&&_fca[4]),_fcf=_fce||dojo.locale||"",_fd0=_fcd+"/"+_fcf,_fd1=_fce?[_fcf]:_fc3(_fcf),_fd2=_fd1.length,_fd3=function(){
if(!--_fd2){
load(lang.delegate(_faf[_fd0]));
}
};
_fa3.forEach(_fd1,function(_fd4){
var _fd5=_fcd+"/"+_fd4;
if(has("dojo-preload-i18n-Api")){
_fd6(_fd5);
}
if(!_faf[_fd5]){
_fb8(_fc5,_fcd,_fcb,_fcc,_fd4,_fd3);
}else{
_fd3();
}
});
};
if(has("dojo-unit-tests")){
var _fd7=_fa6.unitTests=[];
}
if(has("dojo-preload-i18n-Api")||1){
var _fd8=_fa6.normalizeLocale=function(_fd9){
var _fda=_fd9?_fd9.toLowerCase():dojo.locale;
return _fda=="root"?"ROOT":_fda;
},isXd=function(mid,_fdb){
return (1&&1)?_fdb.isXdUrl(_fa2.toUrl(mid+".js")):true;
},_fdc=0,_fdd=[],_fc8=_fa6._preloadLocalizations=function(_fde,_fdf,_fe0,_fe1){
_fe1=_fe1||_fa2;
function _fe2(mid,_fe3){
if(isXd(mid,_fe1)||_fe0){
_fe1([mid],_fe3);
}else{
_ffd([mid],_fe3,_fe1);
}
};
function _fe4(_fe5,func){
var _fe6=_fe5.split("-");
while(_fe6.length){
if(func(_fe6.join("-"))){
return;
}
_fe6.pop();
}
func("ROOT");
};
function _fe7(){
_fdc++;
};
function _fe8(){
--_fdc;
while(!_fdc&&_fdd.length){
load.apply(null,_fdd.shift());
}
};
function _fe9(path,name,loc,_fea){
return _fea.toAbsMid(path+name+"/"+loc);
};
function _feb(_fec){
_fec=_fd8(_fec);
_fe4(_fec,function(loc){
if(_fa3.indexOf(_fdf,loc)>=0){
var mid=_fde.replace(/\./g,"/")+"_"+loc;
_fe7();
_fe2(mid,function(_fed){
for(var p in _fed){
var _fee=_fed[p],_fef=p.match(/(.+)\/([^\/]+)$/),_ff0,_ff1;
if(!_fef){
continue;
}
_ff0=_fef[2];
_ff1=_fef[1]+"/";
if(!_fee._localized){
continue;
}
var _ff2;
if(loc==="ROOT"){
var root=_ff2=_fee._localized;
delete _fee._localized;
root.root=_fee;
_faf[_fa2.toAbsMid(p)]=root;
}else{
_ff2=_fee._localized;
_faf[_fe9(_ff1,_ff0,loc,_fa2)]=_fee;
}
if(loc!==_fec){
function _ff3(_ff4,_ff5,_ff6,_ff7){
var _ff8=[],_ff9=[];
_fe4(_fec,function(loc){
if(_ff7[loc]){
_ff8.push(_fa2.toAbsMid(_ff4+loc+"/"+_ff5));
_ff9.push(_fe9(_ff4,_ff5,loc,_fa2));
}
});
if(_ff8.length){
_fe7();
_fe1(_ff8,function(){
for(var i=_ff8.length-1;i>=0;i--){
_ff6=lang.mixin(lang.clone(_ff6),arguments[i]);
_faf[_ff9[i]]=_ff6;
}
_faf[_fe9(_ff4,_ff5,_fec,_fa2)]=lang.clone(_ff6);
_fe8();
});
}else{
_faf[_fe9(_ff4,_ff5,_fec,_fa2)]=_ff6;
}
};
_ff3(_ff1,_ff0,_fee,_ff2);
}
}
_fe8();
});
return true;
}
return false;
});
};
_feb();
_fa3.forEach(dojo.config.extraLocale,_feb);
},_fc9=function(id,_ffa,load){
if(_fdc){
_fdd.push([id,_ffa,load]);
}
return _fdc;
},_fd6=function(){
};
}
if(1){
var _ffb={},_ffc=new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define = function(mid, factory){define.called = 1; __amdValue.result = factory || mid;},"+"\t   require = function(){define.called = 1;};"+"try{"+"define.called = 0;"+"eval(__bundle);"+"if(define.called==1)"+"return __amdValue;"+"if((__checkForLegacyModules = __checkForLegacyModules(__mid)))"+"return __checkForLegacyModules;"+"}catch(e){}"+"try{"+"return eval('('+__bundle+')');"+"}catch(e){"+"return e;"+"}"),_ffd=function(deps,_ffe,_fff){
var _1000=[];
_fa3.forEach(deps,function(mid){
var url=_fff.toUrl(mid+".js");
function load(text){
var _1001=_ffc(text,_fd6,mid,_ffb);
if(_1001===_ffb){
_1000.push(_faf[url]=_ffb.result);
}else{
if(_1001 instanceof Error){
console.error("failed to evaluate i18n bundle; url="+url,_1001);
_1001={};
}
_1000.push(_faf[url]=(/nls\/[^\/]+\/[^\/]+$/.test(url)?_1001:{root:_1001,_v1x:1}));
}
};
if(_faf[url]){
_1000.push(_faf[url]);
}else{
var _1002=_fff.syncLoadNls(mid);
if(!_1002){
_1002=_fd6(mid.replace(/nls\/([^\/]*)\/([^\/]*)$/,"nls/$2/$1"));
}
if(_1002){
_1000.push(_1002);
}else{
if(!xhr){
try{
_fff.getText(url,true,load);
}
catch(e){
_1000.push(_faf[url]={});
}
}else{
xhr.get({url:url,sync:true,load:load,error:function(){
_1000.push(_faf[url]={});
}});
}
}
}
});
_ffe&&_ffe.apply(null,_1000);
};
_fd6=function(_1003){
for(var _1004,names=_1003.split("/"),_1005=dojo.global[names[0]],i=1;_1005&&i<names.length-1;_1005=_1005[names[i++]]){
}
if(_1005){
_1004=_1005[names[i]];
if(!_1004){
_1004=_1005[names[i].replace(/-/g,"_")];
}
if(_1004){
_faf[_1003]=_1004;
}
}
return _1004;
};
_fa6.getLocalization=function(_1006,_1007,_1008){
var _1009,_100a=_fb0(_1006,_1007,_1008);
load(_100a,(!isXd(_100a,_fa2)?function(deps,_100b){
_ffd(deps,_100b,_fa2);
}:_fa2),function(_100c){
_1009=_100c;
});
return _1009;
};
if(has("dojo-unit-tests")){
_fd7.push(function(doh){
doh.register("tests.i18n.unit",function(t){
var check;
check=_ffc("{prop:1}",_fd6,"nonsense",_ffb);
t.is({prop:1},check);
t.is(undefined,check[1]);
check=_ffc("({prop:1})",_fd6,"nonsense",_ffb);
t.is({prop:1},check);
t.is(undefined,check[1]);
check=_ffc("{'prop-x':1}",_fd6,"nonsense",_ffb);
t.is({"prop-x":1},check);
t.is(undefined,check[1]);
check=_ffc("({'prop-x':1})",_fd6,"nonsense",_ffb);
t.is({"prop-x":1},check);
t.is(undefined,check[1]);
check=_ffc("define({'prop-x':1})",_fd6,"nonsense",_ffb);
t.is(_ffb,check);
t.is({"prop-x":1},_ffb.result);
check=_ffc("define('some/module', {'prop-x':1})",_fd6,"nonsense",_ffb);
t.is(_ffb,check);
t.is({"prop-x":1},_ffb.result);
check=_ffc("this is total nonsense and should throw an error",_fd6,"nonsense",_ffb);
t.is(check instanceof Error,true);
});
});
}
}
return lang.mixin(_fa6,{dynamic:true,normalize:_fc1,load:load,cache:_faf,getL10nName:_fb4});
});
},"curam/widget/ProgressSpinner":function(){
define(["dojox/widget/Standby","dojo/dom-construct","curam/debug","curam/util","curam/tab"],function(_100d,_100e,debug){
var _100f=dojo.setObject("curam.widget.ProgressSpinner",{PROGRESS_WIDGET_ENABLED:true,PROGRESS_WIDGET_DEFAULT_THRESHOLD:2000,PROGRESS_WIDGET_COLOR:"white",PROGRESS_WIDGET_TITLE:"Please wait...",PROGRESS_WIDGET_TIMEOUT_MAX:90000,LOAD_MASK_TIMEOUT:15000,_spinnerTokens:[],_launcherTokens:[],_forcedTimeouts:[],_enabled:false,_eHandler:false,_tDojo:null,init:function(){
debug.log("PROGRESS SPINNER: isEnabled: "+_100f.PROGRESS_WIDGET_ENABLED);
debug.log("PROGRESS SPINNER: threshold: "+_100f.PROGRESS_WIDGET_DEFAULT_THRESHOLD);
debug.log("PROGRESS SPINNER: max timeout: "+_100f.PROGRESS_WIDGET_TIMEOUT_MAX);
_100f._enabled=_100f._isEnabled();
_100f.tDojo.subscribe("/curam/progress/unload",function(){
_100f._enabled&&_100f.dismissSpinner();
});
_100f.tDojo.subscribe("/curam/progress/display",function(_1010,delay){
if(_100f._enabled){
var _1011=_100f.dismissSpinner();
_1010&&_100f.launch(_1010,(_1011?0:delay));
}
});
},_isEnabled:function(){
return (_100f.PROGRESS_WIDGET_ENABLED&&(_100f.PROGRESS_WIDGET_ENABLED===true||_100f.PROGRESS_WIDGET_ENABLED.toString().toLowerCase()==="true"));
},launch:function(_1012,delay){
var _1013=_100f._getSpinner(_1012);
_1013&&_100f.show(_1013,delay);
},getSpinner:function(_1014){
return _100f._getSpinner(_1014);
},_getSpinner:function(_1015){
if(_1015!=null&&_100f._enabled){
debug.log(debug.getProperty("curam.widget.ProgressSpinner.load",[_1015]));
var _1016=dojo.isString(_1015)?_100f.adjustTarget(_1015):_1015;
var _1017=new _100d({target:_1016,centerIndicator:"text",zIndex:999999999,color:_100f.PROGRESS_WIDGET_COLOR,text:"<div class='curam-spinner curam-h1'></div>",title:_100f.PROGRESS_WIDGET_TITLE,duration:250,onHide:function(){
curam.util.getTopmostWindow().document.querySelectorAll(".standby").forEach(_100e.destroy);
}});
_1017.domNode.classList.add("standby");
curam.util.getTopmostWindow().document.body.appendChild(_1017.domNode);
_100f._spinnerTokens.push(_1017);
_1017.startup();
return _1017;
}
return null;
},adjustTarget:function(_1018){
var _1019=_1018;
var wid=curam.tab.getSelectedTabWidgetId();
if(wid){
var _101a=curam.util.getTopmostWindow().dijit.byId(wid);
_101a&&(_1019=_101a.containerNode);
}
return _1019;
},show:function(_101b,_101c){
!!_101c&&(_101c=_100f.PROGRESS_WIDGET_DEFAULT_THRESHOLD);
var tOut=setTimeout(function(){
_101b.show();
var _101d=setTimeout(function(){
_100f.tDojo.publish("/curam/progress/unload");
},_100f.PROGRESS_WIDGET_TIMEOUT_MAX);
_100f._forcedTimeouts.push(_101d);
},_101c);
_100f._launcherTokens.push(tOut);
return tOut;
},hide:function(_101e){
_101e.hide();
},dismissSpinner:function(){
return _100f._dismissSpinner();
},_dismissSpinner:function(){
var res=_100f._spinnerTokens.length;
_100f._forcedTimeouts.forEach(function(_101f){
clearTimeout(_101f);
});
_100f._forcedTimeouts.splice(0,_100f._forcedTimeouts.length);
_100f._launcherTokens.forEach(function(token){
clearTimeout(token);
});
_100f._launcherTokens.splice(0,_100f._launcherTokens.length);
_100f._spinnerTokens.forEach(function(token){
token.hide();
});
_100f._spinnerTokens.splice(0,_100f._spinnerTokens.length);
curam.debug.log("PROGRESS SPINNER: "+debug.getProperty("curam.widget.ProgressSpinner.unload"));
return (res>0);
}});
_100f.tDojo=curam.util.getTopmostWindow().dojo;
if(!_100f.eHandler){
_100f.tDojo.subscribe("/curam/progress/unload",function(){
_100f._enabled&&_100f.dismissSpinner();
});
_100f.eHandler=_100f.tDojo.subscribe("/curam/progress/display",function(_1020,delay){
if(_100f._enabled){
var _1021=_100f.dismissSpinner();
_1020&&_100f.launch(_1020,(_1021?0:delay));
}
});
}
return curam.widget.ProgressSpinner;
});
},"dojo/store/Cache":function(){
define(["../_base/lang","../when"],function(lang,when){
var Cache=function(_1022,_1023,_1024){
_1024=_1024||{};
return lang.delegate(_1022,{query:function(query,_1025){
var _1026=_1022.query(query,_1025);
_1026.forEach(function(_1027){
if(!_1024.isLoaded||_1024.isLoaded(_1027)){
_1023.put(_1027);
}
});
return _1026;
},queryEngine:_1022.queryEngine||_1023.queryEngine,get:function(id,_1028){
return when(_1023.get(id),function(_1029){
return _1029||when(_1022.get(id,_1028),function(_102a){
if(_102a){
_1023.put(_102a,{id:id});
}
return _102a;
});
});
},add:function(_102b,_102c){
return when(_1022.add(_102b,_102c),function(_102d){
_1023.add(_102d&&typeof _102d=="object"?_102d:_102b,_102c);
return _102d;
});
},put:function(_102e,_102f){
_1023.remove((_102f&&_102f.id)||this.getIdentity(_102e));
return when(_1022.put(_102e,_102f),function(_1030){
_1023.put(_1030&&typeof _1030=="object"?_1030:_102e,_102f);
return _1030;
});
},remove:function(id,_1031){
return when(_1022.remove(id,_1031),function(_1032){
return _1023.remove(id,_1031);
});
},evict:function(id){
return _1023.remove(id);
}});
};
lang.setObject("dojo.store.Cache",Cache);
return Cache;
});
},"dojox/encoding/digests/SHA1":function(){
define(["./_base"],function(base){
var chrsz=8,mask=(1<<chrsz)-1;
function R(n,c){
return (n<<c)|(n>>>(32-c));
};
function FT(t,b,c,d){
if(t<20){
return (b&c)|((~b)&d);
}
if(t<40){
return b^c^d;
}
if(t<60){
return (b&c)|(b&d)|(c&d);
}
return b^c^d;
};
function KT(t){
return (t<20)?1518500249:(t<40)?1859775393:(t<60)?-1894007588:-899497514;
};
function core(x,len){
x[len>>5]|=128<<(24-len%32);
x[((len+64>>9)<<4)+15]=len;
var w=new Array(80),a=1732584193,b=-271733879,c=-1732584194,d=271733878,e=-1009589776;
for(var i=0;i<x.length;i+=16){
var olda=a,oldb=b,oldc=c,oldd=d,olde=e;
for(var j=0;j<80;j++){
if(j<16){
w[j]=x[i+j];
}else{
w[j]=R(w[j-3]^w[j-8]^w[j-14]^w[j-16],1);
}
var t=base.addWords(base.addWords(R(a,5),FT(j,b,c,d)),base.addWords(base.addWords(e,w[j]),KT(j)));
e=d;
d=c;
c=R(b,30);
b=a;
a=t;
}
a=base.addWords(a,olda);
b=base.addWords(b,oldb);
c=base.addWords(c,oldc);
d=base.addWords(d,oldd);
e=base.addWords(e,olde);
}
return [a,b,c,d,e];
};
function hmac(data,key){
var wa=_1033(key);
if(wa.length>16){
wa=core(wa,key.length*chrsz);
}
var ipad=new Array(16),opad=new Array(16);
for(var i=0;i<16;i++){
ipad[i]=wa[i]^909522486;
opad[i]=wa[i]^1549556828;
}
var hash=core(ipad.concat(_1033(data)),512+data.length*chrsz);
return core(opad.concat(hash),512+160);
};
function _1033(s){
var wa=[];
for(var i=0,l=s.length*chrsz;i<l;i+=chrsz){
wa[i>>5]|=(s.charCodeAt(i/chrsz)&mask)<<(32-chrsz-i%32);
}
return wa;
};
function toHex(wa){
var h="0123456789abcdef",s=[];
for(var i=0,l=wa.length*4;i<l;i++){
s.push(h.charAt((wa[i>>2]>>((3-i%4)*8+4))&15),h.charAt((wa[i>>2]>>((3-i%4)*8))&15));
}
return s.join("");
};
function _1034(wa){
var s=[];
for(var i=0,l=wa.length*32;i<l;i+=chrsz){
s.push(String.fromCharCode((wa[i>>5]>>>(32-chrsz-i%32))&mask));
}
return s.join("");
};
function _1035(wa){
var p="=",tab="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=[];
for(var i=0,l=wa.length*4;i<l;i+=3){
var t=(((wa[i>>2]>>8*(3-i%4))&255)<<16)|(((wa[i+1>>2]>>8*(3-(i+1)%4))&255)<<8)|((wa[i+2>>2]>>8*(3-(i+2)%4))&255);
for(var j=0;j<4;j++){
if(i*8+j*6>wa.length*32){
s.push(p);
}else{
s.push(tab.charAt((t>>6*(3-j))&63));
}
}
}
return s.join("");
};
base.SHA1=function(data,_1036){
var out=_1036||base.outputTypes.Base64;
var wa=core(_1033(data),data.length*chrsz);
switch(out){
case base.outputTypes.Raw:
return wa;
case base.outputTypes.Hex:
return toHex(wa);
case base.outputTypes.String:
return _1034(wa);
default:
return _1035(wa);
}
};
base.SHA1._hmac=function(data,key,_1037){
var out=_1037||base.outputTypes.Base64;
var wa=hmac(data,key);
switch(out){
case base.outputTypes.Raw:
return wa;
case base.outputTypes.Hex:
return toHex(wa);
case base.outputTypes.String:
return _1034(wa);
default:
return _1035(wa);
}
};
return base.SHA1;
});
},"dojo/data/util/simpleFetch":function(){
define(["../../_base/lang","../../_base/kernel","./sorter"],function(lang,_1038,_1039){
var _103a={};
lang.setObject("dojo.data.util.simpleFetch",_103a);
_103a.errorHandler=function(_103b,_103c){
if(_103c.onError){
var scope=_103c.scope||_1038.global;
_103c.onError.call(scope,_103b,_103c);
}
};
_103a.fetchHandler=function(items,_103d){
var _103e=_103d.abort||null,_103f=false,_1040=_103d.start?_103d.start:0,_1041=(_103d.count&&(_103d.count!==Infinity))?(_1040+_103d.count):items.length;
_103d.abort=function(){
_103f=true;
if(_103e){
_103e.call(_103d);
}
};
var scope=_103d.scope||_1038.global;
if(!_103d.store){
_103d.store=this;
}
if(_103d.onBegin){
_103d.onBegin.call(scope,items.length,_103d);
}
if(_103d.sort){
items.sort(_1039.createSortFunction(_103d.sort,this));
}
if(_103d.onItem){
for(var i=_1040;(i<items.length)&&(i<_1041);++i){
var item=items[i];
if(!_103f){
_103d.onItem.call(scope,item,_103d);
}
}
}
if(_103d.onComplete&&!_103f){
var _1042=null;
if(!_103d.onItem){
_1042=items.slice(_1040,_1041);
}
_103d.onComplete.call(scope,_1042,_103d);
}
};
_103a.fetch=function(_1043){
_1043=_1043||{};
if(!_1043.store){
_1043.store=this;
}
this._fetchItems(_1043,lang.hitch(this,"fetchHandler"),lang.hitch(this,"errorHandler"));
return _1043;
};
return _103a;
});
},"curam/util":function(){
define(["dojo/dom","dijit/registry","dojo/dom-construct","dojo/ready","dojo/_base/window","dojo/dom-style","dojo/_base/array","dojo/dom-class","dojo/topic","dojo/_base/event","dojo/query","dojo/Deferred","dojo/has","dojo/_base/unload","dojo/dom-geometry","dojo/_base/json","dojo/dom-attr","dojo/_base/lang","dojo/on","dijit/_BidiSupport","curam/define","curam/debug","curam/util/RuntimeContext","curam/util/Constants","dojo/_base/sniff","cm/_base/_dom","curam/util/ResourceBundle","dojo/NodeList-traverse"],function(dom,_1044,_1045,ready,_1046,style,array,_1047,topic,_1048,query,_1049,has,_104a,geom,json,attr,lang,on,bidi,_104b,debug,_104c,_104d,sniff,_104e,_104f){
curam.define.singleton("curam.util",{PREVENT_CACHE_FLAG:"o3pc",INFORMATIONAL_MSGS_STORAGE_ID:"__informationals__",ERROR_MESSAGES_CONTAINER:"error-messages-container",ERROR_MESSAGES_LIST:"error-messages",CACHE_BUSTER:0,CACHE_BUSTER_PARAM_NAME:"o3nocache",PAGE_ID_PREFIX:"Curam_",msgLocaleSelectorActionPage:"$not-locaized$ Usage of the Language Selector is not permitted from an editable page that has previously been submitted.",GENERIC_ERROR_MODAL_MAP:{},wrappersMap:[],lastOpenedTabButton:false,tabButtonClicked:false,secureURLsExemptParamName:"suep",secureURLsExemptParamsPrefix:"spm",secureURLsHashTokenParam:"suhtp",setTabButtonClicked:function(_1050){
curam.util.getTopmostWindow().curam.util.tabButtonClicked=_1050;
},getTabButtonClicked:function(){
var _1051=curam.util.getTopmostWindow().curam.util.tabButtonClicked;
curam.util.getTopmostWindow().curam.util.tabButtonClicked=false;
return _1051;
},setLastOpenedTabButton:function(_1052){
curam.util.getTopmostWindow().curam.util.lastOpenedTabButton=_1052;
},getLastOpenedTabButton:function(){
var _1053=curam.util.getTopmostWindow().curam.util.lastOpenedTabButton;
curam.util.getTopmostWindow().curam.util.lastOpenedTabButton=false;
return _1053;
},insertCssText:function(_1054,_1055){
var id=_1055?_1055:"_runtime_stylesheet_";
var _1056=dom.byId(id);
var _1057;
if(_1056){
if(_1056.styleSheet){
_1054=_1056.styleSheet.cssText+_1054;
_1057=_1056;
_1057.setAttribute("id","_nodeToRm");
}else{
_1056.appendChild(document.createTextNode(_1054));
return;
}
}
var pa=document.getElementsByTagName("head")[0];
_1056=_1045.create("style",{type:"text/css",id:id});
if(_1056.styleSheet){
_1056.styleSheet.cssText=_1054;
}else{
_1056.appendChild(document.createTextNode(_1054));
}
pa.appendChild(_1056);
if(_1057){
_1057.parentNode.removeChild(_1057);
}
},fireRefreshTreeEvent:function(){
if(dojo.global.parent&&dojo.global.parent.amIFrame){
var wpl=dojo.global.parent.loader;
}
if(wpl&&wpl.dojo){
wpl.dojo.publish("refreshTree");
}
},firePageSubmittedEvent:function(_1058){
require(["curam/tab"],function(){
var _1059=curam.tab.getSelectedTab();
if(_1059){
var _105a=curam.tab.getTabWidgetId(_1059);
var _105b=curam.util.getTopmostWindow();
var ctx=(_1058=="dialog")?curam.util.ui.refresh.RefreshEvent.prototype.SOURCE_CONTEXT_DIALOG:curam.util.ui.refresh.RefreshEvent.prototype.SOURCE_CONTEXT_MAIN;
_105b.curam.util.Refresh.getController(_105a).pageSubmitted(dojo.global.jsPageID,ctx);
_105b.dojo.publish("/curam/main-content/page/submitted",[dojo.global.jsPageID,_105a]);
}else{
curam.debug.log("/curam/main-content/page/submitted: "+debug.getProperty("curam.util.no.open"));
}
});
},fireTabOpenedEvent:function(_105c){
curam.util.getTopmostWindow().dojo.publish("curam.tabOpened",[dojo.global.jsPageID,_105c]);
},setupSubmitEventPublisher:function(){
ready(function(){
var form=dom.byId("mainForm");
if(form){
curam.util.connect(form,"onsubmit",function(){
curam.util.getTopmostWindow().dojo.publish("/curam/progress/display",[curam.util.PAGE_ID_PREFIX+dojo.global.jsPageID]);
curam.util.firePageSubmittedEvent("main-content");
});
}
});
},getScrollbar:function(){
var _105d=_1045.create("div",{},_1046.body());
style.set(_105d,{width:"100px",height:"100px",overflow:"scroll",position:"absolute",top:"-300px",left:"0px"});
var test=_1045.create("div",{},_105d);
style.set(test,{width:"400px",height:"400px"});
var width=_105d.offsetWidth-_105d.clientWidth;
_1045.destroy(_105d);
return {width:width};
},isModalWindow:function(){
return (dojo.global.curamModal===undefined)?false:true;
},isExitingIEGScriptInModalWindow:function(_105e){
return (curam.util.getTopmostWindow().exitingIEGScript===undefined)?false:true;
},setExitingIEGScriptInModalWindowVariable:function(){
curam.util.getTopmostWindow().exitingIEGScript=true;
},getTopmostWindow:function(){
if(typeof (dojo.global._curamTopmostWindow)=="undefined"){
var _105f=dojo.global;
if(_105f.__extAppTopWin){
dojo.global._curamTopmostWindow=_105f;
}else{
while(_105f.parent!=_105f){
_105f=_105f.parent;
if(_105f.__extAppTopWin){
break;
}
}
dojo.global._curamTopmostWindow=_105f;
}
}
if(dojo.global._curamTopmostWindow.location.href.indexOf("AppController.do")<0&&typeof (dojo.global._curamTopmostWindow.__extAppTopWin)=="undefined"){
curam.debug.log(debug.getProperty("curam.util.wrong.window")+dojo.global._curamTopmostWindow.location.href);
}
return dojo.global._curamTopmostWindow;
},getUrlParamValue:function(url,_1060){
var qPos=url.indexOf("?");
if(qPos<0){
return null;
}
var _1061=url.substring(qPos+1,url.length);
function _1062(delim){
var _1063=_1061.split(delim);
_1060+="=";
for(var i=0;i<_1063.length;i++){
if(_1063[i].indexOf(_1060)==0){
return _1063[i].split("=")[1];
}
}
};
return _1062("&")||_1062("");
},addUrlParam:function(href,_1064,_1065,_1066){
var hasQ=href.indexOf("?")>-1;
var _1067=_1066?_1066:"undefined";
if(!hasQ||(_1067==false)){
return href+(hasQ?"&":"?")+_1064+"="+_1065;
}else{
var parts=href.split("?");
href=parts[0]+"?"+_1064+"="+_1065+(parts[1]!=""?("&"+parts[1]):"");
return href;
}
},replaceUrlParam:function(href,_1068,_1069){
href=curam.util.removeUrlParam(href,_1068);
return curam.util.addUrlParam(href,_1068,_1069);
},removeUrlParam:function(url,_106a,_106b){
var qPos=url.indexOf("?");
if(qPos<0){
return url;
}
if(url.indexOf(_106a+"=")<0){
return url;
}
var _106c=url.substring(qPos+1,url.length);
var _106d=_106c.split("&");
var value;
var _106e,_106f;
for(var i=0;i<_106d.length;i++){
if(_106d[i].indexOf(_106a+"=")==0){
_106f=false;
if(_106b){
_106e=_106d[i].split("=");
if(_106e.length>1){
if(_106e[1]==_106b){
_106f=true;
}
}else{
if(_106b==""){
_106f=true;
}
}
}else{
_106f=true;
}
if(_106f){
_106d.splice(i,1);
i--;
}
}
}
return url.substring(0,qPos+1)+_106d.join("&");
},stripHash:function(url){
var idx=url.indexOf("#");
if(idx<0){
return url;
}
return url.substring(0,url);
},isSameUrl:function(href1,href2,rtc){
if(!href2){
href2=rtc.getHref();
}
if(href1.indexOf("#")==0){
return true;
}
var _1070=href1.indexOf("#");
if(_1070>-1){
if(_1070==0){
return true;
}
var _1071=href1.split("#");
var _1072=href2.indexOf("#");
if(_1072>-1){
if(_1072==0){
return true;
}
href2=href2.split("#")[0];
}
return _1071[0]==href2;
}
var _1073=function(url){
var idx=url.lastIndexOf("Page.do");
var len=7;
if(idx<0){
idx=url.lastIndexOf("Action.do");
len=9;
}
if(idx<0){
idx=url.lastIndexOf("Frame.do");
len=8;
}
if(idx>-1&&idx==url.length-len){
return url.substring(0,idx);
}
return url;
};
var rp=curam.util.removeUrlParam;
var here=curam.util.stripHash(rp(href2,curam.util.Constants.RETURN_PAGE_PARAM));
var there=curam.util.stripHash(rp(href1,curam.util.Constants.RETURN_PAGE_PARAM));
var _1074=there.split("?");
var _1075=here.split("?");
_1075[0]=_1073(_1075[0]);
_1074[0]=_1073(_1074[0]);
var _1076=(_1075[0]==_1074[0]||_1075[0].match(_1074[0]+"$")==_1074[0]);
if(!_1076){
return false;
}
if(_1075.length==1&&_1074.length==1&&_1076){
return true;
}else{
var _1077;
var _1078;
if(typeof _1075[1]!="undefined"&&_1075[1]!=""){
_1077=_1075[1].split("&");
}else{
_1077=new Array();
}
if(typeof _1074[1]!="undefined"&&_1074[1]!=""){
_1078=_1074[1].split("&");
}else{
_1078=new Array();
}
curam.debug.log("curam.util.isSameUrl: paramsHere "+debug.getProperty("curam.util.before")+_1077.length);
_1077=array.filter(_1077,curam.util.isNotCDEJParam);
curam.debug.log("curam.util.isSameUrl: paramsHere "+debug.getProperty("curam.util.after")+_1077.length);
curam.debug.log("curam.util.isSameUrl: paramsHere "+debug.getProperty("curam.util.before")+_1078.length);
_1078=array.filter(_1078,curam.util.isNotCDEJParam);
curam.debug.log("curam.util.isSameUrl: paramsHere "+debug.getProperty("curam.util.after")+_1078.length);
if(_1077.length!=_1078.length){
return false;
}
var _1079={};
var param;
for(var i=0;i<_1077.length;i++){
param=_1077[i].split("=");
param[0]=decodeURIComponent(param[0]);
param[1]=decodeURIComponent(param[1]);
_1079[param[0]]=param[1];
}
for(var i=0;i<_1078.length;i++){
param=_1078[i].split("=");
param[0]=decodeURIComponent(param[0]);
param[1]=decodeURIComponent(param[1]);
if(_1079[param[0]]!=param[1]){
curam.debug.log(debug.getProperty("curam.util.no.match",[param[0],param[1],_1079[param[0]]]));
return false;
}
}
}
return true;
},isNotCDEJParam:function(_107a){
return !((_107a.charAt(0)=="o"&&_107a.charAt(1)=="3")||(_107a.charAt(0)=="_"&&_107a.charAt(1)=="_"&&_107a.charAt(2)=="o"&&_107a.charAt(3)=="3"));
},setAttributes:function(node,map){
for(var x in map){
node.setAttribute(x,map[x]);
}
},invalidatePage:function(){
curam.PAGE_INVALIDATED=true;
var _107b=dojo.global.dialogArguments?dojo.global.dialogArguments[0]:opener;
if(_107b&&_107b!=dojo.global){
try{
_107b.curam.util.invalidatePage();
}
catch(e){
curam.debug.log(debug.getProperty("curam.util.error"),e);
}
}
},redirectWindow:function(href,force,_107c){
var rtc=new curam.util.RuntimeContext(dojo.global);
var _107d=function(_107e,_107f,href,_1080,_1081){
curam.util.getFrameRoot(_107e,_107f).curam.util.redirectContentPanel(href,_1080,_1081);
};
curam.util._doRedirectWindow(href,force,_107c,dojo.global.jsScreenContext,rtc,curam.util.publishRefreshEvent,_107d);
},_doRedirectWindow:function(href,force,_1082,_1083,rtc,_1084,_1085){
if(href&&curam.util.isActionPage(href)&&!curam.util.LOCALE_REFRESH){
curam.debug.log(debug.getProperty("curam.util.stopping"),href);
return;
}
var rpl=curam.util.replaceUrlParam;
var _1086=_1083.hasContextBits("TREE")||_1083.hasContextBits("AGENDA")||_1083.hasContextBits("ORG_TREE");
if(curam.util.LOCALE_REFRESH){
curam.util.publishRefreshEvent();
curam.util.getTopmostWindow().location.reload();
return;
}else{
if(curam.util.FORCE_REFRESH){
href=rpl(rtc.getHref(),curam.util.PREVENT_CACHE_FLAG,(new Date()).getTime());
if(curam.util.isModalWindow()||_1086){
_1084();
dojo.global.location.href=href;
}else{
if(_1083.hasContextBits("LIST_ROW_INLINE_PAGE")||_1083.hasContextBits("NESTED_UIM")){
curam.util._handleInlinePageRefresh(href);
}else{
_1084();
if(dojo.global.location!==curam.util.getTopmostWindow().location){
require(["curam/tab"],function(){
_1085(dojo.global,curam.tab.getTabController().ROOT_OBJ,href,true,true);
});
}
}
}
return;
}
}
var u=curam.util;
var rtc=new curam.util.RuntimeContext(dojo.global);
if(!_1086&&!force&&!curam.PAGE_INVALIDATED&&u.isSameUrl(href,null,rtc)){
return;
}
if(curam.util.isModalWindow()||_1086){
href=rpl(rpl(href,"o3frame","modal"),curam.util.PREVENT_CACHE_FLAG,(new Date()).getTime());
var form=_1045.create("form",{action:href,method:"POST"});
if(!_1086){
if(!dom.byId("o3ctx")){
form.action=curam.util.removeUrlParam(form.action,"o3ctx");
var _1087=_1045.create("input",{type:"hidden",id:"o3ctx",name:"o3ctx",value:_1083.getValue()},form);
}
_1046.body().appendChild(form);
_1084();
form.submit();
}
if(!_1082){
if(_1086){
curam.util.redirectFrame(href);
}
}
}else{
var _1088=sessionStorage.getItem("launchWordEdit");
if(!_1088&&(_1083.hasContextBits("LIST_ROW_INLINE_PAGE")||_1083.hasContextBits("NESTED_UIM"))){
curam.util._handleInlinePageRefresh(href);
}else{
if(_1088){
sessionStorage.removeItem("launchWordEdit");
}
_1084();
if(dojo.global.location!==curam.util.getTopmostWindow().location){
if(_1083.hasContextBits("EXTAPP")){
var _1089=window.top;
_1089.dijit.byId("curam-app").updateMainContentIframe(href);
}else{
require(["curam/tab"],function(){
curam.util.getFrameRoot(dojo.global,curam.tab.getTabController().ROOT_OBJ).curam.util.redirectContentPanel(href,force);
});
}
}
}
}
},_handleInlinePageRefresh:function(href){
curam.debug.log(debug.getProperty("curam.util.closing.modal"),href);
var _108a=new curam.ui.PageRequest(href);
require(["curam/tab"],function(){
curam.tab.getTabController().checkPage(_108a,function(_108b){
curam.util.publishRefreshEvent();
window.location.reload(false);
});
});
},redirectContentPanel:function(url,_108c,_108d){
require(["curam/tab"],function(){
var _108e=curam.tab.getContentPanelIframe();
var _108f=url;
if(_108e!=null){
var rpu=curam.util.Constants.RETURN_PAGE_PARAM;
var _1090=null;
if(url.indexOf(rpu+"=")>=0){
curam.debug.log("curam.util.redirectContentPanel: "+debug.getProperty("curam.util.rpu"));
_1090=decodeURIComponent(curam.util.getUrlParamValue(url,rpu));
}
if(_1090){
_1090=curam.util.removeUrlParam(_1090,rpu);
_108f=curam.util.replaceUrlParam(url,rpu,encodeURIComponent(_1090));
}
}
var _1091=new curam.ui.PageRequest(_108f);
if(_108c){
_1091.forceLoad=true;
}
if(_108d){
_1091.justRefresh=true;
}
curam.tab.getTabController().handlePageRequest(_1091);
});
},redirectFrame:function(href){
if(dojo.global.jsScreenContext.hasContextBits("AGENDA")){
var _1092=curam.util.getFrameRoot(dojo.global,"wizard").targetframe;
_1092.curam.util.publishRefreshEvent();
_1092.location.href=href;
}else{
if(dojo.global.jsScreenContext.hasContextBits("ORG_TREE")){
var _1092=curam.util.getFrameRoot(dojo.global,"orgTreeRoot");
_1092.curam.util.publishRefreshEvent();
_1092.dojo.publish("orgTree.refreshContent",[href]);
}else{
var _1093=curam.util.getFrameRoot(dojo.global,"iegtree");
var _1094=_1093.navframe||_1093.frames[0];
var _1095=_1093.contentframe||_1093.frames["contentframe"];
_1095.curam.util.publishRefreshEvent();
if(curam.PAGE_INVALIDATED||_1094.curam.PAGE_INVALIDATED){
var _1096=curam.util.modifyUrlContext(href,"ACTION");
_1095.location.href=_1096;
}else{
_1095.location.href=href;
}
}
}
return true;
},publishRefreshEvent:function(){
topic.publish("/curam/page/refresh");
},openGenericErrorModalDialog:function(_1097,_1098,_1099,_109a,_109b){
var _109c=curam.util.getTopmostWindow();
_109c.curam.util.GENERIC_ERROR_MODAL_MAP={"windowsOptions":_1097,"titleInfo":_1098,"msg":_1099,"msgPlaceholder":_109a,"errorModal":_109b,"hasCancelButton":false};
var url="generic-modal-error.jspx";
curam.util.getTopmostWindow().dojo.global.focusSetOnCancelButton=true;
curam.util.openModalDialog({href:encodeURI(url)},_1097);
},openGenericErrorModalDialogYesNo:function(_109d,_109e,_109f){
var sc=dojo.global.jsScreenContext;
var _10a0=curam.util.getTopmostWindow();
sc.addContextBits("MODAL");
_10a0.curam.util.GENERIC_ERROR_MODAL_MAP={"windowsOptions":_109d,"titleInfo":_109e,"msg":_109f,"msgPlaceholder":"","errorModal":false,"hasCancelButton":true};
var url="generic-modal-error.jspx?"+sc.toRequestString();
curam.util.openModalDialog({href:encodeURI(url)},_109d);
},addPlaceholderFocusClassToEventOrAnchorTag:function(_10a1,_10a2){
var _10a3=curam.util.getTopmostWindow();
_10a3.curam.util.PLACEHOLDER_WINDOW_LIST=!_10a3.curam.util.PLACEHOLDER_WINDOW_LIST?[]:_10a3.curam.util.PLACEHOLDER_WINDOW_LIST;
_1047.add(_10a1,"placeholder-for-focus");
_10a3.curam.util.PLACEHOLDER_WINDOW_LIST.push(_10a2);
},returnFocusToPopupActionAnchorElement:function(_10a4){
var _10a5=_10a4.curam.util.PLACEHOLDER_WINDOW_LIST;
if(_10a5&&_10a5.length>0){
var _10a6=_10a5.pop();
var _10a7=_10a6&&_10a6.document.activeElement;
var _10a8=_10a7&&dojo.query(".placeholder-for-focus",_10a7);
if(_10a8&&_10a8.length==1){
_10a8[0].focus();
_1047.remove(_10a8[0],"placeholder-for-focus");
}
_10a4.curam.util.PLACEHOLDER_WINDOW_LIST.splice(0,_10a4.curam.util.PLACEHOLDER_WINDOW_LIST.length);
_10a4.curam.util.PLACEHOLDER_WINDOW_LIST=null;
}
},openModalDialog:function(_10a9,_10aa,left,top,_10ab){
_10a9.event&&curam.util.addPlaceholderFocusClassToEventOrAnchorTag(_10a9.event,_10a9.event.ownerDocument.defaultView.window);
var href;
if(!_10a9||!_10a9.href){
_10a9=_1048.fix(_10a9);
var _10ac=_10a9.target;
while(_10ac.tagName!="A"&&_10ac!=_1046.body()){
_10ac=_10ac.parentNode;
}
href=_10ac.href;
_10ac._isModal=true;
_1048.stop(_10a9);
}else{
href=_10a9.href;
_10a9._isModal=true;
}
require(["curam/dialog"]);
var opts=curam.dialog.parseWindowOptions(_10aa);
curam.util.showModalDialog(href,_10a9,opts["width"],opts["height"],left,top,false,null,null,_10ab);
return true;
},showModalDialog:function(url,_10ad,width,_10ae,left,top,_10af,_10b0,_10b1,_10b2){
var _10b3=curam.util.getTopmostWindow();
if(dojo.global!=_10b3){
curam.debug.log("curam.util.showModalDialog: "+debug.getProperty("curam.util.redirecting.modal"));
_10b3.curam.util.showModalDialog(url,_10ad,width,_10ae,left,top,_10af,_10b0,dojo.global,_10b2);
return;
}
var rup=curam.util.replaceUrlParam;
url=rup(url,"o3frame","modal");
url=curam.util.modifyUrlContext(url,"MODAL","TAB|LIST_ROW_INLINE_PAGE|LIST_EVEN_ROW|NESTED_UIM");
url=rup(url,curam.util.PREVENT_CACHE_FLAG,(new Date()).getTime());
curam.debug.log(debug.getProperty("curam.util.modal.url"),url);
if(width){
width=typeof (width)=="number"?width:parseInt(width);
}
if(_10ae){
_10ae=typeof (_10ae)=="number"?_10ae:parseInt(_10ae);
}
if(!curam.util._isModalCurrentlyOpening()){
if(url.indexOf("__o3rpu=about%3Ablank")>=0){
alert(curam_util_showModalDialog_pageStillLoading);
return;
}
curam.util._setModalCurrentlyOpening(true);
if(jsScreenContext.hasContextBits("EXTAPP")){
require(["curam/ModalDialog"]);
new curam.ModalDialog({href:url,width:width,height:_10ae,openNode:(_10ad&&_10ad.target)?_10ad.target:null,parentWindow:_10b1,uimToken:_10b2});
}else{
require(["curam/modal/CuramCarbonModal"]);
new curam.modal.CuramCarbonModal({href:url,width:width,height:_10ae,openNode:(_10ad&&_10ad.target)?_10ad.target:null,parentWindow:_10b1,uimToken:_10b2});
}
return true;
}
},showModalDialogWithRef:function(_10b4,_10b5,_10b6){
var _10b7=curam.util.getTopmostWindow();
if(dojo.global!=_10b7){
return _10b7.curam.util.showModalDialogWithRef(_10b4,dojo.global);
}
var rup=curam.util.replaceUrlParam;
_10b4=curam.util.modifyUrlContext(_10b4,"MODAL","TAB|LIST_ROW_INLINE_PAGE|LIST_EVEN_ROW|NESTED_UIM");
_10b4=rup(_10b4,curam.util.PREVENT_CACHE_FLAG,(new Date()).getTime());
if(!curam.util._isModalCurrentlyOpening()){
curam.util._setModalCurrentlyOpening(true);
var dl;
if(jsScreenContext.hasContextBits("EXTAPP")){
require(["curam/ModalDialog"]);
if(_10b6){
dl=new curam.ModalDialog({href:_10b4,width:_10b6.width,height:_10b6.height,parentWindow:_10b5});
}else{
dl=new curam.ModalDialog({href:_10b4,parentWindow:_10b5});
}
}else{
require(["curam/modal/CuramCarbonModal"]);
if(_10b6){
dl=new curam.modal.CuramCarbonModal({href:_10b4,width:_10b6.width,height:_10b6.height,parentWindow:_10b5});
}else{
dl=new curam.modal.CuramCarbonModal({href:_10b4,parentWindow:_10b5});
}
}
return dl;
}
},_isModalCurrentlyOpening:function(){
return curam.util.getTopmostWindow().curam.util._modalOpenInProgress;
},_setModalCurrentlyOpening:function(_10b8){
curam.util.getTopmostWindow().curam.util._modalOpenInProgress=_10b8;
},setupPreferencesLink:function(href){
ready(function(){
var _10b9=query(".user-preferences")[0];
if(_10b9){
if(typeof (_10b9._disconnectToken)=="undefined"){
_10b9._disconnectToken=curam.util.connect(_10b9,"onclick",curam.util.openPreferences);
}
if(!href){
href=dojo.global.location.href;
}
}else{
curam.debug.log(debug.getProperty("curam.util.no.setup"));
}
});
},setupLocaleLink:function(href){
ready(function(){
var _10ba=query(".user-locale")[0];
if(_10ba){
if(typeof (_10ba._disconnectToken)=="undefined"){
_10ba._disconnectToken=curam.util.connect(_10ba,"onclick",curam.util.openLocaleNew);
}
if(!href){
href=dojo.global.location.href;
}
}else{
curam.debug.log(debug.getProperty("curam.util.no.setup"));
}
});
},openPreferences:function(event){
_1048.stop(event);
if(event.target._curamDisable){
return;
}
require(["curam/tab"],function(){
curam.tab.getTabController().handleLinkClick("user-prefs-editor.jspx",{dialogOptions:"width=605"});
});
},logout:function(event){
var _10bb=curam.util.getTopmostWindow();
_10bb.dojo.publish("curam/redirect/logout");
window.location.href=jsBaseURL+"/logout.jsp";
},openAbout:function(event){
_1048.stop(event);
require(["curam/tab"],function(){
curam.tab.getTabController().handleLinkClick("about.jsp",{dialogOptions:"width=583,height=399"});
});
},addMinWidthCalendarCluster:function(id){
var _10bc=dom.byId(id);
var i=0;
function _10bd(evt){
array.forEach(_10bc.childNodes,function(node){
if(_1047.contains(node,"cluster")){
style.set(node,"width","97%");
if(node.clientWidth<700){
style.set(node,"width","700px");
}
}
});
};
if(has("ie")>6){
array.forEach(_10bc.childNodes,function(node){
if(_1047.contains(node,"cluster")){
style.set(node,"minWidth","700px");
}
});
}else{
on(dojo.global,"resize",_10bd);
ready(_10bd);
}
},addPopupFieldListener:function(id){
if(!has("ie")||has("ie")>6){
return;
}
if(!curam.util._popupFields){
function _10be(evt){
var _10bf=0;
var j=0;
var x=0;
var arr=curam.util._popupFields;
array.forEach(curam.util._popupFields,function(id){
var _10c0=dom.byId(id);
query("> .popup-actions",_10c0).forEach(function(node){
_10bf=node.clientWidth+30;
});
query("> .desc",_10c0).forEach(function(node){
style.set(node,"width",Math.max(0,_10c0.clientWidth-_10bf)+"px");
});
});
};
curam.util._popupFields=[id];
on(dojo.global,"resize",_10be);
ready(_10be);
}else{
curam.util._popupFields.push(id);
}
},addContentWidthListener:function(id){
if(has("ie")>6){
return;
}
var _10c1=style.set;
var _10c2=_1047.contains;
function _10c3(evt){
var i=0;
var _10c4=dom.byId("content");
if(_10c4){
var width=_10c4.clientWidth;
if(has("ie")==6&&dom.byId("footer")){
var _10c5=_1046.body().clientHeight-100;
_10c1(_10c4,"height",_10c5+"px");
var _10c6=dom.byId("sidebar");
if(_10c6){
_10c1(_10c6,"height",_10c5+"px");
}
}
try{
query("> .page-title-bar",_10c4).forEach(function(node){
var _10c7=geom.getMarginSize(node).w-geom.getContentBox(node).w;
if(!has("ie")){
_10c7+=1;
}
width=_10c4.clientWidth-_10c7;
style.set(node,"width",width+"px");
});
}
catch(e){
}
query("> .page-description",_10c4).style("width",width+"px");
query("> .in-page-navigation",_10c4).style("width",width+"px");
}
};
curam.util.subscribe("/clusterToggle",_10c3);
curam.util.connect(dojo.global,"onresize",_10c3);
ready(_10c3);
},alterScrollableListBottomBorder:function(id,_10c8){
var _10c9=_10c8;
var _10ca="#"+id+" table";
function _10cb(){
var _10cc=query(_10ca)[0];
if(_10cc.offsetHeight>=_10c9){
var _10cd=query(".odd-last-row",_10cc)[0];
if(typeof _10cd!="undefined"){
_1047.add(_10cd,"no-bottom-border");
}
}else{
if(_10cc.offsetHeight<_10c9){
var _10cd=query(".even-last-row",_10cc)[0];
if(typeof _10cd!="undefined"){
_1047.add(_10cd,"add-bottom-border");
}
}else{
curam.debug.log("curam.util.alterScrollableListBottomBorder: "+debug.getProperty("curam.util.code"));
}
}
};
ready(_10cb);
},addFileUploadResizeListener:function(code){
function _10ce(evt){
if(query(".widget")){
query(".widget").forEach(function(_10cf){
var width=_10cf.clientWidth;
if(query(".fileUpload",_10cf)){
query(".fileUpload",_10cf).forEach(function(_10d0){
fileUploadWidth=width/30;
if(fileUploadWidth<4){
_10d0.size=1;
}else{
_10d0.size=fileUploadWidth;
}
});
}
});
}
};
on(dojo.global,"resize",_10ce);
ready(_10ce);
},openCenteredNonModalWindow:function(url,width,_10d1,name){
width=Number(width);
_10d1=Number(_10d1);
var _10d2=(screen.width-width)/2;
var _10d3=(screen.height-_10d1)/2;
_10d1=_10d3<0?screen.height:_10d1;
_10d3=Math.max(0,_10d3);
width=_10d2<0?screen.width:width;
_10d2=Math.max(0,_10d2);
var left="left",top="top";
if(has("ff")){
left="screenX",top="screenY";
}
var _10d4="location=no, menubar=no, status=no, toolbar=no, "+"scrollbars=yes, resizable=no";
var _10d5=dojo.global.open(url,name||"name","width="+width+", height="+_10d1+", "+left+"="+_10d2+","+top+"="+_10d3+","+_10d4);
_10d5.resizeTo(width,_10d1);
_10d5.moveTo(_10d2,_10d3);
_10d5.focus();
},adjustTargetContext:function(win,href){
if(win&&win.dojo.global.jsScreenContext){
var _10d6=win.dojo.global.jsScreenContext;
_10d6.updateStates(dojo.global.jsScreenContext);
return curam.util.replaceUrlParam(href,"o3ctx",_10d6.getValue());
}
return href;
},modifyUrlContext:function(url,_10d7,_10d8){
var _10d9=url;
var ctx=new curam.util.ScreenContext();
var _10da=curam.util.getUrlParamValue(url,"o3ctx");
if(_10da){
ctx.setContext(_10da);
}else{
ctx.clear();
}
if(_10d7){
ctx.addContextBits(_10d7);
}
if(_10d8){
ctx.clear(_10d8);
}
_10d9=curam.util.replaceUrlParam(url,"o3ctx",ctx.getValue());
return _10d9;
},updateCtx:function(_10db){
var _10dc=curam.util.getUrlParamValue(_10db,"o3ctx");
if(!_10dc){
return _10db;
}
return curam.util.modifyUrlContext(_10db,null,"MODAL");
},getFrameRoot:function(_10dd,_10de){
var found=false;
var _10df=_10dd;
if(_10df){
while(_10df!=top&&!_10df.rootObject){
_10df=_10df.parent;
}
if(_10df.rootObject){
found=(_10df.rootObject==_10de);
}
}
return found?_10df:null;
},saveInformationalMsgs:function(_10e0){
try{
localStorage[curam.util.INFORMATIONAL_MSGS_STORAGE_ID]=json.toJson({pageID:_1046.body().id,total:dom.byId(curam.util.ERROR_MESSAGES_CONTAINER).innerHTML,listItems:dom.byId(curam.util.ERROR_MESSAGES_LIST).innerHTML});
_10e0();
}
catch(e){
curam.debug.log(debug.getProperty("curam.util.exception"),e);
}
},disableInformationalLoad:function(){
curam.util._informationalsDisabled=true;
},redirectDirectUrl:function(){
ready(function(){
if(dojo.global.parent==dojo.global){
var url=document.location.href;
var idx=url.lastIndexOf("/");
if(idx>-1){
if(idx<=url.length){
url=url.substring(idx+1);
}
}
dojo.global.location=jsBaseURL+"/AppController.do?o3gtu="+encodeURIComponent(url);
}
});
},loadInformationalMsgs:function(){
ready(function(){
if(dojo.global.jsScreenContext.hasContextBits("CONTEXT_PANEL")){
return;
}
if(curam.util._informationalsDisabled){
return;
}
var msgs=localStorage[curam.util.INFORMATIONAL_MSGS_STORAGE_ID];
if(msgs&&msgs!=""){
msgs=json.fromJson(msgs);
localStorage.removeItem(curam.util.INFORMATIONAL_MSGS_STORAGE_ID);
var div=dom.byId(curam.util.ERROR_MESSAGES_CONTAINER);
var list=dom.byId(curam.util.ERROR_MESSAGES_LIST);
if(msgs.pageID!=_1046.body().id){
return;
}
if(list){
var _10e1=_1045.create("ul",{innerHTML:msgs.listItems});
var _10e2=[];
for(var i=0;i<list.childNodes.length;i++){
if(list.childNodes[i].tagName=="LI"){
_10e2.push(list.childNodes[i]);
}
}
var skip=false;
var nodes=_10e1.childNodes;
for(var i=0;i<nodes.length;i++){
skip=false;
for(var j=0;j<_10e2.length;j++){
if(nodes[i].innerHTML==_10e2[j].innerHTML){
skip=true;
break;
}
}
if(!skip){
list.appendChild(nodes[i]);
i--;
}
}
}else{
if(div){
div.innerHTML=msgs.total;
}
}
}
var _10e3=dom.byId("container-messages-ul")?dom.byId("container-messages-ul"):dom.byId("error-messages");
if(_10e3&&!dojo.global.jsScreenContext.hasContextBits("MODAL")){
if(curam.util.getTopmostWindow().curam.util.tabButtonClicked){
curam.util.getTopmostWindow().curam.util.getTabButtonClicked().focus();
setTimeout(function(){
_10e3.innerHTML=_10e3.innerHTML+" ";
},500);
}else{
_10e3.focus();
}
}
var _10e4=dom.byId("error-messages-container-wrapper");
if(_10e4){
var _10e5=query("#container-messages-ul",_10e4)[0];
if(_10e5){
_10e5.focus();
}
}
});
},_setFocusCurrentIframe:function(){
var _10e6=/Edg/.test(navigator.userAgent);
if(_10e6){
var _10e7=window.frameElement;
if(_10e7){
_10e7.setAttribute("tabindex","0");
_10e7.focus();
setTimeout(function(){
_10e7.removeAttribute("tabindex");
},10);
}
}
},setFocus:function(){
var _10e8;
if(window.document.getElementsByClassName("skeleton").length>0){
_10e8=setTimeout(function(){
curam.util.setFocus();
},300);
}else{
if(_10e8){
clearTimeout(_10e8);
}
var _10e9=curam.util.getTopmostWindow().dojo.global.focusSetOnCancelButton;
if(_10e9){
return;
}
curam.util._setFocusCurrentIframe();
var _10ea=curam.util.getUrlParamValue(dojo.global.location.href,"o3frame")=="modal"||(curam.util.getUrlParamValue(dojo.global.location.href,"o3modalprev")!==null&&curam.util.getUrlParamValue(dojo.global.location.href,"o3modalprev")!==undefined);
if(!_10ea){
ready(function(){
var _10eb=dom.byId("container-messages-ul")?dom.byId("container-messages-ul"):dom.byId("error-messages");
var _10ec=sessionStorage.getItem("curamDefaultActionId");
var _10ed=null;
if(!_10eb&&_10ec){
sessionStorage.removeItem("curamDefaultActionId");
_10ed=dojo.query(".curam-default-action")[0].previousSibling;
}else{
_10ed=curam.util.doSetFocus();
}
if(_10ed){
curam.util.setFocusOnField(_10ed,false);
}else{
window.focus();
}
});
}
}
},setFocusOnField:function(_10ee,_10ef,_10f0){
if(has("IE")||has("trident")){
var _10f1=1000;
var _10f2=_10ef?200:500;
curam.util._createHiddenInputField(_10ee);
var _10f3=function(ff){
return function(){
var _10f4=ff.ownerDocument.activeElement;
if(_10f4.tagName==="INPUT"&&!_10f4.classList.contains("hidden-focus-input")||_10f4.tagName==="TEXTAREA"||(_10f4.tagName==="SPAN"&&_10f4.className=="fileUploadButton")||(_10f4.tagName==="A"&&_10f4.className=="popup-action")||(_10f4.tagName==="IFRAME"&&_10f4.classList.contains("cke_wysiwyg_frame"))){
return;
}else{
ff.focus();
}
};
};
if(_10ef){
var _10f5=attr.get(_10ee,"aria-label");
var _10f6="";
var _10f7=attr.get(_10ee,"objid");
if(_10f7&&_10f7.indexOf("component")==0||_1047.contains(_10ee,"dijitReset dijitInputInner")){
_10f6=_10ee.title;
}else{
_10f6=_10f0||"Modal Dialog";
}
if(_10ee&&_10ee.id!=="container-messages-ul"){
attr.set(_10ee,"aria-label",_10f6);
}
var _10f8=function(_10f9){
return function(e){
query("input|select[aria-label="+_10f6+"]").forEach(function(entry){
_10f9&&attr.set(entry,"aria-label",_10f9);
!_10f9&&attr.remove(entry,"aria-label");
});
};
};
on(_10ee,"blur",_10f8(_10f5));
}
if(_10ee.tagName==="TEXTAREA"){
setTimeout(_10f3(_10ee),_10f1);
}else{
if(_10ee.tagName==="SELECT"||(_10ee.tagName==="INPUT"&&attr.get(_10ee,"type")==="text")){
setTimeout(_10f3(_10ee),_10f2);
}else{
_10ee.focus();
}
}
}else{
_10ee.focus();
}
},_createHiddenInputField:function(_10fa){
var _10fb=_10fa.ownerDocument.forms["mainForm"];
if(_10fb&&(_10fa.tagName==="SELECT"||(_10fa.tagName==="INPUT"&&attr.get(_10fa,"type")==="text"))){
var _10fc=_1045.create("input",{"class":"hidden-focus-input","style":"position: absolute; height: 1px; width: 1px; overflow: hidden; clip: rect(1px, 1px, 1px, 1px); white-space: nowrap;","type":"text","aria-hidden":"true","tabindex":"-1"});
_1045.place(_10fc,_10fb,"before");
_10fc.focus();
on(_10fc,"blur",function(){
_1045.destroy(_10fc);
});
}
},doSetFocus:function(){
try{
var _10fd=curam.util.getTopmostWindow().curam.util.getTabButtonClicked();
if(_10fd!=false&&!curam.util.isModalWindow()){
return _10fd;
}
var _10fe=dom.byId("container-messages-ul")?dom.byId("container-messages-ul"):dom.byId("error-messages");
if(_10fe){
return _10fe;
}
var form=document.forms[0];
if(!form){
return false;
}
var _10ff=form.querySelectorAll("button, output, input:not([type=\"image\"]), select, object, textarea, fieldset, a.popup-action, span.fileUploadButton");
var _1100=false;
var l=_10ff.length,el;
for(var i=0;i<l;i++){
el=_10ff[i];
if(!_1100&&/selectHook/.test(el.className)){
_1100=query(el).closest("table")[0];
}
if(!_1100&&!(el.style.visibility=="hidden")&&(/select-one|select-multiple|checkbox|radio|text/.test(el.type)||el.tagName=="TEXTAREA"||/popup-action|fileUploadButton/.test(el.className))&&!/dijitArrowButtonInner|dijitValidationInner/.test(el.className)){
_1100=el;
}
if(el.tabIndex=="1"){
el.tabIndex=0;
_1100=el;
break;
}
}
lastOpenedTabButton=curam.util.getTopmostWindow().curam.util.getLastOpenedTabButton();
if(!_1100&&lastOpenedTabButton){
return lastOpenedTabButton;
}
var _1101=_1100.classList.contains("bx--date-picker__input");
if(_1101){
var _1102=document.querySelector(".bx--uim-modal");
if(_1102){
_1100=_1102;
}
}
return _1100;
}
catch(e){
debug.log(debug.getProperty("curam.util.error.focus"),e.message);
return false;
}
return false;
},openLocaleSelector:function(event){
event=_1048.fix(event);
var _1103=event.target;
while(_1103&&_1103.tagName!="A"){
_1103=_1103.parentNode;
}
var loc=_1103.href;
var rpu=curam.util.getUrlParamValue(loc,"__o3rpu");
rpu=curam.util.removeUrlParam(rpu,"__o3rpu");
var href="user-locale-selector.jspx"+"?__o3rpu="+rpu;
if(!curam.util.isActionPage(dojo.global.location.href)){
openModalDialog({href:href},"width=500,height=300",200,150);
}else{
alert(curam.util.msgLocaleSelectorActionPage);
}
return false;
},openLocaleNew:function(event){
_1048.stop(event);
if(event.target._curamDisable){
return;
}
require(["curam/tab"],function(){
curam.tab.getTabController().handleLinkClick("user-locale-selector.jspx",{dialogOptions:"width=300"});
});
},isActionPage:function(url){
var _1104=curam.util.getLastPathSegmentWithQueryString(url);
var _1105=_1104.split("?")[0];
return _1105.indexOf("Action.do")>-1;
},closeLocaleSelector:function(event){
event=_1048.fix(event);
_1048.stop(event);
dojo.global.close();
return false;
},getSuffixFromClass:function(node,_1106){
var _1107=attr.get(node,"class").split(" ");
var _1108=array.filter(_1107,function(_1109){
return _1109.indexOf(_1106)==0;
});
if(_1108.length>0){
return _1108[0].split(_1106)[1];
}else{
return null;
}
},getCacheBusterParameter:function(){
return this.CACHE_BUSTER_PARAM_NAME+"="+new Date().getTime()+"_"+this.CACHE_BUSTER++;
},stripeTable:function(table,_110a,_110b){
var tbody=table.tBodies[0];
var _110c=(_110a?2:1);
if(tbody.rows.length<_110c){
return;
}
var rows=tbody.rows;
var _110d=[],_110e=[],_110f=false,_1110=[],_1111="";
for(var i=0,l=rows.length;i<l;i+=_110c){
var _1112=(i%(2*_110c)==0),_1113=_1112?_110e:_110d;
_1047.remove(rows[i],["odd-last-row","even-last-row"]);
_1113.push(rows[i]);
if(i==_110b){
_1110.push(rows[i]);
_1111=_1112?"odd":"even";
_110f=true;
}
if(_110a&&rows[i+1]){
_1047.remove(rows[i+1],["odd-last-row","even-last-row"]);
_1113.push(rows[i+1]);
_110f&&_1110.push(rows[i+1]);
}
_110f=false;
}
_110e.forEach(function(_1114){
_1047.replace(_1114,"odd","even");
});
_110d.forEach(function(_1115){
_1047.replace(_1115,"even","odd");
});
_1110.forEach(function(_1116){
_1047.add(_1116,_1111+"-last-row");
});
},fillString:function(_1117,count){
var _1118="";
while(count>0){
_1118+=_1117;
count-=1;
}
return _1118;
},updateHeader:function(qId,_1119,_111a,_111b){
var _111c=dom.byId("header_"+qId);
_111c.firstChild.nextSibling.innerHTML=_1119;
answerCell=dom.byId("chosenAnswer_"+qId);
answerCell.innerHTML=_111a;
sourceCell=dom.byId("chosenSource_"+qId);
sourceCell.innerHTML=_111b;
},search:function(_111d,_111e){
var _111f=_1044.byId(_111d).get("value");
var _1120=_1044.byId(_111e);
if(_1120==null){
_1120=dom.byId(_111e);
}
var _1121=null;
if(_1120!=null){
if(_1120.tagName==null){
_1121=_1120?_1120.get("value"):null;
}else{
if(_1120.tagName=="SELECT"){
var _1122=query(".multiple-search-banner select option");
array.forEach(_1122,function(elem){
if(elem.selected){
_1121=elem.value;
}
});
}
}
}
var _1123="";
var _1124;
var _1125;
if(_1121){
_1125=_1121.split("|");
_1123=_1125[0];
_1124=_1125[1];
}
var _1126=curam.util.defaultSearchPageID;
var _1127="";
if(sessionStorage.getItem("appendSUEP")==="true"){
if(_1123===""){
_1127=_1126+"Page.do?searchText="+encodeURIComponent(_111f)+"&"+curam.util.secureURLsExemptParamName+"="+encodeURIComponent(curam.util.secureURLsExemptParamsPrefix+"_ST1");
}else{
_1127=_1124+"Page.do?searchText="+encodeURIComponent(_111f)+"&searchType="+encodeURIComponent(_1123)+"&"+curam.util.secureURLsExemptParamName+"="+encodeURIComponent(curam.util.secureURLsExemptParamsPrefix+"_ST1,"+curam.util.secureURLsExemptParamsPrefix+"_ST2");
}
}else{
if(_1123===""){
_1127=_1126+"Page.do?searchText="+encodeURIComponent(_111f);
}else{
_1127=_1124+"Page.do?searchText="+encodeURIComponent(_111f)+"&searchType="+encodeURIComponent(_1123);
}
}
var _1128=new curam.ui.PageRequest(_1127);
require(["curam/tab"],function(){
curam.tab.getTabController().handlePageRequest(_1128);
});
},updateDefaultSearchText:function(_1129,_112a){
var _112b=_1044.byId(_1129);
var _112c=_1044.byId(_112a);
var _112d=_112b?_112b.get("value"):null;
var str=_112d.split("|")[2];
_112c.set("placeHolder",str);
topic.publish("curam/application-search/combobox-changed",_112d);
},updateSearchBtnState:function(_112e,btnID){
var _112f=_1044.byId(_112e);
var btn=dom.byId(btnID);
var value=_112f.get("value");
if(!value||lang.trim(value).length<1){
_1047.add(btn,"dijitDisabled");
}else{
_1047.remove(btn,"dijitDisabled");
}
},furtherOptionsSearch:function(){
var _1130=curam.util.furtherOptionsPageID+"Page.do";
var _1131=new curam.ui.PageRequest(_1130);
require(["curam/tab"],function(){
curam.tab.getTabController().handlePageRequest(_1131);
});
},searchButtonStatus:function(btnID){
var btn=dom.byId(btnID);
if(!_1047.contains(btn,"dijitDisabled")){
return true;
}
},getPageHeight:function(){
var _1132=400;
var _1133=0;
if(query("frameset").length>0){
curam.debug.log("curam.util.getPageHeight() "+debug.getProperty("curam.util.default.height"),_1132);
_1133=_1132;
}else{
var _1134=function(node){
if(!node){
curam.debug.log(debug.getProperty("curam.util.node"));
return 0;
}
var mb=geom.getMarginSize(node);
var pos=geom.position(node);
return pos.y+mb.h;
};
if(dojo.global.jsScreenContext.hasContextBits("LIST_ROW_INLINE_PAGE")){
var _1135=query("div#content")[0];
var _1136=_1134(_1135);
curam.debug.log(debug.getProperty("curam.util.page.height"),_1136);
_1133=_1136;
}else{
var _1137=dom.byId("content")||dom.byId("wizard-content");
var nodes=query("> *",_1137).filter(function(n){
return n.tagName.indexOf("SCRIPT")<0&&style.get(n,"visibility")!="hidden"&&style.get(n,"display")!="none";
});
var _1138=nodes[0];
for(var i=1;i<nodes.length;i++){
if(_1134(nodes[i])>=_1134(_1138)){
_1138=nodes[i];
}
}
_1133=_1134(_1138);
curam.debug.log("curam.util.getPageHeight() "+debug.getProperty("curam.util.base.height"),_1133);
var _1139=query(".actions-panel",_1046.body());
if(_1139.length>0){
var _113a=geom.getMarginBox(_1139[0]).h;
curam.debug.log("curam.util.getPageHeight() "+debug.getProperty("curam.util.panel.height"));
_1133+=_113a;
_1133+=10;
}
var _113b=query("body.details");
if(_113b.length>0){
curam.debug.log("curam.util.getPageHeight() "+debug.getProperty("curam.util.bar.height"));
_1133+=20;
}
}
}
curam.debug.log("curam.util.getPageHeight() "+debug.getProperty("curam.util.returning"),_1133);
return _1133;
},toCommaSeparatedList:function(_113c){
var _113d="";
for(var i=0;i<_113c.length;i++){
_113d+=_113c[i];
if(i<_113c.length-1){
_113d+=",";
}
}
return _113d;
},setupGenericKeyHandler:function(){
ready(function(){
var f=function(event){
if(dojo.global.jsScreenContext.hasContextBits("MODAL")&&event.keyCode==27){
var ev=_1048.fix(event);
var _113e=_1044.byId(ev.target.id);
var _113f=typeof _113e!="undefined"&&_113e.baseClass=="dijitTextBox dijitComboBox";
if(!_113f){
curam.dialog.closeModalDialog();
}
}
if(event.keyCode==13){
var ev=_1048.fix(event);
var _1140=ev.target.type=="text";
var _1141=ev.target.type=="radio";
var _1142=ev.target.type=="checkbox";
var _1143=ev.target.type=="select-multiple";
var _1144=ev.target.type=="password";
var combo=_1044.byId(ev.target.id);
if(typeof combo!="undefined"){
var _1145=_1044.byId(ev.target.id);
if(!_1145){
_1145=_1044.byNode(dom.byId("widget_"+ev.target.id));
}
if(_1145&&_1145.enterKeyOnOpenDropDown){
_1145.enterKeyOnOpenDropDown=false;
return false;
}
}
var _1146=ev.target.getAttribute("data-carbon-attach-point");
if(_1146&&_1146==="carbon-menu"){
return false;
}
var _1147=typeof combo!="undefined"&&combo.baseClass=="dijitComboBox";
if((!_1140&&!_1141&&!_1142&&!_1143&&!_1144)||_1147){
return true;
}
var _1148=null;
var _1149=query(".curam-default-action");
if(_1149.length>0){
_1148=_1149[0];
}else{
var _114a=query("input[type='submit']");
if(_114a.length>0){
_1148=_114a[0];
}
}
if(_1148!=null){
_1048.stop(_1048.fix(event));
curam.util.clickButton(_1148);
return false;
}
require(["curam/dateSelectorUtil"],function(_114b){
var _114c=dom.byId("year");
if(_114c){
dojo.stopEvent(dojo.fixEvent(event));
_114b.updateCalendar();
}
});
}
return true;
};
curam.util.connect(_1046.body(),"onkeyup",f);
});
},enterKeyPress:function(event){
if(event.keyCode==13){
return true;
}
},swapState:function(node,state,_114d,_114e){
if(state){
_1047.replace(node,_114d,_114e);
}else{
_1047.replace(node,_114e,_114d);
}
},makeQueryString:function(_114f){
if(!_114f||_114f.length==0){
return "";
}
var _1150=[];
for(var _1151 in _114f){
_1150.push(_1151+"="+encodeURIComponent(_114f[_1151]));
}
return "?"+_1150.join("&");
},fileDownloadAnchorHandler:function(url){
var _1152=curam.util.getTopmostWindow();
var _1153=_1152.dojo.subscribe("/curam/dialog/close",function(id,_1154){
if(_1154==="confirm"){
curam.util.clickHandlerForListActionMenu(url,false,false);
}
_1152.dojo.unsubscribe(_1153);
});
var _1155=new _104f("GenericModalError");
var width=_1155.getProperty("file.download.warning.dialog.width");
var _1156=_1155.getProperty("file.download.warning.dialog.height");
if(!width){
width=500;
}
if(!_1156){
_1156=225;
}
var _1157=curam.util._getBrowserName();
curam.util.openGenericErrorModalDialogYesNo("width="+width+",height="+_1156,"file.download.warning.title","file.download.warning."+_1157);
return false;
},fileDownloadListActionHandler:function(url,_1158,_1159,event){
var _115a=curam.util.getTopmostWindow();
var _115b=_115a.dojo.subscribe("/curam/dialog/close",function(id,_115c){
if(_115c==="confirm"){
curam.util.clickHandlerForListActionMenu(url,_1158,_1159,event);
}
_115a.dojo.unsubscribe(_115b);
});
var _115d=new _104f("GenericModalError");
var width=_115d.getProperty("file.download.warning.dialog.width");
var _115e=_115d.getProperty("file.download.warning.dialog.height");
if(!width){
width=500;
}
if(!_115e){
_115e=225;
}
var _115f=curam.util._getBrowserName();
curam.util.openGenericErrorModalDialogYesNo("width="+width+",height="+_115e,"file.download.warning.title","file.download.warning."+_115f);
},_getBrowserName:function(){
var _1160=has("trident");
var _1161=dojo.isFF;
var _1162=dojo.isChrome;
var _1163=dojo.isSafari;
var _1164=curam.util.getTopmostWindow();
var _1165=curam.util.ExpandableLists._isExternalApp(_1164);
if(_1160!=undefined){
var _1166=_1160+4;
if(_1166<8){
return "unknown.browser";
}else{
return "ie"+_1166;
}
}else{
if(_1161!=undefined&&_1165){
return "firefox";
}else{
if(_1162!=undefined){
return "chrome";
}else{
if(_1163!=undefined&&_1165){
return "safari";
}
}
}
}
return "unknown.browser";
},clickHandlerForListActionMenu:function(url,_1167,_1168,event){
if(_1167){
var href=curam.util.replaceUrlParam(url,"o3frame","modal");
var ctx=dojo.global.jsScreenContext;
ctx.addContextBits("MODAL");
href=curam.util.replaceUrlParam(href,"o3ctx",ctx.getValue());
curam.util.redirectWindow(href);
return;
}
var _1169={href:url};
require(["curam/ui/UIMPageAdaptor"]);
if(curam.ui.UIMPageAdaptor.allowLinkToContinue(_1169)){
if(_1169.href.indexOf("/servlet/FileDownload")){
sessionStorage.setItem("addOnUnloadTriggeredByFileDownload","true");
dojo.global.location=url;
sessionStorage.removeItem("addOnUnloadTriggeredByFileDownload");
}else{
dojo.global.location=url;
}
return;
}
if(_1169!=null){
if(event){
_1048.fix(event);
_1048.stop(event);
}
if(!_1169.href||_1169.href.length==0){
return;
}
if(_1168&&!curam.util.isInternal(url)){
dojo.global.open(url);
}else{
if(curam.ui.UIMPageAdaptor.isLinkValidForTabProcessing(_1169)){
var _116a=new curam.ui.PageRequest(_1169.href);
if(dojo.global.jsScreenContext.hasContextBits("LIST_ROW_INLINE_PAGE")||dojo.global.jsScreenContext.hasContextBits("NESTED_UIM")){
_116a.pageHolder=dojo.global;
}
require(["curam/tab"],function(){
var _116b=curam.tab.getTabController();
if(_116b){
_116b.handlePageRequest(_116a);
}
});
}
}
}
},clickHandlerForMailtoLinks:function(event,url){
dojo.stopEvent(event);
var _116c=dojo.query("#mailto_frame")[0];
if(!_116c){
_116c=dojo.io.iframe.create("mailto_frame","");
}
_116c.src=url;
return false;
},isInternal:function(url){
var path=url.split("?")[0];
var _116d=path.match("Page.do");
if(_116d!=null){
return true;
}
return false;
},getLastPathSegmentWithQueryString:function(url){
var _116e=url.split("?");
var _116f=_116e[0].split("/");
return _116f[_116f.length-1]+(_116e[1]?"?"+_116e[1]:"");
},replaceSubmitButton:function(name,_1170,_1171,_1172,_1173){
if(curam.replacedButtons[name]=="true"){
return;
}
var _1174="__o3btn."+name;
var _1175;
if(dojo.global.jsScreenContext.hasContextBits("AGENDA")){
_1175=query("input[id='"+_1174+"']");
}else{
_1175=query("input[name='"+_1174+"']");
}
_1175.forEach(function(_1176,index,_1177){
if(_1170){
var _1178=_1177[1];
_1178.setAttribute("value",_1170);
}
_1176.tabIndex=-1;
var _1179=_1176.parentNode;
var _117a;
var _117b=curam.util.isInternalModal()&&curam.util.isModalFooter(_1176);
var _117c="btn-id-"+index;
var _117d="ac initially-hidden-widget "+_117c;
if(_1047.contains(_1176,"first-action-control")){
_117d+=" first-action-control";
}
if(_117b){
var _117e=(_1171&&!_1173)?undefined:_1177[0];
var _117f=_1171?{"href":"","buttonid":_1172}:{"buttonid":_1172};
var _1180=_1176.getAttribute("data-rawtestid");
if(_1180){
_117f.dataTestId=_1180;
}
var _1181=_1047.contains(_1176,"curam-default-action")?true:false;
curam.util.addCarbonModalButton(_117f,_1176.value,_117e,_1181);
}else{
curam.util.setupWidgetLoadMask("a."+_117c);
var _117d="ac initially-hidden-widget "+_117c;
if(_1047.contains(_1176,"first-action-control")){
_117d+=" first-action-control";
}
var _117a=_1045.create("a",{"class":_117d,href:"#"},_1176,"before");
var _1182=dojo.query(".page-level-menu")[0];
if(_1182){
attr.set(_117a,"title",_1176.value);
}
_1045.create("span",{"class":"filler"},_117a,"before");
var left=_1045.create("span",{"class":"left-corner"},_117a);
var right=_1045.create("span",{"class":"right-corner"},left);
var _1183=_1045.create("span",{"class":"middle"},right);
_1183.appendChild(document.createTextNode(_1176.value));
curam.util.addActionControlClass(_117a);
}
if(_117a){
on(_117a,"click",function(event){
curam.util.clickButton(this._submitButton);
_1048.stop(event);
});
_117a._submitButton=_1177[0];
}
_1047.add(_1176,"hidden-button");
attr.set(_1176,"aria-hidden","true");
attr.set(_1176,"id",_1176.id+"_"+index);
});
curam.replacedButtons[name]="true";
},isInternalModal:function(){
return !dojo.global.jsScreenContext.hasContextBits("EXTAPP")&&dojo.global.jsScreenContext.hasContextBits("MODAL");
},isModalFooter:function(_1184){
if(_1184){
var _1185=_1184.parentNode.parentNode;
return _1185&&_1185.id=="actions-panel";
}
},addCarbonModalButton:function(_1186,_1187,_1188,_1189){
curam.util.getTopmostWindow().dojo.publish("/curam/CuramCarbonModal/addModalButton",[_1186,_1187,_1188,_1189,window]);
},setupWidgetLoadMask:function(_118a){
curam.util.subscribe("/curam/page/loaded",function(){
var _118b=query(_118a)[0];
if(_118b){
style.set(_118b,"visibility","visible");
}else{
curam.debug.log("setupButtonLoadMask: "+debug.getProperty("curam.util.not.found")+"'"+_118a+"'"+debug.getProperty("curam.util.ignore.mask"));
}
});
},optReplaceSubmitButton:function(name){
if(curam.util.getFrameRoot(dojo.global,"wizard")==null){
curam.util.replaceSubmitButton(name);
return;
}
var _118c=curam.util.getFrameRoot(dojo.global,"wizard").navframe.wizardNavigator;
if(_118c.delegatesSubmit[jsPageID]!="assumed"){
curam.util.replaceSubmitButton(name);
}
},clickButton:function(_118d){
var _118e=dom.byId("mainForm");
var _118f;
if(!_118d){
curam.debug.log("curam.util.clickButton: "+debug.getProperty("curam.util..no.arg"));
return;
}
if(typeof (_118d)=="string"){
var _1190=_118d;
curam.debug.log("curam.util.clickButton: "+debug.getProperty("curam.util.searching")+debug.getProperty("curam.util.id.of")+"'"+_1190+"'.");
_118d=query("input[id='"+_1190+"']")[0];
if(!_118d){
_118d=query("input[name='"+_1190+"']")[0];
}
if(!_118d.form&&!_118d.id){
curam.debug.log("curam.util.clickButton: "+debug.getProperty("curam.util.searched")+debug.getProperty("curam.util.id.of")+"'"+_1190+debug.getProperty("curam.util.exiting"));
return;
}
}
if(dojo.global.jsScreenContext.hasContextBits("AGENDA")){
_118f=_118d;
}else{
_118f=query("input[id='"+_118d.id+"']",_118e)[0];
if(!_118f){
_118f=query("input[name='"+_118d.name+"']",_118e)[0];
}
}
try{
if(attr.get(_118e,"action").indexOf(jsPageID)==0){
curam.util.publishRefreshEvent();
}
_118f.click();
}
catch(e){
curam.debug.log(debug.getProperty("curam.util.exception.clicking"));
}
},printPage:function(_1191,event){
_1048.stop(event);
var _1192=dojo.window.get(event.currentTarget.ownerDocument);
if(_1191===false){
curam.util._printMainAreaWindow(_1192);
return false;
}
var _1193=_1192.frameElement;
var _1194=_1193;
while(_1194&&!_1047.contains(_1194,"tab-content-holder")){
_1194=_1194.parentNode;
}
var _1195=_1194;
var _1196=dojo.query(".detailsPanelFrame",_1195)[0];
var _1197=_1196!=undefined&&_1196!=null;
if(_1197){
var isIE=has("trident")||has("ie");
var _1198=has("edge");
var _1199=_1047.contains(_1196.parentNode,"collapsed");
if(isIE&&_1199){
style.set(_1196.parentNode,"display","block");
}
_1196.contentWindow.focus();
_1196.contentWindow.print();
if(isIE&&_1199){
style.set(_1196.parentNode,"display","");
}
if(isIE||_1198){
setTimeout(function(){
if(_1198){
function _119a(){
curam.util._printMainAreaWindow(_1192);
curam.util.getTopmostWindow().document.body.removeEventListener("mouseover",_119a,true);
return false;
};
curam.util.getTopmostWindow().document.body.addEventListener("mouseover",_119a,true);
}else{
if(isIE){
curam.util._printMainAreaWindow(_1192);
return false;
}
}
},2000);
}else{
curam.util._printMainAreaWindow(_1192);
return false;
}
}else{
curam.util._printMainAreaWindow(_1192);
return false;
}
},_printMainAreaWindow:function(_119b){
var _119c=query(".list-details-row-toggle.expanded");
if(_119c.length>0){
curam.util._prepareContentPrint(_119b);
_119b.focus();
_119b.print();
curam.util._deletePrintVersion();
}else{
_119b.focus();
_119b.print();
}
},_prepareContentPrint:function(_119d){
var _119e=Array.prototype.slice.call(_119d.document.querySelectorAll("body iframe"));
_119e.forEach(function(_119f){
curam.util._prepareContentPrint(_119f.contentWindow);
var list=_119f.contentWindow.document.querySelectorAll(".title-exists");
var _11a0=_119f.contentWindow.document.querySelectorAll(".title-exists div.context-panel-wrapper");
if(list.length>0&&_11a0.length===0){
var _11a1=document.createElement("div");
_11a1.setAttribute("class","tempContentPanelFrameWrapper");
_11a1.innerHTML=list[0].innerHTML;
var _11a2=_119f.parentNode;
_11a2.parentNode.appendChild(_11a1);
_11a2.style.display="none";
curam.util.wrappersMap.push({tempDivWithIframeContent:_11a1,iframeParentElement:_11a2});
}
});
},_deletePrintVersion:function(){
if(curam.util.wrappersMap){
curam.util.wrappersMap.forEach(function(_11a3){
_11a3.tempDivWithIframeContent.parentNode.removeChild(_11a3.tempDivWithIframeContent);
_11a3.iframeParentElement.style.display="block";
});
curam.util.wrappersMap=[];
}
},addSelectedClass:function(event){
_1047.add(event.target,"selected");
},removeSelectedClass:function(event){
_1047.remove(event.target,"selected");
},openHelpPage:function(event,_11a4){
_1048.stop(event);
dojo.global.open(_11a4);
},connect:function(_11a5,_11a6,_11a7){
var h=function(event){
_11a7(_1048.fix(event));
};
if(has("ie")&&has("ie")<9){
_11a5.attachEvent(_11a6,h);
_104a.addOnWindowUnload(function(){
_11a5.detachEvent(_11a6,h);
});
return {object:_11a5,eventName:_11a6,handler:h};
}else{
var _11a8=_11a6;
if(_11a6.indexOf("on")==0){
_11a8=_11a6.slice(2);
}
var dt=on(_11a5,_11a8,h);
_104a.addOnWindowUnload(function(){
dt.remove();
});
return dt;
}
},disconnect:function(token){
if(has("ie")&&has("ie")<9){
token.object.detachEvent(token.eventName,token.handler);
}else{
token.remove();
}
},subscribe:function(_11a9,_11aa){
var st=topic.subscribe(_11a9,_11aa);
_104a.addOnWindowUnload(function(){
st.remove();
});
return st;
},unsubscribe:function(token){
token.remove();
},addActionControlClickListener:function(_11ab){
var _11ac=dom.byId(_11ab);
var _11ad=query(".ac",_11ac);
if(_11ad.length>0){
for(var i=0;i<_11ad.length;i++){
var _11ae=_11ad[i];
curam.util.addActionControlClass(_11ae);
}
}
this._addAccessibilityMarkupInAddressClustersWhenContextIsMissing();
},_addAccessibilityMarkupInAddressClustersWhenContextIsMissing:function(){
var _11af=query(".bx--accordion__content");
_11af.forEach(function(_11b0){
var _11b1=query(".bx--address",_11b0)[0];
if(typeof (_11b1)!="undefined"){
var _11b2=new _104f("util");
var _11b3=_11b1.parentElement.parentElement.parentElement;
var _11b4=_11b3.parentElement.parentElement;
var _11b5=query("h4, h3",_11b3).length==1?true:false;
var _11b6=attr.get(_11b4,"aria-label")!==null?true:false;
if(!_11b5&&!_11b6){
attr.set(_11b4,"role","group");
attr.set(_11b4,"aria-label",_11b2.getProperty("curam.address.header"));
}
}
});
},addActionControlClass:function(_11b7){
curam.util.connect(_11b7,"onmousedown",function(){
_1047.add(_11b7,"selected-button");
curam.util.connect(_11b7,"onmouseout",function(){
_1047.remove(_11b7,"selected-button");
});
});
},getClusterActionSet:function(){
var _11b8=dom.byId("content");
var _11b9=query(".blue-action-set",_11b8);
if(_11b9.length>0){
for(var i=0;i<_11b9.length;i++){
curam.util.addActionControlClickListener(_11b9[i]);
}
}
},adjustActionButtonWidth:function(){
if(has("ie")==8){
ready(function(){
if(dojo.global.jsScreenContext.hasContextBits("MODAL")){
query(".action-set > a").forEach(function(node){
if(node.childNodes[0].offsetWidth>node.offsetWidth){
style.set(node,"width",node.childNodes[0].offsetWidth+"px");
style.set(node,"display","block");
style.set(node,"display","inline-block");
}
});
}
});
}
},setRpu:function(url,rtc,_11ba){
if(!url||!rtc||!rtc.getHref()){
throw {name:"Unexpected values",message:"This value not allowed for url or rtc"};
}
var _11bb=curam.util.getLastPathSegmentWithQueryString(rtc.getHref());
_11bb=curam.util.removeUrlParam(_11bb,curam.util.Constants.RETURN_PAGE_PARAM);
if(_11ba){
var i;
for(i=0;i<_11ba.length;i++){
if(!_11ba[i].key||!_11ba[i].value){
throw {name:"undefined value error",message:"The object did not contain a valid key/value pair"};
}
_11bb=curam.util.replaceUrlParam(_11bb,_11ba[i].key,_11ba[i].value);
}
}
var _11bc=curam.util.replaceUrlParam(url,curam.util.Constants.RETURN_PAGE_PARAM,encodeURIComponent(_11bb));
curam.debug.log("curam.util.setRpu "+debug.getProperty("curam.util.added.rpu")+_11bc);
return _11bc;
},retrieveBaseURL:function(){
return dojo.global.location.href.match(".*://[^/]*/[^/]*");
},removeRoleRegion:function(){
var body=dojo.query("body")[0];
attr.remove(body,"role");
},iframeTitleFallBack:function(){
var _11bd=curam.tab.getContainerTab(curam.tab.getContentPanelIframe());
var _11be=dom.byId(curam.tab.getContentPanelIframe());
var _11bf=_11be.contentWindow.document.title;
var _11c0=dojo.query("div.nowrapTabStrip.dijitTabContainerTop-tabs > div.dijitTabChecked.dijitChecked")[0];
var _11c1=dojo.query("span.tabLabel",_11c0)[0];
var _11c2=dojo.query("div.nowrapTabStrip.dijitTabNoLayout > div.dijitTabChecked.dijitChecked",_11bd.domNode)[0];
var _11c3=dojo.query("span.tabLabel",_11c2)[0];
if(_11bf=="undefined"){
return this.getPageTitleOnContentPanel();
}else{
if(_11bf&&_11bf!=""){
return _11bf;
}else{
if(_11c2){
return _11c3.innerHTML;
}else{
return _11c1.innerHTML;
}
}
}
},getPageTitleOnContentPanel:function(){
var _11c4;
var _11c5=dojo.query("div.dijitVisible div.dijitVisible iframe.contentPanelFrame");
var _11c6;
if(_11c5&&_11c5.length==1){
_11c6=_11c5[0].contentWindow.document;
_1046.withDoc(_11c6,function(){
var _11c7=dojo.query("div.title h2 span:not(.hidden)");
if(_11c7&&_11c7.length==1&&_11c7[0].textContent){
_11c4=lang.trim(_11c7[0].textContent);
}
},this);
}
if(_11c4){
return _11c4;
}else{
return undefined;
}
},addClassToLastNodeInContentArea:function(){
var _11c8=query("> div","content");
var _11c9=_11c8.length;
if(_11c9==0){
return "No need to add";
}
var _11ca=_11c8[--_11c9];
while(_1047.contains(_11ca,"hidden-action-set")&&_11ca){
_11ca=_11c8[--_11c9];
}
_1047.add(_11ca,"last-node");
},highContrastModeType:function(){
var _11cb=dojo.query("body.high-contrast")[0];
return _11cb;
},isRtlMode:function(){
var _11cc=dojo.query("body.rtl")[0];
return _11cc;
},processBidiContextual:function(_11cd){
_11cd.dir=bidi.prototype._checkContextual(_11cd.value);
},getCookie:function(name){
var dc=document.cookie;
var _11ce=name+"=";
var begin=dc.indexOf("; "+_11ce);
if(begin==-1){
begin=dc.indexOf(_11ce);
if(begin!=0){
return null;
}
}else{
begin+=2;
}
var end=document.cookie.indexOf(";",begin);
if(end==-1){
end=dc.length;
}
return unescape(dc.substring(begin+_11ce.length,end));
},getHeadingTitleForScreenReader:function(_11cf){
var _11d0=curam.util.getTopmostWindow();
var _11d1=_11d0.dojo.global._tabTitle;
if(_11d1){
curam.util.getHeadingTitle(_11d1,_11cf);
}else{
var _11d2=_11d0.dojo.subscribe("/curam/_tabTitle",function(_11d3){
if(_11d3){
curam.util.getHeadingTitle(_11d3,_11cf);
}
_11d0.dojo.unsubscribe(_11d2);
});
}
},getHeadingTitle:function(_11d4,_11d5){
var _11d6=undefined;
if(_11d4&&_11d4.length>0){
_11d6=_11d4;
}else{
_11d6=_11d5;
}
var _11d7=dojo.query(".page-title-bar");
var _11d8=dojo.query("div h2",_11d7[0]);
if(_11d8){
var _11d9=dojo.query("span",_11d8[0]);
var span=undefined;
if(_11d9){
span=_11d9[0];
}
if(!span||(span&&(span.innerHTML.length==0))){
if(span){
attr.set(span,"class","hidden");
attr.set(span,"title",_11d6);
span.innerHTML=_11d6;
}else{
span=_1045.create("span",{"class":"hidden","title":_11d6},_11d8[0]);
span.innerHTML=_11d6;
}
}
}
},_setupBrowserTabTitle:function(_11da,_11db,_11dc){
_11da=_11da.replace("\\n"," ");
curam.util._browserTabTitleData.staticTabTitle=_11da;
curam.util._browserTabTitleData.separator=_11db;
curam.util._browserTabTitleData.appNameFirst=_11dc;
},_browserTabTitleData:{},setBrowserTabTitle:function(title){
curam.debug.log("curam.util.setBrowserTabTitle(title = "+title+") called");
if(!title){
title=curam.util._findAppropriateDynamicTitle();
}
var _11dd=curam.util._browserTabTitleData.staticTabTitle;
var _11de=curam.util._browserTabTitleData.separator;
var _11df=curam.util._browserTabTitleData.appNameFirst;
if(!_11dd&&!_11de&&!_11df&&!title){
var _11e0=document.querySelectorAll("head title")[0];
if(_11e0){
document.title=_11e0.text;
}
}else{
if(!title){
document.title=_11dd;
}else{
if(_11dd){
if(_11df){
document.title=_11dd+_11de+title;
}else{
document.title=title+_11de+_11dd;
}
}
}
}
},toggleCheckboxedSelectStyle:function(e,div){
if(e.checked){
div.classList.remove("unchecked");
div.classList.add("checked");
}else{
div.classList.remove("checked");
div.classList.add("unchecked");
}
},_findAppropriateDynamicTitle:function(){
var i;
var one;
var _11e1=dojo.query("iframe.curam-active-modal").length;
if(_11e1>1){
var _11e2=dojo.query("iframe.curam-active-modal")[0];
if(_11e2){
var _11e3=_11e2.contentDocument;
if(_11e3){
var _11e4=_11e3.head.getElementsByTagName("title")[0];
if(_11e4){
if(_11e4.innerHTML!=""){
one=_11e2.contentDocument.head.getElementsByTagName("title")[0].innerHTML;
}
}
}
}
}
if(one){
return one;
}
var two;
var _11e5=dojo.query("div.dijitVisible div.dijitVisible iframe.contentPanelFrame");
var _11e6;
if(_11e5&&_11e5.length==1){
_11e6=_11e5[0].contentWindow.document;
_1046.withDoc(_11e6,function(){
var _11e7=dojo.query("div.title h2 span:not(.hidden)");
var _11e8=dom.byId("error-messages",_11e6);
if(_11e8){
two=_11e6.head.getElementsByTagName("title")[0].textContent;
}else{
if(_11e7&&_11e7.length==1&&_11e7[0].textContent){
two=lang.trim(_11e7[0].textContent);
curam.debug.log("(2) Page title for Content Panel = "+two);
}else{
if(_11e7&&_11e7.length>1){
two=this._checkForSubTitles(_11e7);
}else{
curam.debug.log("(2) Could not find page title for content panel: header = "+_11e7);
}
}
}
},this);
}else{
curam.debug.log("(2) Could not find iframeDoc for content panel: iframe = "+_11e5);
}
if(two){
return two;
}
var three;
var _11e9=dojo.query("div.dijitVisible div.dijitVisible div.dijitVisible div.child-nav-items li.selected > div.link");
if(_11e9&&_11e9.length==1&&_11e9[0].textContent){
three=lang.trim(_11e9[0].textContent);
curam.debug.log("(3) Selected navigation item = "+three);
}else{
curam.debug.log("(3) Could not find selected navigation item: navItem = "+_11e9);
}
if(three){
return three;
}
var four;
var _11ea=dojo.query("div.dijitVisible div.dijitVisible div.navigation-bar-tabs span.tabLabel");
var _11eb;
for(i=0;i<_11ea.length;i++){
if(_11ea[i].getAttribute("aria-selected")==="true"){
_11eb=_11ea[i];
}
}
if(_11eb&&_11eb.textContent){
four=lang.trim(_11eb.textContent);
curam.debug.log("(4) Selected navigation bar tab = "+four);
}else{
curam.debug.log("(4) Could not find selected navigation bar tab: selectedNavTab = "+_11eb);
}
if(four){
return four;
}
var five;
var _11ec=dojo.query("div.dijitVisible div.dijitVisible h1.detailsTitleText");
if(_11ec&&_11ec.length==1&&_11ec[0].textContent){
five=lang.trim(_11ec[0].textContent);
curam.debug.log("(5) Selected application tab title bar = "+five);
}else{
curam.debug.log("(5) Could not find selected application tab title bar: appTabTitleBar = "+_11ec);
}
if(five){
return five;
}
var six;
var _11ed=dojo.query("div.dijitTabInnerDiv div.dijitTabContent div span.tabLabel");
var _11ee;
for(i=0;i<_11ed.length;i++){
if(_11ed[i].getAttribute("aria-selected")==="true"){
_11ee=_11ed[i];
break;
}
}
if(_11ee&&_11ee.textContent){
six=lang.trim(_11ee.textContent);
curam.debug.log("(6) Selected section title = "+six);
}else{
curam.debug.log("(6) Could not find selected section title: sections = "+_11ed);
}
if(six){
return six;
}
var seven;
_11e5=dom.byId("curamUAIframe");
if(_11e5&&_11e5.contentWindow&&_11e5.contentWindow.document){
_11e6=_11e5.contentWindow.document;
_1046.withDoc(_11e6,function(){
var _11ef=dojo.query("div.page-header > div.page-title-bar > div.title > h2 > span");
if(_11ef&&_11ef.length==1&&_11ef[0].textContent){
seven=lang.trim(_11ef[0].textContent);
curam.debug.log("(7) UIM page title for external application page = "+seven);
}else{
curam.debug.log("(7) Could not find UIM page title for external application page: uimPageTitle = "+_11ef);
}
},this);
}
if(seven){
return seven;
}
return undefined;
},_checkForSubTitles:function(_11f0){
var i;
if(!_11f0[0].textContent){
return undefined;
}
for(i=1;i<_11f0.length;i++){
var clazz=_11f0[i].getAttribute("class");
if(clazz.indexOf("sub-title")===-1||!_11f0[i].textContent){
curam.debug.log("(1) Failed to construct title from content panel page title. Not all header element spans had 'sub-title' class.");
for(i=0;i<_11f0.length;i++){
curam.debug.log(_11f0[i]);
}
return undefined;
}
}
var ret=_11f0[0].textContent;
for(i=1;i<_11f0.length;i++){
ret+=_11f0[i].textContent;
}
return ret;
},_addContextToWidgetForScreenReader:function(_11f1){
var found=false;
var index=0;
var _11f2=dojo.query(".training-details-list");
if(_11f2.length==1){
var _11f3=_11f2[0].parentElement;
var _11f4=dojo.query("div.bx--cluster",_11f3);
var _11f5=Array.prototype.indexOf.call(_11f4,_11f2[0]);
if(_11f5>=0){
for(var i=_11f5;i>=0;i--){
if(dojo.query("h3",_11f4[i]).length==1){
found=true;
index=i;
break;
}
}
}
if(found){
var _11f6=dojo.query("h3.bx--accordion__title",_11f4[index]);
if(_11f6.length==1){
var _11f7=_11f6[0].className+"_id";
attr.set(_11f6[0],"id",_11f7);
var _11f8=dojo.byId(_11f1).parentElement;
attr.set(_11f8,"aria-labelledby",_11f7);
attr.set(_11f8,"role","region");
}
}
}
},setParentFocusByChild:function(_11f9){
var win=curam.util.UimDialog._getDialogFrameWindow(_11f9);
if(win){
var _11fa=curam.dialog.getParentWindow(win);
if(_11fa){
_11fa.focus();
}
}
},toClipboard:function(_11fb){
try{
navigator.clipboard.writeText(_11fb);
}
catch(err){
console.warn("Failed to copy into the clipboard.");
}
if(dojo.getObject("curam.dialog",false)!=null){
var pw=curam.dialog.getParentWindow(window);
pw&&pw.dojo.publish("/curam/clip/selected",[_11fb]);
}
return false;
},removeTopScrollForIos:function(){
if(has("ios")){
window.document.body.scrollTop=0;
}
},insertAriaLiveLabelRecordSearchItem:function(_11fc){
var span=dojo.query("[data-search-page]")[0];
if(span){
span.setAttribute("aria-live",has("ios")?"polite":"assertive");
setTimeout(function(){
var _11fd=span.firstChild.nodeValue;
var _11fe=_11fd+_11fc;
span.innerHTML=_11fe;
},10);
}
},removeSessionStorageProperty:function(_11ff){
sessionStorage.removeItem(_11ff);
},addLayoutStylingOnDateTimeWidgetOnZoom:function(){
var _1200=dojo.query("table.input-cluster td.field table.date-time");
console.log("datetimetable from util.js: "+_1200);
var _1201=_1200.length;
if(_1200.length>0){
for(var i=0;i<_1200.length;i++){
var _1202=_1200[i];
var _1203=_1202.parentNode.parentNode;
_1203.setAttribute("class","date-time-exists");
}
}
},fileUploadOpenFileBrowser:function(e,_1204){
if(e.keyCode==32||e.keyCode==13){
dom.byId(_1204).click();
}
},setupControlledLists:function(){
var _1205="curam.listControls",_1206="curam.listTogglers";
var _1207=_1208(_1205),_1209=_1208(_1206),lists=[];
var _120a=_1207&&query("*[data-control]"),_120b=_1209&&query("a[data-toggler]");
if(_1207||_1209){
for(var _120c in _1207){
_120a.filter(function(item){
return attr.get(item,"data-control")==_120c;
}).forEach(function(_120d,ix){
var c=dom.byId(_120d),tr=query(_120d).closest("tr")[0];
!tr.controls&&(tr.controls=new Array());
tr.controls.push(c);
if(!tr.visited){
tr.visited=true;
_1207[_120c].push(tr);
}
});
var _120e=_1208(_1205+"."+_120c);
if(_120e&&_120e.length&&_120e.length>0){
lists.push(_120c);
}else{
putTo(_1205+"."+_120c,false);
}
}
if(_120b&&_120b.length>0){
for(var _120c in _1209){
_120b.filter(function(item){
return attr.get(item,"data-toggler")==_120c;
}).forEach(function(_120f){
var tr=query(_120f).closest("tr")[0];
tr.hasToggler=_120f;
tr.visited=true;
_1209[_120c].push(tr);
});
var _1210=_1208(_1206+"."+_120c);
if(_1210&&_1210.length&&_1210.length>0){
(lists.indexOf(_120c)==-1)&&lists.push(_120c);
}else{
putTo(_1206+"."+_120c,false);
}
}
}
lists.forEach(function(_1211){
var _1212=_1208(_1205+"."+_1211)||_1208(_1206+"."+_1211);
cu.updateListControlReadings(_1211,_1212);
});
}
dojo.subscribe("curam/sort/earlyAware",function(_1213){
cu.suppressPaginationUpdate=_1213;
});
dojo.subscribe("curam/update/readings/sort",function(_1214,rows){
if(!has("trident")){
cu.updateListActionReadings(_1214);
cu.updateListControlReadings(_1214,rows);
cu.suppressPaginationUpdate=false;
}else{
var _1215=cu.getPageBreak(_1214),limit=Math.ceil(rows.length/_1215);
cu.listRangeUpdate(0,limit,_1214,rows,_1215);
}
});
dojo.subscribe("curam/update/readings/pagination",function(_1216,_1217){
putTo("curam.pageBreak."+_1216,_1217);
});
dojo.subscribe("curam/update/pagination/rows",function(_1218,_1219){
cu.updateDeferred&&!cu.updateDeferred.isResolved()&&cu.updateDeferred.cancel("Superseeded");
if(cu.suppressPaginationUpdate&&cu.suppressPaginationUpdate==_1219){
return;
}
var _121a=_123e("curam.listTogglers."+_1219),_121b=_123e("curam.listControls."+_1219),lms=_1208("curam.listMenus."+_1219),_121c=lms&&(lms.length>0);
var _121d=_121b||_121a;
if(!_121d&&!_121c){
return;
}
if(_121d){
var _121e=_1218.filter(function(aRow){
return (!aRow.visited||!aRow.done)&&attr.has(aRow,"data-lix");
});
_121a&&_121e.forEach(function(aRow){
var tgl=query("a[data-toggler]",aRow)[0];
aRow.hasToggler=tgl;
aRow.visited=true;
curam.listTogglers[_1219].push(aRow);
});
_121b&&_121e.forEach(function(aRow){
var _121f=query("*[data-control]",aRow),_1220=new Array();
_121f.forEach(function(cRef){
_1220.push(dom.byId(cRef));
});
aRow.controls=_1220;
curam.listControls[_1219].push(aRow);
aRow.visited=true;
});
var _1221=_121b?curam.listControls[_1219]:curam.listTogglers[_1219];
cu.updateListControlReadings(_1219,_1221);
}
_121c&&cu.updateListActionReadings(_1219);
});
},listRangeUpdate:function(_1222,limit,_1223,rows,psz){
if(_1222==limit){
cu.suppressPaginationUpdate=false;
cu.updateDeferred=null;
return;
}
var def=cu.updateDeferred=new _1049(function(_1224){
cu.suppressPaginationUpdate=false;
cu.updateDeferred=null;
});
def.then(function(pNum){
cu.listRangeUpdate(pNum,limit,_1223,rows,psz);
},function(err){
});
var delay=(_1222===0)?0:200;
setTimeout(function(){
var _1225=_1222+1,range=[_1222*psz,(_1225*psz)];
cu.updateListActionReadings(_1223,range);
cu.updateListControlReadings(_1223,rows,range);
def.resolve(_1225);
},delay);
},updateListControlReadings:function(_1226,_1227,range){
var c0,psz=cu.getPageBreak(_1226),_1228=cu.getStartShift(_1226,_1227[0]||false),_1229=_1227;
range&&(_1229=_1227.slice(range[0],range[1]));
for(var rix in _1229){
var aRow=_1229[rix],_122a=parseInt(attr.get(aRow,_122b)),lx=(_122a%psz)+_1228,crtls=aRow.controls;
if(!crtls){
var _122c=query("*[data-control]",aRow),_122d=new Array();
_122c.forEach(function(cRef){
_122d.push(dom.byId(cRef));
});
aRow.controls=_122d;
crtls=aRow.controls;
}
if(crtls){
for(var cix in crtls){
var crtl=crtls[cix],ttl=crtl.textContent||false,_122e=ttl?ttl+",":"";
if(crtl.nodeName=="A"){
var _122f=query("img",crtl)[0];
if(_122f&&_1047.contains(crtl,"ac first-action-control external-link")){
var _1230=attr.get(_122f,"alt");
attr.set(crtl,_1231,_1230+","+[listcontrol.reading.anchors,lx].join(" "));
}else{
attr.set(crtl,_1231,_122e+[listcontrol.reading.anchors,lx].join(" "));
}
}else{
attr.set(crtl,_1231,_122e+[listcontrol.reading.selectors,lx].join(" "));
}
}
}
cu.updateToggler(aRow,lx);
aRow.done=true;
}
},initListActionReadings:function(_1232){
var _1233="curam.listMenus."+_1232;
putTo(_1233,[]);
dojo.subscribe("curam/listmenu/started",function(_1234,_1235){
var tr=query(_1234.containerNode).closest("tr")[0],lix=parseInt(attr.get(tr,_122b)),lx=(lix%cu.getPageBreak(_1235))+cu.getStartShift(_1235,tr);
_1234.set({"belongsTo":tr,"aria-labelledBy":"","aria-label":[listcontrol.reading.menus,lx].join(" ")});
_1208(_1233).push(_1234);
cu.updateToggler(tr,lx);
});
},updateToggler:function(_1236,_1237){
_1236.hasToggler&&attr.set(_1236.hasToggler,_1231,[listcontrol.reading.togglers,_1237].join(" "));
},updateListActionReadings:function(_1238,range){
var menus=_1208("curam.listMenus."+_1238),psz=cu.getPageBreak(_1238),_1239=false,_123a=menus;
range&&(_123a=menus.slice(range[0],range[1]));
for(var ix in _123a){
var _123b=_123a[ix],tr=_123b.belongsTo,lix=parseInt(attr.get(tr,_122b)),_1239=_1239||cu.getStartShift(_1238,tr),_123c=(lix%psz)+_1239;
_123b.set(_1231,[listcontrol.reading.menus,_123c].join(" "));
cu.updateToggler(tr,_123c);
tr.done=true;
}
},getPageBreak:function(_123d){
if(!_123e("curam.list.isPaginated."+_123d)){
return 1000;
}
if(_1208("curam.shortlist."+_123d)){
return 1000;
}
var psz=_1208("curam.pageBreak."+_123d)||_1208("curam.pagination.defaultPageSize")||1000;
return psz;
},getStartShift:function(_123f,_1240){
if(!_1240){
return 2;
}
var hPath="curam.listHeaderStep."+_123f,hStep=_1208(hPath);
if(hStep){
return hStep;
}
putTo(hPath,2);
var _1241=query(_1240).closest("table");
if(_1241.length==0){
return 2;
}
var _1242=_1241.children("thead")[0];
!_1242&&putTo(hPath,1);
return curam.listHeaderStep[_123f];
},extendXHR:function(){
var _1243=XMLHttpRequest.prototype.open;
XMLHttpRequest.prototype.open=function(){
this.addEventListener("load",function(){
if(typeof (Storage)!=="undefined"){
var _1244=this.getResponseHeader("sessionExpiry");
sessionStorage.setItem("sessionExpiry",_1244);
}
});
_1243.apply(this,arguments);
};
},suppressPaginationUpdate:false,updateDeferred:null});
var cu=curam.util,_1208=dojo.getObject,putTo=dojo.setObject,_123e=dojo.exists,_1231="aria-label",_122b="data-lix";
return curam.util;
});
},"curam/dialog":function(){
define(["dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/on","dojo/sniff","curam/inspection/Layer","curam/util","curam/debug","curam/util/external","curam/util/Refresh","curam/tab","curam/util/RuntimeContext","curam/util/ScreenContext","curam/define","curam/util/onLoad","dojo/dom-class","dojo/query","dojo/NodeList-traverse"],function(dom,_1245,_1246,on,has,layer,util,trace,_1247,_1248,tab,_1249,_124a,_124b,_124c,_124d,query){
curam.define.singleton("curam.dialog",{MODAL_PREV_FLAG:"o3modalprev",MODAL_PREV_FLAG_INPUT:"curam_dialog_prev_marker",FORCE_CLOSE:false,ERROR_MESSAGES_HEADER:"error-messages-header",_hierarchy:[],_id:null,_displayedHandlerUnsToken:null,_displayed:false,_size:null,_justClose:false,_modalExitingIEGScript:false,validTargets:{"_top":true,"_self":true},initModal:function(_124e,_124f,_1250){
curam.dialog.pageId=_124e;
curam.dialog.messagesExist=_124f;
var _1251=false;
var p1;
util.extendXHR();
var _1252=util.getTopmostWindow();
var _1253=false;
var _1254=_1252.dojo.subscribe("/curam/dialog/SetId",this,function(_1255){
trace.log("curam.dialog: "+trace.getProperty("curam.dialog.id"),_1255);
curam.dialog._id=_1255;
_1253=true;
_1252.dojo.unsubscribe(_1254);
});
_1252.dojo.publish("/curam/dialog/init");
if(!_1253){
trace.log("curam.dialog: "+trace.getProperty("curam.dialog.no.id"));
_1252.dojo.unsubscribe(_1254);
}
if(curam.dialog.closeDialog(false,_1250)){
return;
}
curam.dialog._displayedHandlerUnsToken=util.getTopmostWindow().dojo.subscribe("/curam/dialog/displayed",null,function(_1256,size){
if(_1256==curam.dialog._id){
curam.dialog._displayed=true;
curam.dialog._size=size;
util.getTopmostWindow().dojo.unsubscribe(curam.dialog._displayedHandlerUnsToken);
curam.dialog._displayedHandlerUnsToken=null;
}
});
if(_1257==undefined){
var _1257=this.jsScreenContext;
if(!_1257){
_1257=new _124a();
_1257.addContextBits("MODAL");
if(dojo.global.jsScreenContext.hasContextBits("AGENDA")){
_1257.addContextBits("AGENDA");
}
curam.util.external.inExternalApp()&&_1257.addContextBits("EXTAPP");
}
}
if(_1257.hasContextBits("AGENDA")||_1257.hasContextBits("TREE")){
dojo.addOnUnload(function(){
util.getTopmostWindow().dojo.unsubscribe(curam.dialog._displayedHandlerUnsToken);
curam.dialog._displayedHandlerUnsToken=null;
});
}
dojo.addOnLoad(function(){
util.connect(dojo.body(),"onclick",curam.dialog.modalEventHandler);
for(var i=0;i<document.forms.length;i++){
var form=document.forms[i];
curam.dialog.addFormInput(form,"hidden","o3frame","modal");
var _1258=dom.byId("o3ctx");
var sc=new curam.util.ScreenContext(_1257.getValue());
sc.addContextBits("ACTION|ERROR");
_1258.value=sc.getValue();
util.connect(form,"onsubmit",curam.dialog.formSubmitHandler);
}
window.curamModal=true;
});
if(curam.util.isExitingIEGScriptInModalWindow()){
delete curam.util.getTopmostWindow().exitingIEGScript;
dojo.addOnUnload(function(){
util.getTopmostWindow().dojo.publish("/curam/dialog/iframeUnloaded",[curam.dialog._id,window]);
});
}else{
var _1259=on(window,"unload",function(){
_1259.remove();
util.getTopmostWindow().dojo.publish("/curam/dialog/iframeUnloaded",[curam.dialog._id,window]);
});
}
if(_1253){
dojo.publish("/curam/dialog/ready");
}
},setVariableForModalExitingIEGScript:function(){
_modalExitingIEGScript=true;
},closeDialog:function(force,_125a){
if(force){
curam.dialog.forceClose();
}
var _125b=curam.dialog.checkClose(curam.dialog.pageId,_125a);
if(_125b){
util.onLoad.addPublisher(function(_125c){
_125c.modalClosing=true;
});
if(curam.dialog.messagesExist){
dojo.addOnLoad(function(){
var _125d=dom.byId(util.ERROR_MESSAGES_CONTAINER);
var _125e=dom.byId(util.ERROR_MESSAGES_LIST);
var _125f=dom.byId(curam.dialog.ERROR_MESSAGES_HEADER);
if(_125e&&_125f){
util.saveInformationalMsgs(_125b);
util.disableInformationalLoad();
}else{
_125b();
}
});
}else{
_125b();
}
return true;
}
return false;
},addFormInput:function(form,type,name,value){
return _1246.create("input",{"type":type,"name":name,"value":value},form);
},checkClose:function(_1260,_1261){
if(curam.dialog._justClose){
return function(){
curam.dialog.closeModalDialog();
};
}
var _1262=curam.dialog.getParentWindow(window);
if(!_1262){
return false;
}
var href;
if(_1261){
href=curam.util.retrieveBaseURL()+_1261;
}else{
href=window.location.href;
}
var _1263=curam.dialog.MODAL_PREV_FLAG;
var _1264=util.getUrlParamValue(href,_1263);
var _1265=true;
if(_1264){
if(_1262){
if(_1264==_1260){
_1265=false;
}
}
}else{
_1265=false;
}
var scReq=util.getUrlParamValue(href,"o3ctx");
if(scReq){
var sc=new curam.util.ScreenContext();
sc.setContext(scReq);
if(sc.hasContextBits("TREE|ACTION")){
_1265=false;
}
}
if(_1265||curam.dialog.FORCE_CLOSE){
if(!curam.dialog.FORCE_CLOSE){
if(_1264=="user-prefs-editor"){
return function(){
if(_1262&&_1262.location!==util.getTopmostWindow().location){
curam.dialog.doRedirect(_1262);
}
curam.dialog.closeModalDialog();
};
}
return function(){
var rp=util.removeUrlParam;
href=rp(rp(rp(href,_1263),"o3frame"),util.PREVENT_CACHE_FLAG);
href=util.adjustTargetContext(_1262,href);
if(_1262&&_1262.location!==util.getTopmostWindow().location){
curam.dialog.doRedirect(_1262,href,true);
}else{
curam.tab.getTabController().handleLinkClick(href);
}
curam.dialog.closeModalDialog();
};
}else{
return function(){
if(_1262!==util.getTopmostWindow()){
_1262.curam.util.loadInformationalMsgs();
}
curam.dialog.closeModalDialog();
};
}
}
return false;
},getParentWindow:function(child){
if(!child){
trace.log(["curam.dialog.getParentWindow():",trace.getProperty("curam.dialog.no.child"),window.location?" "+window.location.href:"[no location]"].join(" "));
trace.log("returning as parent = ",window.parent.location.href);
return window.parent;
}
var _1266=curam.dialog._getDialogHierarchy();
if(_1266){
for(var i=0;i<_1266.length;i++){
if(_1266[i]==child){
var _1267=(i>0)?_1266[i-1]:_1266[0];
trace.log(["curam.dialog.getParentWindow():",trace.getProperty("curam.dialog.parent.window"),_1267.location?_1267.location.href:"[no location]"].join(" "));
return _1267;
}
}
var ret=_1266.length>0?_1266[_1266.length-1]:undefined;
trace.log(["curam.dialog.getParentWindow():",trace.getProperty("curam.dialog.returning.parent"),ret?ret.location.href:"undefined"].join(" "));
return ret;
}
},_getDialogHierarchy:function(){
var _1268=util.getTopmostWindow();
_1268.require(["curam/dialog"]);
return _1268.curam.dialog._hierarchy;
},pushOntoDialogHierarchy:function(_1269){
var _126a=curam.dialog._getDialogHierarchy();
if(_126a&&dojo.indexOf(_126a,_1269)<0){
_126a.push(_1269);
trace.log(trace.getProperty("curam.dialog.add.hierarchy"),_1269.location.href);
trace.log(trace.getProperty("curam.dialog.full.hierarchy")+_126a.reduce(function(acc,hwin){
return acc+"["+(hwin.location.href||"-")+"]";
}),"");
}
},removeFromDialogHierarchy:function(child){
var _126b=curam.dialog._getDialogHierarchy();
if(!child||_126b[_126b.length-1]==child){
_126b.pop();
}else{
trace.log("curam.dialog.removeFromDialogHierarchy(): "+trace.getProperty("curam.dialog.ignore.request"));
try{
trace.log(child.location.href);
}
catch(e){
trace.log(e.message);
}
}
},stripPageOrActionFromUrl:function(url){
var idx=url.lastIndexOf("Page.do");
var len=7;
if(idx<0){
idx=url.lastIndexOf("Action.do");
len=9;
}
if(idx<0){
idx=url.lastIndexOf("Frame.do");
len=8;
}
if(idx>-1&&idx==url.length-len){
return url.substring(0,idx);
}
return url;
},_isSameBaseUrl:function(href,rtc,_126c){
if(href&&href.indexOf("#")==0){
return true;
}
var _126d=href.split("?");
var _126e=rtc.getHref().split("?");
if(_126d[0].indexOf("/")<0){
var parts=_126e[0].split("/");
_126e[0]=parts[parts.length-1];
}
if(_126e[0].indexOf("/")<0){
var parts=_126d[0].split("/");
_126d[0]=parts[parts.length-1];
}
if(_126c&&_126c==true){
_126d[0]=curam.dialog.stripPageOrActionFromUrl(_126d[0]);
_126e[0]=curam.dialog.stripPageOrActionFromUrl(_126e[0]);
}
if(_126d[0]==_126e[0]){
return true;
}
return false;
},modalEventHandler:function(event){
curam.dialog._doHandleModalEvent(event,new curam.util.RuntimeContext(window),curam.dialog.closeModalDialog,curam.dialog.doRedirect);
},_showSpinnerInDialog:function(){
curam.util.getTopmostWindow().dojo.publish("/curam/dialog/spinner");
},_doHandleModalEvent:function(e,rtc,_126f,_1270){
var _1271=e.target;
var u=util;
switch(_1271.tagName){
case "INPUT":
if(_1245.get(_1271,"type")=="submit"&&typeof _1271.form!="undefined"){
_1271.form.setAttribute("keepModal",_1271.getAttribute("keepModal"));
curam.dialog._showSpinnerInDialog();
}
return true;
case "IMG":
case "SPAN":
case "DIV":
_1271=query(_1271).closest("A")[0];
if(_1271==null){
return;
}
case "A":
case "BUTTON":
if(_1271._submitButton){
_1271._submitButton.form.setAttribute("keepModal",_1271._submitButton.getAttribute("keepModal"));
curam.dialog._showSpinnerInDialog();
return;
}
break;
default:
return true;
}
var _1272=dojo.stopEvent;
var href=_1271.getAttribute("href")||_1271.getAttribute("data-href");
if(href==""){
_126f();
return false;
}
if(!href){
return false;
}
if(href.indexOf("javascript")==0){
return false;
}
var ctx=jsScreenContext;
ctx.addContextBits("MODAL");
var _1273=_1271.getAttribute("target");
if(_1273&&!curam.dialog.validTargets[_1273]){
return true;
}
if(href&&href.indexOf("/servlet/FileDownload?")>-1){
var _1274=_1246.create("iframe",{src:href},dojo.body());
_1274.style.display="none";
_1272(e);
return false;
}
if(_124d.contains(_1271,"external-link")){
return true;
}
if(util.isSameUrl(href,null,rtc)){
if(href.indexOf("#")<0){
href=u.replaceUrlParam(href,"o3frame","modal");
href=u.replaceUrlParam(href,"o3ctx",ctx.getValue());
_1270(window,href);
return false;
}
return true;
}
if(href&&curam.dialog._isSameBaseUrl(href,rtc,true)&&!_1271.getAttribute("keepModal")){
_1271.setAttribute("keepModal","true");
}
var _1275=curam.dialog.getParentWindow(rtc.contextObject());
if(_1271&&_1271.getAttribute){
_1272(e);
if(_1271.getAttribute("keepModal")=="true"){
href=u.replaceUrlParam(href,"o3frame","modal");
href=u.replaceUrlParam(href,"o3ctx",ctx.getValue());
_1270(window,href);
}else{
if(_1275){
href=u.removeUrlParam(href,"o3frame");
href=u.removeUrlParam(href,curam.dialog.MODAL_PREV_FLAG);
if(_1275.location!==util.getTopmostWindow().location){
var _1276=new curam.util.RuntimeContext(_1275);
var phref=_1276.getHref();
phref=u.removeUrlParam(phref,"o3frame");
if(util.isActionPage(phref)){
if(!curam.dialog._isSameBaseUrl(href,_1276,true)){
href=u.adjustTargetContext(_1275,href);
_1270(_1275,href);
}
}else{
if(!util.isSameUrl(href,phref)){
href=u.adjustTargetContext(_1275,href);
curam.dialog.doRedirect(_1275,href);
}
}
}else{
var _1277=new curam.util.ScreenContext("TAB");
href=u.replaceUrlParam(href,"o3ctx",_1277.getValue());
curam.tab.getTabController().handleLinkClick(href);
}
_126f();
}
}
return false;
}
if(_1275&&typeof (_1271)=="undefined"||_1271==null||_1271=="_self"||_1271==""){
_1272(e);
href=href.replace(/[&?]o3frame=modal/g,"").replace("%3Fo3frame%3Dmodal","").replace("?o3frame%3Dmodal","");
href=util.updateCtx(href);
if(_1275.location!==util.getTopmostWindow().location){
_1270(_1275,href);
}else{
var _1277=new curam.util.ScreenContext("TAB");
href=u.replaceUrlParam(href,"o3ctx",_1277.getValue());
curam.tab.getTabController().handleLinkClick(href);
}
_126f();
return false;
}
return true;
},formSubmitHandler:function(e){
if(e.type=="submit"&&e.defaultPrevented){
curam.util.getTopmostWindow().dojo.publish("/curam/progress/unload");
return false;
}
var _1278=curam.dialog.getParentWindow(window);
if(typeof _1278=="undefined"){
return true;
}
e.target.method="post";
e.target.setAttribute("target",window.name);
var _1279=e.target.action;
var _127a=curam.dialog.MODAL_PREV_FLAG;
var _127b=curam.dialog.MODAL_PREV_FLAG_INPUT;
var u=util;
var input=dom.byId(_127b);
if(input){
input.parentNode.removeChild(input);
}
if(e.target.getAttribute("keepModal")!="true"&&!jsScreenContext.hasContextBits("AGENDA")){
var _127c="multipart/form-data";
if(e.target.enctype==_127c||e.target.encoding==_127c){
e.target.action=u.removeUrlParam(_1279,_127a);
input=curam.dialog.addFormInput(e.target,"hidden",_127a,curam.dialog.pageId);
input.setAttribute("id",_127b);
input.id=_127b;
}else{
e.target.action=u.replaceUrlParam(_1279,_127a,curam.dialog.pageId);
}
}else{
e.target.action=u.removeUrlParam(_1279,_127a);
}
_1278.curam.util.invalidatePage();
if(!jsScreenContext.hasContextBits("EXTAPP")){
util.firePageSubmittedEvent("dialog");
}
return true;
},forceClose:function(){
curam.dialog.FORCE_CLOSE=true;
},forceParentRefresh:function(){
var _127d=curam.dialog.getParentWindow(window);
if(!_127d){
return;
}
_127d.curam.util.FORCE_REFRESH=true;
},forceParentLocaleRefresh:function(){
var _127e=curam.dialog.getParentWindow(window);
if(!_127e){
return;
}
_127e.curam.util.LOCALE_REFRESH=true;
},closeModalDialog:function(_127f){
var _1280=util.getTopmostWindow();
if(curam.dialog._displayedHandlerUnsToken!=null){
_1280.dojo.unsubscribe(curam.dialog._displayedHandlerUnsToken);
curam.dialog._displayedHandlerUnsToken=null;
}
var _1281=curam.util.getTopmostWindow().dojo.global.jsScreenContext.hasContextBits("EXTAPP");
if((typeof (curam.dialog._id)=="undefined"||curam.dialog._id==null||!_1281)&&window.frameElement){
var _1282=window.frameElement.id;
var _1283=_1282.substring(7);
curam.dialog._id=_1283;
trace.log("curam.dialog.closeModalDialog() "+trace.getProperty("curam.dialog.modal.id")+_1283);
}
util.getTopmostWindow().dojo.publish("/curam/dialog/close/appExitConfirmation",[curam.dialog._id]);
trace.log("publishing /curam/dialog/close/appExitConfirmation for ",curam.dialog._id);
trace.log("publishing /curam/dialog/close for ",curam.dialog._id);
util.getTopmostWindow().dojo.publish("/curam/dialog/close",[curam.dialog._id,_127f]);
},parseWindowOptions:function(_1284){
var opts={};
if(_1284){
trace.log("curam.dialog.parseWindowOptions "+trace.getProperty("curam.dialog.parsing"),_1284);
var _1285=_1284.split(",");
var _1286;
for(var i=0;i<_1285.length;i++){
_1286=_1285[i].split("=");
opts[_1286[0]]=_1286[1];
}
trace.log("done:",dojo.toJson(opts));
}else{
trace.log("curam.dialog.parseWindowOptions "+trace.getProperty("curam.dialog.no.options"));
}
return opts;
},doRedirect:function(_1287,href,force,_1288){
window.curamDialogRedirecting=true;
if(!curam.util.getTopmostWindow().dojo.global.jsScreenContext.hasContextBits("EXTAPP")){
curam.util.getTopmostWindow().dojo.publish("/curam/CuramCarbonModal/redirectingModal");
}
_1287.curam.util.redirectWindow(href,force,_1288);
},_screenReaderAnnounceCurrentTabOnWizard:function(){
var _1289=dom.byId("wizard-progress-bar");
if(_1289){
var _128a=dom.byId("hideAriaLiveElement");
if(typeof _128a!=null){
this._createSpanContainingInformationOnCurrentWizardTab(_1289,_128a);
}
}
},_stylingAddedToMandatoryIconHelp:function(){
var _128b=dom.byId("wizard-progress-bar");
var _128c=dojo.query(".mandatory-icon-help")[0];
if(_128b&&_128c){
_124d.add(_128c,"wizard-progress-bar-exists");
}
},_createSpanContainingInformationOnCurrentWizardTab:function(_128d,_128e){
var _128f=null;
var _1290="";
var _1291=" ";
var title=query(".title",_128d)[0]&&query(".title",_128d)[0].innerText;
var desc=query(".desc",_128d)[0]&&query(".desc",_128d)[0].innerText;
if(title&&title!=""){
_1290+=title;
}
if(desc&&desc!=""){
_1290!=""?_1290+=_1291:"";
_1290+=desc;
}
var _1292=dom.byId("content");
var _1293=query(".cluster,.list",_1292)[0];
if(_1293){
if(typeof query(".collapse-title",_1293)[0]=="undefined"||query(".collapse-title",_1293)[0].innerHTML==""){
if(typeof query(".description",_1293)[0]!="undefined"){
if(query(".description",_1293)[0].innerHTML!==""){
var _1294=query(".description",_1293)[0];
if(_1294&&_1294.innerText!==""){
_1290!=""?_1290+=_1291:"";
_1290+=query(".description",_1293)[0].innerText;
}
}
}
}
}else{
var _1295=query("tr:first-child > td.field.last-cell",_1292)[0];
if(_1295&&_1295.innerText!==""){
_1290!=""?_1290+=_1291:"";
_1290+=_1295.innerText;
}
}
if(_1290){
_128f=_1246.create("span",{innerHTML:_1290});
setTimeout(function(){
_1246.place(_128f,_128e);
},1000);
}
},closeGracefully:function(){
curam.dialog._justClose=true;
},});
layer.register("curam/dialog",this);
return curam.dialog;
});
},"dijit/_CssStateMixin":function(){
define(["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/has","dojo/_base/lang","dojo/on","dojo/domReady","dojo/touch","dojo/_base/window","./a11yclick","./registry"],function(array,_1296,dom,_1297,has,lang,on,_1298,touch,win,_1299,_129a){
var _129b=_1296("dijit._CssStateMixin",[],{hovering:false,active:false,_applyAttributes:function(){
this.inherited(arguments);
array.forEach(["disabled","readOnly","checked","selected","focused","state","hovering","active","_opened"],function(attr){
this.watch(attr,lang.hitch(this,"_setStateClass"));
},this);
for(var ap in this.cssStateNodes||{}){
this._trackMouseState(this[ap],this.cssStateNodes[ap]);
}
this._trackMouseState(this.domNode,this.baseClass);
this._setStateClass();
},_cssMouseEvent:function(event){
if(!this.disabled){
switch(event.type){
case "mouseover":
case "MSPointerOver":
case "pointerover":
this._set("hovering",true);
this._set("active",this._mouseDown);
break;
case "mouseout":
case "MSPointerOut":
case "pointerout":
this._set("hovering",false);
this._set("active",false);
break;
case "mousedown":
case "touchstart":
case "MSPointerDown":
case "pointerdown":
case "keydown":
this._set("active",true);
break;
case "mouseup":
case "dojotouchend":
case "MSPointerUp":
case "pointerup":
case "keyup":
this._set("active",false);
break;
}
}
},_setStateClass:function(){
var _129c=this.baseClass.split(" ");
function _129d(_129e){
_129c=_129c.concat(array.map(_129c,function(c){
return c+_129e;
}),"dijit"+_129e);
};
if(!this.isLeftToRight()){
_129d("Rtl");
}
var _129f=this.checked=="mixed"?"Mixed":(this.checked?"Checked":"");
if(this.checked){
_129d(_129f);
}
if(this.state){
_129d(this.state);
}
if(this.selected){
_129d("Selected");
}
if(this._opened){
_129d("Opened");
}
if(this.disabled){
_129d("Disabled");
}else{
if(this.readOnly){
_129d("ReadOnly");
}else{
if(this.active){
_129d("Active");
}else{
if(this.hovering){
_129d("Hover");
}
}
}
}
if(this.focused){
_129d("Focused");
}
var tn=this.stateNode||this.domNode,_12a0={};
array.forEach(tn.className.split(" "),function(c){
_12a0[c]=true;
});
if("_stateClasses" in this){
array.forEach(this._stateClasses,function(c){
delete _12a0[c];
});
}
array.forEach(_129c,function(c){
_12a0[c]=true;
});
var _12a1=[];
for(var c in _12a0){
_12a1.push(c);
}
var cls=_12a1.join(" ");
if(cls!=tn.className){
tn.className=cls;
}
this._stateClasses=_129c;
},_subnodeCssMouseEvent:function(node,clazz,evt){
if(this.disabled||this.readOnly){
return;
}
function hover(_12a2){
_1297.toggle(node,clazz+"Hover",_12a2);
};
function _12a3(_12a4){
_1297.toggle(node,clazz+"Active",_12a4);
};
function _12a5(_12a6){
_1297.toggle(node,clazz+"Focused",_12a6);
};
switch(evt.type){
case "mouseover":
case "MSPointerOver":
case "pointerover":
hover(true);
break;
case "mouseout":
case "MSPointerOut":
case "pointerout":
hover(false);
_12a3(false);
break;
case "mousedown":
case "touchstart":
case "MSPointerDown":
case "pointerdown":
case "keydown":
_12a3(true);
break;
case "mouseup":
case "MSPointerUp":
case "pointerup":
case "dojotouchend":
case "keyup":
_12a3(false);
break;
case "focus":
case "focusin":
_12a5(true);
break;
case "blur":
case "focusout":
_12a5(false);
break;
}
},_trackMouseState:function(node,clazz){
node._cssState=clazz;
}});
_1298(function(){
function _12a7(evt,_12a8,_12a9){
if(_12a9&&dom.isDescendant(_12a9,_12a8)){
return;
}
for(var node=_12a8;node&&node!=_12a9;node=node.parentNode){
if(node._cssState){
var _12aa=_129a.getEnclosingWidget(node);
if(_12aa){
if(node==_12aa.domNode){
_12aa._cssMouseEvent(evt);
}else{
_12aa._subnodeCssMouseEvent(node,node._cssState,evt);
}
}
}
}
};
var body=win.body(),_12ab;
on(body,touch.over,function(evt){
_12a7(evt,evt.target,evt.relatedTarget);
});
on(body,touch.out,function(evt){
_12a7(evt,evt.target,evt.relatedTarget);
});
on(body,_1299.press,function(evt){
_12ab=evt.target;
_12a7(evt,_12ab);
});
on(body,_1299.release,function(evt){
_12a7(evt,_12ab);
_12ab=null;
});
on(body,"focusin, focusout",function(evt){
var node=evt.target;
if(node._cssState&&!node.getAttribute("widgetId")){
var _12ac=_129a.getEnclosingWidget(node);
if(_12ac){
_12ac._subnodeCssMouseEvent(node,node._cssState,evt);
}
}
});
});
return _129b;
});
},"curam/tab/util":function(){
define(["dojo/dom-style","dojo/dom-class","dojo/dom-attr","dojo/dom-geometry","curam/define","curam/debug"],function(_12ad,_12ae,_12af,_12b0,_12b1,debug){
_12b1.singleton("curam.tab.util",{toggleDetailsPanel:function(event){
event=dojo.fixEvent(event);
dojo.stopEvent(event);
var _12b2=event.target;
var _12b3=_12b2;
while(_12b3&&!_12ae.contains(_12b3,"detailsTitleArrowButton")){
_12b3=_12b3.parentNode;
}
var _12b2=_12b3;
if(_12b2._animating){
return;
}
_12b2._animating=true;
var _12b3=_12b2.parentNode;
while(_12b3&&!_12ae.contains(_12b3,"detailsPanel-bc")){
_12b3=_12b3.parentNode;
}
var _12b4=_12b3;
while(_12b3&&!_12ae.contains(_12b3,"summaryPane")){
_12b3=_12b3.parentNode;
}
var _12b5=_12b3;
while(_12b3){
if(_12ae.contains(_12b3,"dijitBorderContainer")&&!_12ae.contains(_12b3,"detailsPanel-bc")){
break;
}
if(_12ae.contains(_12b3,"tab-wrapper")){
break;
}
_12b3=_12b3.parentNode;
}
var _12b6=_12b3;
headerPanelNode=dojo.query(".detailsPanelTitleBar",_12b4)[0];
detailsPanelNode=dojo.query(".detailsContentPane",_12b4)[0];
var kids=_12b6.children;
var _12b7=dojo.filter(kids,function(child){
if(_12ae.contains(child,"splitter-pane")||_12ae.contains(child,"dijitSplitterH")){
return child;
}
})[0];
var _12b8=dojo.filter(kids,function(child){
if(_12ae.contains(child,"nav-panel")){
return child;
}
})[0];
var _12b9=_12b0.getMarginBoxSimple(headerPanelNode).h;
var _12ba=_12b0.getMarginBoxSimple(_12b5).h;
var _12bb=_12b7.offsetHeight;
var _12bc=_12b0.getMarginBoxSimple(_12b8).h;
var _12bd=dojo.query(".detailsContentPane",_12b4)[0];
if(_12b9!=_12b5.clientHeight){
_12ae.add(_12b2,"collapsed");
_12af.set(_12b2,"aria-expanded","false");
this._updateToggleArrowNode(_12b2,false);
_12ae.add(_12bd,"collapsed");
curam.debug.log(debug.getProperty("curam.tab.util.collapsing"));
_12b4._previousHeight=_12ba;
_12b8._previousHeight=_12bc;
dojo.animateProperty({node:_12b5,duration:500,properties:{height:{end:_12b9}}}).play();
if(_12ae.contains(_12b7,"splitter-pane")){
dojo.animateProperty({node:detailsPanelNode,duration:500,properties:{height:{end:0}}}).play();
}
dojo.animateProperty({node:_12b7,duration:500,properties:{top:{end:(_12b9+_12bb)}}}).play();
dojo.animateProperty({node:_12b8,duration:500,properties:{top:{end:(_12b9+_12bb)}},onEnd:function(){
_12b2._animating=false;
if(_12ae.contains(_12b7,"dijitSplitterH")){
_12ad.set(_12b8,"height",(_12b8._previousHeight+_12b4._previousHeight-_12b9)+"px");
}
}}).play();
}else{
_12ae.remove(_12b2,"collapsed");
_12ae.remove(_12bd,"collapsed");
_12af.set(_12b2,"aria-expanded","true");
this._updateToggleArrowNode(_12b2,true);
debug.log(debug.getProperty("curam.tab.util.expanding"));
_12ad.set(_12b5,"height",_12b4._previousHeight+"px");
if(_12ae.contains(_12b7,"splitter-pane")){
dojo.animateProperty({node:detailsPanelNode,duration:500,properties:{height:{end:_12b4._previousHeight-_12b9}}}).play();
}
dojo.animateProperty({node:_12b7,duration:500,properties:{top:{end:(_12b4._previousHeight+_12bb)}}}).play();
dojo.animateProperty({node:_12b8,duration:500,properties:{top:{end:(_12b4._previousHeight+_12bb)}},onEnd:function(){
_12b2._animating=false;
if(_12ae.contains(_12b7,"dijitSplitterH")){
_12ad.set(_12b8,"height",_12b8._previousHeight+"px");
}
}}).play();
}
},_updateToggleArrowNode:function(_12be,_12bf){
var _12c0=this._getToggleImages();
if(_12bf){
_12be.children[0].src=_12c0[0];
_12be.children[1].src=_12c0[2];
}else{
_12be.children[0].src=_12c0[1];
_12be.children[1].src=_12c0[3];
}
},_getToggleImages:function(){
var _12c1;
var _12c2;
var _12c3;
var _12c4;
var _12c5=curam.util.isRtlMode();
_12c1="./themes/curam/images/chevron--down20-enabled.svg";
_12c3="./themes/curam/images/chevron--down20-enabled.svg";
if(_12c5){
_12c2="./themes/curam/images/Toggle_Right_Blue80_20px.png";
_12c4="./themes/curam/images/Toggle_Fill_Right_Blue50_20px.png";
}else{
_12c2="./themes/curam/images/chevron--left20-enabled.svg";
_12c4="./themes/curam/images/chevron--left20-enabled.svg";
}
return [_12c1,_12c2,_12c3,_12c4];
},});
return curam.tab.util;
});
},"curam/widget/DeferredDropDownButton":function(){
define(["dijit/registry","dijit/form/DropDownButton","dojo/_base/declare","dojo/text!curam/widget/templates/DropDownButton.html","dojo/dom-attr","dojo/dom-construct","dojo/query","dijit/form/Button","dijit/MenuItem","curam/util/TabActionsMenu","curam/debug","curam/util","dijit/MenuSeparator","dijit/Menu","dijit/MenuItem","curam/widget/_HasDropDown"],function(_12c6,_12c7,_12c8,_12c9,_12ca,_12cb,query,_12cc,_12cd,_12ce,debug){
var _12cf=_12c8("curam.widget.DeferredDropDownButton",[dijit.form.DropDownButton,curam.widget._HasDropDown],{templateString:_12c9,o3tabId:null,startup:function(){
if(this._started){
return;
}
var _12d0=_12ca.get(this.domNode,"class").split(" ");
dojo.forEach(_12d0,dojo.hitch(this,function(_12d1){
if(_12d1.indexOf("tab-widget-id-")!=-1){
this.o3tabId=_12d1.slice(14,_12d1.length);
}
}));
this.widgetTemplate=curam.widgetTemplates?curam.widgetTemplates[this.id]:null;
dijit.form.Button.prototype.startup.apply(this);
var _12d2=this.get("data-notify");
_12d2&&dojo.publish("curam/listmenu/started",[this,_12d2]);
},toggleDropDown:function(){
if(!this.dropDown&&this.widgetTemplate){
if(this.widgetTemplate.indexOf("__03qu_")!=-1){
this.widgetTemplate=this.widgetTemplate.split("__03qu_").join("\"");
}
this.widgetTemplate=this.widgetTemplate.split("&lt;").join("<").split("&gt;").join(">").split("&amp;").join("&").split("&quot;").join("'");
var _12d3=_12cb.create("div",{innerHTML:this.widgetTemplate,style:{display:"none"}},dojo.body());
this.dropDown=dojo.parser.parse(_12d3)[0];
var menu=_12c6.byNode(_12d3.firstChild);
if(menu.getChildren().length==0){
var mi=new dijit.MenuItem({disabled:true,label:LOCALISED_EMPTY_MENU_MARKER});
menu.addChild(mi);
}
this.widgetTemplate=null;
debug.log(debug.getProperty("curam.widget.DeferredDropDownButton.publish")+" /curam/menu/created "+debug.getProperty("curam.widget.DeferredDropDownButton.for"),this.o3tabId);
var _12d4=curam.util.getTopmostWindow();
_12d4.dojo.publish("/curam/menu/created",[this.o3tabId]);
if(this.o3tabId){
_12ce.hideTabMenuOverflowItems(this.o3tabId,this.dropDown.domNode);
}
}
this.inherited(arguments);
}});
return _12cf;
});
},"dijit/form/FilteringSelect":function(){
define(["dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(_12d5,lang,when,_12d6,_12d7){
return _12d5("dijit.form.FilteringSelect",[_12d6,_12d7],{required:true,_lastDisplayedValue:"",_isValidSubset:function(){
return this._opened;
},isValid:function(){
return !!this.item||(!this.required&&this.get("displayedValue")=="");
},_refreshState:function(){
if(!this.searchTimer){
this.inherited(arguments);
}
},_callbackSetLabel:function(_12d8,query,_12d9,_12da){
if((query&&query[this.searchAttr]!==this._lastQuery)||(!query&&_12d8.length&&this.store.getIdentity(_12d8[0])!=this._lastQuery)){
return;
}
if(!_12d8.length){
this.set("value","",_12da||(_12da===undefined&&!this.focused),this.textbox.value,null);
}else{
this.set("item",_12d8[0],_12da);
}
},_openResultList:function(_12db,query,_12dc){
if(query[this.searchAttr]!==this._lastQuery){
return;
}
this.inherited(arguments);
if(this.item===undefined){
this.validate(true);
}
},_getValueAttr:function(){
return this.valueNode.value;
},_getValueField:function(){
return "value";
},_setValueAttr:function(value,_12dd,_12de,item){
if(!this._onChangeActive){
_12dd=null;
}
if(item===undefined){
if(value===null||value===""){
value="";
if(!lang.isString(_12de)){
this._setDisplayedValueAttr(_12de||"",_12dd);
return;
}
}
var self=this;
this._lastQuery=value;
when(this.store.get(value),function(item){
self._callbackSetLabel(item?[item]:[],undefined,undefined,_12dd);
});
}else{
this.valueNode.value=value;
this.inherited(arguments,[value,_12dd,_12de,item]);
}
},_setItemAttr:function(item,_12df,_12e0){
this.inherited(arguments);
this._lastDisplayedValue=this.textbox.value;
},_getDisplayQueryString:function(text){
return text.replace(/([\\\*\?])/g,"\\$1");
},_setDisplayedValueAttr:function(label,_12e1){
if(label==null){
label="";
}
if(!this._created){
if(!("displayedValue" in this.params)){
return;
}
_12e1=false;
}
if(this.store){
this.closeDropDown();
var query=lang.clone(this.query);
var qs=this._getDisplayQueryString(label),q;
if(this.store._oldAPI){
q=qs;
}else{
q=this._patternToRegExp(qs);
q.toString=function(){
return qs;
};
}
this._lastQuery=query[this.searchAttr]=q;
this.textbox.value=label;
this._lastDisplayedValue=label;
this._set("displayedValue",label);
var _12e2=this;
var _12e3={queryOptions:{ignoreCase:this.ignoreCase,deep:true}};
lang.mixin(_12e3,this.fetchProperties);
this._fetchHandle=this.store.query(query,_12e3);
when(this._fetchHandle,function(_12e4){
_12e2._fetchHandle=null;
_12e2._callbackSetLabel(_12e4||[],query,_12e3,_12e1);
},function(err){
_12e2._fetchHandle=null;
if(!_12e2._cancelingQuery){
console.error("dijit.form.FilteringSelect: "+err.toString());
}
});
}
},undo:function(){
this.set("displayedValue",this._lastDisplayedValue);
}});
});
},"dijit/_WidgetBase":function(){
define(["require","dojo/_base/array","dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/ready","dojo/Stateful","dojo/topic","dojo/_base/window","./Destroyable","dojo/has!dojo-bidi?./_BidiMixin","./registry"],function(_12e5,array,_12e6,_12e7,_12e8,_12e9,dom,_12ea,_12eb,_12ec,_12ed,_12ee,has,_12ef,lang,on,ready,_12f0,topic,win,_12f1,_12f2,_12f3){
var _12f4=typeof (dojo.global.perf)!="undefined";
1||has.add("dijit-legacy-requires",!_12ef.isAsync);
has.add("dojo-bidi",false);
if(1){
ready(0,function(){
var _12f5=["dijit/_base/manager"];
_12e5(_12f5);
});
}
var _12f6={};
function _12f7(obj){
var ret={};
for(var attr in obj){
ret[attr.toLowerCase()]=true;
}
return ret;
};
function _12f8(attr){
return function(val){
_12ea[val?"set":"remove"](this.domNode,attr,val);
this._set(attr,val);
};
};
function _12f9(a,b){
return a===b||(a!==a&&b!==b);
};
var _12fa=_12e9("dijit._WidgetBase",[_12f0,_12f1],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:_12f8("lang"),dir:"",_setDirAttr:_12f8("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(val){
this._set("ownerDocument",val);
},attributeMap:{},_blankGif:_12e7.blankGif||_12e5.toUrl("dojo/resources/blank.gif"),_introspect:function(){
var ctor=this.constructor;
if(!ctor._setterAttrs){
var proto=ctor.prototype,attrs=ctor._setterAttrs=[],onMap=(ctor._onMap={});
for(var name in proto.attributeMap){
attrs.push(name);
}
for(name in proto){
if(/^on/.test(name)){
onMap[name.substring(2).toLowerCase()]=name;
}
if(/^_set[A-Z](.*)Attr$/.test(name)){
name=name.charAt(4).toLowerCase()+name.substr(5,name.length-9);
if(!proto.attributeMap||!(name in proto.attributeMap)){
attrs.push(name);
}
}
}
}
},postscript:function(_12fb,_12fc){
this.create(_12fb,_12fc);
},create:function(_12fd,_12fe){
if(_12f4){
perf.widgetStartedLoadingCallback();
}
this._introspect();
this.srcNodeRef=dom.byId(_12fe);
this._connects=[];
this._supportingWidgets=[];
if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){
this.id=this.srcNodeRef.id;
}
if(_12fd){
this.params=_12fd;
lang.mixin(this,_12fd);
}
this.postMixInProperties();
if(!this.id){
this.id=_12f3.getUniqueId(this.declaredClass.replace(/\./g,"_"));
if(this.params){
delete this.params.id;
}
}
this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);
this.ownerDocumentBody=win.body(this.ownerDocument);
_12f3.add(this);
this.buildRendering();
var _12ff;
if(this.domNode){
this._applyAttributes();
var _1300=this.srcNodeRef;
if(_1300&&_1300.parentNode&&this.domNode!==_1300){
_1300.parentNode.replaceChild(this.domNode,_1300);
_12ff=true;
}
this.domNode.setAttribute("widgetId",this.id);
}
this.postCreate();
if(_12ff){
delete this.srcNodeRef;
}
this._created=true;
if(_12f4){
perf.widgetLoadedCallback(this);
}
},_applyAttributes:function(){
var _1301={};
for(var key in this.params||{}){
_1301[key]=this._get(key);
}
array.forEach(this.constructor._setterAttrs,function(key){
if(!(key in _1301)){
var val=this._get(key);
if(val){
this.set(key,val);
}
}
},this);
for(key in _1301){
this.set(key,_1301[key]);
}
},postMixInProperties:function(){
},buildRendering:function(){
if(!this.domNode){
this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div");
}
if(this.baseClass){
var _1302=this.baseClass.split(" ");
if(!this.isLeftToRight()){
_1302=_1302.concat(array.map(_1302,function(name){
return name+"Rtl";
}));
}
_12eb.add(this.domNode,_1302);
}
},postCreate:function(){
},startup:function(){
if(this._started){
return;
}
this._started=true;
array.forEach(this.getChildren(),function(obj){
if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){
obj.startup();
obj._started=true;
}
});
},destroyRecursive:function(_1303){
this._beingDestroyed=true;
this.destroyDescendants(_1303);
this.destroy(_1303);
},destroy:function(_1304){
this._beingDestroyed=true;
this.uninitialize();
function _1305(w){
if(w.destroyRecursive){
w.destroyRecursive(_1304);
}else{
if(w.destroy){
w.destroy(_1304);
}
}
};
array.forEach(this._connects,lang.hitch(this,"disconnect"));
array.forEach(this._supportingWidgets,_1305);
if(this.domNode){
array.forEach(_12f3.findWidgets(this.domNode,this.containerNode),_1305);
}
this.destroyRendering(_1304);
_12f3.remove(this.id);
this._destroyed=true;
},destroyRendering:function(_1306){
if(this.bgIframe){
this.bgIframe.destroy(_1306);
delete this.bgIframe;
}
if(this.domNode){
if(_1306){
_12ea.remove(this.domNode,"widgetId");
}else{
_12ec.destroy(this.domNode);
}
delete this.domNode;
}
if(this.srcNodeRef){
if(!_1306){
_12ec.destroy(this.srcNodeRef);
}
delete this.srcNodeRef;
}
},destroyDescendants:function(_1307){
array.forEach(this.getChildren(),function(_1308){
if(_1308.destroyRecursive){
_1308.destroyRecursive(_1307);
}
});
},uninitialize:function(){
return false;
},_setStyleAttr:function(value){
var _1309=this.domNode;
if(lang.isObject(value)){
_12ee.set(_1309,value);
}else{
if(_1309.style.cssText){
_1309.style.cssText+="; "+value;
}else{
_1309.style.cssText=value;
}
}
this._set("style",value);
},_attrToDom:function(attr,value,_130a){
_130a=arguments.length>=3?_130a:this.attributeMap[attr];
array.forEach(lang.isArray(_130a)?_130a:[_130a],function(_130b){
var _130c=this[_130b.node||_130b||"domNode"];
var type=_130b.type||"attribute";
switch(type){
case "attribute":
if(lang.isFunction(value)){
value=lang.hitch(this,value);
}
var _130d=_130b.attribute?_130b.attribute:(/^on[A-Z][a-zA-Z]*$/.test(attr)?attr.toLowerCase():attr);
if(_130c.tagName){
_12ea.set(_130c,_130d,value);
}else{
_130c.set(_130d,value);
}
break;
case "innerText":
_130c.innerHTML="";
_130c.appendChild(this.ownerDocument.createTextNode(value));
break;
case "innerHTML":
_130c.innerHTML=value;
break;
case "class":
_12eb.replace(_130c,value,this[attr]);
break;
}
},this);
},get:function(name){
var names=this._getAttrNames(name);
return this[names.g]?this[names.g]():this._get(name);
},set:function(name,value){
if(typeof name==="object"){
for(var x in name){
this.set(x,name[x]);
}
return this;
}
var names=this._getAttrNames(name),_130e=this[names.s];
if(lang.isFunction(_130e)){
var _130f=_130e.apply(this,Array.prototype.slice.call(arguments,1));
}else{
var _1310=this.focusNode&&!lang.isFunction(this.focusNode)?"focusNode":"domNode",tag=this[_1310]&&this[_1310].tagName,_1311=tag&&(_12f6[tag]||(_12f6[tag]=_12f7(this[_1310]))),map=name in this.attributeMap?this.attributeMap[name]:names.s in this?this[names.s]:((_1311&&names.l in _1311&&typeof value!="function")||/^aria-|^data-|^role$/.test(name))?_1310:null;
if(map!=null){
this._attrToDom(name,value,map);
}
this._set(name,value);
}
return _130f||this;
},_attrPairNames:{},_getAttrNames:function(name){
var apn=this._attrPairNames;
if(apn[name]){
return apn[name];
}
var uc=name.replace(/^[a-z]|-[a-zA-Z]/g,function(c){
return c.charAt(c.length-1).toUpperCase();
});
return (apn[name]={n:name+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr",l:uc.toLowerCase()});
},_set:function(name,value){
var _1312=this[name];
this[name]=value;
if(this._created&&!_12f9(_1312,value)){
if(this._watchCallbacks){
this._watchCallbacks(name,_1312,value);
}
this.emit("attrmodified-"+name,{detail:{prevValue:_1312,newValue:value}});
}
},_get:function(name){
return this[name];
},emit:function(type,_1313,_1314){
_1313=_1313||{};
if(_1313.bubbles===undefined){
_1313.bubbles=true;
}
if(_1313.cancelable===undefined){
_1313.cancelable=true;
}
if(!_1313.detail){
_1313.detail={};
}
_1313.detail.widget=this;
var ret,_1315=this["on"+type];
if(_1315){
ret=_1315.apply(this,_1314?_1314:[_1313]);
}
if(this._started&&!this._beingDestroyed){
on.emit(this.domNode,type.toLowerCase(),_1313);
}
return ret;
},on:function(type,func){
var _1316=this._onMap(type);
if(_1316){
return _12e6.after(this,_1316,func,true);
}
return this.own(on(this.domNode,type,func))[0];
},_onMap:function(type){
var ctor=this.constructor,map=ctor._onMap;
if(!map){
map=(ctor._onMap={});
for(var attr in ctor.prototype){
if(/^on/.test(attr)){
map[attr.replace(/^on/,"").toLowerCase()]=attr;
}
}
}
return map[typeof type=="string"&&type.toLowerCase()];
},toString:function(){
return "[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]";
},getChildren:function(){
return this.containerNode?_12f3.findWidgets(this.containerNode):[];
},getParent:function(){
return _12f3.getEnclosingWidget(this.domNode.parentNode);
},connect:function(obj,event,_1317){
return this.own(_12e8.connect(obj,event,this,_1317))[0];
},disconnect:function(_1318){
_1318.remove();
},subscribe:function(t,_1319){
return this.own(topic.subscribe(t,lang.hitch(this,_1319)))[0];
},unsubscribe:function(_131a){
_131a.remove();
},isLeftToRight:function(){
return this.dir?(this.dir.toLowerCase()=="ltr"):_12ed.isBodyLtr(this.ownerDocument);
},isFocusable:function(){
return this.focus&&(_12ee.get(this.domNode,"display")!="none");
},placeAt:function(_131b,_131c){
var _131d=!_131b.tagName&&_12f3.byId(_131b);
if(_131d&&_131d.addChild&&(!_131c||typeof _131c==="number")){
_131d.addChild(this,_131c);
}else{
var ref=_131d&&("domNode" in _131d)?(_131d.containerNode&&!/after|before|replace/.test(_131c||"")?_131d.containerNode:_131d.domNode):dom.byId(_131b,this.ownerDocument);
_12ec.place(this.domNode,ref,_131c);
if(!this._started&&(this.getParent()||{})._started){
this.startup();
}
}
return this;
},defer:function(fcn,delay){
var timer=setTimeout(lang.hitch(this,function(){
if(!timer){
return;
}
timer=null;
if(!this._destroyed){
lang.hitch(this,fcn)();
}
}),delay||0);
return {remove:function(){
if(timer){
clearTimeout(timer);
timer=null;
}
return null;
}};
}});
if(has("dojo-bidi")){
_12fa.extend(_12f2);
}
return _12fa;
});
},"dojo/cookie":function(){
define(["./_base/kernel","./regexp"],function(dojo,_131e){
dojo.cookie=function(name,value,props){
var c=document.cookie,ret;
if(arguments.length==1){
var _131f=c.match(new RegExp("(?:^|; )"+_131e.escapeString(name)+"=([^;]*)"));
ret=_131f?decodeURIComponent(_131f[1]):undefined;
}else{
props=props||{};
var exp=props.expires;
if(typeof exp=="number"){
var d=new Date();
d.setTime(d.getTime()+exp*24*60*60*1000);
exp=props.expires=d;
}
if(exp&&exp.toUTCString){
props.expires=exp.toUTCString();
}
value=encodeURIComponent(value);
var _1320=name+"="+value,_1321;
for(_1321 in props){
_1320+="; "+_1321;
var _1322=props[_1321];
if(_1322!==true){
_1320+="="+_1322;
}
}
document.cookie=_1320;
}
return ret;
};
dojo.cookie.isSupported=function(){
if(!("cookieEnabled" in navigator)){
this("__djCookieTest__","CookiesAllowed");
navigator.cookieEnabled=this("__djCookieTest__")=="CookiesAllowed";
if(navigator.cookieEnabled){
this("__djCookieTest__","",{expires:-1});
}
}
return navigator.cookieEnabled;
};
return dojo.cookie;
});
},"curam/cdsl/store/CuramStore":function(){
define(["dojo/_base/declare","curam/cdsl/request/CuramService","curam/cdsl/_base/FacadeMethodCall","curam/cdsl/Struct","curam/cdsl/store/IdentityApi","dojo/store/util/QueryResults","dojo/_base/lang","curam/cdsl/_base/_Connection"],function(_1323,_1324,_1325,_1326,_1327,_1328,lang){
var _1329={query:"listItems",get:"read",put:"modify",add:"insert",remove:"remove"};
var _132a={identityApi:new _1327(),dataAdapter:null};
var _132b=function(_132c){
var o=lang.clone(_132a);
if(_132c&&_132c.getIdentity&&_132c.parseIdentity&&_132c.getIdentityPropertyNames){
o.identityApi=_132c;
}else{
o=lang.mixin(o,_132c);
}
return o;
};
var Store=null;
var _132d=_1323(Store,{_service:null,_baseFacadeName:null,_identityApi:null,constructor:function(_132e,_132f,opts){
var _1330=_132b(opts);
this._service=new _1324(_132e,{dataAdapter:_1330.dataAdapter});
this._baseFacadeName=_132f;
this._identityApi=_1330.identityApi;
},get:function(_1331){
var _1332=new _1326(this._identityApi.parseIdentity(_1331));
var _1333=new _1325(this._baseFacadeName,_1329.get,[_1332]);
return this._service.call([_1333]).then(function(data){
return data[0];
});
},getIdentity:function(_1334){
return this._identityApi.getIdentity(_1334);
},query:function(query,_1335){
var _1336=new _1325(this._baseFacadeName,_1329.query,[new _1326(query)]);
if(_1335){
_1336._setMetadata({queryOptions:{offset:_1335.start,count:_1335.count,sort:_1335.sort}});
}
var _1337=this._service.call([_1336]).then(function(data){
return data[0].dtls;
});
return new _1328(_1337);
},put:function(_1338,_1339){
if(_1339&&typeof _1339.overwrite!=="undefined"&&!_1339.overwrite){
throw new Error("The overwrite option is set to false, but adding new items "+"via CuramStore.put() is not supported.");
}
return this._addOrPut(_1329.put,_1338,_1339,"putOptions");
},add:function(_133a,_133b){
var opts={};
if(_133b){
opts=lang.mixin(opts,_133b);
}
opts.overwrite=false;
return this._addOrPut(_1329.add,_133a,opts,"addOptions");
},_addOrPut:function(_133c,_133d,_133e,_133f){
var _1340=_133d;
if(!_1340.isInstanceOf||!_1340.isInstanceOf(_1326)){
_1340=new _1326(_133d);
}
var _1341=new _1325(this._baseFacadeName,_133c,[_1340]);
if(_133e){
var _1342={};
_1342[_133f]={id:_133e.id?_133e.id:null,before:_133e.before?this.getIdentity(_133e.before):null,parent:_133e.parent?this.getIdentity(_133e.parent):null,overwrite:false};
_1341._setMetadata(_1342);
}
return this._service.call([_1341]).then(lang.hitch(this,function(data){
if(_133e&&_133e.id){
return _133e.id;
}
if(_133e&&_133e.overwrite){
return this.getIdentity(_1340);
}
return this.getIdentity(data[0]);
}));
},remove:function(_1343){
var _1344=new _1326(this._identityApi.parseIdentity(_1343)),_1345=new _1325(this._baseFacadeName,_1329.remove,[_1344]);
return this._service.call([_1345]).then(function(data){
return _1343;
});
}});
return _132d;
});
},"curam/dcl":function(){
define(["dojo/_base/connect","curam/define","curam/debug","dojo/query","dojo/dom-class","dijit/registry"],function(_1346,def,debug,query,_1347,_1348){
def.singleton("curam.dcl",{CLUSTER_SHOW:true,CLUSTER_HIDE:false,DCL_PAGE_CLUSTER_INITVALS_KEY:"curam.dcl.page_cluster_intvals_key",initialValues:{},rawItems:{},controls:{},clusters:{},states:{},getters:{},clusterRecords:{},fieldRecords:{},togglesArray:[],fnRoot:{"refs":[]},pageLoaded:false,init:function(){
for(var _1349 in curam.dcl.clusterRecords){
var cl=query("."+_1349)[0];
if(cl){
curam.dcl.clusters[_1349]=cl;
}else{
console.warn("Dynamic cluster",_1349," declared on the page but not associated!");
}
}
for(var _134a in curam.dcl.rawItems){
curam.dcl.fieldRecords[_134a]=curam.dcl.initRef(curam.dcl.rawItems[_134a]);
}
for(var _134b in curam.dcl.fieldRecords){
curam.dcl.controls[_134b]=curam.dcl.fieldRecords[_134b];
}
dojo.subscribe("curam/dcl/execute",curam.dcl.evaluateExpression);
curam.dcl.evaluateExpression(false);
for(var _134c in curam.dcl.clusterRecords){
curam.dcl.transferValuesFromDomToStorage(_134c);
if(curam.dcl.states[_134c]==curam.dcl.CLUSTER_HIDE){
curam.dcl.blankFields(_134c);
}
}
},addControlVar:function(_134d,val){
curam.dcl.fieldRecords[_134d]=curam.dcl.initVar(val);
},addControlRef:function(_134e,_134f){
curam.dcl.fieldRecords[_134e]=curam.dcl.initRef(_134f);
},bindCluster:function(_1350,_1351,_1352){
var _1353=dojo.getObject(_1352);
var _1354={"fnRef":_1353,"clId":_1350};
if(_1351!=""){
var _1355=dojo.getObject(_1351);
if(!_1355.refs){
_1355.refs=[];
}
_1355.refs.push(_1354);
}else{
curam.dcl.fnRoot.refs.push(_1354);
}
curam.dcl.clusterRecords[_1350]=_1353;
curam.dcl.states[_1350]=curam.dcl.CLUSTER_HIDE;
},setGetter:function(_1356,_1357){
curam.dcl.getters[_1356]=_1357;
},getField:function(_1358){
if(!_1358){
throw Error("You must specify a field name");
}
var value=undefined;
try{
value=curam.dcl.controls[_1358].apply();
}
catch(e){
debug.log(debug.getProperty("curam.dcl.field.error")+_1358);
debug.log(debug.getProperty("curam.dcl.field.valid",[_1358]));
}
if(value){
curam.debug.log("curam.dcl.getField("+_1358+") - "+value);
}
return value;
},evaluateRefs:function(_1359){
for(var i=0;i<_1359.length;i++){
var aRef=_1359[i];
var _135a=aRef.fnRef.apply();
if(_135a!=curam.dcl.states[aRef.clId]){
curam.dcl.togglesArray.push(aRef.clId);
}
if(aRef.fnRef.refs!=null){
curam.dcl.evaluateRefs(aRef.fnRef.refs);
}
}
},evaluateExpression:function(_135b){
curam.dcl.pageLoaded=false;
if(!_135b){
curam.dcl.pageLoaded=true;
}
curam.dcl.evaluateRefs(curam.dcl.fnRoot.refs);
var count=0;
var limit=1000;
while(curam.dcl.togglesArray.length>0&&count<limit){
count++;
for(var i=0;i<curam.dcl.togglesArray.length;i++){
var _135c=query("."+curam.dcl.togglesArray[i])[0];
curam.dcl.toggleCluster(curam.dcl.pageLoaded,_135c,curam.dcl.togglesArray[i]);
}
curam.dcl.togglesArray=[];
curam.dcl.evaluateRefs(curam.dcl.fnRoot.refs);
}
if(count>=limit){
debug.log(debug.getProperty("curam.dcl.field.inifinte.loop.info",[limit]));
}
},toggleCluster:function(_135d,_135e,_135f){
curam.dcl.states[_135f]=!curam.dcl.states[_135f];
if(curam.dcl.states[_135f]==curam.dcl.CLUSTER_SHOW){
_1347.remove(_135e,"hide-dynamic-cluster");
curam.dcl.transferValuesFromStorageToDom(_135f);
}else{
_1347.add(_135e,"hide-dynamic-cluster");
curam.dcl.blankFields(_135f);
}
curam.dcl.animateCluster(_135d,_135e,_135f);
},animateCluster:function(_1360,_1361,_1362){
if(!_1361||_1361.inAnimation){
return;
}
require(["dojo/fx"],function(fx){
var _1363={node:_1361,duration:200,onBegin:function(){
_1361.inAnimation=true;
},onEnd:function(){
_1361.inAnimation=false;
}};
var _1364={node:_1361,duration:200,onBegin:function(){
_1361.inAnimation=true;
},onEnd:function(){
_1361.inAnimation=false;
}};
if(_1360||curam.dcl.states[_1362]==curam.dcl.CLUSTER_SHOW){
fx.wipeIn(_1363).play();
}else{
if(curam.dcl.states[_1362]==curam.dcl.CLUSTER_HIDE){
fx.wipeOut(_1364).play();
}else{
}
}
});
},transferValuesFromStorageToDom:function(_1365){
var _1366=query("."+_1365)[0];
var _1367=curam.dcl.initialValues[_1365];
var _1368=query("table input[value]",_1366);
for(var i=0;i<_1368.length;i++){
textNode=_1368[i];
if(_1367){
var _1369=_1367[i].value;
textNode.value=_1369;
if(textNode.id&&_1367[i]._lastValueReported){
var _136a=this.getDropdownWidget(textNode.id);
_136a._lastValueReported=_1367[i]._lastValueReported;
}
}else{
}
}
},transferValuesFromDomToStorage:function(_136b){
var _136c=query("."+_136b)[0];
var _136d=query("table input[value]",_136c);
var _136e=[];
for(var i=0;i<_136d.length;i++){
var _136f=_136d[i];
var _1370={id:_136f.id,value:_136f.value};
var _1371=this.getDropdownWidget(_136f.id);
if(_1371){
_1370._lastValueReported=_1371._lastValueReported;
}
_136e.push(_1370);
}
curam.dcl.initialValues[_136b]=_136e;
},blankFields:function(_1372){
var _1373=query("."+_1372)[0];
var _1374=query("table input[value]",_1373);
for(var i=0;i<_1374.length;i++){
textNode=_1374[i];
if(textNode.type==="hidden"&&textNode.getAttribute("dcl-blankable")==="false"){
debug.log(debug.getProperty("curam.dcl.skip.blank"),textNode);
}else{
textNode.value="";
}
if(textNode.type==="checkbox"||textNode.type==="radio"){
textNode.checked=false;
}
var _1375=this.getDropdownWidget(textNode.id);
if(_1375){
_1375._lastValueReported="";
}
}
},getDropdownWidget:function(id){
if(id){
var _1376=_1348.byId(id);
return _1376;
}
},initRef:function(fName){
var ref=document.getElementsByName(fName);
var _1377=curam.dcl.getters[fName];
var _1378=function(){
return ref[0].selectedValue||ref[0].value;
};
if(ref.length>1){
_1378=function(){
for(var i=0;i<ref.length;i++){
if(ref[i].checked){
return ref[i].value;
}
}
return "";
};
}else{
if(ref[0].type=="checkbox"){
_1378=function(){
return document.getElementsByName(fName)[0].checked;
};
}
}
return function(){
return _1377?_1377.apply(ref):_1378.apply();
};
},initVar:function(value){
return function(){
return value;
};
}});
return curam.dcl;
});
},"dijit/MenuBarItem":function(){
define(["dojo/_base/declare","./MenuItem","dojo/text!./templates/MenuBarItem.html"],function(_1379,_137a,_137b){
var _137c=_1379("dijit._MenuBarItemMixin",null,{templateString:_137b,_setIconClassAttr:null});
var _137d=_1379("dijit.MenuBarItem",[_137a,_137c],{});
_137d._MenuBarItemMixin=_137c;
return _137d;
});
},"dojo/uacss":function(){
define(["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(_137e,lang,_137f,has,_1380){
var html=_1380.doc.documentElement,ie=has("ie"),_1381=has("trident"),opera=has("opera"),maj=Math.floor,ff=has("ff"),_1382=_137e.boxModel.replace(/-/,""),_1383={"dj_quirks":has("quirks"),"dj_opera":opera,"dj_khtml":has("khtml"),"dj_webkit":has("webkit"),"dj_safari":has("safari"),"dj_chrome":has("chrome"),"dj_edge":has("edge"),"dj_gecko":has("mozilla"),"dj_ios":has("ios"),"dj_android":has("android")};
if(ie){
_1383["dj_ie"]=true;
_1383["dj_ie"+maj(ie)]=true;
_1383["dj_iequirks"]=has("quirks");
}
if(_1381){
_1383["dj_trident"]=true;
_1383["dj_trident"+maj(_1381)]=true;
}
if(ff){
_1383["dj_ff"+maj(ff)]=true;
}
_1383["dj_"+_1382]=true;
var _1384="";
for(var clz in _1383){
if(_1383[clz]){
_1384+=clz+" ";
}
}
html.className=lang.trim(html.className+" "+_1384);
_137f(function(){
if(!_137e.isBodyLtr()){
var _1385="dj_rtl dijitRtl "+_1384.replace(/ /g,"-rtl ");
html.className=lang.trim(html.className+" "+_1385+"dj_rtl dijitRtl "+_1384.replace(/ /g,"-rtl "));
}
});
return has;
});
},"curam/util/Refresh":function(){
define(["dijit/registry","dojo/dom-class","dojo/dom-attr","curam/inspection/Layer","curam/util/Request","curam/define","curam/debug","curam/util/ResourceBundle","curam/util","curam/tab","curam/util/ContextPanel","curam/util/ui/refresh/TabRefreshController"],function(_1386,_1387,_1388,layer,_1389,_138a,debug,_138b){
_138a.singleton("curam.util.Refresh",{submitted:false,pageSubmitted:"",refreshConfig:[],menuBarCallback:null,navigationCallback:null,_controllers:{},_pageRefreshButton:undefined,setMenuBarCallbacks:function(_138c,_138d){
if(!curam.util.Refresh.menuBarCallback){
curam.util.Refresh.menuBarCallback={updateMenuItemStates:_138c,getRefreshParams:_138d};
}
},setNavigationCallbacks:function(_138e,_138f){
if(!curam.util.Refresh.navigationCallback){
curam.util.Refresh.navigationCallback={updateNavItemStates:_138e,getRefreshParams:_138f};
}
},refreshMenuAndNavigation:function(_1390,_1391,_1392){
curam.debug.log("curam.util.Refresh.refreshMenuAndNavigation: "+"tabWidgetId=%s, refreshMenuBar || refreshNavigation: %s || %s",_1390,_1391,_1392);
if(!_1391&&!_1392){
curam.debug.log(debug.getProperty("curam.util.Refresh.no.refresh"));
return;
}
var _1393={update:function(_1394,_1395,_1396){
curam.debug.log(debug.getProperty("curam.util.Refresh.dynamic.refresh"),_1395);
var ncb=curam.util.Refresh.navigationCallback;
curam.debug.log("refreshNavigation? ",_1392);
if(_1392&&_1395.navData&&ncb){
ncb.updateNavItemStates(_1394,_1395);
}
var mcb=curam.util.Refresh.menuBarCallback;
curam.debug.log("refreshMenuBar? ",_1391);
if(_1391&&_1395.menuData&&mcb){
curam.debug.log("curam.util.Refresh.refreshMenuAndNavigation: "+"dynamic tab menu item update");
mcb.updateMenuItemStates(_1394,_1395);
}else{
curam.debug.log("curam.util.Refresh.refreshMenuAndNavigation: "+"no dynamic data, updating initially loaded tab action items to show"+"only those that should be inlined");
curam.util.TabActionsMenu.manageInlineTabMenuStates(_1394);
}
},error:function(error,_1397){
curam.debug.log("========= "+debug.getProperty("curam.util.Refresh.dynamic.failure")+" ===========");
curam.debug.log(debug.getProperty("curam.util.Refresh.dynamic.error"),error);
curam.debug.log(debug.getProperty("curam.util.Refresh.dynamic.args"),_1397);
curam.debug.log("==================================================");
}};
var _1398="servlet/JSONServlet?o3c=TAB_DYNAMIC_STATE_QUERY",_1399=false;
var mcb=curam.util.Refresh.menuBarCallback;
if(_1391&&mcb){
var _139a=mcb.getRefreshParams(_1390);
if(_139a){
_1398+="&"+_139a;
_1399=true;
}
}
var ncb=curam.util.Refresh.navigationCallback;
if(_1392&&ncb){
var _139b=ncb.getRefreshParams(_1390);
if(_139b){
_1398+="&"+_139b;
_1399=true;
}
}
curam.debug.log(debug.getProperty("curam.util.Refresh.dynamic.refresh.req"));
if(_1399){
_1389.post({url:_1398,handleAs:"json",preventCache:true,load:dojo.hitch(_1393,"update",_1390),error:dojo.hitch(_1393,"error")});
}else{
curam.util.TabActionsMenu.manageInlineTabMenuStates(_1390);
curam.debug.log(debug.getProperty("curam.util.Refresh.dynamic.refresh.no_dynamic_items"));
}
},addConfig:function(_139c){
var _139d=false;
dojo.forEach(curam.util.Refresh.refreshConfig,function(_139e){
if(_139e.tab==_139c.tab){
_139e.config=_139c.config;
_139d=true;
}
});
if(!_139d){
curam.util.Refresh.refreshConfig.push(_139c);
}
},setupRefreshController:function(_139f){
curam.debug.log("curam.util.Refresh.setupRefreshController "+debug.getProperty("curam.util.ExpandableLists.load.for"),_139f);
var _13a0=_1386.byId(_139f);
var tabId=_13a0.tabDescriptor.tabID;
var _13a1=dojo.filter(curam.util.Refresh.refreshConfig,function(item){
return item.tab==tabId;
});
if(_13a1.length==1){
var _13a2=_13a1[0];
var ctl=new curam.util.ui.refresh.TabRefreshController(_139f,_13a2);
curam.util.Refresh._controllers[_139f]=ctl;
ctl.setRefreshHandler(curam.util.Refresh.handleRefreshEvent);
}else{
if(_13a1.length==0){
curam.debug.log(debug.getProperty("curam.util.Refresh.no.dynamic.refresh"),_139f);
var ctl=new curam.util.ui.refresh.TabRefreshController(_139f,null);
curam.util.Refresh._controllers[_139f]=ctl;
}else{
throw "curam.util.Refresh: multiple dynamic refresh "+"configurations found for tab "+_139f;
}
}
curam.tab.executeOnTabClose(function(){
curam.util.Refresh._controllers[_139f].destroy();
curam.util.Refresh._controllers[_139f]=undefined;
},_139f);
},getController:function(_13a3){
var ctl=curam.util.Refresh._controllers[_13a3];
if(!ctl){
throw "Refresh controller for tab '"+_13a3+"' not found!";
}
return ctl;
},handleOnloadNestedInlinePage:function(_13a4,_13a5){
curam.debug.log("curam.util.Refresh.handleOnloadNestedInlinePage "+debug.getProperty("curam.util.Refresh.iframe",[_13a4,_13a5]));
var _13a6=curam.util.getTopmostWindow();
var _13a7=undefined;
var _13a8=curam.tab.getSelectedTab();
if(_13a8){
_13a7=curam.tab.getTabWidgetId(_13a8);
}
if(_13a7){
curam.debug.log(debug.getProperty("curam.util.Refresh.parent"),_13a7);
_13a6.curam.util.Refresh.getController(_13a7).pageLoaded(_13a5.pageID,curam.util.ui.refresh.RefreshEvent.prototype.SOURCE_CONTEXT_INLINE);
_13a6.dojo.publish("/curam/main-content/page/loaded",[_13a5.pageID,_13a7,_13a8]);
return true;
}
return false;
},handleRefreshEvent:function(_13a9){
var _13aa=function(_13ab){
curam.util.ContextPanel.refresh(_1386.byId(_13ab));
};
var _13ac=function(_13ad){
curam.tab.refreshMainContentPanel(_1386.byId(_13ad));
};
var _13ae=function(_13af,_13b0,_13b1){
curam.util.Refresh.refreshMenuAndNavigation(_13af,_13b0,_13b1);
};
curam.util.Refresh._doRefresh(_13a9,_13aa,_13ac,_13ae);
},_doRefresh:function(_13b2,_13b3,_13b4,_13b5){
var _13b6=null;
var _13b7=false;
var _13b8=false;
var _13b9=false;
var _13ba=false;
var trc=curam.util.ui.refresh.TabRefreshController.prototype;
dojo.forEach(_13b2,function(_13bb){
var _13bc=_13bb.lastIndexOf("/");
var _13bd=_13bb.slice(0,_13bc);
if(!_13b6){
_13b6=_13bb.slice(_13bc+1,_13bb.length);
}
if(_13bd==trc.EVENT_REFRESH_MENU){
_13b7=true;
}
if(_13bd==trc.EVENT_REFRESH_NAVIGATION){
_13b8=true;
}
if(_13bd==trc.EVENT_REFRESH_CONTEXT){
_13b9=true;
}
if(_13bd==trc.EVENT_REFRESH_MAIN){
_13ba=true;
}
});
if(_13b9){
_13b3(_13b6);
}
if(_13ba){
_13b4(_13b6);
}
_13b5(_13b6,_13b7,_13b8);
},setupRefreshButton:function(_13be){
dojo.ready(function(){
var _13bf=dojo.query("."+_13be)[0];
if(!_13bf){
throw "Refresh button not found: "+_13be;
}
curam.util.Refresh._pageRefreshButton=_13bf;
var href=window.location.href;
if(curam.util.isActionPage(href)){
var _13c0=new _138b("Refresh");
var _13c1=_13c0.getProperty("refresh.button.disabled");
_1387.add(_13bf,"disabled");
_1388.set(_13bf,"title",_13c1);
_1388.set(_13bf,"aria-label",_13c1);
_1388.set(_13bf,"role","link");
_1388.remove(_13bf,"href");
_1388.set(_13bf,"aria-disabled","true");
curam.util.Refresh._pageRefreshButton._curamDisable=true;
if(_13bf.firstChild!=null){
_1387.add(_13bf.firstChild,"refresh-disabled");
_1388.set(_13bf.firstChild,"alt",_13c1);
}
}else{
_1387.add(_13bf,"enabled");
curam.util.Refresh._pageRefreshButton["_curamDisable"]=undefined;
}
curam.util.getTopmostWindow().curam.util.setupPreferencesLink(href);
});
},refreshPage:function(event){
dojo.stopEvent(event);
var href=window.location.href;
var _13c2=curam.util.Refresh._pageRefreshButton._curamDisable;
if(_13c2){
return;
}
curam.util.FORCE_REFRESH=true;
curam.util.redirectWindow(href,true);
}});
layer.register("curam/util/Refresh",curam.util.Refresh);
return curam.util.Refresh;
});
},"dijit/form/_FormWidget":function(){
define(["dojo/_base/declare","dojo/sniff","dojo/_base/kernel","dojo/ready","../_Widget","../_CssStateMixin","../_TemplatedMixin","./_FormWidgetMixin"],function(_13c3,has,_13c4,ready,_13c5,_13c6,_13c7,_13c8){
if(1){
ready(0,function(){
var _13c9=["dijit/form/_FormValueWidget"];
require(_13c9);
});
}
return _13c3("dijit.form._FormWidget",[_13c5,_13c7,_13c6,_13c8],{setDisabled:function(_13ca){
_13c4.deprecated("setDisabled("+_13ca+") is deprecated. Use set('disabled',"+_13ca+") instead.","","2.0");
this.set("disabled",_13ca);
},setValue:function(value){
_13c4.deprecated("dijit.form._FormWidget:setValue("+value+") is deprecated.  Use set('value',"+value+") instead.","","2.0");
this.set("value",value);
},getValue:function(){
_13c4.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");
return this.get("value");
},postMixInProperties:function(){
this.nameAttrSetting=(this.name&&!has("msapp"))?("name=\""+this.name.replace(/"/g,"&quot;")+"\""):"";
this.inherited(arguments);
}});
});
},"curam/contentPanel":function(){
define(["curam/util","curam/tab","dojo/dom-attr","dojo/dom","curam/util/onLoad","curam/util/Refresh","curam/util/ui/refresh/RefreshEvent","curam/define","curam/debug","curam/ui/PageRequest","dijit/registry"],function(cu,ct,_13cb,dom){
curam.define.singleton("curam.contentPanel",{smartPanelLoadedTokens:{},initSmartPanelExpListPageLoadListener:function(){
if(!cu.getTopmostWindow().dojo.body()._spListenerInitialized){
cu.getTopmostWindow().dojo.subscribe("expandedList.pageLoaded",curam.contentPanel.smartPanelExpListPageLoadListener);
cu.getTopmostWindow().dojo.body()._spListenerInitialized="true";
}
},smartPanelExpListPageLoadListener:function(data){
if(ct.getSmartPanelIframe()){
curam.contentPanel.checkSmartPanelLoaded(data,"ExpandedList.TabContentArea.Reloaded",curam.tab.getSelectedTabWidgetId());
}
},publishSmartPanelExpListPageLoad:function(_13cc){
if(ct.getSmartPanelIframe()){
cu.getTopmostWindow().dojo.publish("expandedList.pageLoaded",[_13cc.contentWindow.location.href]);
}
},setupOnLoad:function(_13cd,_13ce){
curam.debug.log("curam.contenPanel: setupOnLoad: "+_13cd+" "+_13ce);
curam.contentPanel.initSmartPanelExpListPageLoadListener();
var _13cf=curam.contentPanel.iframeOnloadHandler;
curam.util.onLoad.addSubscriber(_13cd,_13cf);
if(curam.tab.getSmartPanelIframe(dijit.byId(_13ce))){
curam.debug.log("tab has smart panel, setting up event listener");
curam.contentPanel.targetSmartPanel(_13cd,_13ce);
}
ct.executeOnTabClose(function(){
curam.util.onLoad.removeSubscriber(_13cd,_13cf);
curam.contentPanel._unregisterSmartPanelListener(_13ce);
if(curam.util.getTopmostWindow().curam.util.lastOpenedTabButton&&curam.util.getTopmostWindow().curam.util.lastOpenedTabButton.domNode.id.includes(_13ce,0)){
curam.util.getTopmostWindow().curam.util.lastOpenedTabButton=null;
}
},_13ce);
},iframeUpdateTitle:function(_13d0,_13d1,title){
var _13d2=CONTENT_PANEL_TITLE+" - ";
var _13d3=dom.byId(_13d1);
if(_13d3==null){
_13d3=dojo.query("iframe."+_13d1)[0];
}
ct.executeOnTabClose(function(){
var src=_13cb.get(_13d3,"src");
_13cb.set(_13d3,"src","");
curam.debug.log("curam.contentPanel: Released iframe content for "+src);
},_13d0);
var _13d4;
if(title){
var _13d5=dojo.query("iframe.contentPanelFrame");
var _13d6;
for(var i=0;i<_13d5.length;i++){
if(_13d5[i].title==_13d2){
_13d6=_13d5[i];
break;
}
}
if(_13d6){
_13d4=title;
_13d6.contentWindow.document.title=_13d4;
}
}else{
_13d4=_13d3.contentWindow.document.title;
}
if(_13d4==""||_13d4=="undefined"){
var _13d7=curam.util.iframeTitleFallBack();
_13d3.contentWindow.document.title=_13d7;
}
_13cb.set(_13d3,"title",_13d2+curam.util.iframeTitleFallBack());
_13cb.set(_13d3,"data-done-loading",true);
},iframeOnloadHandler:function(_13d8,_13d9){
dojo.subscribe("tab.title.name.finished",function(data){
var _13da=ct.getContainerTab(dojo.query("iframe."+data.frameid)[0]);
var _13db=ct.getTabWidgetId(_13da);
curam.contentPanel.iframeUpdateTitle(_13db,data.frameid,data.title);
});
var _13dc=ct.getContainerTab(dojo.query("iframe."+_13d8)[0]);
var _13dd=ct.getTabWidgetId(_13dc);
curam.contentPanel.iframeUpdateTitle(_13dd,_13d8);
cu.Refresh.getController(_13dd).pageLoaded(_13d9.pageID,cu.ui.refresh.RefreshEvent.prototype.SOURCE_CONTEXT_MAIN);
dojo.publish("/curam/main-content/page/loaded",[_13d9.pageID,_13dd,_13dc]);
},spOnLoadHandler:function(_13de,_13df){
var _13e0=dojo.query("."+_13de)[0];
curam.contentPanel.checkSmartPanelLoaded(_13e0.src,"TabContentArea.Reloaded",curam.tab.getSelectedTabWidgetId());
},checkSmartPanelLoaded:function(url,_13e1,_13e2){
if(!_13e2){
throw new Error("Required argument 'tabWidgetId' was not specified.");
}
var _13e3=ct.getSmartPanelIframe();
var _13e4=_13cb.get(_13e3,"iframeLoaded");
if(_13e4=="true"){
curam.contentPanel.smartPanelPublisher(_13e3,url,_13e1,_13e2);
}else{
var token=dojo.subscribe("smartPanel.loaded",function(_13e5){
if(_13e5==_13e3){
curam.contentPanel._unregisterSmartPanelListener(_13e2);
curam.contentPanel.smartPanelPublisher(_13e3,url,_13e1,_13e2);
}
});
curam.contentPanel._storeSmartPanelToken(token,_13e2);
}
},_storeSmartPanelToken:function(token,_13e6){
var _13e7=curam.contentPanel.smartPanelLoadedTokens[_13e6];
if(_13e7){
dojo.unsubscribe(_13e7);
}
curam.contentPanel.smartPanelLoadedTokens[_13e6]=token;
},_unregisterSmartPanelListener:function(_13e8){
dojo.unsubscribe(curam.contentPanel.smartPanelLoadedTokens[_13e8]);
curam.contentPanel.smartPanelLoadedTokens[_13e8]=null;
},smartPanelPublisher:function(_13e9,url,_13ea,_13eb){
var _13ec=new curam.ui.PageRequest(url);
curam.debug.log("Publishing event to smart panel in tab %s: eventType=%s;"+" pageID=%s; parameters=%s",_13eb,_13ea,_13ec.pageID,dojo.toJson(_13ec.parameters));
_13e9.contentWindow.dojo.publish("contentPane.targetSmartPanel",[{"eventType":_13ea,"pageId":_13ec.pageID,"parameters":_13ec.parameters}]);
},targetSmartPanel:function(_13ed,_13ee){
curam.debug.log("curam.contentPanel:targetSmartPanel(): "+_13ed+" "+_13ee);
var _13ef=ct.getSmartPanelIframe();
var _13f0=_13ee;
if(_13ef){
var spId=curam.util.onLoad.defaultGetIdFunction(_13ef);
var _13f1=dojo.subscribe("expandedList.toggle",function(_13f2,_13f3,_13f4){
if(_13f0===_13f4){
curam.contentPanel.checkSmartPanelLoaded(_13f3.url,_13f3.eventType,_13f4);
}
});
var _13f5=curam.contentPanel.spOnLoadHandler;
curam.util.onLoad.addSubscriber(_13ed,_13f5);
ct.executeOnTabClose(function(){
dojo.unsubscribe(_13f1);
curam.util.onLoad.removeSubscriber(_13ed,_13f5);
curam.util.onLoad.removeSubscriber(spId,curam.smartPanel._handleSmartPanelLoad);
},_13ee);
}
}});
return curam.contentPanel;
});
},"dijit/MenuItem":function(){
define(["dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/kernel","dojo/sniff","dojo/_base/lang","./_Widget","./_TemplatedMixin","./_Contained","./_CssStateMixin","dojo/text!./templates/MenuItem.html"],function(_13f6,dom,_13f7,_13f8,_13f9,has,lang,_13fa,_13fb,_13fc,_13fd,_13fe){
var _13ff=_13f6("dijit.MenuItem"+(has("dojo-bidi")?"_NoBidi":""),[_13fa,_13fb,_13fc,_13fd],{templateString:_13fe,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(val){
this._set("label",val);
var _1400="";
var text;
var ndx=val.search(/{\S}/);
if(ndx>=0){
_1400=val.charAt(ndx+1);
var _1401=val.substr(0,ndx);
var _1402=val.substr(ndx+3);
text=_1401+_1400+_1402;
val=_1401+"<span class=\"dijitMenuItemShortcutKey\">"+_1400+"</span>"+_1402;
}else{
text=val;
}
this.domNode.setAttribute("aria-label",text+" "+this.accelKey);
this.containerNode.innerHTML=val;
this._set("shortcutKey",_1400);
},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:false,_fillContent:function(_1403){
if(_1403&&!("label" in this.params)){
this._set("label",_1403.innerHTML);
}
},buildRendering:function(){
this.inherited(arguments);
var label=this.id+"_text";
_13f7.set(this.containerNode,"id",label);
if(this.accelKeyNode){
_13f7.set(this.accelKeyNode,"id",this.id+"_accel");
}
dom.setSelectable(this.domNode,false);
},onClick:function(){
},focus:function(){
try{
if(has("ie")==8){
this.containerNode.focus();
}
this.focusNode.focus();
}
catch(e){
}
},_setSelected:function(_1404){
_13f8.toggle(this.domNode,"dijitMenuItemSelected",_1404);
},setLabel:function(_1405){
_13f9.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");
this.set("label",_1405);
},setDisabled:function(_1406){
_13f9.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");
this.set("disabled",_1406);
},_setDisabledAttr:function(value){
this.focusNode.setAttribute("aria-disabled",value?"true":"false");
this._set("disabled",value);
},_setAccelKeyAttr:function(value){
if(this.accelKeyNode){
this.accelKeyNode.style.display=value?"":"none";
this.accelKeyNode.innerHTML=value;
_13f7.set(this.containerNode,"colSpan",value?"1":"2");
}
this._set("accelKey",value);
}});
if(has("dojo-bidi")){
_13ff=_13f6("dijit.MenuItem",_13ff,{_setLabelAttr:function(val){
this.inherited(arguments);
if(this.textDir==="auto"){
this.applyTextDir(this.textDirNode);
}
}});
}
return _13ff;
});
},"dijit/_AttachMixin":function(){
define(["require","dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/mouse","dojo/on","dojo/touch","./_WidgetBase"],function(_1407,array,_1408,_1409,lang,mouse,on,touch,_140a){
var _140b=lang.delegate(touch,{"mouseenter":mouse.enter,"mouseleave":mouse.leave,"keypress":_1408._keypress});
var _140c;
var _140d=_1409("dijit._AttachMixin",null,{constructor:function(){
this._attachPoints=[];
this._attachEvents=[];
},buildRendering:function(){
this.inherited(arguments);
this._attachTemplateNodes(this.domNode);
this._beforeFillContent();
},_beforeFillContent:function(){
},_attachTemplateNodes:function(_140e){
var node=_140e;
while(true){
if(node.nodeType==1&&(this._processTemplateNode(node,function(n,p){
return n.getAttribute(p);
},this._attach)||this.searchContainerNode)&&node.firstChild){
node=node.firstChild;
}else{
if(node==_140e){
return;
}
while(!node.nextSibling){
node=node.parentNode;
if(node==_140e){
return;
}
}
node=node.nextSibling;
}
}
},_processTemplateNode:function(_140f,_1410,_1411){
var ret=true;
var _1412=this.attachScope||this,_1413=_1410(_140f,"dojoAttachPoint")||_1410(_140f,"data-dojo-attach-point");
if(_1413){
var point,_1414=_1413.split(/\s*,\s*/);
while((point=_1414.shift())){
if(lang.isArray(_1412[point])){
_1412[point].push(_140f);
}else{
_1412[point]=_140f;
}
ret=(point!="containerNode");
this._attachPoints.push(point);
}
}
var _1415=_1410(_140f,"dojoAttachEvent")||_1410(_140f,"data-dojo-attach-event");
if(_1415){
var event,_1416=_1415.split(/\s*,\s*/);
var trim=lang.trim;
while((event=_1416.shift())){
if(event){
var _1417=null;
if(event.indexOf(":")!=-1){
var _1418=event.split(":");
event=trim(_1418[0]);
_1417=trim(_1418[1]);
}else{
event=trim(event);
}
if(!_1417){
_1417=event;
}
this._attachEvents.push(_1411(_140f,event,lang.hitch(_1412,_1417)));
}
}
}
return ret;
},_attach:function(node,type,func){
type=type.replace(/^on/,"").toLowerCase();
if(type=="dijitclick"){
type=_140c||(_140c=_1407("./a11yclick"));
}else{
type=_140b[type]||type;
}
return on(node,type,func);
},_detachTemplateNodes:function(){
var _1419=this.attachScope||this;
array.forEach(this._attachPoints,function(point){
delete _1419[point];
});
this._attachPoints=[];
array.forEach(this._attachEvents,function(_141a){
_141a.remove();
});
this._attachEvents=[];
},destroyRendering:function(){
this._detachTemplateNodes();
this.inherited(arguments);
}});
lang.extend(_140a,{dojoAttachEvent:"",dojoAttachPoint:""});
return _140d;
});
},"curam/ui/ClientDataAccessor":function(){
define(["dojo/_base/declare","curam/inspection/Layer","curam/util/Request","curam/debug"],function(_141b,layer,_141c,debug){
return _141b("curam.ui.ClientDataAccessor",null,{constructor:function(){
layer.register("curam/ui/ClientDataAccessor",this);
},get:function(path,_141d,_141e,_141f){
var _1420="servlet/PathResolver"+"?p="+path;
if(_141e==undefined){
_141e=dojo.hitch(this,this.handleClientDataAccessorError);
}
if(_141f==undefined){
_141f=dojo.hitch(this,this.handleClientDataAccessorCallback);
}
_141c.post({url:_1420,headers:{"Content-Encoding":"UTF-8"},handleAs:"text",preventCache:true,load:_141d,error:_141e,handle:_141f});
},getList:function(path,_1421,_1422,_1423){
var _1424="servlet/PathResolver"+"?r=l&p="+path;
if(_1422==undefined){
_1422=dojo.hitch(this,this.handleClientDataAccessorError);
}
if(_1423==undefined){
_1423=dojo.hitch(this,this.handleClientDataAccessorCallback);
}
_141c.post({url:_1424,headers:{"Content-Encoding":"UTF-8"},handleAs:"json",preventCache:true,load:_1421,error:_1422,handle:_1423});
},getRaw:function(path,_1425,_1426,_1427){
var _1428="servlet/PathResolver"+"?r=j&p="+path;
if(_1426==undefined){
_1426=dojo.hitch(this,this.handleClientDataAccessorError);
}
if(_1427==undefined){
_1427=dojo.hitch(this,this.handleClientDataAccessorCallback);
}
_141c.post({url:_1428,headers:{"Content-Encoding":"UTF-8"},handleAs:"json",preventCache:true,load:_1425,error:_1426,handle:_1427});
},set:function(path,value,_1429,_142a,_142b){
var _142c="servlet/PathResolver"+"?r=x&p="+path+"&v="+encodeURIComponent(value);
var _142d=curam.util.getTopmostWindow();
if(_142a==undefined||_142a==null){
_142a=dojo.hitch(this,this.handleClientDataAccessorError);
}
if(_142b==undefined||_142b==null){
_142b=dojo.hitch(this,this.handleClientDataAccessorCallback);
}
if(_1429==undefined||_1429==null){
_1429=dojo.hitch(this,this.handleClientDataAccessorSuccess);
}
_141c.post({url:_142c,headers:{"Content-Encoding":"UTF-8","csrfToken":_142d.csrfToken},handleAs:"text",preventCache:true,load:_1429,error:_142a,handle:_142b});
},handleClientDataAccessorError:function(error,_142e){
var _142f=debug.getProperty("curam.ui.ClientDataAccessor.err.1")+"PathResolverServlet : ";
var _1430=debug.getProperty("curam.ui.ClientDataAccessor.err.2");
debug.log(_142f+error+_1430+_142e);
},handleClientDataAccessorSuccess:function(_1431,_1432){
curam.debug.log("curam.ui.ClientDataAccessor.handleClientDataAccessorSuccess : "+_1431);
},handleClientDataAccessorCallback:function(_1433,_1434){
debug.log("curam.ui.ClientDataAccessor.handleClientDataAccessorCallback :"+" "+debug.getProperty("curam.ui.ClientDataAccessor.callback"));
}});
});
},"curam/util/onLoad":function(){
define(["curam/util","curam/define","curam/debug","dojo/dom-attr"],function(util,_1435,debug,attr){
_1435.singleton("curam.util.onLoad",{EVENT:"/curam/frame/load",publishers:[],subscribers:[],defaultGetIdFunction:function(_1436){
var _1437=attr.get(_1436,"class").split(" ");
return dojo.filter(_1437,function(_1438){
return _1438.indexOf("iframe-")==0;
})[0];
},addPublisher:function(_1439){
curam.util.onLoad.publishers.push(_1439);
},addSubscriber:function(_143a,_143b,getId){
curam.util.onLoad.subscribers.push({"getId":getId?getId:curam.util.onLoad.defaultGetIdFunction,"callback":_143b,"iframeId":_143a});
},removeSubscriber:function(_143c,_143d,getId){
curam.util.onLoad.subscribers=dojo.filter(curam.util.onLoad.subscribers,function(_143e){
return !(_143e.iframeId==_143c&&_143e.callback==_143d);
});
},execute:function(){
if(window.parent==window){
curam.debug.log("curam.util.onLoad.execute(): "+debug.getProperty("curam.util.onLoad.exit"));
return;
}
var _143f={};
dojo.forEach(curam.util.onLoad.publishers,function(_1440){
_1440(_143f);
});
curam.util.onLoad.publishers=[];
curam.util.getTopmostWindow().dojo.publish("/curam/progress/unload");
window.parent.dojo.publish(curam.util.onLoad.EVENT,[window.frameElement,_143f]);
}});
curam.util.subscribe(curam.util.onLoad.EVENT,function(_1441,_1442){
dojo.forEach(curam.util.onLoad.subscribers,function(_1443){
var _1444=_1443.getId(_1441);
if(_1443.iframeId==_1444){
_1443.callback(_1444,_1442);
}
});
});
return curam.util.onLoad;
});
},"curam/widget/MenuItem":function(){
define(["dijit/MenuItem","dojo/_base/declare","dojo/text!dijit/templates/MenuItem.html"],function(_1445,_1446,_1447){
var _1448=_1446("curam.widget.MenuItem",_1445,{templateString:_1447,onClickValue:"",_onClickAll:function(evt){
var _1449=curam.tab.getTabContainer();
var _144a=_1449.getChildren();
for(var i=0;i<_144a.length;i++){
if(_144a[i].closable){
_1449.closeChild(_144a[i]);
}
}
},_setLabelAttr:function(val){
var _144b=/<[a-zA-Z\/][^>]*>/g;
var _144c=val.replace(_144b,"");
this._set("label",_144c);
var _144d="";
var text;
var ndx=val.search(/{\S}/);
if(ndx>=0){
_144d=val.charAt(ndx+1);
var _144e=val.substr(0,ndx);
var _144f=val.substr(ndx+3);
text=_144e+_144d+_144f;
val=_144e+"<span class=\"dijitMenuItemShortcutKey\">"+_144d+"</span>"+_144f;
}else{
text=val;
}
text=text.replace(_144b,"");
this.domNode.setAttribute("aria-label",text+" "+this.accelKey);
this.containerNode.innerHTML=val;
this._set("shortcutKey",_144d);
}});
return _1448;
});
},"curam/cdsl/Struct":function(){
define(["dojo/_base/declare","dojo/_base/lang","./_base/_StructBase"],function(_1450,lang,_1451){
var _1452=_1450(_1451,{constructor:function(data){
lang.mixin(this,this._data);
}});
return _1452;
});
},"dijit/DropDownMenu":function(){
define(["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_MenuBase"],function(_1453,keys,_1454,_1455){
return _1453("dijit.DropDownMenu",_1455,{templateString:_1454,baseClass:"dijitMenu",_onUpArrow:function(){
this.focusPrev();
},_onDownArrow:function(){
this.focusNext();
},_onRightArrow:function(evt){
this._moveToPopup(evt);
evt.stopPropagation();
evt.preventDefault();
},_onLeftArrow:function(evt){
if(this.parentMenu){
if(this.parentMenu._isMenuBar){
this.parentMenu.focusPrev();
}else{
this.onCancel(false);
}
}else{
evt.stopPropagation();
evt.preventDefault();
}
}});
});
},"cm/_base/_dom":function(){
define(["dojo/dom","dojo/dom-style","dojo/dom-class"],function(dom,_1456,_1457){
var cm=dojo.global.cm||{};
dojo.global.cm=cm;
dojo.mixin(cm,{nextSibling:function(node,_1458){
return cm._findSibling(node,_1458,true);
},prevSibling:function(node,_1459){
return cm._findSibling(node,_1459,false);
},getInput:function(name,_145a){
if(!dojo.isString(name)){
return name;
}
var _145b=dojo.query("input[name='"+name+"'],select[name='"+name+"']");
return _145a?(_145b.length>0?_145b:null):(_145b.length>0?_145b[0]:null);
},getParentByClass:function(node,_145c){
node=node.parentNode;
while(node){
if(_1457.contains(node,_145c)){
return node;
}
node=node.parentNode;
}
return null;
},getParentByType:function(node,type){
node=node.parentNode;
type=type.toLowerCase();
var _145d="html";
while(node){
if(node.tagName.toLowerCase()==_145d){
break;
}
if(node.tagName.toLowerCase()==type){
return node;
}
node=node.parentNode;
}
return null;
},replaceClass:function(node,_145e,_145f){
_1457.remove(node,_145f);
_1457.add(node,_145e);
},setClass:function(node,_1460){
node=dom.byId(node);
var cs=new String(_1460);
try{
if(typeof node.className=="string"){
node.className=cs;
}else{
if(node.setAttribute){
node.setAttribute("class",_1460);
node.className=cs;
}else{
return false;
}
}
}
catch(e){
dojo.debug("dojo.html.setClass() failed",e);
}
return true;
},_findSibling:function(node,_1461,_1462){
if(!node){
return null;
}
if(_1461){
_1461=_1461.toLowerCase();
}
var param=_1462?"nextSibling":"previousSibling";
do{
node=node[param];
}while(node&&node.nodeType!=1);
if(node&&_1461&&_1461!=node.tagName.toLowerCase()){
return cm[_1462?"nextSibling":"prevSibling"](node,_1461);
}
return node;
},getViewport:function(){
var d=dojo.doc,dd=d.documentElement,w=window,b=dojo.body();
if(dojo.isMozilla){
return {w:dd.clientWidth,h:w.innerHeight};
}else{
if(!dojo.isOpera&&w.innerWidth){
return {w:w.innerWidth,h:w.innerHeight};
}else{
if(!dojo.isOpera&&dd&&dd.clientWidth){
return {w:dd.clientWidth,h:dd.clientHeight};
}else{
if(b.clientWidth){
return {w:b.clientWidth,h:b.clientHeight};
}
}
}
}
return null;
},toggleDisplay:function(node){
_1456.set(node,"display",_1456.get(node,"display")=="none"?"":"none");
},endsWith:function(str,end,_1463){
if(_1463){
str=str.toLowerCase();
end=end.toLowerCase();
}
if((str.length-end.length)<0){
return false;
}
return str.lastIndexOf(end)==str.length-end.length;
},hide:function(n){
_1456.set(n,"display","none");
},show:function(n){
_1456.set(n,"display","");
}});
return cm;
});
},"dojo/store/Memory":function(){
define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(_1464,_1465,_1466){
var base=null;
return _1464("dojo.store.Memory",base,{constructor:function(_1467){
for(var i in _1467){
this[i]=_1467[i];
}
this.setData(this.data||[]);
},data:null,idProperty:"id",index:null,queryEngine:_1466,get:function(id){
return this.data[this.index[id]];
},getIdentity:function(_1468){
return _1468[this.idProperty];
},put:function(_1469,_146a){
var data=this.data,index=this.index,_146b=this.idProperty;
var id=_1469[_146b]=(_146a&&"id" in _146a)?_146a.id:_146b in _1469?_1469[_146b]:Math.random();
if(id in index){
if(_146a&&_146a.overwrite===false){
throw new Error("Object already exists");
}
data[index[id]]=_1469;
}else{
index[id]=data.push(_1469)-1;
}
return id;
},add:function(_146c,_146d){
(_146d=_146d||{}).overwrite=false;
return this.put(_146c,_146d);
},remove:function(id){
var index=this.index;
var data=this.data;
if(id in index){
data.splice(index[id],1);
this.setData(data);
return true;
}
},query:function(query,_146e){
return _1465(this.queryEngine(query,_146e)(this.data));
},setData:function(data){
if(data.items){
this.idProperty=data.identifier||this.idProperty;
data=this.data=data.items;
}else{
this.data=data;
}
this.index={};
for(var i=0,l=data.length;i<l;i++){
this.index[data[i][this.idProperty]]=i;
}
}});
});
},"dojo/hccss":function(){
define(["require","./_base/config","./dom-class","./dom-style","./has","./domReady","./_base/window"],function(_146f,_1470,_1471,_1472,has,_1473,win){
has.add("highcontrast",function(){
var div=win.doc.createElement("div");
div.style.cssText="border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;"+"background-image: url(\""+(_1470.blankGif||_146f.toUrl("./resources/blank.gif"))+"\");";
win.body().appendChild(div);
var cs=_1472.getComputedStyle(div),bkImg=cs.backgroundImage,hc=(cs.borderTopColor==cs.borderRightColor)||(bkImg&&(bkImg=="none"||bkImg=="url(invalid-url:)"));
if(has("ie")<=8){
div.outerHTML="";
}else{
win.body().removeChild(div);
}
return hc;
});
_1473(function(){
if(has("highcontrast")){
_1471.add(win.body(),"dj_a11y");
}
});
return has;
});
},"curam/inspection/Layer":function(){
define(["curam/define"],function(def){
curam.define.singleton("curam.inspection.Layer",{register:function(_1474,inst){
require(["curam/util"]);
var tWin=curam.util.getTopmostWindow();
return tWin.inspectionManager?tWin.inspectionManager.observe(_1474,inst):null;
}});
var ref=curam.inspection.Layer;
require(["curam/util"]);
ref.tWin=curam.util.getTopmostWindow();
var _1475=ref.tWin.inspectionManager?ref.tWin.inspectionManager.getDirects():[];
if(_1475.length>0){
require(_1475);
}
return ref;
});
},"dijit/form/_ListBase":function(){
define(["dojo/_base/declare","dojo/on","dojo/window"],function(_1476,on,_1477){
return _1476("dijit.form._ListBase",null,{selected:null,_listConnect:function(_1478,_1479){
var self=this;
return self.own(on(self.containerNode,on.selector(function(_147a,_147b,_147c){
return _147a.parentNode==_147c;
},_1478),function(evt){
self[_1479](evt,this);
}));
},selectFirstNode:function(){
var first=this.containerNode.firstChild;
while(first&&first.style.display=="none"){
first=first.nextSibling;
}
this._setSelectedAttr(first,true);
},selectLastNode:function(){
var last=this.containerNode.lastChild;
while(last&&last.style.display=="none"){
last=last.previousSibling;
}
this._setSelectedAttr(last,true);
},selectNextNode:function(){
var _147d=this.selected;
if(!_147d){
this.selectFirstNode();
}else{
var next=_147d.nextSibling;
while(next&&next.style.display=="none"){
next=next.nextSibling;
}
if(!next){
this.selectFirstNode();
}else{
this._setSelectedAttr(next,true);
}
}
},selectPreviousNode:function(){
var _147e=this.selected;
if(!_147e){
this.selectLastNode();
}else{
var prev=_147e.previousSibling;
while(prev&&prev.style.display=="none"){
prev=prev.previousSibling;
}
if(!prev){
this.selectLastNode();
}else{
this._setSelectedAttr(prev,true);
}
}
},_setSelectedAttr:function(node,_147f){
if(this.selected!=node){
var _1480=this.selected;
if(_1480){
this.onDeselect(_1480);
}
if(node){
if(_147f){
_1477.scrollIntoView(node);
}
this.onSelect(node);
}
this._set("selected",node);
}else{
if(node){
this.onSelect(node);
}
}
}});
});
},"curam/util/DialogObject":function(){
define(["dojo/_base/declare","curam/dialog","curam/util"],function(_1481){
var _1482=_1481("curam.util.DialogObject",null,{_id:null,constructor:function(_1483,id){
if(!id){
var _1484=window.top.dojo.subscribe("/curam/dialog/uim/opened/"+_1483,this,function(_1485){
this._id=_1485;
window.top.dojo.unsubscribe(_1484);
});
}else{
this._id=id;
}
},registerBeforeCloseHandler:function(_1486){
var _1487=window.top.dojo.subscribe("/curam/dialog/BeforeClose",this,function(_1488){
if(_1488==this._id){
window.top.dojo.unsubscribe(_1487);
_1486();
}
});
},registerOnDisplayHandler:function(_1489){
if(curam.dialog._displayed==true){
_1489(curam.dialog._size);
}else{
var ut=window.top.dojo.subscribe("/curam/dialog/displayed",this,function(_148a,size){
if(_148a==this._id){
window.top.dojo.unsubscribe(ut);
_1489(size);
}
});
}
},close:function(_148b,_148c,_148d){
var win=curam.util.UimDialog._getDialogFrameWindow(this._id);
var _148e=win.curam.dialog.getParentWindow(win);
if(_148b&&!_148c){
win.curam.dialog.forceParentRefresh();
curam.dialog.doRedirect(_148e,null);
}else{
if(_148c){
var _148f=_148c;
if(_148c.indexOf("Page.do")==-1){
_148f=_148c+"Page.do"+curam.util.makeQueryString(_148d);
}
curam.dialog.doRedirect(_148e,_148f);
}
}
curam.dialog.closeModalDialog();
}});
return _1482;
});
},"curam/define":function(){
define(["dojo/_base/lang"],function(lang){
var _1490=this;
if(typeof (_1490.curam)=="undefined"){
_1490.curam={};
}
if(typeof (_1490.curam.define)=="undefined"){
lang.mixin(_1490.curam,{define:{}});
}
lang.mixin(_1490.curam.define,{singleton:function(_1491,_1492){
var parts=_1491.split(".");
var _1493=window;
for(var i=0;i<parts.length;i++){
var part=parts[i];
if(typeof _1493[part]=="undefined"){
_1493[part]={};
}
_1493=_1493[part];
}
if(_1492){
lang.mixin(_1493,_1492);
}
}});
return _1490.curam.define;
});
},"curam/util/ui/ApplicationTabbedUiController":function(){
define(["dojo/_base/declare","curam/inspection/Layer","curam/debug","dojox/layout/ContentPane","curam/tab"],function(_1494,layer,debug){
var _1495=_1494("curam.util.ui.ApplicationTabbedUiController",null,{_tabContainer:null,constructor:function(_1496){
curam.util.extendXHR();
this._tabContainer=_1496;
layer.register("curam/util/ui/ApplicationTabbedUiController",this);
},findOpenTab:function(_1497){
var _1498=_1497.tabDescriptor;
var _1499=curam.tab.getTabContainer(_1498.sectionID);
var _149a=null;
var tabs=undefined;
var _149b=undefined;
if(_1499!=undefined){
tabs=_1499.getChildren();
_149b=_1499.selectedChildWidget;
}
if(_149b){
var selTD=_149b.tabDescriptor;
this._log(debug.getProperty("curam.util.ui.ApplicationTabbedUiController.testing"));
if(_1497.uimPageRequest.openInCurrentTab||(selTD.tabID==_1498.tabID&&selTD.matchesPageRequest(_1497.uimPageRequest))){
_149a=_149b;
}
}
if(!_149a&&tabs){
var _149c=true;
this._log(debug.getProperty("curam.util.ui.ApplicationTabbedUiController.searching")+" "+tabs.length+" "+debug.getProperty("curam.util.ui.ApplicationTabbedUiController.tabs"));
for(var i=0;i<tabs.length;i++){
var _149d=tabs[i];
var curTD=_149d.tabDescriptor;
if(curTD&&curTD.tabID==_1498.tabID){
if((_149c&&curTD.tabSignature==curTD.tabID)||curTD.matchesPageRequest(_1497.uimPageRequest)){
_149a=_149d;
break;
}
_149c=false;
}
}
}
this._log(debug.getProperty("curam.util.ui.ApplicationTabbedUiController.searched")+" '"+_1498.tabID+"'. "+debug.getProperty("curam.util.ui.ApplicationTabbedUiController.found")+" "+(_149a?debug.getProperty("curam.util.ui.ApplicationTabbedUiController.a"):debug.getProperty("curam.util.ui.ApplicationTabbedUiController.no"))+" "+debug.getProperty("curam.util.ui.ApplicationTabbedUiController.match"));
return _149a;
},openPageInCurrentTab:function(_149e){
var _149f=curam.tab.getSelectedTab();
var _14a0=undefined;
if(_149f){
_14a0=dojo.query(".nav-panel",_149f.domNode)[0];
}
if(_14a0){
var _14a1=dojo.query(".content-area-container",_14a0)[0];
if(!_14a1){
_14a1=_149f.domNode;
}
dojo.publish("/curam/progress/display",[_14a1]);
var _14a2;
if(_149e.getURL().indexOf("?")==-1){
_14a2="?";
}else{
_14a2="&";
}
var loc=curam.config?curam.config.locale:jsL;
var _14a3=dojo.global.jsBaseURL+"/"+loc+"/"+_149e.getURL()+_14a2+curam.tab.getTabController().getCacheBusterParameter();
if(_149e.pageHolder){
_149e.pageHolder.location.href=_14a3;
}else{
var _14a4=dojo.query(".contentPanelFrame",_14a0)[0];
_14a4.src=_14a3;
}
}
},_openInCurrentTab:function(_14a5){
var _14a6=curam.tab.getSelectedTab();
var _14a7=undefined;
if(_14a6){
_14a7=dojo.query(".nav-panel",_14a6.domNode)[0];
}
if(_14a7){
var _14a8=dojo.query(".contentPanelFrame",_14a7)[0];
_14a5.cdejParameters["o3ctx"]="4096";
var loc=curam.config?curam.config.locale:jsL;
var url=loc+"/"+_14a5.getURL();
if(url.indexOf("?")==-1){
url+="?";
}else{
url+="&";
}
_14a8.src=url+curam.tab.getTabController().getCacheBusterParameter();
}
},refreshExistingPageInTab:function(tab){
var _14a9=curam.tab.getContentPanelIframe(tab);
_14a9.contentWindow.location.reload(false);
},selectTab:function(tab){
this._tabContainer.selectChild(tab);
},createTab:function(_14aa){
this._log("createTab(): "+debug.getProperty("curam.util.ui.ApplicationTabbedUiController.start"));
var _14ab=_14aa.tabDescriptor;
var _14ac="";
if(_14ab.tabContent&&_14ab.tabContent.tabName){
_14ac=_14ab.tabContent.tabName;
}
var cp=new dojox.layout.ContentPane({tabDescriptor:_14ab,uimPageRequest:_14aa.uimPageRequest,title:_14ac,closable:!_14ab.isHomePage,preventCache:true,"class":"tab-content-holder dijitContentPane "+"dijitTabContainerTop-child "+"dijitTabContainerTop-dijitContentPane dijitTabPane",onDownloadStart:function(){
return "&nbsp;";
}});
var _14ad=[];
_14aa.uimPageRequest.cdejParameters["o3ctx"]="4096";
var _14ae=dojo.connect(cp,"onDownloadEnd",null,function(){
curam.util.fireTabOpenedEvent(cp.id);
});
_14ad.push(_14ae);
_14ae=dojo.subscribe("/curam/tab/closing",null,function(twid){
if(twid==cp.id){
curam.tab.doExecuteOnTabClose(cp.id);
}
});
_14ad.push(_14ae);
_14ad.push(dojo.connect(cp,"destroy",function(){
dojo.forEach(_14ad,dojo.disconnect);
}));
_14ae=dojo.connect(cp,"set",function(name,value){
if(name=="title"&&arguments.length==2){
curam.debug.log(debug.getProperty("curam.util.ui.ApplicationTabbedUiController.title"));
var _14af=curam.util.getTopmostWindow().dojo;
_14af.global._tabTitle=value;
try{
_14af.publish("/curam/_tabTitle",[value]);
}
catch(err){
}
cp.tabDescriptor.setTabContent(_14aa.uimPageRequest,value);
var _14b0=curam.tab.getSelectedTab();
if(_14b0){
var _14b1=_14b0.domNode.parentNode;
if(_14b1){
_14b1.focus();
}
}
}
});
_14ad.push(_14ae);
_14ae=dojo.connect(cp,"onClose",function(){
new curam.tab.TabSessionManager().tabClosed(cp.tabDescriptor);
});
_14ad.push(_14ae);
var qs=_14aa.uimPageRequest.getQueryString();
var href="TabContent.do"+"?"+curam.tab.getTabController().COMMAND_PARAM_NAME+"=PAGE&"+curam.tab.getTabController().PAGE_ID_PARAM_NAME+"="+_14aa.uimPageRequest.pageID+(qs.length>0?"&"+qs:"")+"&o3tabid="+_14ab.tabID+"&o3tabWidgetId="+cp.id;
this._log(debug.getProperty("curam.util.ui.ApplicationTabbedUiController.href")+" "+href);
cp.set("href",href);
this._log(debug.getProperty("curam.util.ui.ApplicationTabbedUiController.finished")+" ",cp.tabDescriptor);
return cp;
},insertTabIntoApp:function(_14b2,_14b3,_14b4){
var _14b5=null;
if(_14b3){
if(this._tabContainer.hasChildren()){
_14b5=this._tabContainer.selectedChildWidget;
}
this._tabContainer.addChild(_14b2,0);
}else{
if(_14b4){
var _14b6=-1;
if(this._tabContainer.hasChildren()){
var _14b7=this._tabContainer.selectedChildWidget;
var tabs=this._tabContainer.tablist.getChildren();
for(var i=0;i<tabs.length;i++){
var _14b8=tabs[i];
if(_14b8&&_14b8._curamPageId==_14b7.id){
_14b6=i;
break;
}
}
}
if(_14b6!=-1){
this._tabContainer.addChild(_14b2,_14b6+1);
}else{
this._tabContainer.addChild(_14b2);
}
}else{
this._tabContainer.addChild(_14b2);
}
}
return _14b5;
},_log:function(msg,_14b9){
if(curam.debug.enabled()){
curam.debug.log("curam.util.ui.ApplicationTabbedUiController: "+msg+(_14b9?" "+dojo.toJson(_14b9):""));
}
}});
return _1495;
});
},"dojo/dnd/move":function(){
define(["../_base/declare","../dom-geometry","../dom-style","./common","./Mover","./Moveable"],function(_14ba,_14bb,_14bc,dnd,Mover,_14bd){
var _14be=_14ba("dojo.dnd.move.constrainedMoveable",_14bd,{constraints:function(){
},within:false,constructor:function(node,_14bf){
if(!_14bf){
_14bf={};
}
this.constraints=_14bf.constraints;
this.within=_14bf.within;
},onFirstMove:function(mover){
var c=this.constraintBox=this.constraints.call(this,mover);
c.r=c.l+c.w;
c.b=c.t+c.h;
if(this.within){
var mb=_14bb.getMarginSize(mover.node);
c.r-=mb.w;
c.b-=mb.h;
}
},onMove:function(mover,_14c0){
var c=this.constraintBox,s=mover.node.style;
this.onMoving(mover,_14c0);
_14c0.l=_14c0.l<c.l?c.l:c.r<_14c0.l?c.r:_14c0.l;
_14c0.t=_14c0.t<c.t?c.t:c.b<_14c0.t?c.b:_14c0.t;
s.left=_14c0.l+"px";
s.top=_14c0.t+"px";
this.onMoved(mover,_14c0);
}});
var _14c1=_14ba("dojo.dnd.move.boxConstrainedMoveable",_14be,{box:{},constructor:function(node,_14c2){
var box=_14c2&&_14c2.box;
this.constraints=function(){
return box;
};
}});
var _14c3=_14ba("dojo.dnd.move.parentConstrainedMoveable",_14be,{area:"content",constructor:function(node,_14c4){
var area=_14c4&&_14c4.area;
this.constraints=function(){
var n=this.node.parentNode,s=_14bc.getComputedStyle(n),mb=_14bb.getMarginBox(n,s);
if(area=="margin"){
return mb;
}
var t=_14bb.getMarginExtents(n,s);
mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;
if(area=="border"){
return mb;
}
t=_14bb.getBorderExtents(n,s);
mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;
if(area=="padding"){
return mb;
}
t=_14bb.getPadExtents(n,s);
mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;
return mb;
};
}});
return {constrainedMoveable:_14be,boxConstrainedMoveable:_14c1,parentConstrainedMoveable:_14c3};
});
},"curam/ui/UIController":function(){
define(["dojo/_base/declare","dojo/_base/lang","dojo/json","dojo/dom-style","dojo/dom-attr","curam/inspection/Layer","curam/util/Request","curam/define","curam/debug","curam/util/RuntimeContext","curam/tab/TabDescriptor","curam/util/ui/ApplicationTabbedUiController"],function(_14c5,lang,_14c6,_14c7,_14c8,layer,_14c9,_14ca,debug){
curam.define.singleton("curam.ui.UIController",{TAB_TOPIC:"/app/tab",ROOT_OBJ:"curam.ui.UIController",PAGE_ASSOCIATIONS:{},RESOLVE_PAGES:{},PAGE_ID_PARAM_NAME:"o3pid",COMMAND_PARAM_NAME:"o3c",CACHE_BUSTER:0,CACHE_BUSTER_PARAM_NAME:"o3nocache",DUPLICATE_TAB_MAPPING_ERROR:"dupTabError",UNASSOCIATED_SHORTCUT_ERROR:"looseShortcutError",LOAD_MASK_TIMEOUT:15000,TABS_INFO_MODAL_TITLE_PROP_NAME:"title.info",TABS_ERROR_MODAL_TITLE_PROP_NAME:"title.error",TABS_INFO_MODAL_MSG_PROP_NAME:"message.max.tabs.info",TABS_ERROR_MODAL_MSG_PROP_NAME:"message.max.tabs.error",TABS_MSG_PLACEHOLDER_MAX_TABS:15,TABS_SEQUENTIAL_ORDER:false,MAX_NUM_TABS:15,MAX_TABS_MODAL_SIZE:"width=470,height=80",TAB_INSTANTIATOR:null,initialize:function(_14cb){
curam.ui.UIController._log("curam.ui.UIController.initialize()");
curam.ui.UIController._log("dojo.isQuirks: "+dojo.isQuirks);
window.rootObject=curam.ui.UIController.ROOT_OBJ;
curam.util.subscribe(curam.ui.UIController.TAB_TOPIC,curam.ui.UIController.tabTopicHandler);
curam.util.subscribe("tab.title.name.set",curam.ui.UIController.setTabTitleAndName);
if(_14cb){
new curam.tab.TabSessionManager().init(_14cb);
}else{
new curam.tab.TabSessionManager().init();
}
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.event"));
},ajaxPostFailure:function(err){
curam.ui.UIController._log("========= "+debug.getProperty("curam.ui.UIController.test")+" JSON "+debug.getProperty("curam.ui.UIController.servlet.failure")+" =========");
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.error")+" "+err);
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.args")+" "+ioargs);
curam.ui.UIController._log("============================================");
},instantiateTab:function(_14cc,_14cd,_14ce){
var _14cf=_14ce?2:1;
dojo.publish("curam/tab/quantityExpectedFrames/load",[_14cd,_14cf]);
var _14d0;
if(curam.ui.UIController.TAB_INSTANTIATOR!=null){
_14d0=curam.ui.UIController.TAB_INSTANTIATOR;
}else{
_14d0=dijit.byId(_14cd);
}
if(_14d0){
curam.util.getTopmostWindow().dojo.publish("/curam/application/tab/requested",[_14cd]);
var td=_14d0.tabDescriptor;
var _14d1="'"+td.tabID+"/"+_14cd+"'";
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.instantiating")+" "+_14d1+" "+debug.getProperty("curam.ui.UIController.with.signature"));
td.setTabSignature(_14cc,_14d0.uimPageRequest);
var _14d2=function(){
var _14d3=dojo.query("#"+_14cd+" .tab-wrapper .tab-load-mask")[0];
if(_14d3&&_14c7.get(_14d3,"display")!="none"){
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.revealing")+" "+_14d1+" "+debug.getProperty("curam.ui.UIController.now"));
_14c7.set(_14d3,"display","none");
curam.util.getTopmostWindow().dojo.publish("/curam/application/tab/revealed",[_14cd]);
curam.debug.log("curam.ui.UIController.revealTabNow function calling curam.util.setBrowserTabTitle");
curam.util.setBrowserTabTitle();
}
};
if(!_14ce){
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.no.details"));
_14d2();
}else{
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.has.details")+_14d1+debug.getProperty("curam.ui.UIController.listeners"));
dojo.global.tabLoadMaskTimeout=setTimeout(_14d2,curam.ui.UIController.LOAD_MASK_TIMEOUT);
var _14d4=false;
var _14d5=function(){
if(_14d4){
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.panels.loaded"));
_14d2();
clearTimeout(dojo.global.tabLoadMaskTimeout);
}else{
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.panels.not.loaded")+" "+_14d1+" "+debug.getProperty("curam.ui.UIController.later"));
_14d4=true;
}
};
var _14d6=dojo.connect(_14d0,"onDownloadEnd",function(){
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.content.pane.loaded")+" "+debug.getProperty("curam.ui.UIController.reveal")+" "+_14d1+" "+debug.getProperty("curam.ui.UIController.now"));
_14d5();
dojo.disconnect(_14d6);
});
var _14d7=curam.util.getTopmostWindow().dojo.subscribe("/curam/frame/detailsPanelLoaded",function(_14d8,_14d9){
if(_14cd==_14d9){
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.details.panel.loaded")+" "+_14d1+" "+ +debug.getProperty("curam.ui.UIController.now"));
_14d5();
dojo.unsubscribe(_14d7);
}
});
}
var _14da=curam.tab.getHandlerForTab(function(_14db,_14dc){
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.content.pane.changed")+" "+_14d1+" "+debug.getProperty("curam.ui.UIController.now"));
curam.ui.UIController._contentPanelUpdated(_14d0);
},_14cd);
var _14dd=curam.util.getTopmostWindow().dojo.subscribe("/curam/main-content/page/loaded",null,_14da);
curam.tab.unsubscribeOnTabClose(_14dd,_14cd);
}else{
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.tab.not.found")+" '"+_14cd+"'.");
}
},_contentPanelUpdated:function(tab){
var _14de=curam.tab.getContentPanelIframe(tab);
tab.tabDescriptor.setTabContent(new curam.ui.PageRequest(_14de.src),null);
},getCacheBusterParameter:function(){
return curam.ui.UIController.CACHE_BUSTER_PARAM_NAME+"="+new Date().getTime()+"_"+curam.ui.UIController.CACHE_BUSTER++;
},_getTabbedUiApi:function(_14df){
var _14e0=curam.ui.UIController._selectSection(_14df);
return new curam.util.ui.ApplicationTabbedUiController(_14e0);
},_selectSection:function(_14e1){
var _14e2=_14e1?!_14e1.openInBackground:true;
var _14e3=dijit.byId(curam.tab.SECTION_TAB_CONTAINER_ID);
var _14e4=_14e1?_14e1.tabDescriptor.sectionID:curam.tab.getCurrentSectionId();
var _14e5=dijit.byId(_14e4+"-sbc");
var _14e6=curam.tab.getTabContainer(_14e4);
if(_14e2){
if(_14e5){
_14e3.selectChild(_14e5);
}else{
_14e3.selectChild(_14e6);
}
}
return _14e6;
},tabTopicHandler:function(_14e7){
var api=curam.ui.UIController._getTabbedUiApi(_14e7);
curam.ui.UIController._doHandleTabEvent(_14e7,api);
},_doHandleTabEvent:function(_14e8,_14e9){
var _14ea=_14e8.tabDescriptor;
var _14eb=_14ea.sectionID;
var _14ec=curam.tab.getTabContainer(_14eb);
_14e8.tabDescriptor.openInBackground=_14e8.openInBackground;
var _14ed=curam.util.getTopmostWindow().dojo;
var isNew=false;
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.fired")+" "+_14eb+" : "+_14ea.tabID+" : "+_14e8.uimPageRequest.pageID);
var tab=_14e9.findOpenTab(_14e8);
if(tab===null&&lang.exists("selectedChildWidget.tabDescriptor.isHomePage",_14ec)&&_14ec.selectedChildWidget.tabDescriptor.isHomePage===true&&_14ec.selectedChildWidget.tabDescriptor.tabID===_14e8.tabDescriptor.tabID){
tab=_14ec.selectedChildWidget;
}
if(!tab){
if(_14ec==undefined){
return false;
}
var _14ee=_14ec.getChildren().length+1;
var _14ef=this.MAX_NUM_TABS;
var _14f0=this._checkMaxNumOpenTabsExceeded(_14ef,_14ee);
if(_14f0){
return true;
}
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.creating"));
tab=_14e9.createTab(_14e8);
dojo.publish("/curam/progress/display",[tab.domNode]);
tab.connect(tab,"onLoad",function(){
var _14f1=curam.tab.getContentPanelIframe(tab);
_14c8.set(_14f1,"src",_14c8.get(_14f1,"data-content-url"));
_14ed.publish("/curam/application/tab/ready",[tab]);
});
isNew=true;
}
if(isNew){
var _14f2=_14e9.insertTabIntoApp(tab,_14e8.uimPageRequest.isHomePage,this.TABS_SEQUENTIAL_ORDER);
if(!_14e8.openInBackground){
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.new.fore.tab"),tab.tabDescriptor);
_14e9.selectTab(tab);
if(tab.controlButton!="undefined"){
curam.util.setLastOpenedTabButton(dijit.byId(tab.controlButton.id));
}
if(_14f2!=null){
_14e9.selectTab(_14f2);
if(_14f2.controlButton!="undefined"){
curam.util.setLastOpenedTabButton(dijit.byId(_14f2.controlButton.id));
}
}
}else{
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.new.back.tab"),tab.tabDescriptor);
}
this._checkMaxNumOpenTabsReached(_14ef,_14ee);
}else{
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.show.page"),tab.tabDescriptor);
_14e9.selectTab(tab);
if(_14e8.uimPageRequest.justRefresh){
_14e9.refreshExistingPageInTab(tab);
}else{
if(_14e8.uimPageRequest.forceLoad){
_14e9.openPageInCurrentTab(_14e8.uimPageRequest);
}else{
var _14f3=tab.tabDescriptor;
var _14f4=_14f3.tabID==_14e8.tabDescriptor.tabID&&_14f3.matchesPageRequest(_14e8.uimPageRequest);
var _14f5=_14f3.tabContent.pageID==_14e8.uimPageRequest.pageID;
if(_14f4&&!_14f5){
_14e9.openPageInCurrentTab(_14e8.uimPageRequest);
}
_14f5&&_14f4&&curam.util.getTopmostWindow().dojo.publish("curam/tab/contextRefresh",[true]);
}
}
}
return true;
},_checkMaxNumOpenTabsReached:function(_14f6,_14f7){
if(_14f7==_14f6){
this.TABS_MSG_PLACEHOLDER_MAX_TABS=_14f6;
curam.util.openGenericErrorModalDialog(this.MAX_TABS_MODAL_SIZE,this.TABS_INFO_MODAL_TITLE_PROP_NAME,this.TABS_INFO_MODAL_MSG_PROP_NAME,this.TABS_MSG_PLACEHOLDER_MAX_TABS,false);
return true;
}
},_checkMaxNumOpenTabsExceeded:function(_14f8,_14f9){
if(_14f9>_14f8){
this.TABS_MSG_PLACEHOLDER_MAX_TABS=_14f8;
curam.util.openGenericErrorModalDialog(this.MAX_TABS_MODAL_SIZE,this.TABS_ERROR_MODAL_TITLE_PROP_NAME,this.TABS_ERROR_MODAL_MSG_PROP_NAME,this.TABS_MSG_PLACEHOLDER_MAX_TABS,true);
return true;
}
},checkPage:function(_14fa,_14fb){
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.checking.page")+" '"+_14fa.pageID+"'.");
var _14fc=null;
var _14fd=null;
var _14fe=null;
var _14ff=null;
var _1500=_14fb;
if(_14fb&&typeof _14fb!="function"){
_1500=_14fb.unmappedPageLoader;
_14fc=_14fb.preferredTabs;
_14fd=_14fb.moreThanOneTabMappedCallback;
_14fe=_14fb.shouldLoadPage;
_14ff=_14fb.successCallback;
}
if(typeof _14fe==="undefined"||_14fe===null){
_14fe=true;
}
if(_14fa.pageID==""){
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.ignoring")+" "+_14fa.getURL());
return;
}
var _1501=curam.ui.UIController._ensurePageAssociationInitialized(_14fa,function(){
if(curam.ui.UIController.isPageAssociationInitialized(_14fa.pageID,curam.ui.UIController.PAGE_ASSOCIATIONS)){
curam.ui.UIController.checkPage(_14fa,_14fb);
}else{
var msg=debug.getProperty("curam.ui.UIController.failed");
curam.ui.UIController._log(msg);
throw new Error(msg);
}
});
if(_1501){
try{
var _1502=curam.ui.UIController.getTabDescriptorForPage(_14fa.pageID,curam.ui.UIController.PAGE_ASSOCIATIONS,_14fc);
if(_1502!=null){
if(_14fe){
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.page.opened")+" '"+_14fa.pageID+"'. "+debug.getProperty("curam.ui.UIController.sec.id")+" '"+_1502.sectionID+"'. "+debug.getProperty("curam.ui.UIController.tab.id")+" '"+_1502.tabID+"'.");
if(_14fa.isHomePage){
_1502.isHomePage=true;
}
_1502.setTabContent(_14fa);
dojo.publish(curam.ui.UIController.TAB_TOPIC,[new curam.ui.OpenTabEvent(_1502,_14fa)]);
}
if(_14ff){
_14ff();
}
}else{
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.page.id")+" '"+_14fa.pageID+"'.");
if(!_1500||typeof _1500!="function"){
if(typeof curam.tab.getSelectedTab()=="undefined"){
throw {name:curam.ui.UIController.UNASSOCIATED_SHORTCUT_ERROR,message:"ERROR:The requested page "+_14fa.pageID+" is not associated with any tab and there is no "+"tab to open it!"};
}
if(_14fe){
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.load"));
curam.ui.UIController._getTabbedUiApi().openPageInCurrentTab(_14fa);
}
}else{
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.unmapped"));
_1500(_14fa);
}
}
}
catch(e){
if(e.name==curam.ui.UIController.DUPLICATE_TAB_MAPPING_ERROR){
if(!_14fd){
alert(e.message);
curam.ui.UIController._getTabbedUiApi().openPageInCurrentTab(_14fa);
}else{
_14fd(_14fa);
}
return null;
}else{
if(e.name==curam.ui.UIController.UNASSOCIATED_SHORTCUT_ERROR){
alert(e.message);
console.error(e.message);
return null;
}else{
throw e;
}
}
}
}
},isPageAssociationInitialized:function(_1503,_1504){
var _1505=_1504[_1503];
return !(typeof _1505=="undefined");
},_ensurePageAssociationInitialized:function(_1506,_1507){
if(!curam.ui.UIController.isPageAssociationInitialized(_1506.pageID,curam.ui.UIController.PAGE_ASSOCIATIONS)){
var path="/config/tablayout/associated["+_1506.pageID+"]["+USER_APPLICATION_ID+"]";
new curam.ui.ClientDataAccessor().getRaw(path,function(data){
curam.ui.UIController.initializePageAssociations(_1506,data);
_1507();
},function(error,args){
var msg=curam_ui_UIController_data_error+" "+error;
curam.ui.UIController._log(msg);
if(!_14c9.checkLoginPage(args.xhr)){
alert(msg);
}
var _1508=curam.util.getTopmostWindow();
_1508.dojo.publish("/curam/progress/unload");
_1508.location.reload(false);
},null);
return false;
}
return true;
},initializePageAssociations:function(_1509,_150a){
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.got.assoc")+" '"+_1509.pageID+"'.");
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.assoc"),_150a);
if(_150a){
if(_150a.tabIDs&&_150a.tabIDs.length>0){
curam.ui.UIController.PAGE_ASSOCIATIONS[_1509.pageID]=_150a;
}else{
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.no.mappings")+" '"+_1509.pageID+"'.");
curam.ui.UIController.PAGE_ASSOCIATIONS[_1509.pageID]=null;
}
}else{
throw "initializePageAssociations did not recieve a valid response.";
}
},getTabDescriptorForPage:function(_150b,_150c,_150d){
var _150e=_150c[_150b];
if(!curam.ui.UIController.isPageAssociationInitialized(_150b,_150c)){
throw "Page associations have not been initialized for: "+_150b;
}
if(_150e!=null){
var tabID=curam.ui.UIController.getTabFromMappings(_150e.tabIDs,curam.tab.getSelectedTab(),_150d);
return new curam.tab.TabDescriptor(_150e.sectionID,tabID);
}else{
return null;
}
},getTabFromMappings:function(_150f,_1510,_1511){
if(!_1510){
if(_150f.length==1){
return _150f[0];
}else{
if(_150f.length>1){
if(_1511&&_1511.length>0){
for(var i=0;i<_1511.length;i++){
if(_150f.indexOf(_1511[i])>=0){
return _1511[i];
}
}
}
throw "Home page mapped to multiple tabs";
}
}
}
if(_150f.length>1&&_1511&&_1511.length>0){
for(var i=0;i<_1511.length;i++){
if(_150f.indexOf(_1511[i])>=0){
return _1511[i];
}
}
}
var _1512=_1510.tabDescriptor.tabID;
for(var i=0;i<_150f.length;i++){
if(_1512==_150f[i]){
return _1512;
}
}
if(_150f.length==1){
return _150f[0];
}else{
if(_150f.length>1){
throw {name:curam.ui.UIController.DUPLICATE_TAB_MAPPING_ERROR,message:"ERROR: The page that you are trying to link to is associated with "+"multiple tabs: ["+_150f.toString()+"]. Therefore the "+"tab to open cannot be determined and the page will open in the "+"current tab. Please report this error.",tabID:_1512};
}else{
}
}
},handleUIMPageID:function(_1513,_1514){
var _1515=_1514?true:false;
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.handling.uim")+" '"+_1513+"'. Page is "+(_1515?"":"not ")+debug.getProperty("curam.ui.UIController.default.sec"));
curam.ui.UIController.handlePageRequest(new curam.ui.PageRequest(_1513+"Page.do",_1515));
},processURL:function(url){
var _1516=new curam.ui.PageRequest(url);
curam.ui.UIController.handlePageRequest(_1516);
},handlePageRequest:function(_1517,_1518){
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.handling.page")+" '"+_1517.pageID+"'. "+debug.getProperty("curam.ui.UIController.panel.will")+(_1517.forceRefresh?"":debug.getProperty("curam.ui.UIController.not"))+debug.getProperty("curam.ui.UIController.reload"));
var _1519=curam.ui.UIController.checkResolvePage(_1517,_1517.forceRefresh,null,_1518);
if(_1519==true){
curam.ui.UIController.checkPage(_1517,{preferredTabs:_1518});
}
},checkResolvePage:function(_151a,_151b,_151c,_151d,_151e,_151f,_1520){
var _1521={unmappedPageLoader:_151c,moreThanOneTabMappedCallback:_151e,shouldLoadPage:_151f,successCallback:_1520,preferredTabs:_151d};
if(_151b){
return true;
}
var _1522=curam.ui.UIController.RESOLVE_PAGES[_151a.pageID];
if(_1522==false){
return true;
}else{
var _1523;
if(_151a.getURL().indexOf("?")==-1){
_1523="?";
}else{
_1523="&";
}
var loc=curam.config?curam.config.locale+"/":"";
_14c9.post({url:loc+_151a.getURL()+_1523+"o3resolve=true",handleAs:"text",preventCache:true,load:dojo.hitch(curam.ui.UIController,"resolvePageCheckSuccess",_151a,_1521),error:dojo.hitch(curam.ui.UIController,"resolvePageCheckFailure",_151a,_1521)});
return false;
}
},resolvePageCheckSuccess:function(_1524,_1525,_1526,_1527){
var _1528=false;
var _1529;
var _152a;
var _152b;
if(_1526.substring(2,0)=="{\""&&_1526.charAt(_1526.length-1)=="}"){
_1528=true;
_1526=_14c6.parse(_1526,true);
_1529=_1526.pageID;
_152a=_1526.pageURL;
}else{
_1528=false;
}
if(_1528&&_1524.pageID!=_1529){
curam.ui.UIController.RESOLVE_PAGES[_1524.pageID]=true;
_152a=_152a.replace("&amp;o3resolve=true","");
_152a=_152a.replace("&o3resolve=true","");
_152a=_152a.replace("o3resolve=true","");
for(paramName in _1524.cdejParameters){
if(paramName.length>0&&paramName.indexOf("__o3")!=-1){
if(_152a.indexOf("?")==-1){
_152a+="?"+paramName+"="+encodeURIComponent(_1524.cdejParameters[paramName]);
}else{
_152a+="&"+paramName+"="+encodeURIComponent(_1524.cdejParameters[paramName]);
}
}
}
_152b=new curam.ui.PageRequest(_152a);
if(_1524.forceLoad){
_152b.forceLoad=_1524.forceLoad;
}
}else{
curam.ui.UIController.RESOLVE_PAGES[_1524.pageID]=false;
_152b=_1524;
}
curam.ui.UIController.checkPage(_152b,_1525);
},resolvePageCheckFailure:function(_152c,_152d,error,_152e){
curam.ui.UIController.RESOLVE_PAGES[_152c.pageID]=false;
curam.ui.UIController.checkPage(_152c,_152d);
},setTabTitleAndName:function(_152f,_1530,_1531){
var tab=curam.tab.getContainerTab(_152f);
if(tab){
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.changing.tab")+" '"+_1530+"', '"+_1531+"'. "+debug.getProperty("curam.ui.UIController.descriptor.before"),tab.tabDescriptor);
dojo.query("h1.detailsTitleText",tab.domNode)[0].innerHTML=_1530;
var _1532=dojo.query("h1.detailsTitleText",tab.domNode)[0];
_1532.setAttribute("title",_1530);
tab.set("title",_1531);
var _1533;
for(var i=0;i<_152f.classList.length;i++){
if(_152f.classList[i].indexOf("iframe-")==0){
_1533=_152f.classList[i];
break;
}
}
dojo.publish("tab.title.name.finished",[{"title":_1531,"frameid":_1533}]);
}else{
curam.ui.UIController._log(debug.getProperty("curam.ui.UIController.cannot.change")+" '"+_1530+"', '"+_1531+"'. "+debug.getProperty("curam.ui.UIController.iframe")+" '"+_152f.id+"'.");
}
},handleLinkClick:function(_1534,_1535){
curam.ui.UIController._doHandleLinkClick(_1534,_1535,curam.tab.getContentPanelIframe(),curam.ui.UIController.handlePageRequest,curam.util.openModalDialog);
},_doHandleLinkClick:function(_1536,_1537,_1538,_1539,_153a){
var _153b=_1536;
if(_1538){
var rtc=new curam.util.RuntimeContext(_1538.contentWindow);
var _153c=null;
if(_1537){
_153c=[{key:"o3frame",value:"modal"}];
}
_153b=curam.util.setRpu(_1536,rtc,_153c);
}
if(_1537&&curam.config&&curam.config.modalsEnabled!="false"){
var _153d=_1537.openDialogFunction||_153a;
var fArgs=_1537.args||[{href:_153b},_1537.dialogOptions];
_153d.apply(this,fArgs);
}else{
var _153e=new curam.ui.PageRequest(_153b);
_1539(_153e);
}
},handleDownLoadClickLegacy:function(_153f){
require(["dojo/io/iframe"],function(_1540){
var _1541=_1540.create("o3lrm_frame","");
_1541.src=location.href.substring(0,location.href.lastIndexOf("/"))+decodeURIComponent(_153f.replace(/\+/g," "));
return;
});
},handleDownLoadClick:function(_1542){
var _1543=curam.tab.getContentPanelIframe();
_1543.src=location.href.substring(0,location.href.lastIndexOf("/"))+decodeURIComponent(_1542.replace(/\+/g," "))+"&"+jsScreenContext.toRequestString();
return;
},_log:function(msg,_1544){
if(curam.debug.enabled()){
curam.debug.log("UI CONTROLLER: "+msg+(_1544?" "+dojo.toJson(_1544):""));
}
},_prepareWordLanding:function(){
var as1,as2;
require(["dojo/aspect","curam/tab"],function(asp){
as1=asp.before(curam.ui.UIController,"_doHandleTabEvent",function(ote,_1545){
var _1546=curam.tab.getTabContainer(ote.tabDescriptor.sectionID);
as2=asp.after(_1545,"findOpenTab",function(_1547){
if(!_1547){
ote.uimPageRequest.forceLoad=true;
tabs=_1546.getChildren();
for(var i=0;i<tabs.length;i++){
var _1548=tabs[i];
var curTD=_1548.tabDescriptor;
if(curTD&&curTD.tabID==ote.tabDescriptor.tabID){
_1547=_1548;
}
}
}
as2.remove();
return _1547;
});
as1.remove();
});
});
dojo.subscribe("curam/fileedit/aspect/release",function(){
if(as2!=null){
as2.remove();
}
as1.remove();
});
return as1;
}});
layer.register("curam/ui/UIController",curam.ui.UIController);
return curam.ui.UIController;
});
},"curam/FastUIMController":function(){
define(["dojo/_base/declare","dojo/parser","dijit/registry","curam/inspection/Layer","curam/UIMController","curam/debug","dojo/dom-class","dojo/dom-style","dojo/dom-attr","curam/util/onLoad"],function(_1549,_154a,_154b,layer,_154c,debug,_154d,_154e,_154f){
var _1550=_1549("curam.FastUIMController",[curam.UIMController],{buildRendering:function(){
this.domNode=this.srcNodeRef;
this._attachTemplateNodes(this.domNode,function(node,prop){
return node.getAttribute(prop);
});
},postCreate:function(){
layer.register("curam/FastUIMController",this);
},startup:function(){
this.tabController=_154b.byId(this.tabControllerId);
_154f.set(this.frame,"iscpiframe",this.iscpiframe);
_154f.set(this.frame,"title",this.title);
_154d.add(this.frame,this.iframeClassList);
_154d.add(this.domNode,this.classList);
this.frameLoadEvent=this.EVENT.TOPIC_PREFIX+this.frame.id;
this.setURL(this.url);
if(this._iframeLoaded()){
debug.log("curam.FastUIMController "+debug.getProperty("curam.FastUIMControlle.msg"));
}else{
var _1551=dojo.hitch(this,"processFrameLoadEvent");
curam.util.onLoad.addSubscriber(this.frame.id,_1551);
dojo.connect(this,"destroy",function(){
curam.util.onLoad.removeSubscriber(this.iframeId,_1551);
_1551=null;
});
}
if(this.inDialog){
_154e.set(this.frame,{width:this.width,height:this.height});
}
},_iframeLoaded:function(){
return _154f.get(this.frame,"data-done-loading")=="true";
}});
return _1550;
});
},"curam/cdsl/connection/SimpleAccess":function(){
define(["curam/cdsl/_base/_Connection","curam/cdsl/store/CuramStore","curam/cdsl/request/CuramService","curam/cdsl/_base/FacadeMethodCall","curam/cdsl/Struct","dojo/_base/lang","dojo/store/Observable","dojo/store/Cache","dojo/store/Memory"],function(_1552,_1553,_1554,_1555,_1556,lang,_1557,Cache,_1558){
var _1559=null;
return {initConnection:function(_155a){
if(_155a==null){
throw new Error("The connection object should be provided.");
}else{
if(!(_155a instanceof _1552)){
throw new Error("The wrong type of the connection object is provided.");
}
}
if(_1559==null){
_1559=_155a;
}
return _1559;
},buildStore:function(_155b,_155c,_155d,cache){
if(_1559==null){
throw new Error("The connection shoud be initialized first with initConnection() before using this API.");
}
if(_155b==null){
throw new Error("Facade class name is missing.");
}
if(cache==null){
cache=false;
}
if(_155d==null){
_155d=false;
}
var store=new _1553(_1559,_155b,_155c);
if(_155d){
store=new _1557(store);
}
if(cache){
var _155e=new _1558();
store=new Cache(store,_155e);
}
return store;
},makeRequest:function(_155f,_1560,_1561){
if(_1559==null){
throw new Error("The connection shoud be initialized first with initConnection() before using this API.");
}
if(_155f==null){
throw new Error("Facade class name is missing.");
}
if(_1560==null){
throw new Error("Facade method name is missing.");
}
var _1562=new _1554(_1559);
var _1563;
if(_1561==null){
_1563=[];
}else{
_1563=[new _1556(_1561)];
}
var _1564=new _1555(_155f,_1560,_1563);
return _1562.call([_1564]);
}};
});
},"curam/layout/AccordionContainer":function(){
define("curam/layout/AccordionContainer",["dijit/layout/AccordionContainer","dijit/_CssStateMixin","dijit/focus","dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/array","dojo/_base/declare","dojo/_base/fx","dojo/_base/sniff","dojo/dom","dojo/dom-attr","dojo/dom-geometry","dojo/text!curam/layout/resources/CuramAccordionButton.html",],function(ac,_1565,focus,_1566,_1567,array,_1568,fx,has,dom,_1569,_156a,_156b){
var _156c=_1568("dijit.layout._AccordionButton",[_1567,_1566,_1565],{buttonImageSrc:"",templateString:_156b,label:"",_setLabelAttr:{node:"titleTextNode",type:"innerHTML"},title:"",_setTitleAttr:{node:"titleTextNode",type:"attribute",attribute:"title"},iconClassAttr:"",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitAccordionTitle",getParent:function(){
return this.parent;
},buildRendering:function(){
this.inherited(arguments);
var _156d=this.id.replace(" ","_");
_1569.set(this.titleTextNode,"id",_156d+"_title");
this.focusNode.setAttribute("aria-labelledby",_1569.get(this.titleTextNode,"id"));
dom.setSelectable(this.domNode,false);
this._updateShortcutsImage(false);
},getTitleHeight:function(){
return _156a.getMarginSize(this.domNode).h;
},_onTitleClick:function(){
var _156e=this.getParent();
_156e.selectChild(this.contentWidget,true);
focus.focus(this.focusNode);
},_onTitleKeyDown:function(evt){
return this.getParent()._onKeyDown(evt,this.contentWidget);
},_setSelectedAttr:function(_156f){
this._set("selected",_156f);
this.focusNode.setAttribute("aria-expanded",_156f?"true":"false");
this.focusNode.setAttribute("aria-selected",_156f?"true":"false");
this.focusNode.setAttribute("tabIndex",_156f?"0":"-1");
this._updateShortcutsImage(_156f);
},_updateShortcutsImage:function(_1570){
if(_1570){
_1569.set(this.accordionButtonIcon,"src",require.toUrl("./themes/curam/images/chevron--up10-on-dark.svg"));
}else{
_1569.set(this.accordionButtonIcon,"src",require.toUrl("./themes/curam/images/chevron--down10-on-dark.svg"));
}
}});
var _1571=_1568("curam.layout.AccordionContainer",dijit.layout.AccordionContainer,{templateString:_156b,buttonWidget:_156c,layout:function(){
var _1572=this.selectedChildWidget;
if(!_1572){
return;
}
var _1573=_1572._wrapperWidget.domNode,_1574=_156a.getMarginExtents(_1573),_1575=_156a.getPadBorderExtents(_1573),_1576=_1572._wrapperWidget.containerNode,_1577=_156a.getMarginExtents(_1576),_1578=_156a.getPadBorderExtents(_1576),_1579=this._contentBox;
var _157a=0;
array.forEach(this.getChildren(),function(child){
_157a+=child._buttonWidget.getTitleHeight();
});
var _157b=_1572.containerNode.childNodes[0].offsetHeight+20;
if(_157a+_157b<this._contentBox.h){
_157b=this._contentBox.h-_157a;
}
this._containerContentBox={h:_157b,w:this._contentBox.w-_1574.w-_1575.w-_1577.w-_1578.w};
if(_1572){
_1572.resize(this._containerContentBox);
}
},_transition:function(_157c,_157d,_157e){
if(has("ie")<8){
_157e=false;
}
if(this._animation){
this._animation.stop(true);
delete this._animation;
}
var self=this;
if(_157c){
_157c.resize({h:0,w:this._containerContentBox.w});
var d=this._showChild(_157c);
if(this.doLayout&&_157c.resize){
var _157f=_157c.containerNode.childNodes[0].offsetHeight+20;
var _1580=0;
dojo.forEach(this.getChildren(),function(child){
_1580+=child._buttonWidget.getTitleHeight();
});
this._containerContentBox.h=this._contentBox.h-_1580;
if(this._containerContentBox.h<_157f){
this._containerContentBox.h=_157f;
}
this._verticalSpace=_157f;
_157c.resize(this._containerContentBox);
}
if(!_157e){
_157c._wrapperWidget.set("selected",true);
}
}
if(_157d){
_157d._wrapperWidget.set("selected",false);
if(!_157e){
this._hideChild(_157d);
}
}
if(_157e){
var _1581=_157c._wrapperWidget.containerNode,_1582=_157d._wrapperWidget.containerNode;
var _1583=_157c._wrapperWidget.containerNode,_1584=_156a.getMarginExtents(_1583),_1585=_156a.getPadBorderExtents(_1583),_1586=_1584.h+_1585.h;
_1582.style.height=(self._verticalSpace-_1586)+"px";
this._animation=new fx.Animation({node:_1581,duration:this.duration,curve:[1,this._verticalSpace-_1586-1],onAnimate:function(value){
value=Math.floor(value);
_1581.style.height=value+"px";
_1582.style.height=(self._verticalSpace-_1586-value-1)+"px";
},onEnd:function(){
delete self._animation;
_1581.style.height="auto";
_157d._wrapperWidget.containerNode.style.display="none";
_1582.style.height="auto";
self._hideChild(_157d);
_157c._wrapperWidget.set("selected",true);
}});
this._animation.onStop=this._animation.onEnd;
this._animation.play();
}
return d;
}});
_1571._Button=_156c;
return _1571;
});
},"curam/layout/CuramTabContainer":function(){
define(["dojo/_base/lang","dojo/_base/declare","dijit/layout/TabContainer","curam/layout/ScrollingTabController","dijit/layout/TabController"],function(lang,_1587,_1588,_1589,_158a){
var _158b=_1587("curam.layout.CuramTabContainer",dijit.layout.TabContainer,{postMixInProperties:function(){
if(!this.controllerWidget){
this.controllerWidget=(this.tabPosition=="top"||this.tabPosition=="bottom")&&!this.nested?_1589:_158a;
}
this.inherited(arguments);
}});
return _158b;
});
},"dijit/form/_FormSelectWidget":function(){
define(["dojo/_base/array","dojo/_base/Deferred","dojo/aspect","dojo/data/util/sorter","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/when","dojo/store/util/QueryResults","./_FormValueWidget"],function(array,_158c,_158d,_158e,_158f,dom,_1590,_1591,lang,query,when,_1592,_1593){
var _1594=_158f("dijit.form._FormSelectWidget",_1593,{multiple:false,options:null,store:null,_setStoreAttr:function(val){
if(this._created){
this._deprecatedSetStore(val);
}
},query:null,_setQueryAttr:function(query){
if(this._created){
this._deprecatedSetStore(this.store,this.selectedValue,{query:query});
}
},queryOptions:null,_setQueryOptionsAttr:function(_1595){
if(this._created){
this._deprecatedSetStore(this.store,this.selectedValue,{queryOptions:_1595});
}
},labelAttr:"",onFetch:null,sortByLabel:true,loadChildrenOnOpen:false,onLoadDeferred:null,getOptions:function(_1596){
var opts=this.options||[];
if(_1596==null){
return opts;
}
if(lang.isArrayLike(_1596)){
return array.map(_1596,"return this.getOptions(item);",this);
}
if(lang.isString(_1596)){
_1596={value:_1596};
}
if(lang.isObject(_1596)){
if(!array.some(opts,function(_1597,idx){
for(var a in _1596){
if(!(a in _1597)||_1597[a]!=_1596[a]){
return false;
}
}
_1596=idx;
return true;
})){
_1596=-1;
}
}
if(_1596>=0&&_1596<opts.length){
return opts[_1596];
}
return null;
},addOption:function(_1598){
array.forEach(lang.isArrayLike(_1598)?_1598:[_1598],function(i){
if(i&&lang.isObject(i)){
this.options.push(i);
}
},this);
this._loadChildren();
},removeOption:function(_1599){
var _159a=this.getOptions(lang.isArrayLike(_1599)?_1599:[_1599]);
array.forEach(_159a,function(_159b){
if(_159b){
this.options=array.filter(this.options,function(node){
return (node.value!==_159b.value||node.label!==_159b.label);
});
this._removeOptionItem(_159b);
}
},this);
this._loadChildren();
},updateOption:function(_159c){
array.forEach(lang.isArrayLike(_159c)?_159c:[_159c],function(i){
var _159d=this.getOptions({value:i.value}),k;
if(_159d){
for(k in i){
_159d[k]=i[k];
}
}
},this);
this._loadChildren();
},setStore:function(store,_159e,_159f){
_1591.deprecated(this.declaredClass+"::setStore(store, selectedValue, fetchArgs) is deprecated. Use set('query', fetchArgs.query), set('queryOptions', fetchArgs.queryOptions), set('store', store), or set('value', selectedValue) instead.","","2.0");
this._deprecatedSetStore(store,_159e,_159f);
},_deprecatedSetStore:function(store,_15a0,_15a1){
var _15a2=this.store;
_15a1=_15a1||{};
if(_15a2!==store){
var h;
while((h=this._notifyConnections.pop())){
h.remove();
}
if(!store.get){
lang.mixin(store,{_oldAPI:true,get:function(id){
var _15a3=new _158c();
this.fetchItemByIdentity({identity:id,onItem:function(_15a4){
_15a3.resolve(_15a4);
},onError:function(error){
_15a3.reject(error);
}});
return _15a3.promise;
},query:function(query,_15a5){
var _15a6=new _158c(function(){
if(_15a7.abort){
_15a7.abort();
}
});
_15a6.total=new _158c();
var _15a7=this.fetch(lang.mixin({query:query,onBegin:function(count){
_15a6.total.resolve(count);
},onComplete:function(_15a8){
_15a6.resolve(_15a8);
},onError:function(error){
_15a6.reject(error);
}},_15a5));
return new _1592(_15a6);
}});
if(store.getFeatures()["dojo.data.api.Notification"]){
this._notifyConnections=[_158d.after(store,"onNew",lang.hitch(this,"_onNewItem"),true),_158d.after(store,"onDelete",lang.hitch(this,"_onDeleteItem"),true),_158d.after(store,"onSet",lang.hitch(this,"_onSetItem"),true)];
}
}
this._set("store",store);
}
if(this.options&&this.options.length){
this.removeOption(this.options);
}
if(this._queryRes&&this._queryRes.close){
this._queryRes.close();
}
if(this._observeHandle&&this._observeHandle.remove){
this._observeHandle.remove();
this._observeHandle=null;
}
if(_15a1.query){
this._set("query",_15a1.query);
}
if(_15a1.queryOptions){
this._set("queryOptions",_15a1.queryOptions);
}
if(store&&store.query){
this._loadingStore=true;
this.onLoadDeferred=new _158c();
this._queryRes=store.query(this.query,this.queryOptions);
when(this._queryRes,lang.hitch(this,function(items){
if(this.sortByLabel&&!_15a1.sort&&items.length){
if(store.getValue){
items.sort(_158e.createSortFunction([{attribute:store.getLabelAttributes(items[0])[0]}],store));
}else{
var _15a9=this.labelAttr;
items.sort(function(a,b){
return a[_15a9]>b[_15a9]?1:b[_15a9]>a[_15a9]?-1:0;
});
}
}
if(_15a1.onFetch){
items=_15a1.onFetch.call(this,items,_15a1);
}
array.forEach(items,function(i){
this._addOptionForItem(i);
},this);
if(this._queryRes.observe){
this._observeHandle=this._queryRes.observe(lang.hitch(this,function(_15aa,_15ab,_15ac){
if(_15ab==_15ac){
this._onSetItem(_15aa);
}else{
if(_15ab!=-1){
this._onDeleteItem(_15aa);
}
if(_15ac!=-1){
this._onNewItem(_15aa);
}
}
}),true);
}
this._loadingStore=false;
this.set("value","_pendingValue" in this?this._pendingValue:_15a0);
delete this._pendingValue;
if(!this.loadChildrenOnOpen){
this._loadChildren();
}else{
this._pseudoLoadChildren(items);
}
this.onLoadDeferred.resolve(true);
this.onSetStore();
}),function(err){
console.error("dijit.form.Select: "+err.toString());
this.onLoadDeferred.reject(err);
});
}
return _15a2;
},_setValueAttr:function(_15ad,_15ae){
if(!this._onChangeActive){
_15ae=null;
}
if(this._loadingStore){
this._pendingValue=_15ad;
return;
}
if(_15ad==null){
return;
}
if(lang.isArrayLike(_15ad)){
_15ad=array.map(_15ad,function(value){
return lang.isObject(value)?value:{value:value};
});
}else{
if(lang.isObject(_15ad)){
_15ad=[_15ad];
}else{
_15ad=[{value:_15ad}];
}
}
_15ad=array.filter(this.getOptions(_15ad),function(i){
return i&&i.value;
});
var opts=this.getOptions()||[];
if(!this.multiple&&(!_15ad[0]||!_15ad[0].value)&&!!opts.length){
_15ad[0]=opts[0];
}
array.forEach(opts,function(opt){
opt.selected=array.some(_15ad,function(v){
return v.value===opt.value;
});
});
var val=array.map(_15ad,function(opt){
return opt.value;
});
if(typeof val=="undefined"||typeof val[0]=="undefined"){
return;
}
var disp=array.map(_15ad,function(opt){
return opt.label;
});
this._setDisplay(this.multiple?disp:disp[0]);
this.inherited(arguments,[this.multiple?val:val[0],_15ae]);
this._updateSelection();
},_getDisplayedValueAttr:function(){
var ret=array.map([].concat(this.get("selectedOptions")),function(v){
if(v&&"label" in v){
return v.label;
}else{
if(v){
return v.value;
}
}
return null;
},this);
return this.multiple?ret:ret[0];
},_setDisplayedValueAttr:function(label){
this.set("value",this.getOptions(typeof label=="string"?{label:label}:label));
},_loadChildren:function(){
if(this._loadingStore){
return;
}
array.forEach(this._getChildren(),function(child){
child.destroyRecursive();
});
array.forEach(this.options,this._addOptionItem,this);
this._updateSelection();
},_updateSelection:function(){
this.focusedChild=null;
this._set("value",this._getValueFromOpts());
var val=[].concat(this.value);
if(val&&val[0]){
var self=this;
array.forEach(this._getChildren(),function(child){
var _15af=array.some(val,function(v){
return child.option&&(v===child.option.value);
});
if(_15af&&!self.multiple){
self.focusedChild=child;
}
_1590.toggle(child.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),_15af);
child.domNode.setAttribute("aria-selected",_15af?"true":"false");
},this);
}
},_getValueFromOpts:function(){
var opts=this.getOptions()||[];
if(!this.multiple&&opts.length){
var opt=array.filter(opts,function(i){
return i.selected;
})[0];
if(opt&&opt.value){
return opt.value;
}else{
opts[0].selected=true;
return opts[0].value;
}
}else{
if(this.multiple){
return array.map(array.filter(opts,function(i){
return i.selected;
}),function(i){
return i.value;
})||[];
}
}
return "";
},_onNewItem:function(item,_15b0){
if(!_15b0||!_15b0.parent){
this._addOptionForItem(item);
}
},_onDeleteItem:function(item){
var store=this.store;
this.removeOption({value:store.getIdentity(item)});
},_onSetItem:function(item){
this.updateOption(this._getOptionObjForItem(item));
},_getOptionObjForItem:function(item){
var store=this.store,label=(this.labelAttr&&this.labelAttr in item)?item[this.labelAttr]:store.getLabel(item),value=(label?store.getIdentity(item):null);
return {value:value,label:label,item:item};
},_addOptionForItem:function(item){
var store=this.store;
if(store.isItemLoaded&&!store.isItemLoaded(item)){
store.loadItem({item:item,onItem:function(i){
this._addOptionForItem(i);
},scope:this});
return;
}
var _15b1=this._getOptionObjForItem(item);
this.addOption(_15b1);
},constructor:function(_15b2){
this._oValue=(_15b2||{}).value||null;
this._notifyConnections=[];
},buildRendering:function(){
this.inherited(arguments);
dom.setSelectable(this.focusNode,false);
},_fillContent:function(){
if(!this.options){
this.options=this.srcNodeRef?query("> *",this.srcNodeRef).map(function(node){
if(node.getAttribute("type")==="separator"){
return {value:"",label:"",selected:false,disabled:false};
}
return {value:(node.getAttribute("data-"+_1591._scopeName+"-value")||node.getAttribute("value")),label:String(node.innerHTML),selected:node.getAttribute("selected")||false,disabled:node.getAttribute("disabled")||false};
},this):[];
}
if(!this.value){
this._set("value",this._getValueFromOpts());
}else{
if(this.multiple&&typeof this.value=="string"){
this._set("value",this.value.split(","));
}
}
},postCreate:function(){
this.inherited(arguments);
_158d.after(this,"onChange",lang.hitch(this,"_updateSelection"));
var store=this.store;
if(store&&(store.getIdentity||store.getFeatures()["dojo.data.api.Identity"])){
this.store=null;
this._deprecatedSetStore(store,this._oValue,{query:this.query,queryOptions:this.queryOptions});
}
this._storeInitialized=true;
},startup:function(){
this._loadChildren();
this.inherited(arguments);
},destroy:function(){
var h;
while((h=this._notifyConnections.pop())){
h.remove();
}
if(this._queryRes&&this._queryRes.close){
this._queryRes.close();
}
if(this._observeHandle&&this._observeHandle.remove){
this._observeHandle.remove();
this._observeHandle=null;
}
this.inherited(arguments);
},_addOptionItem:function(){
},_removeOptionItem:function(){
},_setDisplay:function(){
},_getChildren:function(){
return [];
},_getSelectedOptionsAttr:function(){
return this.getOptions({selected:true});
},_pseudoLoadChildren:function(){
},onSetStore:function(){
}});
return _1594;
});
},"dijit/form/_ComboBoxMenu":function(){
define(["dojo/_base/declare","dojo/dom-class","dojo/dom-style","dojo/keys","../_WidgetBase","../_TemplatedMixin","./_ComboBoxMenuMixin","./_ListMouseMixin"],function(_15b3,_15b4,_15b5,keys,_15b6,_15b7,_15b8,_15b9){
return _15b3("dijit.form._ComboBoxMenu",[_15b6,_15b7,_15b9,_15b8],{templateString:"<div class='dijitReset dijitMenu' data-dojo-attach-point='containerNode' style='overflow: auto; overflow-x: hidden;' role='listbox'>"+"<div class='dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point='previousButton' role='option'></div>"+"<div class='dijitMenuItem dijitMenuNextButton' data-dojo-attach-point='nextButton' role='option'></div>"+"</div>",baseClass:"dijitComboBoxMenu",postCreate:function(){
this.inherited(arguments);
if(!this.isLeftToRight()){
_15b4.add(this.previousButton,"dijitMenuItemRtl");
_15b4.add(this.nextButton,"dijitMenuItemRtl");
}
this.containerNode.setAttribute("role","listbox");
},_createMenuItem:function(){
var item=this.ownerDocument.createElement("div");
item.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");
item.setAttribute("role","option");
return item;
},onHover:function(node){
_15b4.add(node,"dijitMenuItemHover");
},onUnhover:function(node){
_15b4.remove(node,"dijitMenuItemHover");
},onSelect:function(node){
_15b4.add(node,"dijitMenuItemSelected");
},onDeselect:function(node){
_15b4.remove(node,"dijitMenuItemSelected");
},_page:function(up){
var _15ba=0;
var _15bb=this.domNode.scrollTop;
var _15bc=_15b5.get(this.domNode,"height");
if(!this.getHighlightedOption()){
this.selectNextNode();
}
while(_15ba<_15bc){
var _15bd=this.getHighlightedOption();
if(up){
if(!_15bd.previousSibling||_15bd.previousSibling.style.display=="none"){
break;
}
this.selectPreviousNode();
}else{
if(!_15bd.nextSibling||_15bd.nextSibling.style.display=="none"){
break;
}
this.selectNextNode();
}
var _15be=this.domNode.scrollTop;
_15ba+=(_15be-_15bb)*(up?-1:1);
_15bb=_15be;
}
},handleKey:function(evt){
switch(evt.keyCode){
case keys.DOWN_ARROW:
this.selectNextNode();
return false;
case keys.PAGE_DOWN:
this._page(false);
return false;
case keys.UP_ARROW:
this.selectPreviousNode();
return false;
case keys.PAGE_UP:
this._page(true);
return false;
default:
return true;
}
}});
});
},"dijit/layout/_TabContainerBase":function(){
define(["dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","./StackContainer","./utils","../_TemplatedMixin","dojo/text!./templates/TabContainer.html"],function(_15bf,_15c0,_15c1,_15c2,_15c3,_15c4,_15c5,_15c6){
return _15bf("dijit.layout._TabContainerBase",[_15c3,_15c5],{tabPosition:"top",baseClass:"dijitTabContainer",tabStrip:false,nested:false,templateString:_15c6,postMixInProperties:function(){
this.baseClass+=this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"");
this.srcNodeRef&&_15c2.set(this.srcNodeRef,"visibility","hidden");
this.inherited(arguments);
},buildRendering:function(){
this.inherited(arguments);
this.tablist=this._makeController(this.tablistNode);
if(!this.doLayout){
_15c0.add(this.domNode,"dijitTabContainerNoLayout");
}
if(this.nested){
_15c0.add(this.domNode,"dijitTabContainerNested");
_15c0.add(this.tablist.containerNode,"dijitTabContainerTabListNested");
_15c0.add(this.tablistSpacer,"dijitTabContainerSpacerNested");
_15c0.add(this.containerNode,"dijitTabPaneWrapperNested");
}else{
_15c0.add(this.domNode,"tabStrip-"+(this.tabStrip?"enabled":"disabled"));
}
},_setupChild:function(tab){
_15c0.add(tab.domNode,"dijitTabPane");
this.inherited(arguments);
},startup:function(){
if(this._started){
return;
}
this.tablist.startup();
this.inherited(arguments);
},layout:function(){
if(!this._contentBox||typeof (this._contentBox.l)=="undefined"){
return;
}
var sc=this.selectedChildWidget;
if(this.doLayout){
var _15c7=this.tabPosition.replace(/-h/,"");
this.tablist.region=_15c7;
var _15c8=[this.tablist,{domNode:this.tablistSpacer,region:_15c7},{domNode:this.containerNode,region:"center"}];
_15c4.layoutChildren(this.domNode,this._contentBox,_15c8);
this._containerContentBox=_15c4.marginBox2contentBox(this.containerNode,_15c8[2]);
if(sc&&sc.resize){
sc.resize(this._containerContentBox);
}
}else{
if(this.tablist.resize){
var s=this.tablist.domNode.style;
s.width="0";
var width=_15c1.getContentBox(this.domNode).w;
s.width="";
this.tablist.resize({w:width});
}
if(sc&&sc.resize){
sc.resize();
}
}
},destroy:function(_15c9){
if(this.tablist){
this.tablist.destroy(_15c9);
}
this.inherited(arguments);
}});
});
},"dijit/_KeyNavContainer":function(){
define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/_base/kernel","dojo/keys","dojo/_base/lang","./registry","./_Container","./_FocusMixin","./_KeyNavMixin"],function(array,_15ca,_15cb,_15cc,keys,lang,_15cd,_15ce,_15cf,_15d0){
return _15ca("dijit._KeyNavContainer",[_15cf,_15d0,_15ce],{connectKeyNavHandlers:function(_15d1,_15d2){
var _15d3=(this._keyNavCodes={});
var prev=lang.hitch(this,"focusPrev");
var next=lang.hitch(this,"focusNext");
array.forEach(_15d1,function(code){
_15d3[code]=prev;
});
array.forEach(_15d2,function(code){
_15d3[code]=next;
});
_15d3[keys.HOME]=lang.hitch(this,"focusFirstChild");
_15d3[keys.END]=lang.hitch(this,"focusLastChild");
},startupKeyNavChildren:function(){
_15cc.deprecated("startupKeyNavChildren() call no longer needed","","2.0");
},startup:function(){
this.inherited(arguments);
array.forEach(this.getChildren(),lang.hitch(this,"_startupChild"));
},addChild:function(_15d4,_15d5){
this.inherited(arguments);
this._startupChild(_15d4);
},_startupChild:function(_15d6){
_15d6.set("tabIndex","-1");
},_getFirst:function(){
var _15d7=this.getChildren();
return _15d7.length?_15d7[0]:null;
},_getLast:function(){
var _15d8=this.getChildren();
return _15d8.length?_15d8[_15d8.length-1]:null;
},focusNext:function(){
this.focusChild(this._getNextFocusableChild(this.focusedChild,1));
},focusPrev:function(){
this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),true);
},childSelector:function(node){
var node=_15cd.byNode(node);
return node&&node.getParent()==this;
}});
});
},"dijit/form/DataList":function(){
define(["dojo/_base/declare","dojo/dom","dojo/_base/lang","dojo/query","dojo/store/Memory","../registry"],function(_15d9,dom,lang,query,_15da,_15db){
function _15dc(_15dd){
return {id:_15dd.value,value:_15dd.value,name:lang.trim(_15dd.innerText||_15dd.textContent||"")};
};
return _15d9("dijit.form.DataList",_15da,{constructor:function(_15de,_15df){
this.domNode=dom.byId(_15df);
lang.mixin(this,_15de);
if(this.id){
_15db.add(this);
}
this.domNode.style.display="none";
this.inherited(arguments,[{data:query("option",this.domNode).map(_15dc)}]);
},destroy:function(){
_15db.remove(this.id);
},fetchSelectedItem:function(){
var _15e0=query("> option[selected]",this.domNode)[0]||query("> option",this.domNode)[0];
return _15e0&&_15dc(_15e0);
}});
});
},"dijit/Tooltip":function(){
define(["dojo/_base/array","dojo/_base/declare","dojo/_base/fx","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/on","dojo/sniff","./_base/manager","./place","./_Widget","./_TemplatedMixin","./BackgroundIframe","dojo/text!./templates/Tooltip.html","./main"],function(array,_15e1,fx,dom,_15e2,_15e3,_15e4,lang,mouse,on,has,_15e5,place,_15e6,_15e7,_15e8,_15e9,dijit){
var _15ea=_15e1("dijit._MasterTooltip",[_15e6,_15e7],{duration:_15e5.defaultDuration,templateString:_15e9,postCreate:function(){
this.ownerDocumentBody.appendChild(this.domNode);
this.bgIframe=new _15e8(this.domNode);
this.fadeIn=fx.fadeIn({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onShow")});
this.fadeOut=fx.fadeOut({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onHide")});
},show:function(_15eb,_15ec,_15ed,rtl,_15ee,_15ef,_15f0){
if(this.aroundNode&&this.aroundNode===_15ec&&this.containerNode.innerHTML==_15eb){
return;
}
if(this.fadeOut.status()=="playing"){
this._onDeck=arguments;
return;
}
this.containerNode.innerHTML=_15eb;
if(_15ee){
this.set("textDir",_15ee);
}
this.containerNode.align=rtl?"right":"left";
var pos=place.around(this.domNode,_15ec,_15ed&&_15ed.length?_15ed:_15f1.defaultPosition,!rtl,lang.hitch(this,"orient"));
var _15f2=pos.aroundNodePos;
if(pos.corner.charAt(0)=="M"&&pos.aroundCorner.charAt(0)=="M"){
this.connectorNode.style.top=_15f2.y+((_15f2.h-this.connectorNode.offsetHeight)>>1)-pos.y+"px";
this.connectorNode.style.left="";
}else{
if(pos.corner.charAt(1)=="M"&&pos.aroundCorner.charAt(1)=="M"){
this.connectorNode.style.left=_15f2.x+((_15f2.w-this.connectorNode.offsetWidth)>>1)-pos.x+"px";
}else{
this.connectorNode.style.left="";
this.connectorNode.style.top="";
}
}
_15e4.set(this.domNode,"opacity",0);
this.fadeIn.play();
this.isShowingNow=true;
this.aroundNode=_15ec;
this.onMouseEnter=_15ef||noop;
this.onMouseLeave=_15f0||noop;
},orient:function(node,_15f3,_15f4,_15f5,_15f6){
this.connectorNode.style.top="";
var _15f7=_15f5.h,_15f8=_15f5.w;
node.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[_15f3+"-"+_15f4];
this.domNode.style.width="auto";
var size=_15e3.position(this.domNode);
if(has("ie")||has("trident")){
size.w+=2;
}
var width=Math.min((Math.max(_15f8,1)),size.w);
_15e3.setMarginBox(this.domNode,{w:width});
if(_15f4.charAt(0)=="B"&&_15f3.charAt(0)=="B"){
var bb=_15e3.position(node);
var _15f9=this.connectorNode.offsetHeight;
if(bb.h>_15f7){
var _15fa=_15f7-((_15f6.h+_15f9)>>1);
this.connectorNode.style.top=_15fa+"px";
this.connectorNode.style.bottom="";
}else{
this.connectorNode.style.bottom=Math.min(Math.max(_15f6.h/2-_15f9/2,0),bb.h-_15f9)+"px";
this.connectorNode.style.top="";
}
}else{
this.connectorNode.style.top="";
this.connectorNode.style.bottom="";
}
return Math.max(0,size.w-_15f8);
},_onShow:function(){
if(has("ie")){
this.domNode.style.filter="";
}
},hide:function(_15fb){
if(this._onDeck&&this._onDeck[1]==_15fb){
this._onDeck=null;
}else{
if(this.aroundNode===_15fb){
this.fadeIn.stop();
this.isShowingNow=false;
this.aroundNode=null;
this.fadeOut.play();
}else{
}
}
this.onMouseEnter=this.onMouseLeave=noop;
},_onHide:function(){
this.domNode.style.cssText="";
this.containerNode.innerHTML="";
if(this._onDeck){
this.show.apply(this,this._onDeck);
this._onDeck=null;
}
}});
if(has("dojo-bidi")){
_15ea.extend({_setAutoTextDir:function(node){
this.applyTextDir(node);
array.forEach(node.children,function(child){
this._setAutoTextDir(child);
},this);
},_setTextDirAttr:function(_15fc){
this._set("textDir",_15fc);
if(_15fc=="auto"){
this._setAutoTextDir(this.containerNode);
}else{
this.containerNode.dir=this.textDir;
}
}});
}
dijit.showTooltip=function(_15fd,_15fe,_15ff,rtl,_1600,_1601,_1602){
if(_15ff){
_15ff=array.map(_15ff,function(val){
return {after:"after-centered",before:"before-centered"}[val]||val;
});
}
if(!_15f1._masterTT){
dijit._masterTT=_15f1._masterTT=new _15ea();
}
return _15f1._masterTT.show(_15fd,_15fe,_15ff,rtl,_1600,_1601,_1602);
};
dijit.hideTooltip=function(_1603){
return _15f1._masterTT&&_15f1._masterTT.hide(_1603);
};
var _1604="DORMANT",_1605="SHOW TIMER",_1606="SHOWING",_1607="HIDE TIMER";
function noop(){
};
var _15f1=_15e1("dijit.Tooltip",_15e6,{label:"",showDelay:400,hideDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(newId){
array.forEach(this._connections||[],function(_1608){
array.forEach(_1608,function(_1609){
_1609.remove();
});
},this);
this._connectIds=array.filter(lang.isArrayLike(newId)?newId:(newId?[newId]:[]),function(id){
return dom.byId(id,this.ownerDocument);
},this);
this._connections=array.map(this._connectIds,function(id){
var node=dom.byId(id,this.ownerDocument),_160a=this.selector,_160b=_160a?function(_160c){
return on.selector(_160a,_160c);
}:function(_160d){
return _160d;
},self=this;
return [on(node,_160b(mouse.enter),function(){
self._onHover(this);
}),on(node,_160b("focusin"),function(){
self._onHover(this);
}),on(node,_160b(mouse.leave),lang.hitch(self,"_onUnHover")),on(node,_160b("focusout"),lang.hitch(self,"set","state",_1604))];
},this);
this._set("connectId",newId);
},addTarget:function(node){
var id=node.id||node;
if(array.indexOf(this._connectIds,id)==-1){
this.set("connectId",this._connectIds.concat(id));
}
},removeTarget:function(node){
var id=node.id||node,idx=array.indexOf(this._connectIds,id);
if(idx>=0){
this._connectIds.splice(idx,1);
this.set("connectId",this._connectIds);
}
},buildRendering:function(){
this.inherited(arguments);
_15e2.add(this.domNode,"dijitTooltipData");
},startup:function(){
this.inherited(arguments);
var ids=this.connectId;
array.forEach(lang.isArrayLike(ids)?ids:[ids],this.addTarget,this);
},getContent:function(node){
return this.label||this.domNode.innerHTML;
},state:_1604,_setStateAttr:function(val){
if(this.state==val||(val==_1605&&this.state==_1606)||(val==_1607&&this.state==_1604)){
return;
}
if(this._hideTimer){
this._hideTimer.remove();
delete this._hideTimer;
}
if(this._showTimer){
this._showTimer.remove();
delete this._showTimer;
}
switch(val){
case _1604:
if(this._connectNode){
_15f1.hide(this._connectNode);
delete this._connectNode;
this.onHide();
}
break;
case _1605:
if(this.state!=_1606){
this._showTimer=this.defer(function(){
this.set("state",_1606);
},this.showDelay);
}
break;
case _1606:
var _160e=this.getContent(this._connectNode);
if(!_160e){
this.set("state",_1604);
return;
}
_15f1.show(_160e,this._connectNode,this.position,!this.isLeftToRight(),this.textDir,lang.hitch(this,"set","state",_1606),lang.hitch(this,"set","state",_1607));
this.onShow(this._connectNode,this.position);
break;
case _1607:
this._hideTimer=this.defer(function(){
this.set("state",_1604);
},this.hideDelay);
break;
}
this._set("state",val);
},_onHover:function(_160f){
if(this._connectNode&&_160f!=this._connectNode){
this.set("state",_1604);
}
this._connectNode=_160f;
this.set("state",_1605);
},_onUnHover:function(_1610){
this.set("state",_1607);
},open:function(_1611){
this.set("state",_1604);
this._connectNode=_1611;
this.set("state",_1606);
},close:function(){
this.set("state",_1604);
},onShow:function(){
},onHide:function(){
},destroy:function(){
this.set("state",_1604);
array.forEach(this._connections||[],function(_1612){
array.forEach(_1612,function(_1613){
_1613.remove();
});
},this);
this.inherited(arguments);
}});
_15f1._MasterTooltip=_15ea;
_15f1.show=dijit.showTooltip;
_15f1.hide=dijit.hideTooltip;
_15f1.defaultPosition=["after-centered","before-centered"];
return _15f1;
});
},"dijit/PopupMenuItem":function(){
define(["dojo/_base/declare","dojo/dom-style","dojo/_base/lang","dojo/query","./popup","./registry","./MenuItem","./hccss"],function(_1614,_1615,lang,query,pm,_1616,_1617){
return _1614("dijit.PopupMenuItem",_1617,{baseClass:"dijitMenuItem dijitPopupMenuItem",_fillContent:function(){
if(this.srcNodeRef){
var nodes=query("*",this.srcNodeRef);
this.inherited(arguments,[nodes[0]]);
this.dropDownContainer=this.srcNodeRef;
}
},_openPopup:function(_1618,focus){
var popup=this.popup;
pm.open(lang.delegate(_1618,{popup:this.popup,around:this.domNode}));
if(focus&&popup.focus){
popup.focus();
}
},_closePopup:function(){
pm.close(this.popup);
this.popup.parentMenu=null;
},startup:function(){
if(this._started){
return;
}
this.inherited(arguments);
if(!this.popup){
var node=query("[widgetId]",this.dropDownContainer)[0];
this.popup=_1616.byNode(node);
}
this.ownerDocumentBody.appendChild(this.popup.domNode);
this.popup.domNode.setAttribute("aria-labelledby",this.containerNode.id);
this.popup.startup();
this.popup.domNode.style.display="none";
if(this.arrowWrapper){
_1615.set(this.arrowWrapper,"visibility","");
}
this.focusNode.setAttribute("aria-haspopup","true");
},destroyDescendants:function(_1619){
if(this.popup){
if(!this.popup._destroyed){
this.popup.destroyRecursive(_1619);
}
delete this.popup;
}
this.inherited(arguments);
}});
});
},"dijit/main":function(){
define(["dojo/_base/kernel"],function(dojo){
return dojo.dijit;
});
},"dijit/layout/ContentPane":function(){
define(["dojo/_base/kernel","dojo/_base/lang","../_Widget","../_Container","./_ContentPaneResizeMixin","dojo/string","dojo/html","dojo/i18n!../nls/loading","dojo/_base/array","dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/_base/xhr","dojo/i18n","dojo/when"],function(_161a,lang,_161b,_161c,_161d,_161e,html,_161f,array,_1620,_1621,dom,_1622,_1623,xhr,i18n,when){
var _1624=typeof (dojo.global.perf)!="undefined"&&dojo.global.perf!="undefined";
return _1620("dijit.layout.ContentPane",[_161b,_161c,_161d],{href:"",content:"",extractContent:false,parseOnLoad:true,parserScope:_161a._scopeName,preventCache:false,preload:false,refreshOnShow:false,loadingMessage:"<span class='dijitContentPaneLoading'><span class='dijitInline dijitIconLoading'></span>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'><span class='dijitInline dijitIconError'></span>${errorState}</span>",isLoaded:false,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:true,template:false,markupFactory:function(_1625,node,ctor){
var self=new ctor(_1625,node);
return !self.href&&self._contentSetter&&self._contentSetter.parseDeferred&&!self._contentSetter.parseDeferred.isFulfilled()?self._contentSetter.parseDeferred.then(function(){
return self;
}):self;
},create:function(_1626,_1627){
if((!_1626||!_1626.template)&&_1627&&!("href" in _1626)&&!("content" in _1626)){
_1627=dom.byId(_1627);
var df=_1627.ownerDocument.createDocumentFragment();
while(_1627.firstChild){
df.appendChild(_1627.firstChild);
}
_1626=lang.delegate(_1626,{content:df});
}
this.inherited(arguments,[_1626,_1627]);
},postMixInProperties:function(){
this.inherited(arguments);
var _1628=i18n.getLocalization("dijit","loading",this.lang);
this.loadingMessage=_161e.substitute(this.loadingMessage,_1628);
this.errorMessage=_161e.substitute(this.errorMessage,_1628);
},buildRendering:function(){
this.inherited(arguments);
if(!this.containerNode){
this.containerNode=this.domNode;
}
this.domNode.removeAttribute("title");
},startup:function(){
this.inherited(arguments);
if(this._contentSetter){
array.forEach(this._contentSetter.parseResults,function(obj){
if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){
obj.startup();
obj._started=true;
}
},this);
}
},_startChildren:function(){
array.forEach(this.getChildren(),function(obj){
if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){
obj.startup();
obj._started=true;
}
});
if(this._contentSetter){
array.forEach(this._contentSetter.parseResults,function(obj){
if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){
obj.startup();
obj._started=true;
}
},this);
}
},setHref:function(href){
_161a.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");
return this.set("href",href);
},_setHrefAttr:function(href){
this.cancel();
this.onLoadDeferred=new _1621(lang.hitch(this,"cancel"));
this.onLoadDeferred.then(lang.hitch(this,"onLoad"));
this._set("href",href);
if(this.preload||(this._created&&this._isShown())){
this._load();
}else{
this._hrefChanged=true;
}
return this.onLoadDeferred;
},setContent:function(data){
_161a.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");
this.set("content",data);
},_setContentAttr:function(data){
this._set("href","");
this.cancel();
this.onLoadDeferred=new _1621(lang.hitch(this,"cancel"));
if(this._created){
this.onLoadDeferred.then(lang.hitch(this,"onLoad"));
}
this._setContent(data||"");
this._isDownloaded=false;
return this.onLoadDeferred;
},_getContentAttr:function(){
return this.containerNode.innerHTML;
},cancel:function(){
if(this._xhrDfd&&(this._xhrDfd.fired==-1)){
this._xhrDfd.cancel();
}
delete this._xhrDfd;
this.onLoadDeferred=null;
},destroy:function(){
this.cancel();
this.inherited(arguments);
},destroyRecursive:function(_1629){
if(this._beingDestroyed){
return;
}
this.inherited(arguments);
},_onShow:function(){
this.inherited(arguments);
if(this.href){
if(!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow)){
return this.refresh();
}
}
},refresh:function(){
this.cancel();
this.onLoadDeferred=new _1621(lang.hitch(this,"cancel"));
this.onLoadDeferred.then(lang.hitch(this,"onLoad"));
this._load();
return this.onLoadDeferred;
},_load:function(){
if(_1624){
perf.widgetStartedLoadingCallback();
}
this._setContent(this.onDownloadStart(),true);
var self=this;
var _162a={preventCache:(this.preventCache||this.refreshOnShow),url:this.href,handleAs:"text"};
if(lang.isObject(this.ioArgs)){
lang.mixin(_162a,this.ioArgs);
}
var hand=(this._xhrDfd=(this.ioMethod||xhr.get)(_162a)),_162b;
hand.then(function(html){
_162b=html;
try{
self._isDownloaded=true;
return self._setContent(html,false);
}
catch(err){
self._onError("Content",err);
}
},function(err){
if(!hand.canceled){
self._onError("Download",err);
}
delete self._xhrDfd;
return err;
}).then(function(){
self.onDownloadEnd();
if(_1624){
perf.widgetLoadedCallback(self);
}
delete self._xhrDfd;
return _162b;
});
delete this._hrefChanged;
},_onLoadHandler:function(data){
this._set("isLoaded",true);
try{
this.onLoadDeferred.resolve(data);
}
catch(e){
console.error("Error "+this.widgetId+" running custom onLoad code: "+e.message);
}
},_onUnloadHandler:function(){
this._set("isLoaded",false);
try{
this.onUnload();
}
catch(e){
console.error("Error "+this.widgetId+" running custom onUnload code: "+e.message);
}
},destroyDescendants:function(_162c){
if(this.isLoaded){
this._onUnloadHandler();
}
var _162d=this._contentSetter;
array.forEach(this.getChildren(),function(_162e){
if(_162e.destroyRecursive){
_162e.destroyRecursive(_162c);
}else{
if(_162e.destroy){
_162e.destroy(_162c);
}
}
_162e._destroyed=true;
});
if(_162d){
array.forEach(_162d.parseResults,function(_162f){
if(!_162f._destroyed){
if(_162f.destroyRecursive){
_162f.destroyRecursive(_162c);
}else{
if(_162f.destroy){
if((_162f["class"]==="rotator"||_162f["class"]==="hcrRotatorNav")&&!_162f.wfe){
_162f.wfe={remove:function(){
}};
}
_162f.destroy(_162c);
}
}
_162f._destroyed=true;
}
});
delete _162d.parseResults;
}
if(!_162c){
_1623.empty(this.containerNode);
}
delete this._singleChild;
},_setContent:function(cont,_1630){
this.destroyDescendants();
var _1631=this._contentSetter;
if(!(_1631&&_1631 instanceof html._ContentSetter)){
_1631=this._contentSetter=new html._ContentSetter({node:this.containerNode,_onError:lang.hitch(this,this._onError),onContentError:lang.hitch(this,function(e){
var _1632=this.onContentError(e);
try{
this.containerNode.innerHTML=_1632;
}
catch(e){
console.error("Fatal "+this.id+" could not change content due to "+e.message,e);
}
})});
}
var _1633=lang.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!cont.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:false,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{});
var p=_1631.set((lang.isObject(cont)&&cont.domNode)?cont.domNode:cont,_1633);
var self=this;
return when(p&&p.then?p:_1631.parseDeferred,function(){
delete self._contentSetterParams;
if(!_1630){
if(self._started){
self._startChildren();
self._scheduleLayout();
}
self._onLoadHandler(cont);
}
});
},_onError:function(type,err,_1634){
this.onLoadDeferred.reject(err);
var _1635=this["on"+type+"Error"].call(this,err);
if(_1634){
console.error(_1634,err);
}else{
if(_1635){
this._setContent(_1635,true);
}
}
},onLoad:function(){
},onUnload:function(){
},onDownloadStart:function(){
return this.loadingMessage;
},onContentError:function(){
},onDownloadError:function(){
return this.errorMessage;
},onDownloadEnd:function(){
}});
});
},"dijit/_WidgetsInTemplateMixin":function(){
define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(array,_1636,_1637,lang,_1638){
return _1637("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:false,widgetsInTemplate:true,contextRequire:null,_beforeFillContent:function(){
if(this.widgetsInTemplate){
var node=this.domNode;
if(this.containerNode&&!this.searchContainerNode){
this.containerNode.stopParser=true;
}
_1638.parse(node,{noStart:!this._earlyTemplatedStartup,template:true,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(lang.hitch(this,function(_1639){
this._startupWidgets=_1639;
for(var i=0;i<_1639.length;i++){
this._processTemplateNode(_1639[i],function(n,p){
return n[p];
},function(_163a,type,_163b){
if(type in _163a){
return _163a.connect(_163a,type,_163b);
}else{
return _163a.on(type,_163b,true);
}
});
}
if(this.containerNode&&this.containerNode.stopParser){
delete this.containerNode.stopParser;
}
}));
if(!this._startupWidgets){
throw new Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), "+"unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");
}
}
},_processTemplateNode:function(_163c,_163d,_163e){
if(_163d(_163c,"dojoType")||_163d(_163c,"data-dojo-type")){
return true;
}
return this.inherited(arguments);
},startup:function(){
array.forEach(this._startupWidgets,function(w){
if(w&&!w._started&&w.startup){
w.startup();
}
});
this._startupWidgets=null;
this.inherited(arguments);
}});
});
},"dijit/_HasDropDown":function(){
define(["dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","dojo/touch","./registry","./focus","./popup","./_FocusMixin"],function(_163f,_1640,dom,_1641,_1642,_1643,_1644,has,keys,lang,on,touch,_1645,focus,popup,_1646){
return _163f("dijit._HasDropDown",_1646,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:true,forceWidth:false,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:true,_onDropDownMouseDown:function(e){
if(this.disabled||this.readOnly){
return;
}
if(e.type!="MSPointerDown"&&e.type!="pointerdown"){
e.preventDefault();
}
this.own(on.once(this.ownerDocument,touch.release,lang.hitch(this,"_onDropDownMouseUp")));
this.toggleDropDown();
},_onDropDownMouseUp:function(e){
var _1647=this.dropDown,_1648=false;
if(e&&this._opened){
var c=_1643.position(this._buttonNode,true);
if(!(e.pageX>=c.x&&e.pageX<=c.x+c.w)||!(e.pageY>=c.y&&e.pageY<=c.y+c.h)){
var t=e.target;
while(t&&!_1648){
if(_1642.contains(t,"dijitPopup")){
_1648=true;
}else{
t=t.parentNode;
}
}
if(_1648){
t=e.target;
if(_1647.onItemClick){
var _1649;
while(t&&!(_1649=_1645.byNode(t))){
t=t.parentNode;
}
if(_1649&&_1649.onClick&&_1649.getParent){
_1649.getParent().onItemClick(_1649,e);
}
}
return;
}
}
}
if(this._opened){
if(_1647.focus&&(_1647.autoFocus!==false||(e.type=="mouseup"&&!this.hovering))){
this._focusDropDownTimer=this.defer(function(){
_1647.focus();
delete this._focusDropDownTimer;
});
}
}else{
if(this.focus){
this.defer("focus");
}
}
},_onDropDownClick:function(e){
if(this._stopClickEvents){
e.stopPropagation();
e.preventDefault();
}
},buildRendering:function(){
this.inherited(arguments);
this._buttonNode=this._buttonNode||this.focusNode||this.domNode;
this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;
var _164a={"after":this.isLeftToRight()?"Right":"Left","before":this.isLeftToRight()?"Left":"Right","above":"Up","below":"Down","left":"Left","right":"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";
_1642.add(this._arrowWrapperNode||this._buttonNode,"dijit"+_164a+"ArrowButton");
},postCreate:function(){
this.inherited(arguments);
var _164b=this.focusNode||this.domNode;
this.own(on(this._buttonNode,touch.press,lang.hitch(this,"_onDropDownMouseDown")),on(this._buttonNode,"click",lang.hitch(this,"_onDropDownClick")),on(_164b,"keydown",lang.hitch(this,"_onKey")),on(_164b,"keyup",lang.hitch(this,"_onKeyUp")));
},destroy:function(){
if(this._opened){
this.closeDropDown(true);
}
if(this.dropDown){
if(!this.dropDown._destroyed){
this.dropDown.destroyRecursive();
}
delete this.dropDown;
}
this.inherited(arguments);
},_onKey:function(e){
if(this.disabled||this.readOnly){
return;
}
var d=this.dropDown,_164c=e.target;
if(d&&this._opened&&d.handleKey){
if(d.handleKey(e)===false){
e.stopPropagation();
e.preventDefault();
return;
}
}
if(d&&this._opened&&e.keyCode==keys.ESCAPE){
this.closeDropDown();
e.stopPropagation();
e.preventDefault();
}else{
if(!this._opened&&(e.keyCode==keys.DOWN_ARROW||((e.keyCode==keys.ENTER||(e.keyCode==keys.SPACE&&(!this._searchTimer||(e.ctrlKey||e.altKey||e.metaKey))))&&((_164c.tagName||"").toLowerCase()!=="input"||(_164c.type&&_164c.type.toLowerCase()!=="text"))))){
this._toggleOnKeyUp=true;
e.stopPropagation();
e.preventDefault();
}
}
},_onKeyUp:function(){
if(this._toggleOnKeyUp){
delete this._toggleOnKeyUp;
this.toggleDropDown();
var d=this.dropDown;
if(d&&d.focus){
this.defer(lang.hitch(d,"focus"),1);
}
}
},_onBlur:function(){
this.closeDropDown(false);
this.inherited(arguments);
},isLoaded:function(){
return true;
},loadDropDown:function(_164d){
_164d();
},loadAndOpenDropDown:function(){
var d=new _1640(),_164e=lang.hitch(this,function(){
this.openDropDown();
d.resolve(this.dropDown);
});
if(!this.isLoaded()){
this.loadDropDown(_164e);
}else{
_164e();
}
return d;
},toggleDropDown:function(){
if(this.disabled||this.readOnly){
return;
}
if(!this._opened){
this.loadAndOpenDropDown();
}else{
this.closeDropDown(true);
}
},openDropDown:function(){
var _164f=this.dropDown,_1650=_164f.domNode,_1651=this._aroundNode||this.domNode,self=this;
var _1652=popup.open({parent:this,popup:_164f,around:_1651,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){
self.closeDropDown(true);
},onCancel:function(){
self.closeDropDown(true);
},onClose:function(){
_1641.set(self._popupStateNode,"popupActive",false);
_1642.remove(self._popupStateNode,"dijitHasDropDownOpen");
self._set("_opened",false);
}});
if(this.forceWidth||(this.autoWidth&&_1651.offsetWidth>_164f._popupWrapper.offsetWidth)){
var _1653=_1651.offsetWidth-_164f._popupWrapper.offsetWidth;
var _1654={w:_164f.domNode.offsetWidth+_1653};
this._origStyle=_1650.style.cssText;
if(lang.isFunction(_164f.resize)){
_164f.resize(_1654);
}else{
_1643.setMarginBox(_1650,_1654);
}
if(_1652.corner[1]=="R"){
_164f._popupWrapper.style.left=(_164f._popupWrapper.style.left.replace("px","")-_1653)+"px";
}
}
_1641.set(this._popupStateNode,"popupActive","true");
_1642.add(this._popupStateNode,"dijitHasDropDownOpen");
this._set("_opened",true);
this._popupStateNode.setAttribute("aria-expanded","true");
this._popupStateNode.setAttribute("aria-owns",_164f.id);
if(_1650.getAttribute("role")!=="presentation"&&!_1650.getAttribute("aria-labelledby")){
_1650.setAttribute("aria-labelledby",this.id);
}
return _1652;
},closeDropDown:function(focus){
if(this._focusDropDownTimer){
this._focusDropDownTimer.remove();
delete this._focusDropDownTimer;
}
if(this._opened){
this._popupStateNode.setAttribute("aria-expanded","false");
if(focus&&this.focus){
this.focus();
}
popup.close(this.dropDown);
this._opened=false;
}
if(this._origStyle){
this.dropDown.domNode.style.cssText=this._origStyle;
delete this._origStyle;
}
}});
});
},"curam/cdsl/types/codetable/CodeTables":function(){
define(["dojo/_base/declare","dojo/_base/lang","dojo/Deferred","curam/cdsl/_base/FacadeMethodCall","curam/cdsl/Struct"],function(_1655,lang,_1656,_1657,_1658){
var _1659=_1655(null,{_connection:null,constructor:function(_165a){
if(!_165a){
throw new Error("Missing parameter.");
}
if(typeof _165a!=="object"){
throw new Error("Wrong parameter type: "+typeof _165a);
}
this._connection=_165a;
},getCodeTable:function(name){
return this._connection.metadata().codetables()[name];
},loadForFacades:function(_165b){
var _165c=new _1656();
require(["curam/cdsl/request/CuramService"],lang.hitch(this,function(_165d){
var _165e=new _165d(this._connection),_165f=new _1657("CuramService","getCodetables",this._getInputStructsForLoadingCodetables(_165b));
_165e.call([_165f]).then(lang.hitch(this,function(data){
_165c.resolve(this);
}),function(err){
_165c.reject(err);
});
}));
return _165c;
},_getInputStructsForLoadingCodetables:function(_1660){
var ret=[];
for(var i=0;i<_1660.length;i++){
ret.push(new _1658({service:_1660[i].intf(),method:_1660[i].method()}));
}
return ret;
}});
return _1659;
});
},"curam/cdsl/types/codetable/CodeTableItem":function(){
define(["dojo/_base/declare"],function(_1661){
var _1662=_1661(null,{_code:null,_desc:null,_isDefault:null,constructor:function(code,desc){
this._code=code;
this._desc=desc;
this._isDefault=false;
},getCode:function(){
return this._code;
},getDescription:function(){
return this._desc;
},isDefault:function(_1663){
if(typeof _1663==="undefined"){
return this._isDefault||false;
}else{
var _1664=this._isDefault;
this._isDefault=_1663;
return _1664;
}
}});
return _1662;
});
},"curam/widget/AppBannerFilteringSelect":function(){
define(["dojo/_base/declare","dojo/_base/lang","dijit/form/FilteringSelect","curam/widget/AppBannerComboBoxMixin"],function(_1665,lang,_1666,_1667){
var _1668=_1665("curam.widget.AppBannerFilteringSelect",[_1666,_1667],{});
return _1668;
});
},"curam/GlobalVars":function(){
define(["curam/util"],function(){
var _1669={popupMappingRepository:[],popupMappingLoaded:[],popupInputs:[],currentPopupProps:null,currentPopupInstanceName:"",popupWindow:null,popupCTCodeMappings:[],popupPropertiesRepository:[],POPUP_EMPTY_SPAN_MIN_SIZE:15,POPUP_EMPTY_SPAN_CHAR:" ",POPUP_EMPTY_SPAN_VALUE:null,replacedButtons:[]};
var gc=dojo.global.curam;
dojo.mixin(gc,_1669);
gc.POPUP_EMPTY_SPAN_VALUE=curam.util.fillString(gc.POPUP_EMPTY_SPAN_CHAR,gc.POPUP_EMPTY_SPAN_MIN_SIZE);
return _1669;
});
},"curam/html":function(){
define(["curam/define"],function(){
curam.define.singleton("curam.html",{splitWithTag:function(value,delim,_166a,_166b){
var _166c=value.split(delim||"\n");
if(_166c.length<2){
return _166b?_166b(value):value;
}
var t=(_166a||"div")+">";
var _166d="<"+t,_166e="</"+t;
if(_166b){
for(var i=0;i<_166c.length;i++){
_166c[i]=_166b(_166c[i]);
}
}
return _166d+_166c.join(_166e+_166d)+_166e;
}});
return curam.html;
});
},"dojo/html":function(){
define(["./_base/kernel","./_base/lang","./_base/array","./_base/declare","./dom","./dom-construct","./parser"],function(_166f,lang,_1670,_1671,dom,_1672,_1673){
var _1674=0;
var html={_secureForInnerHtml:function(cont){
return cont.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"");
},_emptyNode:_1672.empty,_setNodeContent:function(node,cont){
_1672.empty(node);
if(cont){
if(typeof cont=="string"){
cont=_1672.toDom(cont,node.ownerDocument);
}
if(!cont.nodeType&&lang.isArrayLike(cont)){
for(var _1675=cont.length,i=0;i<cont.length;i=_1675==cont.length?i+1:0){
_1672.place(cont[i],node,"last");
}
}else{
_1672.place(cont,node,"last");
}
}
return node;
},_ContentSetter:_1671("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:false,extractContent:false,parseContent:false,parserScope:_166f._scopeName,startup:true,constructor:function(_1676,node){
lang.mixin(this,_1676||{});
node=this.node=dom.byId(this.node||node);
if(!this.id){
this.id=["Setter",(node)?node.id||node.tagName:"",_1674++].join("_");
}
},set:function(cont,_1677){
if(undefined!==cont){
this.content=cont;
}
if(_1677){
this._mixin(_1677);
}
this.onBegin();
this.setContent();
var ret=this.onEnd();
if(ret&&ret.then){
return ret;
}else{
return this.node;
}
},setContent:function(){
var node=this.node;
if(!node){
throw new Error(this.declaredClass+": setContent given no node");
}
try{
node=html._setNodeContent(node,this.content);
}
catch(e){
var _1678=this.onContentError(e);
try{
node.innerHTML=_1678;
}
catch(e){
console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+e.message,e);
}
}
this.node=node;
},empty:function(){
if(this.parseDeferred){
if(!this.parseDeferred.isResolved()){
this.parseDeferred.cancel();
}
delete this.parseDeferred;
}
if(this.parseResults&&this.parseResults.length){
_1670.forEach(this.parseResults,function(w){
if(w.destroy){
w.destroy();
}
});
delete this.parseResults;
}
_1672.empty(this.node);
},onBegin:function(){
var cont=this.content;
if(lang.isString(cont)){
if(this.cleanContent){
cont=html._secureForInnerHtml(cont);
}
if(this.extractContent){
var match=cont.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);
if(match){
cont=match[1];
}
}
}
this.empty();
this.content=cont;
return this.node;
},onEnd:function(){
if(this.parseContent){
this._parse();
}
return this.node;
},tearDown:function(){
delete this.parseResults;
delete this.parseDeferred;
delete this.node;
delete this.content;
},onContentError:function(err){
return "Error occurred setting content: "+err;
},onExecError:function(err){
return "Error occurred executing scripts: "+err;
},_mixin:function(_1679){
var empty={},key;
for(key in _1679){
if(key in empty){
continue;
}
this[key]=_1679[key];
}
},_parse:function(){
var _167a=this.node;
try{
var _167b={};
_1670.forEach(["dir","lang","textDir"],function(name){
if(this[name]){
_167b[name]=this[name];
}
},this);
var self=this;
this.parseDeferred=_1673.parse({rootNode:_167a,noStart:!this.startup,inherited:_167b,scope:this.parserScope}).then(function(_167c){
return self.parseResults=_167c;
},function(e){
self._onError("Content",e,"Error parsing in _ContentSetter#"+this.id);
});
}
catch(e){
this._onError("Content",e,"Error parsing in _ContentSetter#"+this.id);
}
},_onError:function(type,err,_167d){
var _167e=this["on"+type+"Error"].call(this,err);
if(_167d){
console.error(_167d,err);
}else{
if(_167e){
html._setNodeContent(this.node,_167e,true);
}
}
}}),set:function(node,cont,_167f){
if(undefined==cont){
console.warn("dojo.html.set: no cont argument provided, using empty string");
cont="";
}
if(!_167f){
return html._setNodeContent(node,cont,true);
}else{
var op=new html._ContentSetter(lang.mixin(_167f,{content:cont,node:node}));
return op.set();
}
}};
lang.setObject("dojo.html",html);
return html;
});
},"dojo/Stateful":function(){
define(["./_base/declare","./_base/lang","./_base/array","./when"],function(_1680,lang,array,when){
return _1680("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(name){
var apn=this._attrPairNames;
if(apn[name]){
return apn[name];
}
return (apn[name]={s:"_"+name+"Setter",g:"_"+name+"Getter"});
},postscript:function(_1681){
if(_1681){
this.set(_1681);
}
},_get:function(name,names){
return typeof this[names.g]==="function"?this[names.g]():this[name];
},get:function(name){
return this._get(name,this._getAttrNames(name));
},set:function(name,value){
if(typeof name==="object"){
for(var x in name){
if(name.hasOwnProperty(x)&&x!="_watchCallbacks"){
this.set(x,name[x]);
}
}
return this;
}
var names=this._getAttrNames(name),_1682=this._get(name,names),_1683=this[names.s],_1684;
if(typeof _1683==="function"){
_1684=_1683.apply(this,Array.prototype.slice.call(arguments,1));
}else{
this[name]=value;
}
if(this._watchCallbacks){
var self=this;
when(_1684,function(){
self._watchCallbacks(name,_1682,value);
});
}
return this;
},_changeAttrValue:function(name,value){
var _1685=this.get(name);
this[name]=value;
if(this._watchCallbacks){
this._watchCallbacks(name,_1685,value);
}
return this;
},watch:function(name,_1686){
var _1687=this._watchCallbacks;
if(!_1687){
var self=this;
_1687=this._watchCallbacks=function(name,_1688,value,_1689){
var _168a=function(_168b){
if(_168b){
_168b=_168b.slice();
for(var i=0,l=_168b.length;i<l;i++){
_168b[i].call(self,name,_1688,value);
}
}
};
_168a(_1687["_"+name]);
if(!_1689){
_168a(_1687["*"]);
}
};
}
if(!_1686&&typeof name==="function"){
_1686=name;
name="*";
}else{
name="_"+name;
}
var _168c=_1687[name];
if(typeof _168c!=="object"){
_168c=_1687[name]=[];
}
_168c.push(_1686);
var _168d={};
_168d.unwatch=_168d.remove=function(){
var index=array.indexOf(_168c,_1686);
if(index>-1){
_168c.splice(index,1);
}
};
return _168d;
}});
});
},"curam/widget/ComboBox":function(){
define(["dijit/registry","dojo/_base/declare","dojo/on","dojo/dom","dojo/text!curam/widget/templates/ComboBox.html","dijit/form/ComboBox","curam/widget/ComboBoxMixin"],function(_168e,_168f,on,dom,_1690){
var _1691=_168f("curam.widget.ComboBox",[dijit.form.ComboBox,curam.widget.ComboBoxMixin],{templateString:_1690,enterKeyOnOpenDropDown:false,postCreate:function(){
on(this.focusNode,"keydown",function(e){
var _1692=_168e.byNode(dom.byId("widget_"+e.target.id));
if(e.keyCode==dojo.keys.ENTER&&_1692._opened){
_1692.enterKeyOnOpenDropDown=true;
}
});
this.inherited(arguments);
}});
return _1691;
});
},"dijit/layout/LayoutContainer":function(){
define(["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-style","dojo/_base/lang","../_WidgetBase","./_LayoutWidget","./utils"],function(array,_1693,_1694,_1695,lang,_1696,_1697,_1698){
var _1699=_1693("dijit.layout.LayoutContainer",_1697,{design:"headline",baseClass:"dijitLayoutContainer",startup:function(){
if(this._started){
return;
}
array.forEach(this.getChildren(),this._setupChild,this);
this.inherited(arguments);
},_setupChild:function(child){
this.inherited(arguments);
var _169a=child.region;
if(_169a){
_1694.add(child.domNode,this.baseClass+"Pane");
}
},_getOrderedChildren:function(){
var _169b=array.map(this.getChildren(),function(child,idx){
return {pane:child,weight:[child.region=="center"?Infinity:0,child.layoutPriority,(this.design=="sidebar"?1:-1)*(/top|bottom/.test(child.region)?1:-1),idx]};
},this);
_169b.sort(function(a,b){
var aw=a.weight,bw=b.weight;
for(var i=0;i<aw.length;i++){
if(aw[i]!=bw[i]){
return aw[i]-bw[i];
}
}
return 0;
});
return array.map(_169b,function(w){
return w.pane;
});
},layout:function(){
_1698.layoutChildren(this.domNode,this._contentBox,this._getOrderedChildren());
},addChild:function(child,_169c){
this.inherited(arguments);
if(this._started){
this.layout();
}
},removeChild:function(child){
this.inherited(arguments);
if(this._started){
this.layout();
}
_1694.remove(child.domNode,this.baseClass+"Pane");
_1695.set(child.domNode,{top:"auto",bottom:"auto",left:"auto",right:"auto",position:"static"});
_1695.set(child.domNode,/top|bottom/.test(child.region)?"width":"height","auto");
}});
_1699.ChildWidgetProperties={region:"",layoutAlign:"",layoutPriority:0};
lang.extend(_1696,_1699.ChildWidgetProperties);
return _1699;
});
},"dojo/dnd/autoscroll":function(){
define(["../_base/lang","../sniff","../_base/window","../dom-geometry","../dom-style","../window"],function(lang,has,win,_169d,_169e,_169f){
var _16a0={};
lang.setObject("dojo.dnd.autoscroll",_16a0);
_16a0.getViewport=_169f.getBox;
_16a0.V_TRIGGER_AUTOSCROLL=32;
_16a0.H_TRIGGER_AUTOSCROLL=32;
_16a0.V_AUTOSCROLL_VALUE=16;
_16a0.H_AUTOSCROLL_VALUE=16;
var _16a1,doc=win.doc,_16a2=Infinity,_16a3=Infinity;
_16a0.autoScrollStart=function(d){
doc=d;
_16a1=_169f.getBox(doc);
var html=win.body(doc).parentNode;
_16a2=Math.max(html.scrollHeight-_16a1.h,0);
_16a3=Math.max(html.scrollWidth-_16a1.w,0);
};
_16a0.autoScroll=function(e){
var v=_16a1||_169f.getBox(doc),html=win.body(doc).parentNode,dx=0,dy=0;
if(e.clientX<_16a0.H_TRIGGER_AUTOSCROLL){
dx=-_16a0.H_AUTOSCROLL_VALUE;
}else{
if(e.clientX>v.w-_16a0.H_TRIGGER_AUTOSCROLL){
dx=Math.min(_16a0.H_AUTOSCROLL_VALUE,_16a3-html.scrollLeft);
}
}
if(e.clientY<_16a0.V_TRIGGER_AUTOSCROLL){
dy=-_16a0.V_AUTOSCROLL_VALUE;
}else{
if(e.clientY>v.h-_16a0.V_TRIGGER_AUTOSCROLL){
dy=Math.min(_16a0.V_AUTOSCROLL_VALUE,_16a2-html.scrollTop);
}
}
window.scrollBy(dx,dy);
};
_16a0._validNodes={"div":1,"p":1,"td":1};
_16a0._validOverflow={"auto":1,"scroll":1};
_16a0.autoScrollNodes=function(e){
var b,t,w,h,rx,ry,dx=0,dy=0,_16a4,_16a5;
for(var n=e.target;n;){
if(n.nodeType==1&&(n.tagName.toLowerCase() in _16a0._validNodes)){
var s=_169e.getComputedStyle(n),_16a6=(s.overflow.toLowerCase() in _16a0._validOverflow),_16a7=(s.overflowX.toLowerCase() in _16a0._validOverflow),_16a8=(s.overflowY.toLowerCase() in _16a0._validOverflow);
if(_16a6||_16a7||_16a8){
b=_169d.getContentBox(n,s);
t=_169d.position(n,true);
}
if(_16a6||_16a7){
w=Math.min(_16a0.H_TRIGGER_AUTOSCROLL,b.w/2);
rx=e.pageX-t.x;
if(has("webkit")||has("opera")){
rx+=win.body().scrollLeft;
}
dx=0;
if(rx>0&&rx<b.w){
if(rx<w){
dx=-w;
}else{
if(rx>b.w-w){
dx=w;
}
}
_16a4=n.scrollLeft;
n.scrollLeft=n.scrollLeft+dx;
}
}
if(_16a6||_16a8){
h=Math.min(_16a0.V_TRIGGER_AUTOSCROLL,b.h/2);
ry=e.pageY-t.y;
if(has("webkit")||has("opera")){
ry+=win.body().scrollTop;
}
dy=0;
if(ry>0&&ry<b.h){
if(ry<h){
dy=-h;
}else{
if(ry>b.h-h){
dy=h;
}
}
_16a5=n.scrollTop;
n.scrollTop=n.scrollTop+dy;
}
}
if(dx||dy){
return;
}
}
try{
n=n.parentNode;
}
catch(x){
n=null;
}
}
_16a0.autoScroll(e);
};
return _16a0;
});
},"curam/cdsl/_base/FacadeMethodCall":function(){
define(["dojo/_base/declare","dojo/_base/lang","dojo/json","dojo/_base/array"],function(_16a9,lang,json,array){
var _16aa=_16a9(null,{_intf:null,_method:null,_structs:null,_metadata:null,_options:null,constructor:function(intf,_16ab,_16ac,_16ad){
if(_16ac&&!lang.isArray(_16ac)){
throw new Error("Unexpected type of the 'structs' argument.");
}
this._intf=intf;
this._method=_16ab;
this._structs=_16ac?_16ac:[];
this._options={};
lang.mixin(this._options,{raw:true,formatted:false,sendCodetables:true,dataAdapter:null},_16ad);
},url:function(base){
return base+"/"+this._intf+"/"+this._method;
},_setMetadata:function(_16ae){
this._metadata=_16ae;
},toJson:function(){
var data={service:this._intf,method:this._method,data:array.map(this._structs,lang.hitch(this,function(item){
item.setDataAdapter(this._options.dataAdapter);
return item.getData();
})),configOptions:{"response-type":this._responseType(),"send-codetables":this._sendCodetables()}};
if(this._metadata&&this._metadata.queryOptions){
data.queryOptions=this._metadata.queryOptions;
}
return json.stringify(data);
},formatted:function(_16af){
return this._getOrSet(_16af,this._options,"formatted");
},raw:function(_16b0){
return this._getOrSet(_16b0,this._options,"raw");
},_responseType:function(){
if(this.raw()&&this.formatted()){
return "both";
}else{
if(this.raw()){
return "raw";
}else{
if(this.formatted()){
return "formatted";
}
}
}
throw new Error("Invalid response type: neither raw nor formatted was requested.");
},_sendCodetables:function(_16b1){
return this._getOrSet(_16b1,this._options,"sendCodetables");
},_getOrSet:function(value,_16b2,_16b3){
if(typeof value==="undefined"){
return _16b2[_16b3];
}else{
var _16b4=_16b2[_16b3];
_16b2[_16b3]=value;
return _16b4;
}
},intf:function(){
return this._intf;
},method:function(){
return this._method;
},dataAdapter:function(_16b5){
if(!_16b5){
return this._options.dataAdapter;
}
this._options.dataAdapter=_16b5;
}});
return _16aa;
});
},"curam/util/ScreenContext":function(){
define(["dojo/_base/declare"],function(_16b6){
var _16b7={DEFAULT_CONTEXT:112,SAMPLE22:2,SAMPLE21:1,SAMPLE13:4,SAMPLE12:2,SAMPLE11:1,EXTAPP:1048576,SMART_PANEL:262144,NESTED_UIM:131072,ORG_TREE:65536,CONTEXT_PANEL:32768,LIST_ROW_INLINE_PAGE:8192,LIST_EVEN_ROW:16384,TAB:4096,TREE:2048,AGENDA:1024,POPUP:512,MODAL:256,HOME:128,HEADER:64,NAVIGATOR:32,FOOTER:16,OVAL:8,RESOLVE:4,ACTION:2,ERROR:1,EMPTY:0};
var _16b8=[["ERROR","ACTION","RESOLVE","OPT_VALIDATION","FOOTER","NAVIGATOR","HEADER","HOME_PAGE","MODAL","POPUP","AGENDA","TREE","TAB","LIST_EVEN_ROW","LIST_ROW_INLINE_PAGE","CONTEXT_PANEL","ORG_TREE","NESTED_UIM","SMART_PANEL","EXTAPP"],["SAMPLE11","SAMPLE12","SAMPLE13"],["SAMPLE21","SAMPLE22"]];
var _16b9=_16b6("curam.util.ScreenContext",null,{constructor:function(_16ba){
if(_16ba){
this.setContext(_16ba);
}else{
this.currentContext=[_16b7["DEFAULT_CONTEXT"]|_16b7["DEFAULT_CONTEXT"]];
}
},setContext:function(_16bb){
var tmp=this.setup(_16bb);
this.currentContext=((tmp==null)?([_16b7["DEFAULT_CONTEXT"]|_16b7["DEFAULT_CONTEXT"]]):(tmp));
},addContextBits:function(_16bc,idx){
if(!_16bc){
return;
}
var navig=(idx)?idx:0;
var _16bd=this.parseContext(_16bc);
if(_16bd!=null){
this.currentContext[navig]|=_16bd;
}
return this.currentContext[navig];
},addAll:function(idx){
var navig=(idx)?idx:0;
this.currentContext[navig]=4294967295;
return this.currentContext[navig];
},clear:function(_16be,idx){
if(!_16be){
this.clearAll();
return;
}
var navig=(idx)?idx:0;
if(_16be==0){
return this.currentContext[navig];
}
var _16bf=this.parseContext(_16be);
if(_16bf!=null){
var _16c0=this.currentContext[navig]&_16bf;
this.currentContext[navig]^=_16c0;
}
return this.currentContext[navig];
},clearAll:function(idx){
if(idx){
this.currentContext[idx]=0;
}else{
for(var i=0;i<this.currentContext.length;i++){
this.currentContext[i]=0;
}
}
},updateStates:function(_16c1){
this.clear("ERROR|ACTION|RESOLVE");
this.currentContext[0]=this.currentContext[0]|(_16c1&7);
},hasContextBits:function(_16c2,idx){
if(!_16c2){
return false;
}
var navig=(idx)?idx:0;
var _16c3=this.parseContext(_16c2);
if(_16c3!=null){
var merge=this.currentContext[navig]&_16c3;
return (merge==_16c3);
}
return false;
},getValue:function(){
var _16c4="";
for(var i=0;i<this.currentContext.length;i++){
_16c4+=this.currentContext[i]+"|";
}
return _16c4.substring(0,_16c4.length-1);
},toRequestString:function(){
return "o3ctx="+this.getValue();
},toBinary:function(){
var _16c5="";
for(var i=0;i<this.currentContext.length;i++){
_16c5+=this.currentContext[i].toString(2)+"|";
}
return _16c5.substring(0,_16c5.length-1);
},toString:function(){
var _16c6="";
for(var i=0;i<this.currentContext.length;i++){
var _16c7="";
var j=0;
while(j<_16b8[i].length){
if(((this.currentContext[i]>>j)&1)!=0){
_16c7+=","+_16b8[i][j];
}
j++;
}
if(_16c7==""){
return "{}";
}
_16c6+="|"+_16c7.replace(",","{")+((_16c7.length==0)?"":"}");
}
return _16c6.substring(1);
},parseContext:function(_16c8){
var _16c9=_16c8.replace(/,/g,"|");
var parts=_16c9.split("|");
var tmp=isNaN(parts[0])?parseInt(_16b7[parts[0]]):parts[0];
for(var i=1;i<parts.length;i++){
tmp=tmp|(isNaN(parts[i])?parseInt(_16b7[parts[i]]):parts[i]);
}
return (isNaN(tmp)?null:tmp);
},setup:function(_16ca){
if(!_16ca){
return null;
}
var _16cb=(""+_16ca).split("|");
var _16cc=new Array(_16cb.length);
for(var i=0;i<_16cb.length;i++){
_16cc[i]=this.parseContext(_16cb[_16cb.length-i-1]);
_16cc[i]=_16cc[i]|_16cc[i];
if(!_16cc[i]||isNaN(_16cc[i])||_16cc[i]>4294967295){
return null;
}
}
return _16cc;
}});
return _16b9;
});
},"dijit/layout/utils":function(){
define(["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(array,_16cd,_16ce,_16cf,lang){
function _16d0(word){
return word.substring(0,1).toUpperCase()+word.substring(1);
};
function size(_16d1,dim){
var _16d2=_16d1.resize?_16d1.resize(dim):_16ce.setMarginBox(_16d1.domNode,dim);
if(_16d1.fakeWidget){
return;
}
if(_16d2){
lang.mixin(_16d1,_16d2);
}else{
lang.mixin(_16d1,_16ce.getMarginBoxSimple(_16d1.domNode));
}
};
var utils={marginBox2contentBox:function(node,mb){
var cs=_16cf.getComputedStyle(node);
var me=_16ce.getMarginExtents(node,cs);
var pb=_16ce.getPadBorderExtents(node,cs);
return {l:_16cf.toPixelValue(node,cs.paddingLeft),t:_16cf.toPixelValue(node,cs.paddingTop),w:mb.w-(me.w+pb.w),h:mb.h-(me.h+pb.h)};
},layoutChildren:function(_16d3,dim,_16d4,_16d5,_16d6){
dim=lang.mixin({},dim);
_16cd.add(_16d3,"dijitLayoutContainer");
_16d4=array.filter(_16d4,function(item){
return item.region!="center"&&item.layoutAlign!="client";
}).concat(array.filter(_16d4,function(item){
return item.region=="center"||item.layoutAlign=="client";
}));
var _16d7={};
array.forEach(_16d4,function(child){
var elm=child.domNode,pos=(child.region||child.layoutAlign);
if(!pos){
throw new Error("No region setting for "+child.id);
}
var _16d8=elm.style;
_16d8.left=dim.l+"px";
_16d8.top=dim.t+"px";
_16d8.position="absolute";
_16cd.add(elm,"dijitAlign"+_16d0(pos));
var _16d9={};
if(_16d5&&_16d5==child.id){
_16d9[child.region=="top"||child.region=="bottom"?"h":"w"]=_16d6;
}
if(pos=="leading"){
pos=child.isLeftToRight()?"left":"right";
}
if(pos=="trailing"){
pos=child.isLeftToRight()?"right":"left";
}
if(pos=="top"||pos=="bottom"){
_16d9.w=dim.w;
size(child,_16d9);
dim.h-=child.h;
if(pos=="top"){
dim.t+=child.h;
}else{
_16d8.top=dim.t+dim.h+"px";
}
}else{
if(pos=="left"||pos=="right"){
_16d9.h=dim.h;
size(child,_16d9);
if(child.isSplitter){
_16d8.left=dim.l-child.w+"px";
dim.w+=child.w;
}else{
dim.w-=child.w;
}
if(pos=="left"){
if(!child.isSplitter){
dim.l+=child.w;
}
}else{
if(child.isSplitter){
_16d8.left=dim.l+dim.w-child.w+"px";
dim.l+=child.w;
}else{
_16d8.left=dim.l+dim.w+"px";
}
}
}else{
if(pos=="client"||pos=="center"){
size(child,dim);
}
}
}
_16d7[pos]={w:dim.w,h:dim.h};
});
return _16d7;
}};
lang.setObject("dijit.layout.utils",utils);
return utils;
});
},"curam/util/FrequencyEditor":function(){
define(["dojo/dom","dojo/dom-style","dojo/dom-class","dojo/dom-attr","dojo/dom-construct","dojo/query","cm/_base/_dom","curam/util","curam/define","curam/debug","dojo/has","dojo/sniff"],function(dom,_16da,_16db,_16dc,_16dd,query,cm,util,_16de,debug,has){
_16de.singleton("curam.util.FrequencyEditor",{CORRECTOR:1,DAILY_FREQUENCY:0,WEEKLY_FREQUENCY:1,MONTHLY_FREQUENCY:2,YEARLY_FREQUENCY:3,BIMONTHLY_FREQUENCY:4,EVERY_DAY_MASK:201,EVERY_WEEKDAY_MASK:202,EVERY_WEEKENDDAY_MASK:203,MON_MASK:1,TUE_MASK:2,WED_MASK:4,THU_MASK:8,FRI_MASK:16,SAT_MASK:32,SUN_MASK:64,daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],EVERY_DAY:0,EVERY_WEEKDAY:1,MON:0,TUE:1,WED:2,THU:3,FRI:4,SAT:5,SUN:6,START_DATE:0,MONTH_DAY_NUM:1,MONTH_SEL_DAY:2,DAY_NUM:0,SEL_DAY:1,SEL_MONTH_DAY_NUM:0,SEL_MONTH_SEL_DAY:1,domSelector:(has("ios")||has("android")?dojo:dijit),allowableCharsForNumeric:["1","2","3","4","5","6","7","8","9","0",dojo.keys.LEFT_ARROW,dojo.keys.RIGHT_ARROW,dojo.keys.DELETE,dojo.keys.ENTER,dojo.keys.BACKSPACE,dojo.keys.END,dojo.keys.HOME,dojo.keys.TAB,dojo.keys.F5],allowableDayString:["32","33","34","35","36"],allowableDayOfWeekMask:["201","202","203","1","2","4","8","16","32","64"],allowableFirstDayStringForBimonthly:["32","33","34","35"],allowableSecondDayStringForBimonthly:["33","34","35","36"],allowableWeekdayStringForBimonthly:["1","2","4","8","16","32","64"],allowableMonthString:["1","2","3","4","5","6","7","8","9","10","11","12"],initPage:function(){
var _16df=curam.dialog.getParentWindow(window);
if(formActivated==true){
executeOpenerMapping("freq_text",translatedPatternString);
executeOpenerMapping("freq_data",patternString);
curam.util.getTopmostWindow().dojo.publish("/curam/progress/unload");
curam.dialog.closeModalDialog();
return false;
}
var freq=_16df.getPopupInput("initFreq");
curam.debug.log(debug.getProperty("curam.util.FrequencyEditor.input"),freq);
if(!freq||freq==null||freq.length==0){
document.theForm.freqType[0].checked=true;
document.theForm.daily_select_type[curam.util.FrequencyEditor.EVERY_DAY].checked=true;
return true;
}
var _16e0=parseInt(freq.charAt(0),10);
if(_16e0==curam.util.FrequencyEditor.DAILY_FREQUENCY){
curam.util.FrequencyEditor.setupDailyFrequency(freq);
}else{
if(_16e0==curam.util.FrequencyEditor.WEEKLY_FREQUENCY){
curam.util.FrequencyEditor.setupWeeklyFrequency(freq);
}else{
if(_16e0==curam.util.FrequencyEditor.MONTHLY_FREQUENCY){
curam.util.FrequencyEditor.setupMonthlyFrequency(freq);
}else{
if(_16e0==curam.util.FrequencyEditor.YEARLY_FREQUENCY){
curam.util.FrequencyEditor.setupYearlyFrequency(freq);
}else{
if(_16e0==curam.util.FrequencyEditor.BIMONTHLY_FREQUENCY){
curam.util.FrequencyEditor.setupBimonthlyFrequency(freq);
}else{
alert(errorMsgs.freqPattern);
}
}
}
}
}
return true;
},setupDailyFrequency:function(_16e1){
var _16e2=_16e1.substr(4,3);
document.theForm.freqType[curam.util.FrequencyEditor.DAILY_FREQUENCY].checked=true;
if(parseInt(_16e2,10)==curam.util.FrequencyEditor.EVERY_WEEKDAY_MASK){
document.theForm.daily_select_type[curam.util.FrequencyEditor.EVERY_WEEKDAY].checked=true;
}else{
document.theForm.daily_select_type[curam.util.FrequencyEditor.EVERY_DAY].checked=true;
var _16e3=parseInt(_16e1.substr(1,3),10);
document.theForm.daily_num.value=""+_16e3;
}
},setupWeeklyFrequency:function(_16e4){
var _16e5=parseInt(_16e4.substr(4,3),10);
document.theForm.freqType[curam.util.FrequencyEditor.WEEKLY_FREQUENCY].checked=true;
if(_16e5&curam.util.FrequencyEditor.MON_MASK){
document.theForm.weekly_select_mon.checked=true;
}
if(_16e5&curam.util.FrequencyEditor.TUE_MASK){
document.theForm.weekly_select_tue.checked=true;
}
if(_16e5&curam.util.FrequencyEditor.WED_MASK){
document.theForm.weekly_select_wed.checked=true;
}
if(_16e5&curam.util.FrequencyEditor.THU_MASK){
document.theForm.weekly_select_thur.checked=true;
}
if(_16e5&curam.util.FrequencyEditor.FRI_MASK){
document.theForm.weekly_select_fri.checked=true;
}
if(_16e5&curam.util.FrequencyEditor.SAT_MASK){
document.theForm.weekly_select_sat.checked=true;
}
if(_16e5&curam.util.FrequencyEditor.SUN_MASK){
document.theForm.weekly_select_sun.checked=true;
}
var _16e6=parseInt(_16e4.substr(1,3),10);
document.theForm.weekly_num.value=""+_16e6;
},setupMonthlyFrequency:function(_16e7){
var _16e8=parseInt(_16e7.substr(1,3),10);
var _16e9=parseInt(_16e7.substr(4,3),10);
var _16ea=parseInt(_16e7.substr(7,2),10);
document.theForm.freqType[curam.util.FrequencyEditor.MONTHLY_FREQUENCY].checked=true;
if(_16ea==0){
document.theForm.monthlyFreqType[curam.util.FrequencyEditor.START_DATE].checked=true;
document.theForm.monthly0_month_interval.value=_16e8;
}else{
if(_16ea<=31){
document.theForm.monthlyFreqType[curam.util.FrequencyEditor.MONTH_DAY_NUM].checked=true;
document.theForm.monthly1_day_num.value=_16ea;
document.theForm.monthly1_month_interval.value=_16e8;
}else{
document.theForm.monthlyFreqType[curam.util.FrequencyEditor.MONTH_SEL_DAY].checked=true;
var _16eb;
if(has("ios")||has("android")){
_16eb=dojo.byId("monthly2_select_day_num");
_16eb.value=_16ea;
_16eb=dojo.byId("monthly2_select_day");
_16eb.value=_16e9;
}else{
_16eb=dijit.byId("monthly2_select_day_num");
_16eb.set("value",_16ea);
_16eb=dijit.byId("monthly_select_day");
_16eb.set("value",_16e9);
}
document.theForm.monthly2_month_interval.value=_16e8;
}
}
},setupBimonthlyFrequency:function(_16ec){
var _16ed=parseInt(_16ec.substr(1,2),10);
var _16ee=parseInt(_16ec.substr(4,3),10);
var _16ef=parseInt(_16ec.substr(7,2),10);
document.theForm.freqType[curam.util.FrequencyEditor.BIMONTHLY_FREQUENCY-curam.util.FrequencyEditor.CORRECTOR].checked=true;
if(_16ef<=31){
document.theForm.bimonthlyFreqType[curam.util.FrequencyEditor.DAY_NUM].checked=true;
document.theForm.bimonthly1_day1_num.value=_16ef;
document.theForm.bimonthly1_day2_num.value=_16ed;
}else{
document.theForm.bimonthlyFreqType[curam.util.FrequencyEditor.SEL_DAY].checked=true;
var _16f0;
if(has("ios")||has("android")){
_16f0=dojo.byId("bimonthly2_select_day1_num");
_16f0.value=_16ef;
_16f0=dojo.byId("bimonthly2_select_day2_num");
_16f0.value=_16ed;
_16f0=dojo.byId("bimonthly2_select_weekday");
_16f0.value=_16ee;
}else{
_16f0=dijit.byId("bimonthly2_select_day1_num");
_16f0.set("value",_16ef);
_16f0=dijit.byId("bimonthly2_select_day2_num");
_16f0.set("value",_16ed);
_16f0=dijit.byId("bimonthly2_select_weekday");
_16f0.set("value",_16ee);
}
}
},setupYearlyFrequency:function(_16f1){
var _16f2=parseInt(_16f1.substr(1,3),10);
var _16f3=parseInt(_16f1.substr(4,3),10);
var _16f4=parseInt(_16f1.substr(7,2),10);
document.theForm.freqType[curam.util.FrequencyEditor.YEARLY_FREQUENCY+curam.util.FrequencyEditor.CORRECTOR].checked=true;
if(_16f4<=31){
document.theForm.yearlyFreqType[curam.util.FrequencyEditor.SEL_MONTH_DAY_NUM].checked=true;
var _16f5;
if(has("ios")||has("android")){
_16f5=dojo.byId("yearly1_select_month");
_16f5.value=_16f2;
}else{
_16f5=dijit.byId("yearly1_select_month");
_16f5.set("value",_16f2);
}
document.theForm.yearly1_day_num.value=_16f4;
}else{
document.theForm.yearlyFreqType[curam.util.FrequencyEditor.SEL_MONTH_SEL_DAY].checked=true;
var _16f5;
if(has("ios")||has("android")){
_16f5=dojo.byId("yearly2_select_day_num");
_16f5.value=_16f4;
_16f5=dojo.byId("yearly2_select_day");
_16f5.value=_16f3;
_16f5=dojo.byId("yearly2_select_month");
_16f5.value=_16f2;
}else{
_16f5=dijit.byId("yearly2_select_day_num");
_16f5.set("value",_16f4);
_16f5=dijit.byId("yearly2_select_day");
_16f5.set("value",_16f3);
_16f5=dijit.byId("yearly2_select_month");
_16f5.set("value",_16f2);
}
}
},createPatternString:function(){
var _16f6=null;
var _16f7=false;
if(document.theForm.freqType[0].checked==true){
_16f7=curam.util.FrequencyEditor.createDailyPatternString();
}else{
if(document.theForm.freqType[1].checked==true){
_16f7=curam.util.FrequencyEditor.createWeeklyPatternString();
}else{
if(document.theForm.freqType[2].checked==true){
_16f7=curam.util.FrequencyEditor.createMonthlyPatternString();
}else{
if(document.theForm.freqType[3].checked==true){
_16f7=curam.util.FrequencyEditor.createBimonthlyPatternString();
}else{
_16f7=curam.util.FrequencyEditor.createYearlyPatternString();
}
}
}
}
if(_16f7){
curam.util.FrequencyEditor.disableRowBorder();
return true;
}else{
return false;
}
},createDailyPatternString:function(){
var _16f8="0";
if(document.theForm.daily_select_type[curam.util.FrequencyEditor.EVERY_DAY].checked==true){
var _16f9=parseInt(document.theForm.daily_num.value,10);
if(curam.util.FrequencyEditor.validateDailyPattern(_16f9)){
_16f8+=curam.util.FrequencyEditor.doZeroPadding(_16f9,3);
_16f8+="000";
}else{
return false;
}
}else{
_16f8+="001";
_16f8+=curam.util.FrequencyEditor.EVERY_WEEKDAY_MASK;
}
_16f8+="00";
document.theForm.patternString.value=_16f8;
return true;
},validateDailyPattern:function(_16fa){
if(isNaN(_16fa)||_16fa<1){
alert(errorMsgs.everyDay);
return false;
}
return true;
},createWeeklyPatternString:function(){
var _16fb="1";
var _16fc=0;
var _16fd=parseInt(document.theForm.weekly_num.value,10);
if(curam.util.FrequencyEditor.validateWeeklyPattern(_16fd)){
_16fb+=curam.util.FrequencyEditor.doZeroPadding(_16fd,3);
var _16fe=false;
var _16ff=document.theForm.weekly_select_mon;
if(_16ff.checked==true){
_16fe=true;
_16fc+=_16ff.value-0;
}
_16ff=document.theForm.weekly_select_tue;
if(_16ff.checked==true){
_16fe=true;
_16fc+=_16ff.value-0;
}
_16ff=document.theForm.weekly_select_wed;
if(_16ff.checked==true){
_16fe=true;
_16fc+=_16ff.value-0;
}
_16ff=document.theForm.weekly_select_thur;
if(_16ff.checked==true){
_16fe=true;
_16fc+=_16ff.value-0;
}
_16ff=document.theForm.weekly_select_fri;
if(_16ff.checked==true){
_16fe=true;
_16fc+=_16ff.value-0;
}
_16ff=document.theForm.weekly_select_sat;
if(_16ff.checked==true){
_16fe=true;
_16fc+=_16ff.value-0;
}
_16ff=document.theForm.weekly_select_sun;
if(_16ff.checked==true){
_16fe=true;
_16fc+=_16ff.value-0;
}
if(!_16fe){
alert(errorMsgs.noDaySelected);
return false;
}
if(_16fc>0){
_16fb+=curam.util.FrequencyEditor.doZeroPadding(_16fc,3);
}else{
_16fb+="000";
}
_16fb+="00";
document.theForm.patternString.value=_16fb;
return true;
}
return false;
},validateWeeklyPattern:function(_1700){
if(isNaN(_1700)||_1700<1){
alert(errorMsgs.everyWeek);
return false;
}
return true;
},createMonthlyPatternString:function(){
var _1701="2";
if(document.theForm.monthlyFreqType[curam.util.FrequencyEditor.START_DATE].checked==true){
var _1702=parseInt(document.theForm.monthly0_month_interval.value,10);
if(!curam.util.FrequencyEditor.validateMonthlyData(_1702)){
return false;
}
var _1703=0;
_1701+=curam.util.FrequencyEditor.doZeroPadding(_1702,3);
_1701+="000";
_1701+=curam.util.FrequencyEditor.doZeroPadding(_1703,2);
}else{
if(document.theForm.monthlyFreqType[curam.util.FrequencyEditor.MONTH_DAY_NUM].checked==true){
var _1702=parseInt(document.theForm.monthly1_month_interval.value,10);
var _1703=parseInt(document.theForm.monthly1_day_num.value,10);
if(!curam.util.FrequencyEditor.validateMonthlyData(_1702,_1703)){
return false;
}
_1701+=curam.util.FrequencyEditor.doZeroPadding(_1702,3);
_1701+="000";
_1701+=curam.util.FrequencyEditor.doZeroPadding(_1703,2);
}else{
var _1702=parseInt(document.theForm.monthly2_month_interval.value,10);
if(!curam.util.FrequencyEditor.validateMonthlyData(_1702)){
return false;
}
var day=curam.util.FrequencyEditor.domSelector.byId("monthly2_select_day_num").value;
var _1704=curam.util.FrequencyEditor.domSelector.byId("monthly2_select_day").value;
if(!curam.util.FrequencyEditor.validateDayWeekString(day,_1704,_1701)){
return false;
}
_1701+=curam.util.FrequencyEditor.doZeroPadding(_1702,3);
_1701+=curam.util.FrequencyEditor.doZeroPadding(_1704,3);
_1701+=curam.util.FrequencyEditor.doZeroPadding(day,2);
}
}
document.theForm.patternString.value=_1701;
return true;
},validateMonthlyData:function(_1705,_1706){
if(isNaN(_1705)||_1705<1||_1705>100){
alert(errorMsgs.monthNum);
return false;
}
if(_1706==null){
return true;
}
if(isNaN(_1706)||_1706<1||_1706>28){
alert(errorMsgs.dayNum);
return false;
}
return true;
},validateDayWeekString:function(day,_1707,_1708){
var days=curam.util.FrequencyEditor.allowableDayString;
var _1709=curam.util.FrequencyEditor.allowableDayOfWeekMask;
var _170a=false;
var _170b=false;
for(var i=0;i<days.length;i++){
if(day==days[i]){
_170a=true;
break;
}
}
for(var i=0;i<_1709.length;i++){
if(_1707==_1709[i]){
_170b=true;
break;
}
}
if(_170a&&_170b){
return true;
}else{
if(!_170a){
if(_1708=="2"){
alert(errorMsgs.dayStringForMonthly);
}else{
if(_1708=="3"){
alert(errorMsgs.dayStringForYearly);
}else{
alert(errorMsgs.dayString);
}
}
return false;
}else{
if(!_170b){
if(_1708=="2"){
alert(errorMsgs.dayOfWeekMaskForMonthly);
}else{
if(_1708=="3"){
alert(errorMsgs.dayOfWeekMaskForYearly);
}else{
alert(errorMsgs.dayOfWeekMask);
}
}
return false;
}
}
}
},createBimonthlyPatternString:function(){
var _170c="4";
var _170d;
if(document.theForm.bimonthlyFreqType[curam.util.FrequencyEditor.DAY_NUM].checked==true){
var _170e=parseInt(document.theForm.bimonthly1_day1_num.value,10);
var _170f=parseInt(document.theForm.bimonthly1_day2_num.value,10);
if(!curam.util.FrequencyEditor.validateBimonthlyData(_170e,_170f,null)){
return false;
}
if(_170e>_170f){
_170d=_170e;
_170e=_170f;
_170f=_170d;
}
_170c+=curam.util.FrequencyEditor.doZeroPadding(_170f,2);
_170c+="0000";
_170c+=curam.util.FrequencyEditor.doZeroPadding(_170e,2);
}else{
var _1710=curam.util.FrequencyEditor.domSelector.byId("bimonthly2_select_day1_num");
var _1711=_1710.value;
_1710=curam.util.FrequencyEditor.domSelector.byId("bimonthly2_select_day2_num");
var _1712=_1710.value;
_1710=curam.util.FrequencyEditor.domSelector.byId("bimonthly2_select_weekday");
var _1713=_1710.value;
if(!curam.util.FrequencyEditor.validateBimonthlyDataString(_1711,_1712,_1713)){
return false;
}
if(_1711>_1712){
_170d=_1711;
_1711=_1712;
_1712=_170d;
}
if(!curam.util.FrequencyEditor.validateBimonthlyData(_1711,_1712,_1713)){
return false;
}
_170c+=curam.util.FrequencyEditor.doZeroPadding(_1712,2);
_170c+="0";
_170c+=curam.util.FrequencyEditor.doZeroPadding(_1713,3);
_170c+=curam.util.FrequencyEditor.doZeroPadding(_1711,2);
}
document.theForm.patternString.value=_170c;
return true;
},validateBimonthlyData:function(first,_1714,_1715){
if(_1715!=null){
if(isNaN(_1715)||_1715<1||_1715>64){
alert(errorMsgs.weekend);
return false;
}
}else{
if(isNaN(first)||first<1||first>28||isNaN(_1714)||_1714<1||_1714>28){
alert(errorMsgs.dayNum);
return false;
}
}
if(first==_1714){
alert(errorMsgs.dayDiff);
return false;
}
return true;
},validateBimonthlyDataString:function(_1716,_1717,_1718){
var _1719=curam.util.FrequencyEditor.allowableFirstDayStringForBimonthly;
var _171a=curam.util.FrequencyEditor.allowableSecondDayStringForBimonthly;
var _171b=curam.util.FrequencyEditor.allowableWeekdayStringForBimonthly;
var _171c=false;
var _171d=false;
var _171e=false;
for(var i=0;i<_1719.length;i++){
if(_1716==_1719[i]){
_171c=true;
break;
}
}
for(var i=0;i<_171a.length;i++){
if(_1717==_171a[i]){
_171d=true;
break;
}
}
for(var i=0;i<_171b.length;i++){
if(_1718==_171b[i]){
_171e=true;
break;
}
}
if(_171c&&_171d&&_171e){
return true;
}else{
if(!_171c){
alert(errorMsgs.firstDayString);
return false;
}else{
if(!_171d){
alert(errorMsgs.secondDayString);
return false;
}else{
if(!_171e){
alert(errorMsgs.weekend);
return false;
}
}
}
}
},createYearlyPatternString:function(){
var _171f="3";
var _1720=null;
if(document.theForm.yearlyFreqType[curam.util.FrequencyEditor.SEL_MONTH_DAY_NUM].checked==true){
_1720=curam.util.FrequencyEditor.domSelector.byId("yearly1_select_month");
var _1721=_1720.value;
_171f+=curam.util.FrequencyEditor.doZeroPadding(_1721,3);
_171f+="000";
if(!curam.util.FrequencyEditor.validateMonthString(_1721)){
return false;
}
var _1722=parseInt(document.theForm.yearly1_day_num.value,10);
if(!curam.util.FrequencyEditor.validateYearlyData(_1722,_1721)){
return false;
}
_171f+=curam.util.FrequencyEditor.doZeroPadding(_1722,2);
}else{
var day=curam.util.FrequencyEditor.domSelector.byId("yearly2_select_day_num").value;
var _1723=curam.util.FrequencyEditor.domSelector.byId("yearly2_select_day").value;
var month=curam.util.FrequencyEditor.domSelector.byId("yearly2_select_month").value;
if(!curam.util.FrequencyEditor.validateDayWeekString(day,_1723,_171f)){
return false;
}
if(!curam.util.FrequencyEditor.validateMonthString(month)){
return false;
}
_171f+=curam.util.FrequencyEditor.doZeroPadding(month,3);
_171f+=curam.util.FrequencyEditor.doZeroPadding(_1723,3);
_171f+=curam.util.FrequencyEditor.doZeroPadding(day,2);
}
document.theForm.patternString.value=_171f;
return true;
},validateYearlyData:function(_1724,_1725){
if(isNaN(_1724)||_1724<1||_1724>curam.util.FrequencyEditor.daysInMonth[_1725-1]){
alert(errorMsgs.dayNumAnd+"  "+curam.util.FrequencyEditor.daysInMonth[_1725-1]);
return false;
}
return true;
},validateMonthString:function(month){
var _1726=curam.util.FrequencyEditor.allowableMonthString;
for(var i=0;i<_1726.length;i++){
if(month==_1726[i]){
return true;
}
}
alert(errorMsgs.monthString);
return false;
},doZeroPadding:function(_1727,_1728){
var _1729=""+_1727;
var _172a=_1728-_1729.length;
for(var i=0;i<_172a;i++){
_1729="0"+_1729;
}
return _1729;
},_setFirstLevelRadioButton:function(_172b){
var _172c=query("input[name='freqType']",dom.byId("mainForm"))[_172b];
if(_172c==null){
throw new Error("The radio button for the selected"+" frequency type could not be found!");
}
if(!_172c.checked){
query("input[type='radio']:checked",dom.byId("mainForm")).forEach(function(_172d){
_172d.checked=false;
});
if(_172b!=curam.util.FrequencyEditor.WEEKLY_FREQUENCY){
query("input[type='checkbox']:checked",dom.byId("mainForm")).forEach(function(_172e){
_172e.checked=false;
});
}
_172c.checked=true;
}
},_setSecondLevelRadioButton:function(_172f){
if(_172f==undefined){
return "undefined";
}
var _1730;
if(_172f.domNode){
_1730=_172f.domNode;
}else{
_1730=_172f;
}
if(_1730.tagName.toLowerCase()=="input"&&_16dc.get(_1730,"type")=="radio"){
_1730.checked=true;
return "radio node clicked";
}
var _1731=cm.getParentByType(_1730,"TD");
if(_1731==null){
throw new Error("Exception: The row contains the node should be found");
}
var _1732=query("input[type = 'radio']",_1731)[0];
if(_1732==null){
throw new Error("Exception: The radio node should exist");
}else{
_1732.checked=true;
return "text input or codetable clicked";
}
},setSelectedFreqType:function(_1733,_1734){
debug.log("curam.util.FrequencyEditor: "+debug.getProperty("curam.util.FrequencyEditor.radio"));
curam.util.FrequencyEditor._setFirstLevelRadioButton(_1733);
curam.util.FrequencyEditor._setSecondLevelRadioButton(_1734);
},setDefaultOption:function(_1735){
document.theForm.daily_select_type[curam.util.FrequencyEditor.EVERY_DAY].checked=false;
document.theForm.daily_select_type[curam.util.FrequencyEditor.EVERY_WEEKDAY].checked=false;
document.theForm.monthlyFreqType[curam.util.FrequencyEditor.DAY_NUM].checked=false;
document.theForm.monthlyFreqType[curam.util.FrequencyEditor.SEL_DAY].checked=false;
document.theForm.bimonthlyFreqType[curam.util.FrequencyEditor.DAY_NUM].checked=false;
document.theForm.bimonthlyFreqType[curam.util.FrequencyEditor.SEL_DAY].checked=false;
document.theForm.yearlyFreqType[curam.util.FrequencyEditor.SEL_MONTH_DAY_NUM].checked=false;
document.theForm.yearlyFreqType[curam.util.FrequencyEditor.SEL_MONTH_SEL_DAY].checked=false;
if(_1735!=curam.util.FrequencyEditor.WEEKLY_FREQUENCY){
document.theForm.weekly_select_mon.checked=false;
document.theForm.weekly_select_tue.checked=false;
document.theForm.weekly_select_wed.checked=false;
document.theForm.weekly_select_thur.checked=false;
document.theForm.weekly_select_fri.checked=false;
document.theForm.weekly_select_sat.checked=false;
document.theForm.weekly_select_sun.checked=false;
}
if(_1735==curam.util.FrequencyEditor.DAILY_FREQUENCY){
document.theForm.daily_select_type[curam.util.FrequencyEditor.EVERY_DAY].checked=true;
}else{
if(_1735==curam.util.FrequencyEditor.WEEKLY_FREQUENCY){
document.theForm.weekly_select_mon.checked=true;
}else{
if(_1735==curam.util.FrequencyEditor.MONTHLY_FREQUENCY){
document.theForm.monthlyFreqType[curam.util.FrequencyEditor.DAY_NUM].checked=true;
}else{
if(_1735==curam.util.FrequencyEditor.BIMONTHLY_FREQUENCY){
document.theForm.bimonthlyFreqType[curam.util.FrequencyEditor.DAY_NUM].checked=true;
}else{
if(_1735==curam.util.FrequencyEditor.YEARLY_FREQUENCY){
document.theForm.yearlyFreqType[curam.util.FrequencyEditor.SEL_MONTH_DAY_NUM].checked=true;
}
}
}
}
}
},_doPosNumbericInputChecker:function(_1736){
if(_1736==""){
return false;
}
var chars=curam.util.FrequencyEditor.allowableCharsForNumeric;
for(var i=0;i<chars.length;i++){
if(_1736==chars[i]){
return true;
}
}
return false;
},posNumericInputChecker:function(event){
event=dojo.fixEvent(event);
var _1737=event.keyChar;
var _1738=curam.util.FrequencyEditor._doPosNumbericInputChecker(_1737);
if(!_1738){
dojo.stopEvent(event);
}
},prePopulateTextFields:function(_1739){
return function(e){
for(var i=0;i<_1739.length;i++){
if(!_1739[i].value||_1739[i].value==""){
_1739[i].value=1;
}
}
};
},disableRowBorder:function(){
query("form[name='theForm'] table tr").forEach(function(node){
_16db.add(node,"row-no-border");
});
},addInputListener:function(){
dojo.ready(function(){
var _173a=[];
query("input[type='text']:not(input.dijitReset)").forEach(function(input){
_173a.push(input);
curam.util.connect(input,"onkeypress",curam.util.FrequencyEditor.posNumericInputChecker);
});
curam.util.connect(dom.byId("mainForm"),"onsubmit",function(event){
curam.util.FrequencyEditor.prePopulateTextFields(_173a);
});
});
},replacePlaceholderWithDomNode:function(){
query("body#Curam_frequency-editor table tr td.frequency").forEach(function(_173b){
curam.util.FrequencyEditor._parse(_173b);
});
},_parse:function(node){
var _173c=query("> .node-needs-replacement",node);
var _173d=query("> span",node)[0];
if(_173d==null||_173d==undefined){
throw new Error("Exception: Some text string is missing for some certain "+"frequency type, please check the 'frequency-editor.jsp' file.");
}
var _173e=_173d.innerHTML;
var _173f=/%[^%]*%/g;
var _1740=_173e.match(_173f);
if(_173c.length==0&&_1740==null){
return "No need to parse";
}else{
if(_173c.length==0&&_1740!=null){
throw new Error("The text string '"+_173e+"' from the 'FrequencyPatternSelector.properties'"+" should not have any placeholder.");
}else{
if(_173c.length!=0&&_1740==null){
throw new Error("The text string '"+_173e+"' from the 'FrequencyPatternSelector.properties'"+" should have some placeholders.");
}
}
}
if(_16db.contains(node,"weekly-frequency")){
if(_1740.length!=2){
throw new Error("The text string '"+_173e+"' from the 'FrequencyPatternSelector.properties' "+"has the incorrect number of placeholders.");
}
var _1741=dojo.clone(_173c[0]);
_173c.forEach(function(_1742){
_16dd.destroy(_1742);
});
_16db.remove(_1741,"node-needs-replacement");
var _1743=_1741.className.match(_173f);
var _1744;
for(var i=0;i<_1740.length;i++){
if(_1740[i]!=_1743){
_1744=_1740[i];
break;
}
}
var _1745=_173e.split(_1744);
var _1746=_1745[0];
var _1747=_1745[1];
var _1748;
if(_1746.indexOf(_1743)!=-1){
_1748=true;
_1746=_1746.replace(_1743,"<span class='"+_1743+"'>placeholder</span>");
}else{
_1748=false;
_1747=_1747.replace(_1743,"<span class='"+_1743+"'>placeholder</span>");
}
if(_1747==""){
_173d.innerHTML=_1746;
_16dd.place(_1741,query("span."+_1743,_173d)[0],"replace");
}else{
_173d.innerHTML=_1746;
var _1749=node.parentNode.nextSibling.nextSibling;
var _174a=_16dd.create("tr",{"class":"blue"});
var _174b=_16dd.create("td",{"class":"bottom"},_174a);
_174b.colSpan="4";
_16da.set(_174b,"paddingLeft","20px");
var _174c=_16dd.create("span",{innerHTML:_1747},_174b);
_16dd.place(_174a,_1749,"after");
if(_1748){
_16dd.place(_1741,query("span."+_1743,_173d)[0],"replace");
}else{
_16dd.place(_1741,query("span[class='"+_1743+"'",_174c)[0],"replace");
}
query("td.day",_1749).forEach(function(_174d){
_16db.remove(_174d,"bottom");
});
if(_1746==""){
_16db.remove(node,"top");
}
query("th.type",node.parentNode)[0].rowSpan="4";
}
return "Parsed Successfully";
}
if(_173c.length!=_1740.length){
throw new Error("The text string '"+_173e+"' from the 'FrequencyPatternSelector.properties' "+"has the incorrect number of placeholders.");
}
var _174e=dojo.clone(_173c);
_173c.forEach(_16dd.destroy);
for(i=0;i<_1740.length;i++){
var _174f=_1740[i];
_173e=_173e.replace(_174f,"<span class='"+_174f+"'>placeholder</span>");
}
_173d.innerHTML=_173e;
_174e.forEach(function(_1750,i){
_16db.remove(_1750,"node-needs-replacement");
var _1751=_1750.className.match(_173f);
_16dd.place(_1750,query("span."+_1751,node)[0],"replace");
});
return "Parsed Successfully";
}});
return curam.util.FrequencyEditor;
});
},"curam/charting":function(){
define(["dojo/dom-class","dojo/dom","dojo/ready","cm/_base/_dom","curam/define"],function(_1752,dom,ready,cmDom,_1753){
_1753.singleton("curam.charting",{alignChartWrapper:function(node){
ready(function(){
node=cmDom.getParentByClass(dom.byId(node),"cluster");
if(node){
_1752.add(node,"chart-panel");
}
});
}});
return curam.charting;
});
},"curam/cdsl/_base/MetadataRegistry":function(){
define(["dojo/_base/declare","curam/cdsl/types/codetable/CodeTables","curam/cdsl/types/codetable/CodeTable","dojo/_base/lang"],function(_1754,_1755,_1756,lang){
var _1757=_1754(null,{_callEntries:null,_codetables:null,constructor:function(){
this._callEntries={};
this._codetables={};
},setFlags:function(_1758){
var _1759=_1758.intf()+"."+_1758.method(),_175a=!this._callEntries[_1759];
_1758._sendCodetables(_175a);
},update:function(_175b){
var _175c=_175b.request(),_175d=_175c.intf()+"."+_175c.method(),_175e=this._callEntries[_175d];
if(!_175e){
_175e={};
this._callEntries[_175d]=_175e;
}
if(_175b.hasCodetables()){
var data=_175b.getCodetablesData();
for(var i=0;i<data.length;i++){
this._codetables[data[i].name]=new _1756(data[i].name,data[i].defaultCode,data[i].codes);
}
}
},codetables:function(){
return this._codetables;
}});
return _1757;
});
},"dijit/_FocusMixin":function(){
define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(focus,_175f,_1760,lang){
lang.extend(_175f,{focused:false,onFocus:function(){
},onBlur:function(){
},_onFocus:function(){
this.onFocus();
},_onBlur:function(){
this.onBlur();
}});
return _1760("dijit._FocusMixin",null,{_focusManager:focus});
});
},"curam/util/ui/form/renderer/DateEditRendererFormEventsAdapter":function(){
define(["dojo/_base/declare","dojo/_base/unload","curam/util/ui/form/renderer/GenericRendererFormEventsAdapter","curam/util/DatePicker"],function(_1761,_1762,_1763,_1764){
var _1765=_1761("curam.util.ui.form.renderer.DateEditRendererFormEventsAdapter",_1763,{_unsubscribes:[],constructor:function(id,_1766){
this.elementID=id;
this.pathID=_1766;
var _1767=dojo.subscribe("curam/modal/component/ready",this,function(){
this.element=document.getElementById(this.elementID);
_1767.remove();
});
_1762.addOnUnload(function(){
this._unsubscribes&&this._unsubscribes.forEach(function(hh){
hh.remove();
});
});
},addChangeListener:function(_1768){
var topic="curam/util/CuramFormsAPI/formChange/datePicker".concat(this.getElementID());
this._unsubscribes.push(window.dojo.subscribe(topic,this,function(_1769){
this.getFormElement().value=_1769.value;
_1768();
}));
},setFormElementValue:function(value){
var self=this;
this._unsubscribes.push(dojo.subscribe("curam/modal/component/ready",this,function(){
var _176a=new _1764();
_176a.setDate(self.getElementID(),value);
this.getFormElement().value=value;
}));
}});
return _1765;
});
},"dijit/form/ValidationTextBox":function(){
define(["dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/i18n","./TextBox","../Tooltip","dojo/text!./templates/ValidationTextBox.html","dojo/i18n!./nls/validate"],function(_176b,_176c,lang,i18n,_176d,_176e,_176f){
var _1770=_176b("dijit.form.ValidationTextBox",_176d,{templateString:_176f,required:false,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){
},state:"",tooltipPosition:[],_deprecateRegExp:function(attr,value){
if(value!=_1770.prototype[attr]){
_176c.deprecated("ValidationTextBox id="+this.id+", set('"+attr+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0");
this.set("pattern",value);
}
},_setRegExpGenAttr:function(_1771){
this._deprecateRegExp("regExpGen",_1771);
this._set("regExpGen",this._computeRegexp);
},_setRegExpAttr:function(value){
this._deprecateRegExp("regExp",value);
},_setValueAttr:function(){
this.inherited(arguments);
this._refreshState();
},validator:function(value,_1772){
return (new RegExp("^(?:"+this._computeRegexp(_1772)+")"+(this.required?"":"?")+"$")).test(value)&&(!this.required||!this._isEmpty(value))&&(this._isEmpty(value)||this.parse(value,_1772)!==undefined);
},_isValidSubset:function(){
return this.textbox.value.search(this._partialre)==0;
},isValid:function(){
return this.validator(this.textbox.value,this.get("constraints"));
},_isEmpty:function(value){
return (this.trim?/^\s*$/:/^$/).test(value);
},getErrorMessage:function(){
var _1773=this.invalidMessage=="$_unset_$"?this.messages.invalidMessage:!this.invalidMessage?this.promptMessage:this.invalidMessage;
var _1774=this.missingMessage=="$_unset_$"?this.messages.missingMessage:!this.missingMessage?_1773:this.missingMessage;
return (this.required&&this._isEmpty(this.textbox.value))?_1774:_1773;
},getPromptMessage:function(){
return this.promptMessage;
},_maskValidSubsetError:true,validate:function(_1775){
var _1776="";
var _1777=this.disabled||this.isValid(_1775);
if(_1777){
this._maskValidSubsetError=true;
}
var _1778=this._isEmpty(this.textbox.value);
var _1779=!_1777&&_1775&&this._isValidSubset();
this._set("state",_1777?"":(((((!this._hasBeenBlurred||_1775)&&_1778)||_1779)&&(this._maskValidSubsetError||(_1779&&!this._hasBeenBlurred&&_1775)))?"Incomplete":"Error"));
this.focusNode.setAttribute("aria-invalid",this.state=="Error"?"true":"false");
if(this.state=="Error"){
this._maskValidSubsetError=_1775&&_1779;
_1776=this.getErrorMessage(_1775);
}else{
if(this.state=="Incomplete"){
_1776=this.getPromptMessage(_1775);
this._maskValidSubsetError=!this._hasBeenBlurred||_1775;
}else{
if(_1778){
_1776=this.getPromptMessage(_1775);
}
}
}
this.set("message",_1776);
return _1777;
},displayMessage:function(_177a){
if(_177a&&this.focused){
_176e.show(_177a,this.domNode,this.tooltipPosition,!this.isLeftToRight());
}else{
_176e.hide(this.domNode);
}
},_refreshState:function(){
if(this._created){
this.validate(this.focused);
}
this.inherited(arguments);
},constructor:function(_177b){
this.constraints=lang.clone(this.constraints);
this.baseClass+=" dijitValidationTextBox";
},startup:function(){
this.inherited(arguments);
this._refreshState();
},_setConstraintsAttr:function(_177c){
if(!_177c.locale&&this.lang){
_177c.locale=this.lang;
}
this._set("constraints",_177c);
this._refreshState();
},_setPatternAttr:function(_177d){
this._set("pattern",_177d);
this._refreshState();
},_computeRegexp:function(_177e){
var p=this.pattern;
if(typeof p=="function"){
p=p.call(this,_177e);
}
if(p!=this._lastRegExp){
var _177f="";
this._lastRegExp=p;
if(p!=".*"){
p.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(re){
switch(re.charAt(0)){
case "{":
case "+":
case "?":
case "*":
case "^":
case "$":
case "|":
case "(":
_177f+=re;
break;
case ")":
_177f+="|$)";
break;
default:
_177f+="(?:"+re+"|$)";
break;
}
});
}
try{
"".search(_177f);
}
catch(e){
_177f=this.pattern;
console.warn("RegExp error in "+this.declaredClass+": "+this.pattern);
}
this._partialre="^(?:"+_177f+")$";
}
return p;
},postMixInProperties:function(){
this.inherited(arguments);
this.messages=i18n.getLocalization("dijit.form","validate",this.lang);
this._setConstraintsAttr(this.constraints);
},_setDisabledAttr:function(value){
this.inherited(arguments);
this._refreshState();
},_setRequiredAttr:function(value){
this._set("required",value);
this.focusNode.setAttribute("aria-required",value);
this._refreshState();
},_setMessageAttr:function(_1780){
this._set("message",_1780);
this.displayMessage(_1780);
},reset:function(){
this._maskValidSubsetError=true;
this.inherited(arguments);
},_onBlur:function(){
this.displayMessage("");
this.inherited(arguments);
},destroy:function(){
_176e.hide(this.domNode);
this.inherited(arguments);
}});
return _1770;
});
},"curam/util/SessionTimeout":function(){
define(["dojo/dom","dojo/dom-construct","curam/util","curam/dialog","curam/util/external","curam/util/LocalConfig"],function(dom,_1781,util,_1782,_1783,_1784){
curam.define.singleton("curam.util.SessionTimeout",{_EXPIRED_MESSAGE_KEY:"expiredMessage",_INTERNAL_LOGOUT_WRAPPER:"internal-logout-wrapper",logoutPageID:"",userMessageNode:null,userMessageNodeID:"userMessage",minutesCompNodeID:"minutesComp",secondsCompNodeID:"secondsComp",sessTimeoutWarningJSPXDialog:"session-timeout-warning-dialog.jspx",interactionAllowance:3000,_idleTick:10000,_expiryTick:1000,_cfg:null,_idleClock:null,idleAllowance:0,tlw:false,_isExternal:false,requiredWarnDurationMs:0,effectiveTimeout:0,__remainingCountdown:0,checkSessionExpired:function(){
sto._invalidateIdleClock(true);
sto._isExternal=sto.tlw.jsScreenContext&&sto.tlw.jsScreenContext.hasContextBits("EXTAPP");
sto._cfg=sto.getTimeoutWarningConfig();
sto._cfg["isExternal"]=sto._isExternal;
sto._cfg["tlw"]=sto.tlw;
if(sto._cfg.bufferingPeriod){
sto.interactionAllowance=sto._cfg.bufferingPeriod*1000;
}
var _1785=sto._cfg&&sto._cfg.timeout;
sto.requiredWarnDurationMs=_1785?_1785*1000:0;
sto._idleClock=setInterval(function(){
sto._doCheckExp();
},sto._idleTick);
},_doCheckExp:function(){
var _1786="";
if(typeof (Storage)!=="undefined"){
if(sessionStorage.sessionExpiry){
_1786=sessionStorage.sessionExpiry;
}
}
if(!sto.previousSessionExpiryString||(sto.previousSessionExpiryString!=_1786)){
sto._validateSessionExpiry(_1786);
return;
}
if(sto.idleAllowance==0){
return;
}
sto.idleAllowance-=sto._idleTick;
if(sto.idleAllowance<=0){
sto._invalidateIdleClock(true);
sto._openSessionTimeoutWarningModalDialog();
}
},_validateSessionExpiry:function(_1787){
if(_1787==null){
sto._invalidateIdleClock();
return;
}
var _1788=_1787.split("-",2);
if(_1788&&_1788.length==2){
for(var idx in _1788){
var _1789=Math.abs(_1788[idx]);
if(isNaN(_1789)){
sto._invalidateIdleClock();
return;
}
_1788[idx]=_1789;
}
sto.idleAllowance=Math.abs(_1788[0]-_1788[1]);
sto._insertWarnDuration();
sto.previousSessionExpiryString=_1787;
return;
}
sto._invalidateIdleClock();
},_invalidateIdleClock:function(_178a){
_178a&&clearInterval(sto._idleClock);
sto.previousSessionExpiryString=false;
sto.idleAllowance=0;
},_insertWarnDuration:function(){
var _178b=sto.idleAllowance-sto.interactionAllowance-sto._idleTick;
sto.effectiveTimeout=Math.min(sto.requiredWarnDurationMs,Math.max(_178b,0));
sto._cfg["effectiveTimeout"]=sto.effectiveTimeout;
sto.idleAllowance-=(sto.effectiveTimeout);
},getTimeoutWarningConfig:function(){
var wdef=sto.tlw||sto._cfg.tlw;
if(wdef.TIMEOUT_WARNING_CONFIG){
return wdef.TIMEOUT_WARNING_CONFIG.timeoutWarning;
}else{
return sto.pseudoConfig;
}
},_openSessionTimeoutWarningModalDialog:function(){
var size={width:sto._cfg.width,height:sto._cfg.height};
if(sto._isExternal){
sto.tlw.openModal(sto.sessTimeoutWarningJSPXDialog,size);
}else{
sto.tlw.dialogOpenerRef=util.showModalDialogWithRef(sto.sessTimeoutWarningJSPXDialog,null,size);
sto.tlw.dialogOpenerRef&&sto.tlw.dialogOpenerRef._setClosableAttr(false);
}
},initTimer:function(_178c,_178d){
sto._cfg=_178c;
sto.__remainingCountdown=_178c.effectiveTimeout;
var _178e=dom.byId(sto.minutesCompNodeID),_178f=dom.byId(sto.secondsCompNodeID);
sto.expiryCountdown=setInterval(function(){
sto._countDown(_178e,_178f);
},sto._expiryTick);
},_countDown:function(_1790,_1791){
if(sto.__remainingCountdown==0){
sto._stopCountdown();
return;
}
sto.__remainingCountdown-=sto._expiryTick;
if(sto.__remainingCountdown<=0){
sto._stopCountdown();
sto.tlw.curam.util.SessionTimeout.autoLogout();
_1782.closeModalDialog();
return;
}
var _1792=new Date(sto.__remainingCountdown);
var secs=""+_1792.getSeconds(),sPad=(secs.length==1)?"0":"";
_1790.innerHTML=_1792.getMinutes();
_1791.innerHTML=sPad+secs;
},_stopCountdown:function(){
sto.__remainingCountdown=0;
clearInterval(sto.expiryCountdown);
},waitForRedirection:function(){
dojo.subscribe("/curam/dialog/close",function(){
sto._redirectToLogoutWrapper();
});
},autoLogout:function(){
dojo.subscribe("/curam/dialog/close",function(){
sto._redirectLoginWithSessionExpiredMessage();
});
},_redirectToLogoutWrapper:function(){
sto._cfg.tlw.dojo.publish("curam/redirect/logout");
var page=sto._cfg.logoutPage||false;
if(!page){
return;
}
if(sto._cfg.isExternal){
sto._cfg.tlw.displayContent({pageID:page,param:[{paramKey:"invalidateSession",paramValue:true}]});
}else{
sto._redirectInternalLogoutWrapper(page);
}
},_redirectInternalLogoutWrapper:function(_1793){
sto._cfg.tlw.dialogOpenerRef=null;
if(_1793===sto._INTERNAL_LOGOUT_WRAPPER){
_1793+=".jspx?invalidateSession=true";
dojo.global.location=jsBaseURL+"/"+_1793;
}else{
var _1794=_1782.getParentWindow();
_1793+="Page.do?invalidateSession=true";
if(_1794&&_1794.location!==sto._cfg.tlw.location){
_1782.doRedirect(_1794,_1793,true);
}else{
curam.tab.getTabController().handleLinkClick(_1793);
}
}
},_redirectLoginWithSessionExpiredMessage:function(){
var _1795=sto._cfg.expiredUserMessageTxt||"";
localStorage[sto._EXPIRED_MESSAGE_KEY]=_1795;
sto._redirectToLogoutWrapper();
},resetAndStay:function(){
var _1796=sto._cfg.tlw.dojo.subscribe("/curam/dialog/close",function(){
if(sto._cfg.tlw.dialogOpenerRef){
var pRef=_1782.getParentWindow(window);
pRef&&pRef.focus();
sto._cfg.tlw.dialogOpenerRef=null;
}
sto._cfg.tlw.dojo.unsubscribe(_1796);
sto._stopCountdown();
sto.checkSessionExpired();
require(["curam/debug"],function(debug){
debug.log(debug.getProperty("continueApp"));
});
});
},createExpiredSessionMessageHTML:function(_1797){
var _1798=_1784.readOption(sto._EXPIRED_MESSAGE_KEY);
if(_1798){
messageContainerDOM=dom.byId(_1797);
if(messageContainerDOM){
var _1799="<div id='error-messages-container' class='wrapper-expired-message'>"+"<ul id='error-messages' class='messages'>"+"<li class='level-1'><div><span id='message'>"+_1798+"</span></div></li></ul></div>";
_1781.place(_1781.toDom(_1799),messageContainerDOM);
}
_1784.clearOption(sto._EXPIRED_MESSAGE_KEY);
}
},displayUserMsgAsParagraphs:function(msg,_179a){
var _179b=_179a||dom.byId(sto.userMessageNodeID);
var _179c=msg.replace("\\n","[<p>]").replace("\n","[<p>]").split("[<p>]");
var _179d=document.createDocumentFragment();
for(line in _179c){
var _179e=document.createElement("p");
_179e.innerHTML=_179c[line];
_179d.appendChild(_179e);
}
_1781.place(_179d,_179b);
},});
var sto=curam.util.SessionTimeout;
sto.tlw=curam.util.getTopmostWindow()||window.top;
return sto;
});
},"curam/codetable-hierarchy":function(){
define(["curam/util/Request","curam/debug","dojo/data/ItemFileReadStore","curam/widget/FilteringSelect"],function(_179f,debug){
var _17a0={initLists:function(_17a1,_17a2,_17a3){
this.noOptionCode=_17a1;
this.noOptionDesc=_17a2;
this.ddInfo=_17a3;
this.lists=function(){
var next=null;
for(var i=_17a3.length-1;i>=0;i--){
next=new _17a0.DropDown(dijit.byId(_17a3[i].id),_17a3[i].ctName,_17a1,_17a2,next);
}
};
dojo.addOnLoad(this.lists);
},DropDown:function(_17a4,_17a5,_17a6,_17a7,next){
this.node=_17a4.domNode;
this.widgetNode=_17a4;
this.codeTableName=_17a5;
this.noOptionCode=_17a6;
this.noOptionDesc=_17a7;
this.next=next;
var _17a8=this;
this.populate=function(){
if(!_17a8.widgetNode.get("value")){
_17a8.resetNext(_17a8);
}else{
if(_17a8.next!=null){
_17a8.resetNext(_17a8);
if(_17a8.widgetNode.get("value")==0){
return;
}
_179f.post({url:"../servlet/JSONServlet",handleAs:"text",preventCache:true,load:function(_17a9,evt){
if(_17a9.length<3){
curam.debug.log(debug.getProperty("curam.codetable-hierarchy.msg.1")+_17a8.codeTableName+debug.getProperty("curam.codetable-hierarchy.msg.2")+_17a8.widgetNode.get("value"));
return;
}
var _17aa=dojo.fromJson(_17a9);
_17aa.unshift({"value":_17a8.noOptionCode,"name":""});
var _17ab=dijit.byId(_17a8.next.widgetNode.id);
var _17ac=new dojo.data.ItemFileReadStore({data:{label:"name",identifier:"value",items:_17aa}});
_17ac.fetch({onComplete:function(item,_17ad){
_17ab.set("store",_17ac);
_17ab.set("value",_17a8.noOptionCode);
}});
},error:function(error){
debug.log(error);
},content:{"content":dojo.toJson({operation:"getCodeTableSubsetForFilteringSelect",args:[_17a8.codeTableName,_17a8.widgetNode.get("value")]})}});
}
}
};
this.resetNext=function(_17ae){
while(_17ae.next!=null){
var _17af=[];
_17af.unshift({"value":_17ae.noOptionCode,"name":_17ae.noOptionDesc});
var _17b0=dijit.byId(_17ae.next.widgetNode.id);
var _17b1=new dojo.data.ItemFileReadStore({data:{label:"name",identifier:"value",items:_17af}});
_17b1.fetch({onComplete:function(item,_17b2){
_17b0.set("store",_17b1);
_17b0.set("displayedValue",_17ae.noOptionDesc);
}});
_17ae=_17ae.next;
}
};
if(next!=null){
dojo.connect(this.widgetNode,"onChange",this.populate);
}
}};
dojo.global.CodeTableHierarchy=_17a0;
return _17a0;
});
},"curam/util/ui/refresh/TabRefreshController":function(){
define(["dojo/_base/declare","curam/inspection/Layer","curam/debug","curam/util/ui/refresh/RefreshEvent"],function(_17b3,layer,debug){
var _17b4=_17b3("curam.util.ui.refresh.TabRefreshController",null,{EVENT_REFRESH_MENU:"/curam/refresh/menu",EVENT_REFRESH_NAVIGATION:"/curam/refresh/navigation",EVENT_REFRESH_CONTEXT:"/curam/refresh/context",EVENT_REFRESH_MAIN:"/curam/refresh/main-content",_tabWidgetId:null,_configOnSubmit:null,_configOnLoad:null,_handler:null,_lastSubmitted:null,_currentlyRefreshing:null,_ignoreContextRefresh:true,_initialMenuAndNavRefreshDone:false,_nullController:null,constructor:function(_17b5,_17b6){
this._configOnSubmit={};
this._configOnLoad={};
if(!_17b6){
this._nullController=true;
return;
}
this._tabWidgetId=_17b5;
dojo.forEach(_17b6.config,dojo.hitch(this,function(item){
this._configOnSubmit[item.page]=item.onsubmit;
this._configOnLoad[item.page]=item.onload;
}));
layer.register("curam/util/ui/refresh/TabRefreshController",this);
},pageSubmitted:function(_17b7,_17b8){
new curam.util.ui.refresh.RefreshEvent(curam.util.ui.refresh.RefreshEvent.prototype.TYPE_ONSUBMIT,_17b8);
debug.log("curam.util.ui.refresh.TabRefreshController: "+debug.getProperty("curam.util.ui.refresh.TabRefreshController.submit",[_17b7,_17b8]));
dojo.publish("curam/form/submit",[_17b7]);
if(this._configOnSubmit[_17b7]){
this._lastSubmitted=_17b7;
debug.log("curam.util.ui.refresh.TabRefreshController: "+debug.getProperty("curam.util.ui.refresh.TabRefreshController"+"submit.notify"));
}
},pageLoaded:function(_17b9,_17ba){
var event=new curam.util.ui.refresh.RefreshEvent(curam.util.ui.refresh.RefreshEvent.prototype.TYPE_ONLOAD,_17ba);
debug.log("curam.util.ui.refresh.TabRefreshController:"+debug.getProperty("curam.util.ui.refresh.TabRefreshController.load",[_17b9,_17ba]));
if(this._currentlyRefreshing&&this._currentlyRefreshing.equals(event)){
this._currentlyRefreshing=null;
debug.log("curam.util.ui.refresh.TabRefreshController:"+debug.getProperty("curam.util.ui.refresh.TabRefreshController"+"refresh"));
return;
}
var _17bb={};
if(_17ba==event.SOURCE_CONTEXT_MAIN&&this._configOnLoad[_17b9]){
_17bb=this._configOnLoad[_17b9];
debug.log("curam.util.ui.refresh.TabRefreshController:"+debug.getProperty("curam.util.ui.refresh.TabRefreshController"+".load.config"));
}
if(this._lastSubmitted){
var cfg=this._configOnSubmit[this._lastSubmitted];
debug.log("curam.util.ui.refresh.TabRefreshController:"+debug.getProperty("curam.util.ui.refresh.TabRefreshController"+".submit.config",[this._lastSubmitted]));
_17bb.details=_17bb.details||cfg.details;
_17bb.menubar=_17bb.menubar||cfg.menubar;
_17bb.navigation=_17bb.navigation||cfg.navigation;
_17bb.mainContent=_17bb.mainContent||cfg.mainContent;
this._lastSubmitted=null;
}
if(!this._nullController){
this._fireRefreshEvents(_17bb,this._ignoreContextRefresh,!this._initialMenuAndNavRefreshDone);
}
if(this._ignoreContextRefresh&&_17ba==event.SOURCE_CONTEXT_MAIN){
this._ignoreContextRefresh=false;
}
if(!this._initialMenuAndNavRefreshDone){
this._initialMenuAndNavRefreshDone=true;
}
},_fireRefreshEvents:function(cfg,_17bc,_17bd){
var _17be=[];
if(cfg.details){
if(_17bc){
curam.debug.log("curam.util.ui.refresh.TabRefreshController: ignoring the first CONTEXT refresh request");
}else{
debug.log("curam.util.ui.refresh.TabRefreshController:"+debug.getProperty("curam.util.ui.refresh.TabRefreshController"+".refresh.context"));
_17be.push(this.EVENT_REFRESH_CONTEXT+"/"+this._tabWidgetId);
}
}else{
if(!_17bc){
dojo.publish("curam/tab/contextRefresh");
}
}
if(cfg.menubar||_17bd){
debug.log("curam.util.ui.refresh.TabRefreshController:"+debug.getProperty("curam.util.ui.refresh.TabRefreshController"+".refresh.menu"));
_17be.push(this.EVENT_REFRESH_MENU+"/"+this._tabWidgetId);
}
if(cfg.navigation||_17bd){
debug.log("curam.util.ui.refresh.TabRefreshController:"+debug.getProperty("curam.util.ui.refresh.TabRefreshController"+".refresh.nav"));
_17be.push(this.EVENT_REFRESH_NAVIGATION+"/"+this._tabWidgetId);
}
if(cfg.mainContent){
debug.log("curam.util.ui.refresh.TabRefreshController:"+debug.getProperty("curam.util.ui.refresh.TabRefreshController"+".refresh.main"));
this._currentlyRefreshing=new curam.util.ui.refresh.RefreshEvent(curam.util.ui.refresh.RefreshEvent.prototype.TYPE_ONLOAD,curam.util.ui.refresh.RefreshEvent.prototype.SOURCE_CONTEXT_MAIN,null);
_17be.push(this.EVENT_REFRESH_MAIN+"/"+this._tabWidgetId);
}
if(_17be.length>0){
debug.log("curam.util.ui.refresh.TabRefreshController:"+debug.getProperty("curam.util.ui.refresh.TabRefreshController"+".refresh.log",[_17be.length,_17be]));
this._handler(_17be);
}
},setRefreshHandler:function(_17bf){
this._handler=_17bf;
},destroy:function(){
for(prop in this._configOnSubmit){
if(this._configOnSubmit.hasOwnProperty(prop)){
delete this._configOnSubmit[prop];
}
}
for(prop in this._configOnLoad){
if(this._configOnLoad.hasOwnProperty(prop)){
delete this._configOnLoad[prop];
}
}
this._configOnSubmit={};
this._configOnLoad={};
this._handler=null;
this._lastSubmitted=null;
this._currentlyRefreshing=null;
}});
return _17b4;
});
},"dojo/_base/url":function(){
define(["./kernel"],function(dojo){
var ore=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),ire=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$"),_17c0=function(){
var n=null,_17c1=arguments,uri=[_17c1[0]];
for(var i=1;i<_17c1.length;i++){
if(!_17c1[i]){
continue;
}
var _17c2=new _17c0(_17c1[i]+""),_17c3=new _17c0(uri[0]+"");
if(_17c2.path==""&&!_17c2.scheme&&!_17c2.authority&&!_17c2.query){
if(_17c2.fragment!=n){
_17c3.fragment=_17c2.fragment;
}
_17c2=_17c3;
}else{
if(!_17c2.scheme){
_17c2.scheme=_17c3.scheme;
if(!_17c2.authority){
_17c2.authority=_17c3.authority;
if(_17c2.path.charAt(0)!="/"){
var path=_17c3.path.substring(0,_17c3.path.lastIndexOf("/")+1)+_17c2.path;
var segs=path.split("/");
for(var j=0;j<segs.length;j++){
if(segs[j]=="."){
if(j==segs.length-1){
segs[j]="";
}else{
segs.splice(j,1);
j--;
}
}else{
if(j>0&&!(j==1&&segs[0]=="")&&segs[j]==".."&&segs[j-1]!=".."){
if(j==(segs.length-1)){
segs.splice(j,1);
segs[j-1]="";
}else{
segs.splice(j-1,2);
j-=2;
}
}
}
}
_17c2.path=segs.join("/");
}
}
}
}
uri=[];
if(_17c2.scheme){
uri.push(_17c2.scheme,":");
}
if(_17c2.authority){
uri.push("//",_17c2.authority);
}
uri.push(_17c2.path);
if(_17c2.query){
uri.push("?",_17c2.query);
}
if(_17c2.fragment){
uri.push("#",_17c2.fragment);
}
}
this.uri=uri.join("");
var r=this.uri.match(ore);
this.scheme=r[2]||(r[1]?"":n);
this.authority=r[4]||(r[3]?"":n);
this.path=r[5];
this.query=r[7]||(r[6]?"":n);
this.fragment=r[9]||(r[8]?"":n);
if(this.authority!=n){
r=this.authority.match(ire);
this.user=r[3]||n;
this.password=r[4]||n;
this.host=r[6]||r[7];
this.port=r[9]||n;
}
};
_17c0.prototype.toString=function(){
return this.uri;
};
return dojo._Url=_17c0;
});
},"curam/widget/SearchMultipleTextBox":function(){
define(["dojo/query","dojo/dom-style","dojo/dom-construct","dojo/on","dojo/dom-geometry","dojo/dom-class","dojo/mouse","dojo/dom-attr","dojo/_base/fx","dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/topic","dojo/debounce","dojo/Deferred","dojo/keys","curam/date/locale","dojo/has","dojo/sniff","dojo/text!curam/widget/templates/SearchMultipleTextBox.html","dijit/form/TextBox","curam/util","curam/util/Request","curam/util/ResourceBundle","curam/ui/UIController","curam/tab","curam/debug","curam/cdsl/connection/SimpleAccess","curam/cdsl/connection/CuramConnection","curam/tab"],function(query,_17c4,_17c5,on,_17c6,_17c7,mouse,_17c8,fx,lang,_17c9,_17ca,topic,_17cb,_17cc,keys,_17cd,has,sniff,_17ce,_17cf,util,_17d0,_17d1,_17d2,tab,debug,_17d3,_17d4,tab){
var _17d5=_17c9("curam.widget.SearchMultipleTextBox",_17cf,{templateString:_17ce,quickSearch:null,hasIos:false,hasQuickSearch:null,quickSearchXHRPromises:[],searchResults:{},lastQueryTerm:"",spinnerTimeouts:[],_simpleAccess:_17d3,personQuantityToEagerLoad:6,paginationStart:0,paginationPageSize:6,pagesMappedToTab:[],pagesNotMappedToTab:[],pagesMappedToMultipleTabs:[],availableKeywordsList:null,menuOpenedComboboxHeight:72,menuOpenedFurtherOptionsHeight:18,menuOpenedFurtherOptionsHeightQuickSearch:12,menuOpenedFurtherOptionsHeightNoCombobox:18,quickSearchMenuOpenedHeight:29,currentOpenedHeight:29,maxItemsHeight:416,maxFlatListHeight:416,closedHeight:null,destroyContextMenu:false,personInContextMenu:null,constructor:function(){
this.inherited(arguments);
this.bundle=new _17d1("SmartNavigator");
},postCreate:function(){
this._simpleAccess.initConnection(new _17d4(curam.util.retrieveBaseURL()+"/dataservice"));
this.hasIos=has("ios");
this._queryDOMNodes();
_17c7.add(this.searchControlsDiv[0],"multiple-search-banner");
if(this.searchOptionsDiv!=null&&this.searchOptionsDiv.length>0){
_17c7.add(this.searchOptionsDiv[0],"multiple-search-options");
}
this.searchInputField.maxLength=100;
on(this.applicationSearchDiv[0],"mousedown",lang.hitch(this,function(evt){
this.clickedInsideApplicationSearchWidget=this._isElementPartOfApplicationSearch(evt.target);
}));
on(this.applicationSearchDiv[0],"mouseup",lang.hitch(this,function(evt){
this.clickedInsideApplicationSearchWidget=false;
}));
if(this.searchOptionsDiv.length>0){
on(this.searchOptionsDiv[0].firstChild,"blur",lang.hitch(this,function(evt){
this._hideSearchBoxIfNotFocused(evt);
}));
}
var _17d6=this.searchIcon[0].onclick;
this.searchIcon[0].onclick=lang.hitch(this,function(e){
if(!_17c7.contains(this.searchIcon[0],"dijitDisabled")){
if(this.quickSearch){
this._search();
}else{
_17d6(e);
}
}
});
on(this.searchIcon,"blur",lang.hitch(this,function(evt){
this._hideSearchBoxIfNotFocused(evt);
}));
on(this.searchIcon,"click",lang.hitch(this,function(evt){
if(!this.quickSearch){
this._hideSearchBox();
}
}));
if(this.hasQuickSearch){
this._initializeSmartNavigatorWidget();
}else{
on(this.searchInputField,"keydown",lang.hitch(this,this._onKeyUp));
}
},_initializeSmartNavigatorWidget:function(){
topic.subscribe("curam/application-search/combobox-changed",lang.hitch(this,function(_17d7){
if(this.quickSearch!=null){
if(_17d7.indexOf("smart-navigator|smart-navigator")>=0){
this._enableQuickSearch();
}else{
this._disableQuickSearch();
}
this._fixQuickSearchHeight();
}
}));
var _17d8=this._simpleAccess.makeRequest("SmartNavigatorFacade","getSearchConfiguration");
this.quickSearchXHRPromises.push(_17d8);
_17d8.then(lang.hitch(this,function(data){
var _17d9=false;
if(data[0].debounceTimeout){
var _17da=parseInt(data[0].debounceTimeout);
if(!isNaN(_17da)&&_17da>=0){
on(this.searchInputField,"keydown",_17cb(lang.hitch(this,this._onKeyUpAutoComplete),_17da));
_17d9=true;
}
}
if(!_17d9){
on(this.searchInputField,"keydown",lang.hitch(this,this._onKeyUp));
}
}),lang.hitch(this,this._ajaxErrorCallback));
on(this.searchInputField,"keyup",lang.hitch(this,function(event){
this._onDownArrowKey(event);
}));
on(this.searchInputField,"keydown",lang.hitch(this,function(event){
if(event.keyCode==8){
var _17db=(window.getSelection().toString()===this.searchInputField.value)?true:false;
if(_17db){
this._removeAriaOwnsAttributeFromHiddenInfoSpanElement();
}
}
}));
on(this.searchIcon,"keyup",lang.hitch(this,function(event){
this._onDownArrowKey(event);
}));
on(window,"resize",_17cb(lang.hitch(this,function(){
var _17dc=query(".application-search-upfront-popup")[0];
if(_17dc&&!has("android")&&!has("ios")){
this._hideSearchBox();
}
}),50));
on.emit(window,"resize",{bubbles:true,cancelable:true});
this.searchIcon[0].title=this.bundle.getProperty("SmartNavigator.icon.title");
on(query("body.curam"),["click","touchstart","keyup"],lang.hitch(this,function(evt){
if(evt.type==="keyup"&&evt.keyCode!==keys.ESCAPE){
return;
}
var _17dd=evt.type==="keyup";
var _17de=this._destroyContextMenuIfNecessary(evt.target);
var _17df=this._hideKeywordsListIfNecessary(evt.target,_17dd);
var _17e0=_17c7.contains(evt.target,"appSearchItem");
if(evt.type==="keyup"){
if(_17e0){
var _17e1=query(".appSearchKeywordsListButton",this.applicationSearchDiv[0])[0];
if(_17e1){
_17e1.focus();
}
}else{
if(!_17de&&!_17df){
this._hideSearchBox();
if(this._isElementPartOfApplicationSearch(evt.target)){
this.searchIcon[0].focus();
}
}
}
}else{
var _17e2=this._isElementPartOfApplicationSearch(evt.target);
if(!_17e2){
this._hideSearchBox();
}
}
}));
},_queryDOMNodes:function(){
if(this.searchControlsDiv==null){
this.searchControlsDiv=query(".search-input-controls");
}
if(this.searchIconDiv==null){
this.searchIconDiv=query(".application-search-anchor-div");
}
if(this.searchIcon==null){
this.searchIcon=query(".application-search-anchor");
}
if(this.searchInputField==null){
this.searchInputField=this.focusNode;
}
if(this.inputNode==null){
this.inputNode=query(".search-input-controls .text")[0];
}
if(this.applicationSearchDiv==null){
this.applicationSearchDiv=query(".application-search");
}
if(this.searchOptionsDiv==null){
this.searchOptionsDiv=query(".search-options");
}
if(this.searchOptionsDiv.length>0&&this.searchOptionsDivOpenedColor==null){
this.searchOptionsDivOpenedColor=_17c4.get(this.searchOptionsDiv[0],"color");
}
if(this.searchInputImg==null){
this.searchInputImg=query(".application-search-anchor img");
}
if(this.quickSearch==null){
this.quickSearch=query(".application-search.quick-search").length>0;
}
if(this.hasQuickSearch==null){
this.hasQuickSearch=query(".application-search.has-quick-search").length>0;
}
},_hideSearchBox:function(){
if(this._isSearchInputFieldPopulated()){
_17c4.set(this.searchInputField,"color",_17c4.get(this.applicationSearchDiv[0],"color"));
}else{
_17c4.set(this.searchInputField,this.originalInputColor);
}
_17c7.remove(this.searchInputField,"input-placeholder-opened");
_17c7.add(this.searchInputField,"input-placeholder-closed");
_17c8.remove(this.searchInputField,"aria-describedby");
if(this.searchTextDiv!=null&&_17c4.get(this.searchTextDiv[0],"background-color")!=this.backgroundColor){
_17c4.set(this.searchTextDiv[0],"background-color",this.backgroundColor);
_17c4.set(this.searchControlsDiv[0],"background-color",this.backgroundColor);
_17c4.set(this.searchIconDiv[0],"background-color",this.backgroundColor);
this.searchInputImg[0].src=jsBaseURL+"/themes/curam/images/search--20-on-dark.svg";
_17c7.remove(this.applicationSearchDiv[0],"application-search-upfront-popup");
if(this.searchOptionsDiv.length>0){
_17c4.set(this.searchOptionsDiv[0],"display","none");
}
if(this.appBannerComboBoxDiv!=null&&this.appBannerComboBoxDiv.length>0){
_17c4.set(this.appBannerComboBoxDiv[0],"display","none");
}
_17c4.set(this.applicationSearchDiv[0],"height",this.closedHeight+"px");
this.applicationSearchDiv.style({left:"0px"});
this._hideResultList();
}
},_isElementPartOfApplicationSearch:function(_17e3){
if(_17e3.parentElement!=null){
if(_17c7.contains(_17e3,"application-search")||_17c7.contains(_17e3,"dijitComboBoxMenuPopup")){
return true;
}else{
return this._isElementPartOfApplicationSearch(_17e3.parentElement);
}
}
return false;
},_hideSearchBoxIfNotFocused:function(evt){
var _17e4=this;
setTimeout(function(){
var _17e5=document.activeElement;
if(!_17e4._isElementPartOfContainer(_17e5,"application-search")&&!_17e4.clickedInsideApplicationSearchWidget){
_17e4._hideSearchBox();
}
},1);
},_setPlaceHolderAttr:function(v){
this.searchInputField=this.domNode.firstChild.firstChild;
_17c8.set(this.searchInputField,"placeholder",v);
},_isSearchInputFieldPopulated:function(){
return this.searchInputField.value.length>0;
},_onKeyUp:function(evt){
if(evt.keyCode===keys.DOWN_ARROW){
return false;
}
var _17e6=this._isSearchInputFieldPopulated();
this._enableOrDisableSearchLink(evt,_17e6);
if((evt.keyCode===keys.BACKSPACE||evt.keyCode===keys.DELETE)&&this.quickSearch&&!_17e6&&!this._isShowingHistory()){
this.lastQueryTerm="";
this._hideDropDown();
this._showSearchHistory();
}else{
return false;
}
},_onKeyUpAutoComplete:function(evt){
if(evt.keyCode===keys.DOWN_ARROW){
return false;
}
this._onKeyUp(evt);
if(evt.target.value.trim()!==this.lastQueryTerm.trim()){
this._doQuickSearch(evt.target.value);
}
},_onDownArrowKey:function(event){
if(event.keyCode===keys.DOWN_ARROW){
var _17e7=query(".appSearchDropDownButton",this.applicationSearchDiv[0]);
if(_17e7.length>0){
_17e7[0].focus();
}else{
var tags=query(".appSearchKeywordTag",this.applicationSearchDiv[0]);
if(tags.length>0){
tags[0].focus();
}else{
var items=query(".appSearchItem:not(.hide)",this.applicationSearchDiv[0]);
if(items.length>0){
items[0].focus();
}
}
}
}
},_onKeywordsDownArrowKey:function(event){
if(event.keyCode===keys.DOWN_ARROW){
if(_17c7.contains(event.target,"appSearchKeywordsListButton")){
if(this._showingAvailableKeywordsList){
query(".availableKeyword .keywordTerm",this.applicationSearchDiv[0])[0].focus();
}else{
var items=query(".appSearchItem:not(.hide)",this.applicationSearchDiv[0]);
if(items.length>0){
items[0].focus();
}
}
}else{
var _17e8=this._findSiblingElement(event.target,true,"keywordTerm");
if(_17e8){
_17e8.focus();
}else{
var _17e9=this._findSiblingElement(event.target.parentElement.parentElement,true,"availableKeyword");
if(_17e9){
_17e8=query(".keywordTerm:first-child",_17e9)[0];
if(_17e8){
_17e8.focus();
}
}
}
}
}
},_onKeywordsUpArrowKey:function(event){
if(event.keyCode===keys.UP_ARROW){
var _17ea=this._findSiblingElement(event.target,false,"keywordTerm");
if(_17ea){
_17ea.focus();
}else{
var _17eb=this._findSiblingElement(event.target.parentElement.parentElement,false,"availableKeyword");
if(_17eb){
_17ea=query(".keywordTerm:last-child",_17eb)[0];
if(_17ea){
_17ea.focus();
}
}
}
}
},_search:function(){
if(this.quickSearch){
this._doQuickSearch(this.searchInputField.value);
if(!_17c7.contains(this.applicationSearchDiv[0],"application-search-upfront-popup")){
this._givenFocus();
}
}else{
curam.util.search("__o3.appsearch.searchText","__o3.appsearch.searchType");
this._hideSearchBox();
}
},_doQuickSearch:function(_17ec){
if(this.quickSearch){
if(_17ec){
this.lastQueryTerm=_17ec;
this._resetSearchResults();
var query={term:_17ec,dateFormat:window.jsDF};
if(this.quickSearchXHRPromises.length>0){
this.quickSearchXHRPromises.forEach(function(_17ed){
_17ed.cancel();
});
this.quickSearchXHRPromises=[];
}
var _17ee=this._simpleAccess.makeRequest("SmartNavigatorFacade","search",query);
this.quickSearchXHRPromises.push(_17ee);
_17ee.then(lang.hitch(this,this._searchCallback,_17ec),lang.hitch(this,this._ajaxErrorCallback));
this._showSpinnerDiv();
}else{
this.lastQueryTerm="";
this._hideDropDown();
this._showSearchHistory();
}
}
},_showSearchHistory:function(){
this._resetSearchResults();
this._cancelPreviousAjaxCalls();
var _17ef=this._simpleAccess.makeRequest("SmartNavigatorFacade","searchUserHistory");
this.quickSearchXHRPromises.push(_17ef);
_17ef.then(lang.hitch(this,this._showSearchHistorySuccessCallback),lang.hitch(this,this._ajaxErrorCallback));
},_showSearchHistorySuccessCallback:function(data){
var _17f0=data[0]._data;
this.quickSearchXHRPromises=[];
if(_17f0.dtls&&_17f0.dtls.length>0){
var _17f1=_17f0.dtls.map(function(_17f2){
var _17f3={url:_17f2.url,icon:_17f2.icon,preferredTabs:_17f2.preferredTabs,isModal:_17f2.isModal};
if(_17f2.targetValue){
_17f3.action={description:_17f2.targetDescription,type:_17f2.targetType};
}
if(_17f2.searchConcernRoleName){
_17f3.person={concernRoleName:_17f2.searchConcernRoleName,dateOfBirth:_17f2.searchConcernRoleDateOfBirth,concernRoleId:_17f2.searchConcernRoleId,formattedAddress:_17f2.searchConcernRoleAddress,restrictedIndOpt:_17f2.searchConcernRoleRestrictedIndOpt,personPhotoURL:_17f2.personPhotoURL,items:[]};
}
return _17f3;
});
this._searchCallback("",[{_data:{data:_17f1}}],this.bundle.getProperty("SmartNavigator.recent.searches"),true);
}
},_ajaxErrorCallback:function(err){
if(this.quickSearch&&err.name!=="CancelError"){
debug.log("Application Search - Smart Navigator Error: ",err);
this.quickSearchXHRPromises=[];
this._hideSpinnerDiv();
if(!_17c7.contains(this.applicationSearchDiv[0],"application-search-upfront-popup")){
this._givenFocus();
}
if(err.errors&&err.errors[0]&&err.errors[0].type&&err.errors[0].type==="error"&&err.errors[0].message){
this._createMessage(err.errors[0].message);
}else{
this._createMessage(this.bundle.getProperty("SmartNavigator.error"));
}
this._fixQuickSearchHeight();
}
return [];
},_searchCallback:function(_17f4,data,_17f5,_17f6){
var _17f7=data[0]._data;
var _17f8=this;
_17f8.quickSearchXHRPromises=[];
_17f8.paginationTotalItems=0;
_17f8.searchResults=_17f7.data.reduce(function(_17f9,item,index){
item.rendered=false;
if(item.person&&item.person.concernRoleId!=="0"){
_17f9.people.push(item);
_17f9.personQueryTerms.push(item.person.terms);
_17f9.hasItems=true;
_17f8.paginationTotalItems++;
if(item.person.restrictedIndOpt){
item.person.formattedDateOfBirth="******";
}else{
if(item.person.dateOfBirth&&item.person.dateOfBirth.getTime()!==-62135769600000){
item.person.formattedDateOfBirth=_17cd.format(_17cd.parseDate(item.person.dateOfBirth),{selector:"date",datePattern:window.jsDF})+", "+_17f8.bundle.getProperty("SmartNavigator.age")+" "+_17f8._getAge(item.person.dateOfBirth);
}else{
item.person.formattedDateOfBirth=_17f8.bundle.getProperty("SmartNavigator.age.not.recorded");
}
}
if(item.action&&item.action.description){
item.items=[item.action];
}else{
item.action=null;
}
}else{
if(item.action){
item.person=null;
_17f9.actionsOnly.push(item);
_17f9.hasItems=true;
_17f8.paginationTotalItems++;
}
}
return _17f9;
},_17f8.searchResults);
_17f8.searchResults.messages.info=_17f7.infoMessage;
_17f8.searchResults.header=_17f5;
_17f8.searchResults.isHistory=_17f6;
_17f8.searchResults.keywords=_17f7.keywords||[];
_17f8.searchResults.queryTerm=_17f4;
if(_17f8.searchResults.people.length>0&&_17f8.searchResults.keywords.length>0){
var _17fa=_17f8.searchResults.people.slice(0,this.personQuantityToEagerLoad);
_17f8._loadPeopleItems(_17fa).then(function(){
_17f8._hideSpinnerDiv();
_17f8._renderResults();
});
}else{
_17f8._hideSpinnerDiv();
_17f8._renderResults();
}
},_loadPeopleItems:function(_17fb){
var _17fc=new _17cc();
var _17fd="";
var _17fe={};
_17fb.forEach(function(item){
var _17ff=lang.clone(item.person);
_17ff.personTabDetailsURL=null;
_17ff.personPhotoURL=null;
_17ff.personTabDetailsURL=null;
_17ff.dateOfBirth=null;
_17ff.formattedDateOfBirth=null;
_17fd+=JSON.stringify(_17ff)+"@@@";
_17fe[_17ff.concernRoleId]=[];
});
_17fd=_17fd.substring(0,_17fd.lastIndexOf("@@@"));
this._cancelPreviousAjaxCalls();
var _1800=this._simpleAccess.makeRequest("SmartNavigatorFacade","searchForTargetsOfPeople",{searchQuery:this.searchResults.queryTerm,peopleDetails:_17fd});
this.quickSearchXHRPromises.push(_1800);
_1800.then(lang.hitch(this,function(_1801,_1802,data){
var _1801=data[0].data.reduce(function(map,item,index){
map[item.concernRole].push(item);
return map;
},_1801);
_1802.forEach(function(item){
item.person.itemsLazyLoad=false;
item.person.items=_1801[item.person.concernRoleId];
});
_17fc.resolve();
},_17fe,_17fb),lang.hitch(this,this._ajaxErrorCallback));
return _17fc;
},_renderResults:function(_1803){
var _1804=this;
var _1805=query(".searchResultsScreenReadersInfo.hidden",this.applicationSearchDiv[0])[0];
if(_1804.searchResults.hasItems){
_1804.searchResults.moreRecords=_1804.paginationTotalItems>_1804.paginationStart+_1804.paginationPageSize;
_1804._createResultsList(_1804.searchResults.header,_1804.searchResults.isHistory,_1804.searchResults.keywords);
if(this.searchResults.keywords&&this.paginationStart===0){
_1804._createKeywordTags(this.searchResults.keywords,this.searchResults.personQueryTerms);
}
_1804._createMessages();
if(_1804.paginationTotalItems<=_1804.personQuantityToEagerLoad&&_1804._getItemsHeight(true)<_1804.maxFlatListHeight){
_1804._showHiddenResultRows();
}else{
if(_1804.searchResults.keywords.length>0){
_1804._createPersonItemsContextMenuButton();
}
}
}else{
if(_1804.searchResults.queryTerm.length>2){
_1804._createMessage(_1804.bundle.getProperty("SmartNavigator.empty.search"),true,true);
}else{
if(_1804.searchResults.queryTerm.length<=2){
_17c8.remove(_1805,"aria-owns");
}
}
}
_17c7.add(_1804.applicationSearchDiv[0],"shadow");
_1804._fixQuickSearchHeight();
if(!_17c7.contains(this.applicationSearchDiv[0],"application-search-upfront-popup")){
this._givenFocus();
this.searchInputField.focus();
}
if(_1803){
var _1806=query(".appSearchNewItem",_1804.applicationSearchDiv[0]);
if(_1806.length>0){
_1806[0].focus();
}
}
var _1807=query(".appSearchItemSeparatorLabel",this.applicationSearchDiv[0])[0];
if(_1807){
_17c8.set(this.searchInputField,"aria-describedby","resultRowHeaderId");
}else{
_17c8.remove(this.searchInputField,"aria-describedby");
}
if(_1805){
var _1808=query(".appSearchItemsContainer",this.applicationSearchDiv[0])[0];
if(_1808&&_1808.childElementCount>0){
_17c8.set(_1805,"aria-owns","applicationSearchResultListId");
}else{
_17c8.remove(_1805,"aria-owns");
}
}
_1804._updateSearchResultsScreenReadersInfo();
_1804._autoScrollToNewItems();
},_removeAriaOwnsAttributeFromHiddenInfoSpanElement:function(){
var _1809=query(".searchResultsScreenReadersInfo.hidden",this.applicationSearchDiv[0])[0];
_17c8.remove(_1809,"aria-owns");
},_createResultsList:function(){
var _180a=query(".appSearchKeywords",this.applicationSearchDiv[0])[0];
var _180b=null;
if(this.paginationStart===0){
this._destroyResultList();
if(this.searchResults.moreRecords){
this._createMoreRecordsRow(_180a);
}
if(this.searchResults.hasItems){
outerContainer=_17c5.place("<div class=\"appSearchItemsOuterContainer\" role=\"presentation\" id=\"applicationSearchResultListId\" aria-live=\"assertive\"></div>",_180a,"after");
_180b=_17c5.place("<ul class=\"appSearchItemsContainer\" aria-live=\"assertive\"></ul>",outerContainer,"last");
on(outerContainer,"scroll",lang.hitch(this,function(event){
if(!this._isElementPartOfContainer(document.activeElement,"appSearchItemContext")){
query(".appSearchItemContext",this.applicationSearchDiv[0]).forEach(_17c5.destroy);
query(".personItems.clicked",this.applicationSearchDiv[0]).forEach(function(item){
_17c7.remove(item,"clicked");
});
}
}));
}
}else{
if(!this.searchResults.moreRecords){
this.searchInputField.focus();
query(".moreItems",this.applicationSearchDiv[0]).forEach(_17c5.destroy);
}
_180b=query(".appSearchItemsContainer",this.applicationSearchDiv[0])[0];
}
var count=0;
if(this.searchResults.actionsOnly&&this.searchResults.actionsOnly.length>0){
this.searchResults.actionsOnly.forEach(function(_180c){
if(count<this.paginationPageSize){
if(!_180c.rendered){
count++;
}
this._createResultRow(_180c,_180b,"Action",this.searchResults.isHistory);
}
},this);
}
this.searchResults.people.forEach(function(_180d){
if(count<this.paginationPageSize){
if(!_180d.rendered){
count++;
}
this._createResultRow(_180d,_180b,"Person",this.searchResults.isHistory);
}
},this);
if(this.searchResults.header&&this.paginationStart===0){
this._createResultRowHeader(this.searchResults.header);
}
if(this.searchResults.hasItems&&this.paginationStart===0){
_17c7.remove(this.applicationSearchDiv[0],"application-search-items-list");
_17c7.add(this.applicationSearchDiv[0],"application-search-items-list");
}
var _180e=query(".appSearchItemsOuterContainer",this.applicationSearchDiv[0])[0];
if(_180e&&_180e.scrollHeight>_180e.clientHeight){
_17c7.add(_180a.parentNode,"hasScrollBars");
var _180f=query(".moreItems",this.applicationSearchDiv[0])[0];
if(_180f){
_17c4.set(_180f,"width",_180b.offsetWidth+"px");
}
}else{
_17c7.remove(_180a.parentNode,"hasScrollBars");
}
},_createResultRow:function(item,_1810,type,_1811,_1812){
if(!item.rendered){
if(_1811&&item.person&&item.action){
type="Action";
item.action.type="REQUIRES_PERSON_HISTORY";
}
var _1813=null;
if(type==="Person"){
_1813=this._createPersonRow(item,_1810,type,_1811,_1812);
}else{
if(type==="Action"){
_1813=this._createActionOnlyRow(item,_1810,_1811);
}else{
if(type==="Action_Person"){
_1813=this._createPersonActionRow(item,_1810,_1811,_1812);
}
}
}
if(_1813){
on(_1813,"blur",lang.hitch(this,function(evt){
this._hideSearchBoxIfNotFocused(evt);
}));
}
}
item.rendered=true;
},_createPersonRow:function(_1814,_1815,type,_1816){
var _1817="active";
if(!_1814.url||_1814.url.length===0||_1814.person.restrictedIndOpt){
_1817="inactive";
}
var _1818=_1816?" appSearchItemHistory ":"";
var _1819=this.paginationStart>0?" appSearchNewItem ":"";
var _181a=_1814.person.restrictedIndOpt?" restrictedPerson ":"";
var _181b=_181a?this.bundle.getProperty("SmartNavigator.sensitity.error"):_1814.person.concernRoleName;
var _181c=_181a?"":_1814.person.formattedDateOfBirth;
var _181d=_181a?"":this.bundle.getProperty("SmartNavigator.address")+" "+_1814.person.formattedAddress;
var _181e="<li class=\"appSearchItem-ListItem person\">";
_181e+="<span tabindex=\"0\" role=\"button\" class=\"appSearchItem person dijit dijitReset dijitInline dijitLeft"+"appBannerComboBox dijitTextBox dijitComboBox dijitValidationTextBox "+_1817+_1819+" "+_1818+_181a+"\""+" data-concernRole=\""+_1814.person.concernRoleId+"\" >";
_181e+="<span class=\"itemIcon personPhoto\" aria-hidden=\"true\">"+"<img draggable=\"false\" alt=\"Person image\" src=\""+_1814.person.personPhotoURL+"\" /></span>"+"<span class=\"itemDescription\">"+"<span class=\"itemDescFirstLine person\" aria-label=\""+_181b+"\" >"+_1814.person.concernRoleName+"</span>"+"<span class=\"itemDescSecondLine address\" aria-label=\""+_181c+"\">"+_1814.person.formattedDateOfBirth+"</span>"+"<span class=\"itemDescSecondLine address\" aria-label=\""+_181d+"\">"+_1814.person.formattedAddress+"</span></span>";
_181e+="</span>";
_181e+="</li>";
var _181f=_17c5.toDom(_181e);
if(_1817=="active"){
on(_181f,["click","keyup"],lang.hitch(this,function(event){
this._onItemClick(event,_1814,_1816);
}));
}
on(_181f,["keyup"],lang.hitch(this,function(event){
this._onItemKeyNavigation(_181f,event);
}));
on(_181f,["focus"],lang.hitch(this,function(event){
this._destroyPersonItemsContextMenu(event);
}));
_17c5.place(_181f,_1815,"last");
if(_1814.person.items&&!_1814.person.restrictedIndOpt){
_1814.person.items.forEach(function(item,index){
item.person=lang.clone(_1814.person);
item.person.items=[];
item.first=(index===0);
item.last=(index===_1814.person.items.length-1);
this._createResultRow(item,_1815,"Action_Person",_1816);
},this);
}
return _181f;
},_createPersonActionRow:function(item,_1820,_1821,_1822){
var _1823="active";
if(!item.url&&item.url.length===0){
_1823="inactive";
}
var first=item.first?"first":"";
var last=item.last?"last":"";
var _1824=_1821?"appSearchItemHistory":"";
var hide=_1822?"contextMenuItem":"hide";
var _1825="<li tabindex=\"0\" role=\"button\" aria-live=\"assertive\" class=\"appSearchItem appSearchItem-ListItem personAction dijit dijitReset dijitInline dijitLeft"+"appBannerComboBox dijitTextBox dijitComboBox dijitValidationTextBox  "+hide+" "+first+" "+last+" "+_1823+" "+_1824+"\" "+"\" >";
_1825+="<div class=\"personActionItem\">";
_1825+="<span class=\"itemIcon actionPhoto\">";
if(item.icon){
_1825+="<img draggable=\"false\" src=\""+jsBaseURL+"/"+item.icon+"\" alt=\"Action Icon\" />";
}else{
_1825+="<span class=\"actionImage actionEnabled\" /></span>";
}
_1825+="</span>"+"<span class=\"itemDescription\">"+"<span class=\"itemDescFirstLine action\">"+item.action.description+"</span>"+"</span>";
_1825+="</div>";
_1825+="</li>";
var _1826=_17c5.toDom(_1825);
if(_1823=="active"){
on(_1826,["click","keyup"],lang.hitch(this,function(event){
this._onItemClick(event,item,_1821);
}));
}
on(_1826,["keyup"],lang.hitch(this,function(event){
this._onItemKeyNavigation(_1826,event);
}));
_17c5.place(_1826,_1820,"last");
return _1826;
},_createActionOnlyRow:function(item,_1827,_1828){
var _1829="active";
if(!item.url&&item.url.length===0){
_1829="inactive";
}
var _182a=_1828?"appSearchItemHistory":"";
var title="title=\"";
if(item.action.type==="REQUIRES_PERSON_HISTORY"){
title+=item.action.description+" - "+item.person.concernRoleName+" - "+item.person.formattedDateOfBirth+"\"";
}else{
if(item.action.type&&item.action.type==="REQUIRES_PERSON"){
title+=item.action.description+"\"";
}else{
title+=item.action.description+"\"";
}
}
var _182b="<li tabindex=\"0\" role=\"button\" class=\"appSearchItem appSearchItem-ListItem actionOnly dijit dijitReset dijitInline dijitLeft"+"appBannerComboBox dijitTextBox dijitComboBox dijitValidationTextBox "+_1829+" "+_182a+"\" "+">";
if(item.action.type==="REQUIRES_PERSON_HISTORY"){
_182b+="<span class=\"itemIcon actionPhoto\">";
if(item.icon){
_182b+="<img draggable=\"false\" src=\""+jsBaseURL+"/"+item.icon+"\" alt=\"Action Icon\" />";
}else{
_182b+="<span class=\"actionImage actionEnabled\" /></span>";
}
_182b+="</span>"+"<span class=\"itemDescription\">"+"<span class=\"itemDescFirstLine action\">"+item.action.description+"</span>"+"<span class=\"itemDescSecondLine\">"+item.person.concernRoleName+"</span>"+"<span class=\"itemDescSecondLine\">"+item.person.formattedDateOfBirth+"</span>"+"</span>";
}else{
if(item.action.type&&item.action.type==="REQUIRES_PERSON"){
_182b+="<span class=\"itemIcon actionPhoto\">";
if(item.icon){
_182b+="<img draggable=\"false\" src=\""+jsBaseURL+"/"+item.icon+"\" alt=\"Action Icon\" />";
}else{
_182b+="<span class=\"actionImage actionDisabled\" /></span>";
}
_182b+="</span>"+"<span class=\"itemDescription\">"+"<span class=\"itemDescFirstLine action\">"+item.action.description+"</span>"+"<span class=\"itemDescSecondLine infoRequired\"> ["+this.bundle.getProperty("SmartNavigator.person.required")+"] </span>"+"</span>";
}else{
_182b+="<span class=\"itemIcon actionPhoto\">";
if(item.icon){
_182b+="<img draggable=\"false\" src=\""+jsBaseURL+"/"+item.icon+"\" alt=\""+this.bundle.getProperty("SmartNavigator.action.icon")+"\" />";
}else{
_182b+="<span class=\"actionImage actionEnabled\" /></span>";
}
_182b+="</span>"+"<span class=\"itemDescription\">"+"<span class=\"itemDescSingleLine action\">"+item.action.description+"</span>"+"</span>";
}
}
_182b+="</li>";
var _182c=_17c5.toDom(_182b);
if(_1829=="active"){
on(_182c,["click","keyup"],lang.hitch(this,function(event){
this._onItemClick(event,item,_1828);
}));
}
on(_182c,["keyup"],lang.hitch(this,function(event){
this._onItemKeyNavigation(_182c,event);
}));
on(_182c,["focus"],lang.hitch(this,function(event){
this._destroyPersonItemsContextMenu(event);
}));
_17c5.place(_182c,_1827,"last");
return _182c;
},_createPersonItemsContextMenuButton:function(){
var _182d=this;
query(".appSearchItem.person:not(.restrictedPerson):not(.hide)",_182d.applicationSearchDiv[0]).forEach(function(item){
if(query(".personItems",item.parentElement).length===0){
var _182e=true;
_182d.searchResults.keywords.forEach(function(_182f){
if(_182f.type!=="NO_REQUIREMENT"){
_182e=false;
}
});
if(_182e){
return false;
}
var _1830=_182d.hasIos?"SmartNavigator.button.to.toggle.items.ios":"SmartNavigator.button.to.toggle.items";
var _1831=_17c5.toDom("<span tabindex=\"0\" aria-label=\""+_182d.bundle.getProperty(_1830)+"\" role=\"button\" aria-expanded=\"false\" class=\"personItems\" "+"data-concernrole=\""+item.dataset.concernrole+"\">"+"</span>");
_17c5.place(_1831,item,"after");
_17c7.add(item,"hasPersonItemBtn");
on(_1831,["click"],lang.hitch(_182d,_182d._createPersonItemsContextMenu,item,_1831));
if(!_182d.hasIos){
on(_1831,[mouse.enter,"keyup"],lang.hitch(_182d,_182d._createPersonItemsContextMenu,item,_1831));
}
on(_1831,[mouse.leave],lang.hitch(_182d,_182d._destroyPersonItemsContextMenu));
on(_1831,["blur"],function(e){
_182d._destroyPersonItemsContextMenu(e);
_182d._hideSearchBoxIfNotFocused(e);
});
}
});
},_createPersonItemsContextMenu:function(item,_1832,event){
if(event.type==="keyup"&&(event.keyCode!==keys.ENTER&&event.keyCode!==keys.SPACE)){
return;
}
var _1833=this;
var _1834=false;
if(event.type==="click"||event.type==="keyup"){
_1834=true;
_17c7.add(_1832,"clicked");
event.preventDefault();
event.stopPropagation();
}
if(_1833._showingAvailableKeywordsList){
_1833._hideAvailableKeywordsList();
}
_1833.personInContextMenu=_1833.searchResults.people.filter(function(_1835){
return _1835.person.concernRoleId===item.dataset.concernrole;
})[0];
var _1836=query(".appSearchItemContext",_1833.applicationSearchDiv[0])[0];
if(!_1836||!_17c7.contains(_1836,"clicked")||_1834){
_17c5.destroy(_1836);
if(_1834){
query(".personItems.clicked",_1833.applicationSearchDiv[0]).forEach(function(_1837){
if(_1837.dataset.concernrole!==_1833.personInContextMenu.person.concernRoleId){
_17c7.remove(_1837,"clicked");
}
});
}
var _1838=query(".search-input-controls .text",_1833.applicationSearchDiv[0])[0];
var _1839=query(".appSearchItemsOuterContainer",_1833.applicationSearchDiv[0])[0];
var _183a=_1839.scrollHeight>_1839.clientHeight?" scrollbars ":"";
var _183b=_1834?" clicked ":"";
var _183c=_17c5.toDom("<ul role=\"status\" class=\"appSearchItemContext"+_183b+_183a+"\" "+"style=\"opacity: 0;\" data-concernrole=\""+_1833.personInContextMenu.person.concernRoleId+"\"></ul>");
_17c5.place(_183c,_1832,"after");
var _183d=_1832.getBoundingClientRect();
_17c4.set(_183c,"top",_183d.top+"px");
var _183e=util.isRtlMode();
if(_183e!=null){
_17c4.set(_183c,"left",(_183d.left-236)+"px");
}else{
_17c4.set(_183c,"left",(_183d.left+40)+"px");
}
var _183f=Math.max(document.documentElement.clientHeight,window.innerHeight||0);
var _1840=_183c.offsetTop;
var _1841=_183f-50-_1840;
_17c4.set(_183c,"max-height",(_1841)+"px");
fx.fadeIn({node:_183c}).play();
lang.hitch(_1833,_1833._createPersonItemsContextMenuRows,_1833.personInContextMenu,_183c)();
var _1842=_17c4.get(_183c,"height");
if(_1842>=_1841){
_17c7.add(_183c,"scrollbars");
}
on(_183c,[mouse.enter,"focus"],function(event){
_1833.destroyContextMenu=false;
});
on(_183c,[mouse.leave,"blur","keyup"],lang.hitch(_1833,_1833._destroyPersonItemsContextMenu));
}
},_destroyPersonItemsContextMenu:function(event){
if(event.type==="keyup"){
if(event.keyCode!==keys.ESCAPE&&event.keyCode!==keys.LEFT_ARROW&&event.keyCode!==keys.RIGHT_ARROW){
return;
}
var isRTL=util.isRtlMode();
if(isRTL&&event.keyCode===keys.LEFT_ARROW){
return;
}else{
if(!isRTL&&event.keyCode===keys.RIGHT_ARROW){
return;
}
}
event.preventDefault();
event.stopPropagation();
}
var _1843=this;
var _1844=query(".appSearchItemContext",_1843.applicationSearchDiv[0]);
if(_1844.length>0&&(!_17c7.contains(_1844[0],"clicked"))||event.type==="keyup"||event.type==="focus"){
if(event.type==="keyup"){
var _1845=null;
query(".appSearchItem").forEach(function(item){
if(item.dataset.concernrole===_1844[0].dataset.concernrole){
_1845=item;
}
});
if(_1845){
_1845.focus();
}
}
query(".personItems.clicked",this.applicationSearchDiv[0]).forEach(function(item){
_17c7.remove(item,"clicked");
});
_1843.destroyContextMenu=true;
setTimeout(function(){
if(_1843.destroyContextMenu){
_1844.forEach(function(_1846){
fx.fadeOut({node:_1846,onEnd:function(){
_17c5.destroy(_1846);
}}).play();
});
}
},25);
}
},_createPersonItemsContextMenuRows:function(_1847,_1848){
if(_1847.person.items&&_1847.person.items.length>0){
this._destroyPersonContextSpinningLoader(_1848);
_1847.person.items.forEach(function(item,index){
item.rendered=false;
item.person=lang.clone(_1847.person);
item.person.items=[];
item.first=(index===0);
item.last=(index===_1847.person.items.length-1);
this._createResultRow(item,_1848,"Action_Person",false,true);
},this);
if(this.hasIos){
_1848.focus();
}
if(this.personItemsContextMenuCreationCallback){
this.personItemsContextMenuCreationCallback(_1848);
}
}else{
if(_1847.person.itemsLazyLoad){
this._createPersonContextSpinningLoader(_1848);
this._loadPeopleItems([_1847]).then(lang.hitch(this,function(){
this._createPersonItemsContextMenuRows(_1847,_1848);
}));
}else{
this._destroyPersonContextSpinningLoader(_1848);
this._createPersonContextNoResultsMessage(_1848);
if(this.personItemsContextMenuCreationCallback){
this.personItemsContextMenuCreationCallback(_1848);
}
}
}
},_createResultRowHeader:function(label){
if(label&&label.length>0){
var _1849=query(".appSearchKeywords",this.applicationSearchDiv[0])[0];
var _184a="<span class=\"appSearchItemSeparatorLabel\" id=\"resultRowHeaderId\" aria-owns=\"applicationSearchResultListId\" aria-live=\"assertive\">";
_184a+=label;
_184a+="</span>";
var _184b=_17c5.toDom(_184a);
_17c5.place(_184b,_1849,"first");
}
},_showHiddenResultRows:function(){
query(".appSearchItem.hide",this.applicationSearchDiv[0]).forEach(function(item){
_17c7.remove(item,"hide");
});
},_hideResultList:function(){
query(".appSearchItemsOuterContainer",this.applicationSearchDiv[0]).forEach(function(item){
_17c4.set(item,"display","none");
});
query(".appSearchKeywords",this.applicationSearchDiv[0]).forEach(function(item){
_17c4.set(item,"display","none");
});
if(this._showingAvailableKeywordsList){
this._hideAvailableKeywordsList();
}
query(".availableKeywordsListContainer",this.applicationSearchDiv[0]).forEach(function(item){
_17c7.add(item,"hide");
});
query(".appSearchMessage.topMessage",this.applicationSearchDiv[0]).forEach(function(item){
_17c4.set(item,"display","none");
});
query(".moreItems",this.applicationSearchDiv[0]).forEach(function(item){
_17c4.set(item,"display","none");
});
query(".appSearchItemSeparatorLabel",this.applicationSearchDiv[0]).forEach(function(item){
_17c4.set(item,"display","none");
});
query(".appSearchItemContext",this.applicationSearchDiv[0]).forEach(_17c5.destroy);
query(".personItems.clicked",this.applicationSearchDiv[0]).forEach(function(item){
_17c7.remove(item,"clicked");
});
},_showResultList:function(){
var items=query(".appSearchItemsOuterContainer",this.applicationSearchDiv[0]);
items.forEach(function(item){
_17c4.set(item,"display","block");
});
if(items.length>0){
_17c7.remove(this.applicationSearchDiv[0],"application-search-items-list");
_17c7.add(this.applicationSearchDiv[0],"application-search-items-list");
}
query(".appSearchItemSeparatorLabel",this.applicationSearchDiv[0]).forEach(function(item){
_17c4.set(item,"display","inline-block");
});
query(".appSearchKeywords",this.applicationSearchDiv[0]).forEach(function(item){
_17c4.set(item,"display","block");
});
query(".appSearchMessage.topMessage",this.applicationSearchDiv[0]).forEach(function(item){
_17c4.set(item,"display","block");
});
query(".moreItems",this.applicationSearchDiv[0]).forEach(function(item){
_17c4.set(item,"display","block");
});
this._updateSearchResultsScreenReadersInfo();
},_createMoreRecordsRow:function(_184c){
query(".paginationContainer",this.applicationSearchDiv[0]).forEach(_17c5.destroy);
var _184d="<div role=\"button\" tabindex=\"0\" class=\"moreItems\" aria-label=\""+this.bundle.getProperty("SmartNavigator.more.results")+"\">"+this.bundle.getProperty("SmartNavigator.more.results")+"</div>";
var _184e=_17c5.toDom("<div class=\"paginationContainer\" role=\"application\"></div>");
var _184f=_17c5.toDom(_184d);
on(_184f,"blur",lang.hitch(this,function(evt){
this._hideSearchBoxIfNotFocused(evt);
}));
on(_184f,["focus"],lang.hitch(this,function(event){
this._destroyPersonItemsContextMenu(event);
}));
on(_184f,["click","keyup"],lang.hitch(this,function(event){
var _1850=event.type==="keyup";
if(_1850&&(event.keyCode!==keys.ENTER&&event.keyCode!==keys.SPACE)){
this._onItemKeyNavigation(_184f,event);
return;
}
this.paginationStart+=6;
this._renderResults(_1850);
if(!_1850){
this.searchInputField.focus();
}
event.preventDefault();
event.stopPropagation();
}));
_17c5.place(_184e,_184c,"after");
return _17c5.place(_184f,_184e,"first");
},_createKeywordTagsContainer:function(){
var _1851=_17c5.toDom("<div class=\"appSearchKeywords\" role=\"application\" aria-live=\"assertive\"></div>");
var _1852=this.appBannerComboBoxDiv[0];
if(_1852){
_17c5.place(_1851,_1852,"before");
}else{
_17c5.place(_1851,this.searchIconDiv[0],"after");
}
var _1853=this._showingAvailableKeywordsList?"itemsDisplayed":"";
var _1854=_17c5.toDom("<span role=\"button\" title=\""+this.bundle.getProperty("SmartNavigator.keywords.info")+"\" aria-label=\""+this.bundle.getProperty("SmartNavigator.keywords.info")+"\" tabindex=\"0\" class=\"appSearchKeywordsListButton "+_1853+"\">"+this.bundle.getProperty("SmartNavigator.keywords")+"</span>");
_17c5.place(_1854,_1851,"first");
on(_1854,["click","keyup"],lang.hitch(this,this._onAvailableKeywordsListButtonClick,_1851));
on(_1854,"keydown",lang.hitch(this,this._onKeywordsDownArrowKey));
on(_1854,"blur",lang.hitch(this,function(evt){
this._hideSearchBoxIfNotFocused(evt);
}));
if(!this.searchResultsScreenReadersInfo){
this.searchResultsScreenReadersInfo=_17c5.toDom("<span class=\"searchResultsScreenReadersInfo hidden\" id=\"searchResultsScreenReadersInfoId\"></span>");
_17c5.place(this.searchResultsScreenReadersInfo,_1851,"last");
}
this._fixQuickSearchHeight();
},_updateSearchResultsScreenReadersInfo:function(){
if(!this.searchResultsScreenReadersInfo){
this.searchResultsScreenReadersInfo=query(".searchResultsScreenReadersInfo",this.applicationSearchDiv[0])[0];
}
var _1855=query(".appSearchItem:not(.hide)").length;
if(this._isShowingHistory()){
this.searchResultsScreenReadersInfo.innerHTML=this.bundle.getProperty("SmartNavigator.rows.displayed.recent.search",[_1855]);
}else{
this.searchResultsScreenReadersInfo.innerHTML=this.bundle.getProperty("SmartNavigator.rows.displayed",[_1855]);
}
},_destroyKeywordTagsContainer:function(){
query(".appSearchKeywords",this.applicationSearchDiv[0]).forEach(_17c5.destroy);
this._hideAvailableKeywordsList();
},_createKeywordTags:function(_1856,_1857){
var _1858=[];
var _1859=false;
var _185a=query(".appSearchKeywords",this.applicationSearchDiv[0])[0];
var _185b=query(".appSearchKeywordsListButton",this.applicationSearchDiv[0])[0];
var _185c=12;
if(_17c7.contains(_185b,"itemsDisplayed")){
_185c=0;
}
var _185d=240-(_185b.offsetWidth+_185c);
if(_1856.length>0){
var _185e=_17c5.toDom("<span class=\"appSearchKeywordsContainer\"></span>");
_17c5.place(_185e,_185a,"last");
_1856.forEach(lang.hitch(this,function(_185f,index,array){
var _1860=query(".appSearchKeywordTag",this.applicationSearchDiv[0]).reduce(function(width,tag){
width+=parseInt(_17c4.getComputedStyle(tag).width)+22;
return width;
},0);
var _1861=(index===array.length-1);
var _1862="<span tabindex=\"0\" role=\"button\" aria-label=\""+this.bundle.getProperty("SmartNavigator.keyword.identified",[_185f.description])+"\" aria-owns=\"applicationSearchResultListId\" aria-live=\"assertive\" class=\"appSearchKeywordTag hidden "+(_1861?"last":"")+"\" ";
_1862+="data-terms=\""+_185f.terms+"\" ";
_1862+=">";
_1862+=_185f.description;
_1862+="</span>";
var tag=_17c5.toDom(_1862);
_17c5.place(tag,_185e,"last");
var _1863=parseInt(_17c4.getComputedStyle(tag).width);
if(_1860+_1863>_185d){
_1859=true;
}
_17c4.set(_185e,"maxWidth",_185d+"px");
_1858.push(tag);
on(tag,"click",lang.hitch(this,function(event){
this._destroyKeywordTag(_1857,event,true);
this.searchInputField.focus();
}));
on(tag,"keyup",lang.hitch(this,function(event){
if(event.keyCode===keys.ENTER||event.keyCode===keys.SPACE){
this._destroyKeywordTag(_1857,event,true);
this.searchInputField.focus();
}
this._onItemKeyNavigation(tag,event);
}));
}));
_1858.forEach(function(tag){
_17c7.remove(tag,"hidden");
});
}
},_destroyKeywordTag:function(_1864,event,_1865,_1866){
if(event.type==="keyup"&&(event.keyCode!==keys.ENTER&&event.keyCode!==keys.SPACE)){
return;
}
if(_1865){
event.preventDefault();
event.stopPropagation();
}
var terms=_1866||event.target.dataset.terms;
var _1867=terms.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");
var _1868="(\\b)*("+_1867+")+(\\b)*(\\s)*";
var _1869=this.searchInputField.value;
if(_1864.length>0){
var _186a=_1869.split(_1864[0]);
var init=_186a[0].replace(new RegExp(_1868),"");
var end="";
if(_186a.length>0){
end=_186a.slice(1).join("").replace(new RegExp(_1868),"");
}
this.searchInputField.value=(init+_1864[0]+end).trim();
}else{
this.searchInputField.value=(_1869.replace(new RegExp(_1868),"")).trim();
}
if(this.searchInputField.value){
this._doQuickSearch(this.searchInputField.value);
}
},_onAvailableKeywordsListButtonClick:function(_186b,event,_186c){
if(event.type==="keyup"&&(event.keyCode!==keys.ENTER&&event.keyCode!==keys.SPACE)){
return;
}
event.preventDefault();
event.stopPropagation();
this._destroyVisibleContextMenu();
if(this._showingAvailableKeywordsList&&!_186c){
this._hideAvailableKeywordsList();
}else{
if(!this.availableKeywordsList){
var _186d=this._simpleAccess.makeRequest("SmartNavigatorFacade","listSearchTargets");
this.quickSearchXHRPromises.push(_186d);
_186d.then(lang.hitch(this,function(data){
this.availableKeywordsList=data[0].dtls;
this._showingAvailableKeywordsList=true;
this._createAvailableKeywordsList(_186b,event.target);
_17c7.add(query(".appSearchKeywordsListButton",this.applicationSearchDiv[0])[0],"itemsDisplayed");
this._voiceOverFocusOnFirstKeyword();
}),lang.hitch(this,this._ajaxErrorCallback));
}else{
this._showAvailableKeywordsList();
this._voiceOverFocusOnFirstKeyword();
}
}
},_voiceOverFocusOnFirstKeyword:function(){
if(this.hasIos){
keywordTerm=query(".keywordTerm",this.applicationSearchDiv[0])[0];
setTimeout(function(){
keywordTerm.focus();
},400);
}
},_createAvailableKeywordsList:function(_186e,_186f){
if(!_186e){
_186e=query(".appSearchKeywords",this.applicationSearchDiv[0])[0];
}
var _1870=_17c5.toDom("<div class=\"availableKeywordsListContainer\"></div>");
_17c5.place(_1870,_186e,"last");
var _1871=this.hasIos?"aria-hidden=true":" aria-live=\"assertive\" ";
var _1872=_17c5.toDom("<div class=\"hidden availableKeywordsListDescription\" "+_1871+" >"+this.bundle.getProperty("SmartNavigator.keywords.list.description")+"</div>");
_17c5.place(_1872,_1870,"last");
this._setKeywordsListPosition(_186f,_1870);
var _1873=_17c5.toDom("<div class=\"availableKeywordsListInnerContainer\"></div>");
_17c5.place(_1873,_1870,"last");
this.availableKeywordsList.forEach(function(_1874){
var _1875=_17c5.toDom("<div class=\"availableKeyword\"></div>");
var _1876=_17c5.toDom("<span class=\"keywordTarget\" >"+_1874.description+"</span>");
var _1877=_17c5.toDom("<span class=\"keywordTerms\"></span>");
_1874.terms.split(",").forEach(function(term,index,array){
var _1878=_17c5.toDom("<pre>"+term+"</pre>").innerHTML;
var _1879=(index===array.length-1)?"":", <br />";
var _187a=_17c5.toDom("<li class=\"keywordTerm\" role=\"button\" aria-label=\""+this.bundle.getProperty("SmartNavigator.available.keyword",[_1878,_1874.description])+"\" tabindex=\"0\">"+_1878+_1879+"</li>");
on(_187a,["click","keyup"],lang.hitch(this,function(evt){
if(evt.type==="keyup"&&(evt.keyCode!==keys.ENTER&&evt.keyCode!==keys.SPACE)){
return;
}
this.searchInputField.value=this.searchInputField.value.trim()+" "+_1878;
this.searchInputField.focus();
this._hideAvailableKeywordsList();
this._doQuickSearch(this.searchInputField.value);
}));
on(_187a,"keydown",lang.hitch(this,function(event){
this._onKeywordsDownArrowKey(event);
this._onKeywordsUpArrowKey(event);
}));
on(_187a,"blur",lang.hitch(this,this._hideKeywordsOnBlur));
_17c5.place(_187a,_1877,"last");
},this);
_17c5.place(_1876,_1875,"first");
_17c5.place(_1877,_1875,"last");
_17c5.place(_1875,_1873,"last");
},this);
on(_1870,"blur",lang.hitch(this,this._hideKeywordsOnBlur));
return _1870;
},_setKeywordsListPosition:function(_187b,_187c){
var _187d=_187b.getBoundingClientRect();
_17c4.set(_187c,"top",(_187d.top+10)+"px");
var _187e=util.isRtlMode();
if(_187e!=null){
_17c4.set(_187c,"left",65+"px");
}else{
_17c4.set(_187c,"left",(_187d.left+65)+"px");
}
},_hideKeywordsOnBlur:function(event){
if(event.relatedTarget&&!this._isElementPartOfContainer(event.relatedTarget,"availableKeywordsListContainer")){
var _187f=query(".appSearchKeywordsListButton",this.applicationSearchDiv[0])[0];
if(_187f){
_187f.focus();
}
this._hideAvailableKeywordsList();
}
},_hideAvailableKeywordsList:function(){
var _1880=query(".availableKeywordsListContainer",this.applicationSearchDiv[0])[0];
if(_1880){
_17c7.add(_1880,"hide");
}
var _1881=query(".appSearchKeywordsListButton",this.applicationSearchDiv[0])[0];
if(_1881){
_17c7.remove(_1881,"itemsDisplayed");
}
this._showingAvailableKeywordsList=false;
this._fixQuickSearchHeight();
},_showAvailableKeywordsList:function(){
var _1882=query(".availableKeywordsListContainer",this.applicationSearchDiv[0])[0];
var _1883=query(".appSearchKeywordsListButton",this.applicationSearchDiv[0])[0];
if(!_1882){
_1882=this._createAvailableKeywordsList(null,_1883);
}
this._setKeywordsListPosition(_1883,_1882);
_17c7.remove(_1882,"hide");
_17c7.add(_1883,"itemsDisplayed");
var _1884=query(".availableKeywordsListDescription",this.applicationSearchDiv[0])[0];
if(_1884){
_1884.innerHTML=_1884.innerHTML;
}
this._showingAvailableKeywordsList=true;
this._fixQuickSearchHeight();
},_createMessages:function(){
var _1885="";
var _1886=null;
if(this.searchResults.messages.info){
_1885=this.searchResults.messages.info;
}else{
if(this.searchResults.messages.unmapped.pages.length>0){
_1885=this.bundle.getProperty("SmartNavigator.no.tabs.configured",[this.searchResults.messages.unmapped.pages.join()]);
}else{
if(this.searchResults.messages.moreThanOneTab.pages.length>0){
_1885=this.bundle.getProperty("SmartNavigator.more.than.one.tab",[this.searchResults.messages.moreThanOneTab.pages.join()]);
}
}
}
if(_1885.length>0){
_1886=this._createMessage(_1885,true);
}
return _1886;
},_createMessage:function(_1887,_1888,_1889){
query(".appSearchMessage.topMessage",this.applicationSearchDiv[0]).forEach(_17c5.destroy);
var _188a=false;
if(this.searchResults&&this.searchResults.keywords&&this.searchResults.keywords.length>0){
_188a=true;
}
var _188b=_1888?" info ":" error ";
var _188c=_17c5.toDom("<div role='alert' class='appSearchMessage topMessage "+_188b+"'><span>"+_1887+"</span></div>");
var _188d=query(".appSearchKeywords",this.applicationSearchDiv[0])[0];
_17c5.place(_188c,_188d,"after");
on(_188c,"blur",lang.hitch(this,function(evt){
this._hideSearchBoxIfNotFocused(evt);
}));
on(_188c,["keyup"],lang.hitch(this,function(event){
this._onItemKeyNavigation(_188c,event);
}));
return _188c;
},_isPageMappedToATab:function(url,page,_188e){
var _188f=new _17cc();
var _1890={isMapped:true};
var _1891=new curam.ui.PageRequest(url);
var _1892=lang.hitch(this,this._pageNotMappedToTabErrorCallback,_1891.pageID,_1890,_188f,page);
var _1893=lang.hitch(this,this._pageMappedToMoreThanOneTabErrorCallback,_1891.pageID,_1890,_188f,page);
var _1894=lang.hitch(this,this._pageMappedToTabCallback,_1891.pageID,_1890,_188f);
if(_17ca.indexOf(this.pagesMappedToTab,_1891.pageID)>=0){
_1894();
}else{
if(_17ca.indexOf(this.pagesNotMappedToTab,_1891.pageID)>=0){
_1892();
}else{
if(_17ca.indexOf(this.pagesMappedToMultipleTabs,_1891.pageID)>=0){
_1893();
}else{
var _1895=null;
if(_188e){
_1895=_188e.split(",").map(function(_1896){
return _1896.trim();
});
}
var _1897=!curam.ui.UIController.checkResolvePage(_1891,_1891.forceRefresh,_1892,_1895,_1893,false,_1894);
if(!_1897){
var _1898={unmappedPageLoader:_1892,preferredTabs:_1895,moreThanOneTabMappedCallback:_1893,shouldLoadPage:false,successCallback:_1894};
curam.ui.UIController.checkPage(_1891,_1898);
}
}
}
}
return _188f;
},_pageNotMappedToTabErrorCallback:function(_1899,_189a,_189b,page){
_189a.isMapped=false;
if(_17ca.indexOf(this.pagesNotMappedToTab,_1899)<0){
this.pagesNotMappedToTab.push(_1899);
}
if(_17ca.indexOf(this.searchResults.messages.unmapped.pages,page)<0){
this.searchResults.messages.unmapped.pages.push(page);
}
_189b.resolve(_189a);
},_pageMappedToMoreThanOneTabErrorCallback:function(_189c,_189d,_189e,page){
_189d.isMapped=false;
if(_17ca.indexOf(this.pagesMappedToMultipleTabs,_189c)<0){
this.pagesMappedToMultipleTabs.push(_189c);
}
if(_17ca.indexOf(this.searchResults.messages.moreThanOneTab.pages,page)<0){
this.searchResults.messages.moreThanOneTab.pages.push(page);
}
_189e.resolve(_189d);
},_pageMappedToTabCallback:function(_189f,_18a0,_18a1){
_18a0.isMapped=true;
if(_17ca.indexOf(this.pagesMappedToTab,_189f)<0){
this.pagesMappedToTab.push(_189f);
}
_18a1.resolve(_18a0);
},_createPersonContextNoResultsMessage:function(_18a2){
var _18a3=_17c5.toDom("<div class='appSearchMessage info' tabIndex='0'><span>"+this.bundle.getProperty("SmartNavigator.empty.search")+"</span></div>");
_17c5.place(_18a3,_18a2,"last");
},_createPersonContextSpinningLoader:function(_18a4){
var _18a5=_17c5.toDom("<div class=\"contextMenuLoader\">"+"<div class=\"curam-spinner curam-h1 quick-search contextMenu\"></div></div>");
_17c5.place(_18a5,_18a4,"last");
},_destroyPersonContextSpinningLoader:function(_18a6){
query(".contextMenuLoader",_18a6).forEach(_17c5.destroy);
},_destroyContextMenuIfNecessary:function(_18a7){
var _18a8=false;
var _18a9=query(".appSearchItemContext",this.applicationSearchDiv[0]);
if(_18a9.length>0){
if(!this._isElementPartOfContainer(_18a7,"appSearchItemContext")){
if(this._isElementPartOfContainer(_18a7,"application-search")){
if(_18a7.tabIndex===0){
_18a7.focus();
}else{
this.searchInputField.focus();
}
}
this._destroyVisibleContextMenu(_18a9);
_18a8=true;
}
}
return _18a8;
},_destroyVisibleContextMenu:function(_18aa){
if(!_18aa){
_18aa=query(".appSearchItemContext",this.applicationSearchDiv[0]);
}
if(_18aa.length>0){
query(".personItems.clicked",this.applicationSearchDiv[0]).forEach(function(_18ab){
if(_18ab.dataset.concernrole===_18aa[0].dataset.concernrole){
_17c7.remove(_18ab,"clicked");
}
});
_17c5.destroy(_18aa[0]);
}
},_hideKeywordsListIfNecessary:function(_18ac,_18ad){
var _18ae=false;
var _18af=query(".availableKeywordsListContainer:not(.hide)",this.applicationSearchDiv[0]);
if(_18af.length>0){
if(_18ad||!this._isElementPartOfContainer(_18ac,"availableKeywordsListContainer")){
this._hideAvailableKeywordsList();
_18ae=true;
}
if(_18ad){
var _18b0=query(".appSearchKeywordsListButton",this.applicationSearchDiv[0])[0];
if(_18b0){
_18b0.focus();
}
}
}
return _18ae;
},_isElementPartOfContainer:function(_18b1,_18b2){
if(_18b1.parentElement!=null){
if(_17c7.contains(_18b1,_18b2)){
return true;
}else{
return this._isElementPartOfContainer(_18b1.parentElement,_18b2);
}
}
return false;
},_onItemClick:function(event,item,_18b3){
if(event.type==="keyup"&&(event.keyCode!==keys.ENTER&&event.keyCode!==keys.SPACE)){
return;
}
event.preventDefault();
event.stopPropagation();
var _18b4=null;
if(item.action){
_18b4=item.action.description;
}else{
if(item.person){
_18b4=item.person.concernRoleName;
}
}
this._resetSearchMessages();
item.url=item.url.replace(/&#38;/g,"&");
if(item.isModal){
this._openLinkAndSaveHistory(event,item,_18b3,true);
}else{
this._isPageMappedToATab(item.url,_18b4,item.preferredTabs).then(lang.hitch(this,function(_18b5){
this._openLinkAndSaveHistory(event,item,_18b3,false,_18b5);
}));
}
},_openLinkAndSaveHistory:function(event,item,_18b6,_18b7,_18b8){
query(".appSearchItemContext",this.applicationSearchDiv[0]).forEach(_17c5.destroy);
var _18b9=this.searchResults.messages.moreThanOneTab.pages.length>0;
if(_18b7||(_18b8&&_18b8.isMapped)||(_18b9&&item.preferredTabs)){
this._hideSearchBox();
require(["curam/widget/SearchMultipleTextBoxHookPoints"],lang.hitch(this,function(_18ba){
if(_18ba.preNavigationHook){
var _18bb=topic.subscribe("/smartnavigator/prenavigationhook/completed",lang.hitch(this,function(){
this._openLinkAndSaveHistoryPostHook(event,item,_18b6,_18b7,_18b8);
_18bb.remove();
}));
var data={url:item.url};
if(item.person){
data.concernRoleId=item.person.concernRoleId;
}
_18ba.preNavigationHook(data);
}else{
this._openLinkAndSaveHistoryPostHook(event,item,_18b6,_18b7,_18b8);
}
}));
}else{
var _18bc=this._createMessages();
if(_18bc){
_18bc.focus();
}
this._fixQuickSearchHeight();
}
query(".personItems.clicked",this.applicationSearchDiv[0]).forEach(function(item){
_17c7.remove(item,"clicked");
});
},_openLinkAndSaveHistoryPostHook:function(event,item,_18bd,_18be,_18bf){
if(_18be){
tab.getTabController().handleLinkClick(item.url,{});
}else{
var _18c0=null;
if(item.preferredTabs){
_18c0=item.preferredTabs.split(",").map(function(_18c1){
return _18c1.trim();
});
}
var _18c2=new curam.ui.PageRequest(item.url);
curam.ui.UIController.handlePageRequest(_18c2,_18c0);
}
if(!_18bd){
var _18c3=lang.clone(item);
delete _18c3.rendered;
delete _18c3.first;
delete _18c3.last;
if(!_18c3.action){
delete _18c3.action;
}
if(!_18c3.person){
delete _18c3.person;
}else{
delete _18c3.person.items;
delete _18c3.person.formattedDateOfBirth;
}
var _18c4=this._simpleAccess.makeRequest("SmartNavigatorFacade","saveUserHistoryItem",_18c3);
this.quickSearchXHRPromises.push(_18c4);
_18c4.then(function(){
},function(err){
debug.log("Error Saving Search History",err);
});
}
},_onItemKeyNavigation:function(row,event){
if(event.keyCode===keys.DOWN_ARROW){
this._onItemDownArrowKey(row,event);
}else{
if(event.keyCode===keys.UP_ARROW){
this._onItemUpArrowKey(row,event);
}else{
if(event.keyCode===keys.RIGHT_ARROW){
if(util.isRtlMode()){
this._onItemLeftArrowKey(row,event);
}else{
this._onItemRightArrowKey(row,event);
}
}else{
if(event.keyCode===keys.LEFT_ARROW){
if(util.isRtlMode()){
this._onItemRightArrowKey(row,event);
}else{
this._onItemLeftArrowKey(row,event);
}
}
}
}
}
},_onItemDownArrowKey:function(row,event){
event.preventDefault();
event.stopPropagation();
if(_17c7.contains(event.target,"topMessage")){
this._setFocusOnFirstResultRow();
}else{
if(_17c7.contains(event.target,"appSearchKeywordTag")||_17c7.contains(event.target,"appSearchDropDownButton")){
this._setFocusOnFirstResultRow();
}else{
var _18c5=this._findSiblingElement(row,true,"appSearchItem-ListItem","hide");
if(_18c5){
this._focusAppSearchRowItem(_18c5);
}else{
if(!_17c7.contains(event.target,"contextMenuItem")&&!_17c7.contains(event.target,"appSearchMessage")){
var _18c6=query(".moreItems",this.applicationSearchDiv[0]);
if(_18c6.length>0){
_18c6[0].focus();
}
}
}
}
}
},_onItemUpArrowKey:function(row,event){
event.preventDefault();
event.stopPropagation();
if(_17c7.contains(event.target,"appSearchKeywordTag")||_17c7.contains(event.target,"appSearchDropDownButton")){
this.searchInputField.focus();
return;
}
var _18c7=this._findSiblingElement(row,false,"appSearchItem-ListItem","hide");
if(_18c7){
this._focusAppSearchRowItem(_18c7);
}else{
if(_17c7.contains(event.target,"moreItems")){
var items=query(".appSearchItem:not(.hide)",this.applicationSearchDiv[0]);
this._focusAppSearchRowItem(items[items.length-1]);
}else{
if(!_17c7.contains(event.target,"contextMenuItem")){
var _18c8=query(".appSearchDropDownButton",this.applicationSearchDiv[0]);
if(_18c8.length>0){
_18c8[0].focus();
}else{
var tags=query(".appSearchKeywordTag",this.applicationSearchDiv[0]);
if(tags.length>0){
tags[0].focus();
}else{
this.searchInputField.focus();
}
}
}
}
}
},_onItemRightArrowKey:function(row,event){
event.preventDefault();
event.stopPropagation();
if(_17c7.contains(event.target,"appSearchKeywordTag")){
var _18c9=this._findSiblingElement(event.target,true,"appSearchKeywordTag");
if(_18c9){
_18c9.focus();
}
}
var _18ca=query(".personItems",row);
if(_18ca.length>0){
this.personItemsContextMenuCreationCallback=function(_18cb){
var items=query(".contextMenuItem",_18cb);
if(items.length>0){
items[0].focus();
}else{
query(".appSearchMessage",_18cb)[0].focus();
}
this.personItemsContextMenuCreationCallback=null;
};
_18ca[0].click();
}
},_onItemLeftArrowKey:function(row,event){
if(_17c7.contains(event.target,"appSearchKeywordTag")){
var _18cc=this._findSiblingElement(event.target,false,"appSearchKeywordTag");
if(_18cc){
_18cc.focus();
}
}
},_focusAppSearchRowItem:function(row){
if(_17c7.contains(row,"appSearchItem")){
row.focus();
}else{
var _18cd=query(".appSearchItem",row)[0];
if(_18cd){
_18cd.focus();
}
}
},_findSiblingElement:function(row,_18ce,_18cf,_18d0){
var _18d1=_18ce?row.nextElementSibling:row.previousElementSibling;
while(_18d1){
if(!_17c7.contains(_18d1,_18cf)){
return null;
}
if(!_18d0||!_17c7.contains(_18d1,_18d0)){
return _18d1;
}
_18d1=_18ce?_18d1.nextElementSibling:_18d1.previousElementSibling;
}
},_setFocusOnFirstResultRow:function(){
var items=query(".appSearchItem:not(.hide)",this.applicationSearchDiv[0]);
if(items.length>0){
items[0].focus();
}
},_onPaste:function(evt){
var _18d2=evt.clipboardData||window.clipboardData;
var _18d3=_18d2.getData("Text");
var _18d4=(_18d3&&_18d3.length>0)||this._isSearchInputFieldPopulated();
this._enableOrDisableSearchLink(evt,_18d4);
},_givenFocus:function(){
var _18d5=this;
var ua=navigator.userAgent.toLowerCase();
var _18d6=/trident/.test(ua)?true:false;
if(query(".appSearchItemContext",this.applicationSearchDiv[0]).length>0){
return;
}
if(!this.spinnerDiv){
this._createSpinnerDiv();
}
if(this.searchTextDiv==null){
this.searchTextDiv=query(".search-input-controls div.dijitInputField",this.applicationSearchDiv[0]);
}
if(this.originalInputColor==null){
this.originalInputColor="#152935";
}
if(this.appBannerComboBoxDiv==null||this.appBannerComboBoxDiv.length==0){
this.appBannerComboBoxDiv=query(".appBannerComboBox",this.applicationSearchDiv[0]);
if(this.appBannerComboBoxDiv==null||this.appBannerComboBoxDiv.length==0){
this.appBannerComboBoxDiv=query(".multiple-search-banner select",this.applicationSearchDiv[0]);
if(this.appBannerComboBoxDiv!=null&&this.appBannerComboBoxDiv.length>0){
_17c7.add(this.appBannerComboBoxDiv[0],"appBannerSelect");
}
}
}
_17c4.set(this.searchInputField,"color",this.originalInputColor);
_17c7.remove(this.searchInputField,"input-placeholder-closed");
_17c7.add(this.searchInputField,"input-placeholder-opened");
var _18d7=0;
var _18d8=util.isRtlMode();
if(_18d8!=null){
_18d7=_17c6.position(this.searchInputField).x-46;
}else{
_18d7=_17c6.position(this.searchInputField).x-10;
}
if(this.closedHeight==null){
this.closedHeight=_17c4.get(this.applicationSearchDiv[0],"height");
}
this.applicationSearchDiv.style({left:_18d7+"px"});
_17c7.add(this.applicationSearchDiv[0],"application-search-upfront-popup");
if(this.quickSearch){
if(query(".appSearchKeywords",this.applicationSearchDiv[0]).length===0){
this._createKeywordTagsContainer();
}
}else{
this._destroyKeywordTagsContainer();
}
var _18d9=this.quickSearch?40:100;
if(_17c4.get(this.applicationSearchDiv[0],"height")!=_18d9){
if(this.searchOptionsDiv.length>0){
_17c4.set(this.searchOptionsDiv[0],"display","block");
_17c4.set(this.searchOptionsDiv[0],"opacity","0");
}
if(this.appBannerComboBoxDiv!=null&&this.appBannerComboBoxDiv.length>0){
_17c4.set(this.appBannerComboBoxDiv[0],"display","block");
}
if(this.searchOptionsDiv!=null&&this.searchOptionsDiv.length>0){
var _18da={node:this.searchOptionsDiv[0]};
fx.fadeIn(_18da).play();
}
}
if(this.backgroundColor==null){
this.backgroundColor=_17c4.get(this.searchTextDiv[0],"background-color");
}
if(this.searchTextDiv!=null&&_17c4.get(this.searchTextDiv[0],"background-color")!=this.searchOptionsDivOpenedColor){
_17c4.set(this.searchTextDiv[0],"background-color","#ffffff");
_17c4.set(this.searchControlsDiv[0],"background-color","#ffffff");
_17c4.set(this.searchIconDiv[0],"background-color","#ffffff");
this.searchInputImg[0].src=jsBaseURL+"/themes/curam/images/search--20-enabled.svg";
}
if(this.quickSearch){
if(!this.focusNode.value&&!this._isShowingHistory()){
this._destroyResultList();
this._hideDropDown();
this._showSearchHistory();
}
var _18db=query(".appSearchItemSeparatorLabel",this.applicationSearchDiv[0])[0];
if(_18db){
if(_18d6){
_17c8.set(this.searchInputField,"aria-describedby","applicationSearchResultListId");
}else{
_17c8.set(this.searchInputField,"aria-describedby","resultRowHeaderId");
}
}
this._showResultList();
}
this._fixQuickSearchHeight();
this.searchInputField.focus();
setTimeout(function(){
_18d5.searchInputField.select();
},5);
var _18dc=query(".appSearchItemsContainer",this.applicationSearchDiv[0])[0];
if(typeof (this.searchInputField)!="undefined"&&this.searchInputField.value.length>0&&typeof (_18dc)!="undefined"&&_18dc.children.length>0){
if(_18d6){
_17c8.set(this.searchInputField,"aria-describedby","applicationSearchResultListId");
}else{
_17c8.set(this.searchInputField,"aria-describedby","searchResultsScreenReadersInfoId");
}
}
},_onBlur:function(evt){
if(!this._isSearchInputFieldPopulated()){
this.searchInputField.value="";
}
this._hideSearchBoxIfNotFocused(evt);
},_destroyResultList:function(){
query(".appSearchItemsOuterContainer",this.applicationSearchDiv[0]).forEach(_17c5.destroy);
query(".appSearchItemsContainer",this.applicationSearchDiv[0]).forEach(_17c5.destroy);
query(".appSearchItem",this.applicationSearchDiv[0]).forEach(_17c5.destroy);
query(".appSearchItemSeparatorLabel",this.applicationSearchDiv[0]).forEach(_17c5.destroy);
query(".appSearchKeywordTag",this.applicationSearchDiv[0]).forEach(_17c5.destroy);
query(".appSearchMessage.topMessage",this.applicationSearchDiv[0]).forEach(_17c5.destroy);
query(".appSearchItemContext",this.applicationSearchDiv[0]).forEach(_17c5.destroy);
query(".moreItems",this.applicationSearchDiv[0]).forEach(_17c5.destroy);
query(".personItems.clicked",this.applicationSearchDiv[0]).forEach(function(item){
_17c7.remove(item,"clicked");
});
_17c7.remove(this.applicationSearchDiv[0],"application-search-items-list");
this._fixQuickSearchHeight();
_17c7.remove(this.applicationSearchDiv[0],"shadow");
},_autoScrollToNewItems:function(){
if(this.searchResults.hasItems&&this.paginationStart>0){
var _18dd=query(".appSearchItemsOuterContainer",this.applicationSearchDiv[0])[0];
_18dd.scrollTop=_18dd.scrollHeight;
query(".appSearchNewItem",this.applicationSearchDiv[0]).forEach(function(item){
fx.animateProperty({node:item,duration:650,properties:{opacity:{start:".4",end:"1"}}}).play();
_17c7.remove(item,"appSearchNewItem");
});
}
},_getAge:function(dob){
if(dob){
var _18de=_17cd.parseDate(dob);
return parseInt(((Date.now()-_18de)/(31557600000)));
}else{
return "";
}
},_fixQuickSearchHeight:function(){
this.currentOpenedHeight=this._getOpenedMenuHeight();
_17c4.set(this.applicationSearchDiv[0],"height",this.currentOpenedHeight+"px");
},_hideDropDown:function(){
this._fixQuickSearchHeight();
_17c7.remove(this.applicationSearchDiv[0],"shadow");
},_isShowingHistory:function(){
return query(".appSearchItemHistory",this.applicationSearchDiv[0]).length>0;
},_resetSearchResults:function(){
this.paginationStart=0;
this._destroyResultList();
this.searchResults={people:[],actionsOnly:[],personQueryTerms:[],messages:{info:null,unmapped:{pages:[]},moreThanOneTab:{pages:[]}},hasItems:false};
},_resetSearchMessages:function(){
this.searchResults.messages={info:null,unmapped:{pages:[]},moreThanOneTab:{pages:[]}};
},_enableOrDisableSearchLink:function(evt,_18df){
if(_18df&&_18df===true){
_17c7.remove(this.searchIcon[0],"dijitDisabled");
if(evt.keyCode==keys.ENTER){
this._search();
}
}else{
_17c7.add(this.searchIcon[0],"dijitDisabled");
}
},_isQuickSearchOnly:function(){
var _18e0=false;
var _18e1=false;
if(this.searchOptionsDiv!=null&&this.searchOptionsDiv.length>0){
_18e0=true;
}
if(this.appBannerComboBoxDiv!=null&&this.appBannerComboBoxDiv.length>0){
_18e1=true;
}
return !_18e0&&!_18e1;
},_getItemsHeight:function(_18e2){
var _18e3=this._isQuickSearchOnly();
var _18e4=".appSearchItem:not(.hide):not(.contextMenuItem)";
if(_18e2){
_18e4=".appSearchItem";
}
var _18e5=query(_18e4,this.applicationSearchDiv[0]).reduce(function(_18e6,node){
_18e6+=_17c4.get(node,"height");
_18e6+=_17c4.get(node,"padding-top");
_18e6+=_17c4.get(node,"padding-bottom");
_18e6+=_17c4.get(node,"margin-top");
_18e6+=_17c4.get(node,"margin-bottom");
return _18e6;
},0);
if(_18e3&&_18e5>0){
_18e5+=3;
}
if(_18e5>this.maxItemsHeight){
_18e5=this.maxItemsHeight;
}
return _18e5;
},_getOpenedMenuHeight:function(){
var _18e7=0;
if(this.searchOptionsDiv!=null&&this.searchOptionsDiv.length>0){
if(this.quickSearch){
_18e7+=this.appBannerComboBoxDiv[0]?this.menuOpenedFurtherOptionsHeightQuickSearch:this.menuOpenedFurtherOptionsHeightNoCombobox;
}else{
_18e7+=this.menuOpenedFurtherOptionsHeight;
}
}
if(this.appBannerComboBoxDiv!=null&&this.appBannerComboBoxDiv.length>0){
_18e7+=this.menuOpenedComboboxHeight;
}else{
if(this.quickSearch){
_18e7+=this.quickSearchMenuOpenedHeight;
}
}
var _18e8=0;
query(".appSearchKeywords",this.applicationSearchDiv[0]).forEach(function(_18e9){
_18e8+=this._calculateElementHeight(_18e9);
},this);
_18e8+=this._getTopMessagesHeight();
_18e8+=query(".moreItems",this.applicationSearchDiv[0]).reduce(function(count){
return count+=40;
},0);
if(query(".appSearchItemsOuterContainer.margin",this.applicationSearchDiv[0]).length>0){
_18e7+=10;
}
if(query(".appSearchMessage.topMessage.margin",this.applicationSearchDiv[0]).length>0){
_18e7+=10;
}
var _18ea=this._getItemsHeight(false);
_18e7+=_18ea+_18e8;
var _18eb=27;
var _18ec=_18e7===_18eb+this.quickSearchMenuOpenedHeight;
if(_18ec){
_18e7-=5;
}
_17c4.set(this.applicationSearchDiv[0],"height",_18e7+"px");
this.currentOpenedHeight=_18e7;
return _18e7;
},_getTopMessagesHeight:function(){
var _18ed=0;
query(".appSearchMessage.topMessage",this.applicationSearchDiv[0]).forEach(function(_18ee){
_18ed+=_18ee.clientHeight+5;
});
return _18ed;
},_calculateElementHeight:function(_18ef){
var _18f0=window.getComputedStyle(_18ef);
var _18f1=parseFloat(_18f0["marginTop"])+parseFloat(_18f0["marginBottom"]);
return Math.ceil(_18ef.offsetHeight+_18f1);
},_enableQuickSearch:function(){
_17c7.add(this.applicationSearchDiv[0],"quick-search");
this.quickSearch=true;
if(query(".appSearchKeywords",this.applicationSearchDiv[0]).length===0){
this._createKeywordTagsContainer();
}
},_disableQuickSearch:function(){
this._destroyResultList();
_17c7.remove(this.applicationSearchDiv[0],"quick-search");
this.quickSearch=false;
this._destroyKeywordTagsContainer();
},_createSpinnerDiv:function(){
this.spinnerDiv=_17c5.toDom("<div class=\"curam-spinner curam-h1 quick-search hide\"></div>");
_17c5.place(this.spinnerDiv,this.searchIconDiv[0],"last");
},_showSpinnerDiv:function(){
this.spinnerTimeouts.push(setTimeout(lang.hitch(this,function(){
_17c4.set(this.searchIcon[0],"display","none");
_17c7.remove(this.spinnerDiv,"hide");
}),500));
},_hideSpinnerDiv:function(){
this.spinnerTimeouts.forEach(function(_18f2){
clearTimeout(_18f2);
});
this.spinnerTimeouts=[];
_17c4.set(this.searchIcon[0],"display","block");
if(this.spinnerDiv){
_17c7.add(this.spinnerDiv,"hide");
}
},_cancelPreviousAjaxCalls:function(){
if(this.quickSearchXHRPromises.length>0){
this.quickSearchXHRPromises.forEach(function(_18f3){
_18f3.cancel();
});
this.quickSearchXHRPromises=[];
}
}});
return _17d5;
});
},"dijit/form/_ComboBoxMenuMixin":function(){
define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/has","dojo/i18n","dojo/i18n!./nls/ComboBox"],function(array,_18f4,_18f5,has,i18n){
var _18f6=_18f4("dijit.form._ComboBoxMenuMixin"+(has("dojo-bidi")?"_NoBidi":""),null,{_messages:null,postMixInProperties:function(){
this.inherited(arguments);
this._messages=i18n.getLocalization("dijit.form","ComboBox",this.lang);
},buildRendering:function(){
this.inherited(arguments);
this.previousButton.innerHTML=this._messages["previousMessage"];
this.nextButton.innerHTML=this._messages["nextMessage"];
},_setValueAttr:function(value){
this._set("value",value);
this.onChange(value);
},onClick:function(node){
if(node==this.previousButton){
this._setSelectedAttr(null);
this.onPage(-1);
}else{
if(node==this.nextButton){
this._setSelectedAttr(null);
this.onPage(1);
}else{
this.onChange(node);
}
}
},onChange:function(){
},onPage:function(){
},onClose:function(){
this._setSelectedAttr(null);
},_createOption:function(item,_18f7){
var _18f8=this._createMenuItem();
var _18f9=_18f7(item);
if(_18f9.html){
_18f8.innerHTML=_18f9.label;
}else{
_18f8.appendChild(_18f8.ownerDocument.createTextNode(_18f9.label));
}
if(_18f8.innerHTML==""){
_18f8.innerHTML="&#160;";
}
return _18f8;
},createOptions:function(_18fa,_18fb,_18fc){
this.items=_18fa;
this.previousButton.style.display=(_18fb.start==0)?"none":"";
_18f5.set(this.previousButton,"id",this.id+"_prev");
array.forEach(_18fa,function(item,i){
var _18fd=this._createOption(item,_18fc);
_18fd.setAttribute("item",i);
_18f5.set(_18fd,"id",this.id+i);
this.nextButton.parentNode.insertBefore(_18fd,this.nextButton);
},this);
var _18fe=false;
if(_18fa.total&&!_18fa.total.then&&_18fa.total!=-1){
if((_18fb.start+_18fb.count)<_18fa.total){
_18fe=true;
}else{
if((_18fb.start+_18fb.count)>_18fa.total&&_18fb.count==_18fa.length){
_18fe=true;
}
}
}else{
if(_18fb.count==_18fa.length){
_18fe=true;
}
}
this.nextButton.style.display=_18fe?"":"none";
_18f5.set(this.nextButton,"id",this.id+"_next");
},clearResultList:function(){
var _18ff=this.containerNode;
while(_18ff.childNodes.length>2){
_18ff.removeChild(_18ff.childNodes[_18ff.childNodes.length-2]);
}
this._setSelectedAttr(null);
},highlightFirstOption:function(){
this.selectFirstNode();
},highlightLastOption:function(){
this.selectLastNode();
},selectFirstNode:function(){
this.inherited(arguments);
if(this.getHighlightedOption()==this.previousButton){
this.selectNextNode();
}
},selectLastNode:function(){
this.inherited(arguments);
if(this.getHighlightedOption()==this.nextButton){
this.selectPreviousNode();
}
},getHighlightedOption:function(){
return this.selected;
}});
if(has("dojo-bidi")){
_18f6=_18f4("dijit.form._ComboBoxMenuMixin",_18f6,{_createOption:function(){
var _1900=this.inherited(arguments);
this.applyTextDir(_1900);
return _1900;
}});
}
return _18f6;
});
},"dijit/Tree":function(){
define(["dojo/_base/array","dojo/aspect","dojo/cookie","dojo/_base/declare","dojo/Deferred","dojo/promise/all","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/errors/create","dojo/fx","dojo/has","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/on","dojo/topic","dojo/touch","dojo/when","./a11yclick","./focus","./registry","./_base/manager","./_Widget","./_TemplatedMixin","./_Container","./_Contained","./_CssStateMixin","./_KeyNavMixin","dojo/text!./templates/TreeNode.html","dojo/text!./templates/Tree.html","./tree/TreeStoreModel","./tree/ForestStoreModel","./tree/_dndSelector","dojo/query!css2"],function(array,_1901,_1902,_1903,_1904,all,dom,_1905,_1906,_1907,_1908,_1909,has,_190a,keys,lang,on,topic,touch,when,_190b,focus,_190c,_190d,_190e,_190f,_1910,_1911,_1912,_1913,_1914,_1915,_1916,_1917,_1918){
function _1919(d){
return lang.delegate(d.promise||d,{addCallback:function(_191a){
this.then(_191a);
},addErrback:function(_191b){
this.otherwise(_191b);
}});
};
var _191c=_1903("dijit._TreeNode",[_190e,_190f,_1910,_1911,_1912],{item:null,isTreeNode:true,label:"",_setLabelAttr:function(val){
this.labelNode[this.labelType=="html"?"innerHTML":"innerText" in this.labelNode?"innerText":"textContent"]=val;
this._set("label",val);
if(has("dojo-bidi")){
this.applyTextDir(this.labelNode);
}
},labelType:"text",isExpandable:null,isExpanded:false,state:"NotLoaded",templateString:_1914,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){
this.inherited(arguments);
this._setExpando();
this._updateItemClasses(this.item);
if(this.isExpandable){
this.labelNode.setAttribute("aria-expanded",this.isExpanded);
}
this.setSelected(false);
},_setIndentAttr:function(_191d){
var _191e=(Math.max(_191d,0)*this.tree._nodePixelIndent)+"px";
_1907.set(this.domNode,"backgroundPosition",_191e+" 0px");
_1907.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",_191e);
array.forEach(this.getChildren(),function(child){
child.set("indent",_191d+1);
});
this._set("indent",_191d);
},markProcessing:function(){
this.state="Loading";
this._setExpando(true);
},unmarkProcessing:function(){
this._setExpando(false);
},_updateItemClasses:function(item){
var tree=this.tree,model=tree.model;
if(tree._v10Compat&&item===model.root){
item=null;
}
this._applyClassAndStyle(item,"icon","Icon");
this._applyClassAndStyle(item,"label","Label");
this._applyClassAndStyle(item,"row","Row");
this.tree._startPaint(true);
},_applyClassAndStyle:function(item,lower,upper){
var _191f="_"+lower+"Class";
var _1920=lower+"Node";
var _1921=this[_191f];
this[_191f]=this.tree["get"+upper+"Class"](item,this.isExpanded);
_1905.replace(this[_1920],this[_191f]||"",_1921||"");
_1907.set(this[_1920],this.tree["get"+upper+"Style"](item,this.isExpanded)||{});
},_updateLayout:function(){
var _1922=this.getParent(),_1923=!_1922||!_1922.rowNode||_1922.rowNode.style.display=="none";
_1905.toggle(this.domNode,"dijitTreeIsRoot",_1923);
_1905.toggle(this.domNode,"dijitTreeIsLast",!_1923&&!this.getNextSibling());
},_setExpando:function(_1924){
var _1925=["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"],_1926=["*","-","+","*"],idx=_1924?0:(this.isExpandable?(this.isExpanded?1:2):3);
_1905.replace(this.expandoNode,_1925[idx],_1925);
this.expandoNodeText.innerHTML=_1926[idx];
},expand:function(){
if(this._expandDeferred){
return _1919(this._expandDeferred);
}
if(this._collapseDeferred){
this._collapseDeferred.cancel();
delete this._collapseDeferred;
}
this.isExpanded=true;
this.labelNode.setAttribute("aria-expanded","true");
if(this.tree.showRoot||this!==this.tree.rootNode){
this.containerNode.setAttribute("role","group");
}
_1905.add(this.contentNode,"dijitTreeContentExpanded");
this._setExpando();
this._updateItemClasses(this.item);
if(this==this.tree.rootNode&&this.tree.showRoot){
this.tree.domNode.setAttribute("aria-expanded","true");
}
var _1927=_1909.wipeIn({node:this.containerNode,duration:_190d.defaultDuration});
var def=(this._expandDeferred=new _1904(function(){
_1927.stop();
}));
_1901.after(_1927,"onEnd",function(){
def.resolve(true);
},true);
_1927.play();
return _1919(def);
},collapse:function(){
if(this._collapseDeferred){
return _1919(this._collapseDeferred);
}
if(this._expandDeferred){
this._expandDeferred.cancel();
delete this._expandDeferred;
}
this.isExpanded=false;
this.labelNode.setAttribute("aria-expanded","false");
if(this==this.tree.rootNode&&this.tree.showRoot){
this.tree.domNode.setAttribute("aria-expanded","false");
}
_1905.remove(this.contentNode,"dijitTreeContentExpanded");
this._setExpando();
this._updateItemClasses(this.item);
var _1928=_1909.wipeOut({node:this.containerNode,duration:_190d.defaultDuration});
var def=(this._collapseDeferred=new _1904(function(){
_1928.stop();
}));
_1901.after(_1928,"onEnd",function(){
def.resolve(true);
},true);
_1928.play();
return _1919(def);
},indent:0,setChildItems:function(items){
var tree=this.tree,model=tree.model,defs=[];
var _1929=tree.focusedChild;
var _192a=this.getChildren();
array.forEach(_192a,function(child){
_1910.prototype.removeChild.call(this,child);
},this);
this.defer(function(){
array.forEach(_192a,function(node){
if(!node._destroyed&&!node.getParent()){
tree.dndController.removeTreeNode(node);
function _192b(node){
var id=model.getIdentity(node.item),ary=tree._itemNodesMap[id];
if(ary.length==1){
delete tree._itemNodesMap[id];
}else{
var index=array.indexOf(ary,node);
if(index!=-1){
ary.splice(index,1);
}
}
array.forEach(node.getChildren(),_192b);
};
_192b(node);
if(tree.persist){
var _192c=array.map(node.getTreePath(),function(item){
return tree.model.getIdentity(item);
}).join("/");
for(var path in tree._openedNodes){
if(path.substr(0,_192c.length)==_192c){
delete tree._openedNodes[path];
}
}
tree._saveExpandedNodes();
}
if(tree.lastFocusedChild&&!dom.isDescendant(tree.lastFocusedChild,tree.domNode)){
delete tree.lastFocusedChild;
}
if(_1929&&!dom.isDescendant(_1929,tree.domNode)){
tree.focus();
}
node.destroyRecursive();
}
});
});
this.state="Loaded";
if(items&&items.length>0){
this.isExpandable=true;
array.forEach(items,function(item){
var id=model.getIdentity(item),_192d=tree._itemNodesMap[id],node;
if(_192d){
for(var i=0;i<_192d.length;i++){
if(_192d[i]&&!_192d[i].getParent()){
node=_192d[i];
node.set("indent",this.indent+1);
break;
}
}
}
if(!node){
node=this.tree._createTreeNode({item:item,tree:tree,isExpandable:model.mayHaveChildren(item),label:tree.getLabel(item),labelType:(tree.model&&tree.model.labelType)||"text",tooltip:tree.getTooltip(item),ownerDocument:tree.ownerDocument,dir:tree.dir,lang:tree.lang,textDir:tree.textDir,indent:this.indent+1});
if(_192d){
_192d.push(node);
}else{
tree._itemNodesMap[id]=[node];
}
}
this.addChild(node);
if(this.tree.autoExpand||this.tree._state(node)){
defs.push(tree._expandNode(node));
}
},this);
array.forEach(this.getChildren(),function(child){
child._updateLayout();
});
}else{
this.isExpandable=false;
}
if(this._setExpando){
this._setExpando(false);
}
this._updateItemClasses(this.item);
var def=all(defs);
this.tree._startPaint(def);
return _1919(def);
},getTreePath:function(){
var node=this;
var path=[];
while(node&&node!==this.tree.rootNode){
path.unshift(node.item);
node=node.getParent();
}
path.unshift(this.tree.rootNode.item);
return path;
},getIdentity:function(){
return this.tree.model.getIdentity(this.item);
},removeChild:function(node){
this.inherited(arguments);
var _192e=this.getChildren();
if(_192e.length==0){
this.isExpandable=false;
this.collapse();
}
array.forEach(_192e,function(child){
child._updateLayout();
});
},makeExpandable:function(){
this.isExpandable=true;
this._setExpando(false);
},setSelected:function(_192f){
this.labelNode.setAttribute("aria-selected",_192f?"true":"false");
_1905.toggle(this.rowNode,"dijitTreeRowSelected",_192f);
},focus:function(){
focus.focus(this.focusNode);
}});
if(has("dojo-bidi")){
_191c.extend({_setTextDirAttr:function(_1930){
if(_1930&&((this.textDir!=_1930)||!this._created)){
this._set("textDir",_1930);
this.applyTextDir(this.labelNode);
array.forEach(this.getChildren(),function(_1931){
_1931.set("textDir",_1930);
},this);
}
}});
}
var Tree=_1903("dijit.Tree",[_190e,_1913,_190f,_1912],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:true,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:false,openOnDblClick:false,templateString:_1915,persist:false,autoExpand:false,dndController:_1918,dndParams:["onDndDrop","itemCreator","onDndCancel","checkAcceptance","checkItemAcceptance","dragThreshold","betweenThreshold"],onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(_1932,_1933){
topic.publish(this.id,lang.mixin({tree:this,event:_1932},_1933||{}));
},postMixInProperties:function(){
this.tree=this;
if(this.autoExpand){
this.persist=false;
}
this._itemNodesMap={};
if(!this.cookieName&&this.id){
this.cookieName=this.id+"SaveStateCookie";
}
this.expandChildrenDeferred=new _1904();
this.pendingCommandsPromise=this.expandChildrenDeferred.promise;
this.inherited(arguments);
},postCreate:function(){
this._initState();
var self=this;
this.own(on(this.containerNode,on.selector(".dijitTreeNode",touch.enter),function(evt){
self._onNodeMouseEnter(_190c.byNode(this),evt);
}),on(this.containerNode,on.selector(".dijitTreeNode",touch.leave),function(evt){
self._onNodeMouseLeave(_190c.byNode(this),evt);
}),on(this.containerNode,on.selector(".dijitTreeRow",_190b.press),function(evt){
self._onNodePress(_190c.getEnclosingWidget(this),evt);
}),on(this.containerNode,on.selector(".dijitTreeRow",_190b),function(evt){
self._onClick(_190c.getEnclosingWidget(this),evt);
}),on(this.containerNode,on.selector(".dijitTreeRow","dblclick"),function(evt){
self._onDblClick(_190c.getEnclosingWidget(this),evt);
}));
if(!this.model){
this._store2model();
}
this.own(_1901.after(this.model,"onChange",lang.hitch(this,"_onItemChange"),true),_1901.after(this.model,"onChildrenChange",lang.hitch(this,"_onItemChildrenChange"),true),_1901.after(this.model,"onDelete",lang.hitch(this,"_onItemDelete"),true));
this.inherited(arguments);
if(this.dndController){
if(lang.isString(this.dndController)){
this.dndController=lang.getObject(this.dndController);
}
var _1934={};
for(var i=0;i<this.dndParams.length;i++){
if(this[this.dndParams[i]]){
_1934[this.dndParams[i]]=this[this.dndParams[i]];
}
}
this.dndController=new this.dndController(this,_1934);
}
this._load();
this.onLoadDeferred=_1919(this.pendingCommandsPromise);
this.onLoadDeferred.then(lang.hitch(this,"onLoad"));
},_store2model:function(){
this._v10Compat=true;
_190a.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");
var _1935={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};
if(this.params.mayHaveChildren){
_1935.mayHaveChildren=lang.hitch(this,"mayHaveChildren");
}
if(this.params.getItemChildren){
_1935.getChildren=lang.hitch(this,function(item,_1936,_1937){
this.getItemChildren((this._v10Compat&&item===this.model.root)?null:item,_1936,_1937);
});
}
this.model=new _1917(_1935);
this.showRoot=Boolean(this.label);
},onLoad:function(){
},_load:function(){
this.model.getRoot(lang.hitch(this,function(item){
var rn=(this.rootNode=this.tree._createTreeNode({item:item,tree:this,isExpandable:true,label:this.label||this.getLabel(item),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1}));
if(!this.showRoot){
rn.rowNode.style.display="none";
this.domNode.setAttribute("role","presentation");
this.domNode.removeAttribute("aria-expanded");
this.domNode.removeAttribute("aria-multiselectable");
if(this["aria-label"]){
rn.containerNode.setAttribute("aria-label",this["aria-label"]);
this.domNode.removeAttribute("aria-label");
}else{
if(this["aria-labelledby"]){
rn.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]);
this.domNode.removeAttribute("aria-labelledby");
}
}
rn.labelNode.setAttribute("role","presentation");
rn.labelNode.removeAttribute("aria-selected");
rn.containerNode.setAttribute("role","tree");
rn.containerNode.setAttribute("aria-expanded","true");
rn.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular);
}else{
this.domNode.setAttribute("aria-multiselectable",!this.dndController.singular);
this.rootLoadingIndicator.style.display="none";
}
this.containerNode.appendChild(rn.domNode);
var _1938=this.model.getIdentity(item);
if(this._itemNodesMap[_1938]){
this._itemNodesMap[_1938].push(rn);
}else{
this._itemNodesMap[_1938]=[rn];
}
rn._updateLayout();
this._expandNode(rn).then(lang.hitch(this,function(){
if(!this._destroyed){
this.rootLoadingIndicator.style.display="none";
this.expandChildrenDeferred.resolve(true);
}
}));
}),lang.hitch(this,function(err){
console.error(this,": error loading root: ",err);
}));
},getNodesByItem:function(item){
if(!item){
return [];
}
var _1939=lang.isString(item)?item:this.model.getIdentity(item);
return [].concat(this._itemNodesMap[_1939]);
},_setSelectedItemAttr:function(item){
this.set("selectedItems",[item]);
},_setSelectedItemsAttr:function(items){
var tree=this;
return this.pendingCommandsPromise=this.pendingCommandsPromise.always(lang.hitch(this,function(){
var _193a=array.map(items,function(item){
return (!item||lang.isString(item))?item:tree.model.getIdentity(item);
});
var nodes=[];
array.forEach(_193a,function(id){
nodes=nodes.concat(tree._itemNodesMap[id]||[]);
});
this.set("selectedNodes",nodes);
}));
},_setPathAttr:function(path){
if(path.length){
return _1919(this.set("paths",[path]).then(function(paths){
return paths[0];
}));
}else{
return _1919(this.set("paths",[]).then(function(paths){
return paths[0];
}));
}
},_setPathsAttr:function(paths){
var tree=this;
function _193b(path,nodes){
var _193c=path.shift();
var _193d=array.filter(nodes,function(node){
return node.getIdentity()==_193c;
})[0];
if(!!_193d){
if(path.length){
return tree._expandNode(_193d).then(function(){
return _193b(path,_193d.getChildren());
});
}else{
return _193d;
}
}else{
throw new Tree.PathError("Could not expand path at "+_193c);
}
};
return _1919(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){
return all(array.map(paths,function(path){
path=array.map(path,function(item){
return lang.isString(item)?item:tree.model.getIdentity(item);
});
if(path.length){
return _193b(path,[tree.rootNode]);
}else{
throw new Tree.PathError("Empty path");
}
}));
}).then(function setNodes(_193e){
tree.set("selectedNodes",_193e);
return tree.paths;
}));
},_setSelectedNodeAttr:function(node){
this.set("selectedNodes",[node]);
},_setSelectedNodesAttr:function(nodes){
this.dndController.setSelection(nodes);
},expandAll:function(){
var _193f=this;
function _1940(node){
return _193f._expandNode(node).then(function(){
var _1941=array.filter(node.getChildren()||[],function(node){
return node.isExpandable;
});
return all(array.map(_1941,_1940));
});
};
return _1919(_1940(this.rootNode));
},collapseAll:function(){
var _1942=this;
function _1943(node){
var _1944=array.filter(node.getChildren()||[],function(node){
return node.isExpandable;
}),defs=all(array.map(_1944,_1943));
if(!node.isExpanded||(node==_1942.rootNode&&!_1942.showRoot)){
return defs;
}else{
return defs.then(function(){
return _1942._collapseNode(node);
});
}
};
return _1919(_1943(this.rootNode));
},mayHaveChildren:function(){
},getItemChildren:function(){
},getLabel:function(item){
return this.model.getLabel(item);
},getIconClass:function(item,_1945){
return (!item||this.model.mayHaveChildren(item))?(_1945?"dijitFolderOpened":"dijitFolderClosed"):"dijitLeaf";
},getLabelClass:function(){
},getRowClass:function(){
},getIconStyle:function(){
},getLabelStyle:function(){
},getRowStyle:function(){
},getTooltip:function(){
return "";
},_onDownArrow:function(evt,node){
var _1946=this._getNext(node);
if(_1946&&_1946.isTreeNode){
this.focusNode(_1946);
}
},_onUpArrow:function(evt,node){
var _1947=node.getPreviousSibling();
if(_1947){
node=_1947;
while(node.isExpandable&&node.isExpanded&&node.hasChildren()){
var _1948=node.getChildren();
node=_1948[_1948.length-1];
}
}else{
var _1949=node.getParent();
if(!(!this.showRoot&&_1949===this.rootNode)){
node=_1949;
}
}
if(node&&node.isTreeNode){
this.focusNode(node);
}
},_onRightArrow:function(evt,node){
if(node.isExpandable&&!node.isExpanded){
this._expandNode(node);
}else{
if(node.hasChildren()){
node=node.getChildren()[0];
if(node&&node.isTreeNode){
this.focusNode(node);
}
}
}
},_onLeftArrow:function(evt,node){
if(node.isExpandable&&node.isExpanded){
this._collapseNode(node);
}else{
var _194a=node.getParent();
if(_194a&&_194a.isTreeNode&&!(!this.showRoot&&_194a===this.rootNode)){
this.focusNode(_194a);
}
}
},focusLastChild:function(){
var node=this._getLast();
if(node&&node.isTreeNode){
this.focusNode(node);
}
},_getFirst:function(){
return this.showRoot?this.rootNode:this.rootNode.getChildren()[0];
},_getLast:function(){
var node=this.rootNode;
while(node.isExpanded){
var c=node.getChildren();
if(!c.length){
break;
}
node=c[c.length-1];
}
return node;
},_getNext:function(node){
if(node.isExpandable&&node.isExpanded&&node.hasChildren()){
return node.getChildren()[0];
}else{
while(node&&node.isTreeNode){
var _194b=node.getNextSibling();
if(_194b){
return _194b;
}
node=node.getParent();
}
return null;
}
},childSelector:".dijitTreeRow",isExpandoNode:function(node,_194c){
return dom.isDescendant(node,_194c.expandoNode)||dom.isDescendant(node,_194c.expandoNodeText);
},_onNodePress:function(_194d,e){
this.focusNode(_194d);
},__click:function(_194e,e,_194f,func){
var _1950=e.target,_1951=this.isExpandoNode(_1950,_194e);
if(_194e.isExpandable&&(_194f||_1951)){
this._onExpandoClick({node:_194e});
}else{
this._publish("execute",{item:_194e.item,node:_194e,evt:e});
this[func](_194e.item,_194e,e);
this.focusNode(_194e);
}
e.stopPropagation();
e.preventDefault();
},_onClick:function(_1952,e){
this.__click(_1952,e,this.openOnClick,"onClick");
},_onDblClick:function(_1953,e){
this.__click(_1953,e,this.openOnDblClick,"onDblClick");
},_onExpandoClick:function(_1954){
var node=_1954.node;
this.focusNode(node);
if(node.isExpanded){
this._collapseNode(node);
}else{
this._expandNode(node);
}
},onClick:function(){
},onDblClick:function(){
},onOpen:function(){
},onClose:function(){
},_getNextNode:function(node){
_190a.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");
return this._getNext(node);
},_getRootOrFirstNode:function(){
_190a.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");
return this._getFirst();
},_collapseNode:function(node){
if(node._expandNodeDeferred){
delete node._expandNodeDeferred;
}
if(node.state=="Loading"){
return;
}
if(node.isExpanded){
var ret=node.collapse();
this.onClose(node.item,node);
this._state(node,false);
this._startPaint(ret);
return ret;
}
},_expandNode:function(node){
if(node._expandNodeDeferred){
return node._expandNodeDeferred;
}
var model=this.model,item=node.item,_1955=this;
if(!node._loadDeferred){
node.markProcessing();
node._loadDeferred=new _1904();
model.getChildren(item,function(items){
node.unmarkProcessing();
node.setChildItems(items).then(function(){
node._loadDeferred.resolve(items);
});
},function(err){
console.error(_1955,": error loading "+node.label+" children: ",err);
node._loadDeferred.reject(err);
});
}
var def=node._loadDeferred.then(lang.hitch(this,function(){
var def2=node.expand();
this.onOpen(node.item,node);
this._state(node,true);
return def2;
}));
this._startPaint(def);
return def;
},focusNode:function(node){
var _1956=this.domNode.scrollLeft;
this.focusChild(node);
this.domNode.scrollLeft=_1956;
},_onNodeMouseEnter:function(){
},_onNodeMouseLeave:function(){
},_onItemChange:function(item){
var model=this.model,_1957=model.getIdentity(item),nodes=this._itemNodesMap[_1957];
if(nodes){
var label=this.getLabel(item),_1958=this.getTooltip(item);
array.forEach(nodes,function(node){
node.set({item:item,label:label,tooltip:_1958});
node._updateItemClasses(item);
});
}
},_onItemChildrenChange:function(_1959,_195a){
var model=this.model,_195b=model.getIdentity(_1959),_195c=this._itemNodesMap[_195b];
if(_195c){
array.forEach(_195c,function(_195d){
_195d.setChildItems(_195a);
});
}
},_onItemDelete:function(item){
var model=this.model,_195e=model.getIdentity(item),nodes=this._itemNodesMap[_195e];
if(nodes){
array.forEach(nodes,function(node){
this.dndController.removeTreeNode(node);
var _195f=node.getParent();
if(_195f){
_195f.removeChild(node);
}
if(this.lastFocusedChild&&!dom.isDescendant(this.lastFocusedChild,this.domNode)){
delete this.lastFocusedChild;
}
if(this.focusedChild&&!dom.isDescendant(this.focusedChild,this.domNode)){
this.focus();
}
node.destroyRecursive();
},this);
delete this._itemNodesMap[_195e];
}
},_initState:function(){
this._openedNodes={};
if(this.persist&&this.cookieName){
var oreo=_1902(this.cookieName);
if(oreo){
array.forEach(oreo.split(","),function(item){
this._openedNodes[item]=true;
},this);
}
}
},_state:function(node,_1960){
if(!this.persist){
return false;
}
var path=array.map(node.getTreePath(),function(item){
return this.model.getIdentity(item);
},this).join("/");
if(arguments.length===1){
return this._openedNodes[path];
}else{
if(_1960){
this._openedNodes[path]=true;
}else{
delete this._openedNodes[path];
}
this._saveExpandedNodes();
}
},_saveExpandedNodes:function(){
if(this.persist&&this.cookieName){
var ary=[];
for(var id in this._openedNodes){
ary.push(id);
}
_1902(this.cookieName,ary.join(","),{expires:365});
}
},destroy:function(){
if(this._curSearch){
this._curSearch.timer.remove();
delete this._curSearch;
}
if(this.rootNode){
this.rootNode.destroyRecursive();
}
if(this.dndController&&!lang.isString(this.dndController)){
this.dndController.destroy();
}
this.rootNode=null;
this.inherited(arguments);
},destroyRecursive:function(){
this.destroy();
},resize:function(_1961){
if(_1961){
_1906.setMarginBox(this.domNode,_1961);
}
this._nodePixelIndent=_1906.position(this.tree.indentDetector).w||this._nodePixelIndent;
this.expandChildrenDeferred.then(lang.hitch(this,function(){
this.rootNode.set("indent",this.showRoot?0:-1);
this._adjustWidths();
}));
},_outstandingPaintOperations:0,_startPaint:function(p){
this._outstandingPaintOperations++;
if(this._adjustWidthsTimer){
this._adjustWidthsTimer.remove();
delete this._adjustWidthsTimer;
}
var oc=lang.hitch(this,function(){
this._outstandingPaintOperations--;
if(this._outstandingPaintOperations<=0&&!this._adjustWidthsTimer&&this._started){
this._adjustWidthsTimer=this.defer("_adjustWidths");
}
});
when(p,oc,oc);
},_adjustWidths:function(){
if(this._adjustWidthsTimer){
this._adjustWidthsTimer.remove();
delete this._adjustWidthsTimer;
}
this.containerNode.style.width="auto";
this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%";
},_createTreeNode:function(args){
return new _191c(args);
},focus:function(){
if(this.lastFocusedChild){
this.focusNode(this.lastFocusedChild);
}else{
this.focusFirstChild();
}
}});
if(has("dojo-bidi")){
Tree.extend({_setTextDirAttr:function(_1962){
if(_1962&&this.textDir!=_1962){
this._set("textDir",_1962);
this.rootNode.set("textDir",_1962);
}
}});
}
Tree.PathError=_1908("TreePathError");
Tree._TreeNode=_191c;
return Tree;
});
},"dijit/form/Button":function(){
define(["require","dojo/_base/declare","dojo/dom-class","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/ready","./_FormWidget","./_ButtonMixin","dojo/text!./templates/Button.html","../a11yclick"],function(_1963,_1964,_1965,has,_1966,lang,ready,_1967,_1968,_1969){
if(1){
ready(0,function(){
var _196a=["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"];
_1963(_196a);
});
}
var _196b=_1964("dijit.form.Button"+(has("dojo-bidi")?"_NoBidi":""),[_1967,_1968],{showLabel:true,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:_1969,_setValueAttr:"valueNode",_setNameAttr:function(name){
if(this.valueNode){
this.valueNode.setAttribute("name",name);
}
},_fillContent:function(_196c){
if(_196c&&(!this.params||!("label" in this.params))){
var _196d=lang.trim(_196c.innerHTML);
if(_196d){
this.label=_196d;
}
}
},_setShowLabelAttr:function(val){
if(this.containerNode){
_1965.toggle(this.containerNode,"dijitDisplayNone",!val);
}
this._set("showLabel",val);
},setLabel:function(_196e){
_1966.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");
this.set("label",_196e);
},_setLabelAttr:function(_196f){
this.inherited(arguments);
if(!this.showLabel&&!("title" in this.params)){
this.titleNode.title=lang.trim(this.containerNode.innerText||this.containerNode.textContent||"");
}
}});
if(has("dojo-bidi")){
_196b=_1964("dijit.form.Button",_196b,{_setLabelAttr:function(_1970){
this.inherited(arguments);
if(this.titleNode.title){
this.applyTextDir(this.titleNode,this.titleNode.title);
}
},_setTextDirAttr:function(_1971){
if(this._created&&this.textDir!=_1971){
this._set("textDir",_1971);
this._setLabelAttr(this.label);
}
}});
}
return _196b;
});
},"curam/ui/OpenTabEvent":function(){
define(["dojo/_base/declare","curam/ui/PageRequest"],function(_1972,_1973){
var _1974=_1972("curam.ui.OpenTabEvent",null,{constructor:function(_1975,_1976,_1977){
this.tabDescriptor=_1975;
this.openInBackground=_1977?true:false;
if(_1976){
this.uimPageRequest=_1976;
}else{
this.uimPageRequest=new _1973(_1975,_1975.isHomePage);
}
}});
return _1974;
});
},"dojo/parser":function(){
define(["require","./_base/kernel","./_base/lang","./_base/array","./_base/config","./dom","./_base/window","./_base/url","./aspect","./promise/all","./date/stamp","./Deferred","./has","./query","./on","./ready"],function(_1978,dojo,dlang,_1979,_197a,dom,_197b,_197c,_197d,all,dates,_197e,has,query,don,ready){
new Date("X");
function _197f(text){
return eval("("+text+")");
};
var _1980=0;
_197d.after(dlang,"extend",function(){
_1980++;
},true);
function _1981(ctor){
var map=ctor._nameCaseMap,proto=ctor.prototype;
if(!map||map._extendCnt<_1980){
map=ctor._nameCaseMap={};
for(var name in proto){
if(name.charAt(0)==="_"){
continue;
}
map[name.toLowerCase()]=name;
}
map._extendCnt=_1980;
}
return map;
};
var _1982={};
function _1983(types,_1984){
var ts=types.join();
if(!_1982[ts]){
var _1985=[];
for(var i=0,l=types.length;i<l;i++){
var t=types[i];
_1985[_1985.length]=(_1982[t]=_1982[t]||(dlang.getObject(t)||(~t.indexOf("/")&&(_1984?_1984(t):_1978(t)))));
}
var ctor=_1985.shift();
_1982[ts]=_1985.length?(ctor.createSubclass?ctor.createSubclass(_1985):ctor.extend.apply(ctor,_1985)):ctor;
}
return _1982[ts];
};
var _1986={_clearCache:function(){
_1980++;
_1982={};
},_functionFromScript:function(_1987,_1988){
var _1989="",_198a="",_198b=(_1987.getAttribute(_1988+"args")||_1987.getAttribute("args")),_198c=_1987.getAttribute("with");
var _198d=(_198b||"").split(/\s*,\s*/);
if(_198c&&_198c.length){
_1979.forEach(_198c.split(/\s*,\s*/),function(part){
_1989+="with("+part+"){";
_198a+="}";
});
}
return new Function(_198d,_1989+_1987.innerHTML+_198a);
},instantiate:function(nodes,mixin,_198e){
mixin=mixin||{};
_198e=_198e||{};
var _198f=(_198e.scope||dojo._scopeName)+"Type",_1990="data-"+(_198e.scope||dojo._scopeName)+"-",_1991=_1990+"type",_1992=_1990+"mixins";
var list=[];
_1979.forEach(nodes,function(node){
var type=_198f in mixin?mixin[_198f]:node.getAttribute(_1991)||node.getAttribute(_198f);
if(type){
var _1993=node.getAttribute(_1992),types=_1993?[type].concat(_1993.split(/\s*,\s*/)):[type];
list.push({node:node,types:types});
}
});
return this._instantiate(list,mixin,_198e);
},_instantiate:function(nodes,mixin,_1994,_1995){
var _1996=_1979.map(nodes,function(obj){
var ctor=obj.ctor||_1983(obj.types,_1994.contextRequire);
if(!ctor){
throw new Error("Unable to resolve constructor for: '"+obj.types.join()+"'");
}
return this.construct(ctor,obj.node,mixin,_1994,obj.scripts,obj.inherited);
},this);
function _1997(_1998){
if(!mixin._started&&!_1994.noStart){
_1979.forEach(_1998,function(_1999){
if(typeof _1999.startup==="function"&&!_1999._started){
_1999.startup();
}
});
}
return _1998;
};
if(_1995){
return all(_1996).then(_1997);
}else{
return _1997(_1996);
}
},construct:function(ctor,node,mixin,_199a,_199b,_199c){
var proto=ctor&&ctor.prototype;
_199a=_199a||{};
var _199d={};
if(_199a.defaults){
dlang.mixin(_199d,_199a.defaults);
}
if(_199c){
dlang.mixin(_199d,_199c);
}
var _199e;
if(has("dom-attributes-explicit")){
_199e=node.attributes;
}else{
if(has("dom-attributes-specified-flag")){
_199e=_1979.filter(node.attributes,function(a){
return a.specified;
});
}else{
var clone=/^input$|^img$/i.test(node.nodeName)?node:node.cloneNode(false),attrs=clone.outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,"");
_199e=_1979.map(attrs.split(/\s+/),function(name){
var _199f=name.toLowerCase();
return {name:name,value:(node.nodeName=="LI"&&name=="value")||_199f=="enctype"?node.getAttribute(_199f):node.getAttributeNode(_199f).value};
});
}
}
var scope=_199a.scope||dojo._scopeName,_19a0="data-"+scope+"-",hash={};
if(scope!=="dojo"){
hash[_19a0+"props"]="data-dojo-props";
hash[_19a0+"type"]="data-dojo-type";
hash[_19a0+"mixins"]="data-dojo-mixins";
hash[scope+"type"]="dojoType";
hash[_19a0+"id"]="data-dojo-id";
}
var i=0,item,_19a1=[],_19a2,extra;
while(item=_199e[i++]){
var name=item.name,_19a3=name.toLowerCase(),value=item.value;
switch(hash[_19a3]||_19a3){
case "data-dojo-type":
case "dojotype":
case "data-dojo-mixins":
break;
case "data-dojo-props":
extra=value;
break;
case "data-dojo-id":
case "jsid":
_19a2=value;
break;
case "data-dojo-attach-point":
case "dojoattachpoint":
_199d.dojoAttachPoint=value;
break;
case "data-dojo-attach-event":
case "dojoattachevent":
_199d.dojoAttachEvent=value;
break;
case "class":
_199d["class"]=node.className;
break;
case "style":
_199d["style"]=node.style&&node.style.cssText;
break;
default:
if(!(name in proto)){
var map=_1981(ctor);
name=map[_19a3]||name;
}
if(name in proto){
switch(typeof proto[name]){
case "string":
_199d[name]=value;
break;
case "number":
_199d[name]=value.length?Number(value):NaN;
break;
case "boolean":
_199d[name]=value.toLowerCase()!="false";
break;
case "function":
if(value===""||value.search(/[^\w\.]+/i)!=-1){
_199d[name]=new Function(value);
}else{
_199d[name]=dlang.getObject(value,false)||new Function(value);
}
_19a1.push(name);
break;
default:
var pVal=proto[name];
_199d[name]=(pVal&&"length" in pVal)?(value?value.split(/\s*,\s*/):[]):(pVal instanceof Date)?(value==""?new Date(""):value=="now"?new Date():dates.fromISOString(value)):(pVal instanceof _197c)?(dojo.baseUrl+value):_197f(value);
}
}else{
_199d[name]=value;
}
}
}
for(var j=0;j<_19a1.length;j++){
var _19a4=_19a1[j].toLowerCase();
node.removeAttribute(_19a4);
node[_19a4]=null;
}
if(extra){
try{
extra=_197f.call(_199a.propsThis,"{"+extra+"}");
dlang.mixin(_199d,extra);
}
catch(e){
throw new Error(e.toString()+" in data-dojo-props='"+extra+"'");
}
}
dlang.mixin(_199d,mixin);
if(!_199b){
_199b=(ctor&&(ctor._noScript||proto._noScript)?[]:query("> script[type^='dojo/']",node));
}
var _19a5=[],calls=[],_19a6=[],ons=[];
if(_199b){
for(i=0;i<_199b.length;i++){
var _19a7=_199b[i];
node.removeChild(_19a7);
var event=(_19a7.getAttribute(_19a0+"event")||_19a7.getAttribute("event")),prop=_19a7.getAttribute(_19a0+"prop"),_19a8=_19a7.getAttribute(_19a0+"method"),_19a9=_19a7.getAttribute(_19a0+"advice"),_19aa=_19a7.getAttribute("type"),nf=this._functionFromScript(_19a7,_19a0);
if(event){
if(_19aa=="dojo/connect"){
_19a5.push({method:event,func:nf});
}else{
if(_19aa=="dojo/on"){
ons.push({event:event,func:nf});
}else{
_199d[event]=nf;
}
}
}else{
if(_19aa=="dojo/aspect"){
_19a5.push({method:_19a8,advice:_19a9,func:nf});
}else{
if(_19aa=="dojo/watch"){
_19a6.push({prop:prop,func:nf});
}else{
calls.push(nf);
}
}
}
}
}
var _19ab=ctor.markupFactory||proto.markupFactory;
var _19ac=_19ab?_19ab(_199d,node,ctor):new ctor(_199d,node);
function _19ad(_19ae){
if(_19a2){
dlang.setObject(_19a2,_19ae);
}
for(i=0;i<_19a5.length;i++){
_197d[_19a5[i].advice||"after"](_19ae,_19a5[i].method,dlang.hitch(_19ae,_19a5[i].func),true);
}
for(i=0;i<calls.length;i++){
calls[i].call(_19ae);
}
for(i=0;i<_19a6.length;i++){
_19ae.watch(_19a6[i].prop,_19a6[i].func);
}
for(i=0;i<ons.length;i++){
don(_19ae,ons[i].event,ons[i].func);
}
return _19ae;
};
if(_19ac.then){
return _19ac.then(_19ad);
}else{
return _19ad(_19ac);
}
},scan:function(root,_19af){
var list=[],mids=[],_19b0={};
var _19b1=(_19af.scope||dojo._scopeName)+"Type",_19b2="data-"+(_19af.scope||dojo._scopeName)+"-",_19b3=_19b2+"type",_19b4=_19b2+"textdir",_19b5=_19b2+"mixins";
var node=root.firstChild;
var _19b6=_19af.inherited;
if(!_19b6){
function _19b7(node,attr){
return (node.getAttribute&&node.getAttribute(attr))||(node.parentNode&&_19b7(node.parentNode,attr));
};
_19b6={dir:_19b7(root,"dir"),lang:_19b7(root,"lang"),textDir:_19b7(root,_19b4)};
for(var key in _19b6){
if(!_19b6[key]){
delete _19b6[key];
}
}
}
var _19b8={inherited:_19b6};
var _19b9;
var _19ba;
function _19bb(_19bc){
if(!_19bc.inherited){
_19bc.inherited={};
var node=_19bc.node,_19bd=_19bb(_19bc.parent);
var _19be={dir:node.getAttribute("dir")||_19bd.dir,lang:node.getAttribute("lang")||_19bd.lang,textDir:node.getAttribute(_19b4)||_19bd.textDir};
for(var key in _19be){
if(_19be[key]){
_19bc.inherited[key]=_19be[key];
}
}
}
return _19bc.inherited;
};
while(true){
if(!node){
if(!_19b8||!_19b8.node){
break;
}
node=_19b8.node.nextSibling;
_19ba=false;
_19b8=_19b8.parent;
_19b9=_19b8.scripts;
continue;
}
if(node.nodeType!=1){
node=node.nextSibling;
continue;
}
if(_19b9&&node.nodeName.toLowerCase()=="script"){
type=node.getAttribute("type");
if(type&&/^dojo\/\w/i.test(type)){
_19b9.push(node);
}
node=node.nextSibling;
continue;
}
if(_19ba){
node=node.nextSibling;
continue;
}
var type=node.getAttribute(_19b3)||node.getAttribute(_19b1);
var _19bf=node.firstChild;
if(!type&&(!_19bf||(_19bf.nodeType==3&&!_19bf.nextSibling))){
node=node.nextSibling;
continue;
}
var _19c0;
var ctor=null;
if(type){
var _19c1=node.getAttribute(_19b5),types=_19c1?[type].concat(_19c1.split(/\s*,\s*/)):[type];
try{
ctor=_1983(types,_19af.contextRequire);
}
catch(e){
}
if(!ctor){
_1979.forEach(types,function(t){
if(~t.indexOf("/")&&!_19b0[t]){
_19b0[t]=true;
mids[mids.length]=t;
}
});
}
var _19c2=ctor&&!ctor.prototype._noScript?[]:null;
_19c0={types:types,ctor:ctor,parent:_19b8,node:node,scripts:_19c2};
_19c0.inherited=_19bb(_19c0);
list.push(_19c0);
}else{
_19c0={node:node,scripts:_19b9,parent:_19b8};
}
_19b9=_19c2;
_19ba=node.stopParser||(ctor&&ctor.prototype.stopParser&&!(_19af.template));
_19b8=_19c0;
node=_19bf;
}
var d=new _197e();
if(mids.length){
if(has("dojo-debug-messages")){
console.warn("WARNING: Modules being Auto-Required: "+mids.join(", "));
}
var r=_19af.contextRequire||_1978;
r(mids,function(){
d.resolve(_1979.filter(list,function(_19c3){
if(!_19c3.ctor){
try{
_19c3.ctor=_1983(_19c3.types,_19af.contextRequire);
}
catch(e){
}
}
var _19c4=_19c3.parent;
while(_19c4&&!_19c4.types){
_19c4=_19c4.parent;
}
var proto=_19c3.ctor&&_19c3.ctor.prototype;
_19c3.instantiateChildren=!(proto&&proto.stopParser&&!(_19af.template));
_19c3.instantiate=!_19c4||(_19c4.instantiate&&_19c4.instantiateChildren);
return _19c3.instantiate;
}));
});
}else{
d.resolve(list);
}
return d.promise;
},_require:function(_19c5,_19c6){
var hash=_197f("{"+_19c5.innerHTML+"}"),vars=[],mids=[],d=new _197e();
var _19c7=(_19c6&&_19c6.contextRequire)||_1978;
for(var name in hash){
vars.push(name);
mids.push(hash[name]);
}
_19c7(mids,function(){
for(var i=0;i<vars.length;i++){
dlang.setObject(vars[i],arguments[i]);
}
d.resolve(arguments);
});
return d.promise;
},_scanAmd:function(root,_19c8){
var _19c9=new _197e(),_19ca=_19c9.promise;
_19c9.resolve(true);
var self=this;
query("script[type='dojo/require']",root).forEach(function(node){
_19ca=_19ca.then(function(){
return self._require(node,_19c8);
});
node.parentNode.removeChild(node);
});
return _19ca;
},parse:function(_19cb,_19cc){
if(_19cb&&typeof _19cb!="string"&&!("nodeType" in _19cb)){
_19cc=_19cb;
_19cb=_19cc.rootNode;
}
var root=_19cb?dom.byId(_19cb):_197b.body();
_19cc=_19cc||{};
var mixin=_19cc.template?{template:true}:{},_19cd=[],self=this;
var p=this._scanAmd(root,_19cc).then(function(){
return self.scan(root,_19cc);
}).then(function(_19ce){
return self._instantiate(_19ce,mixin,_19cc,true);
}).then(function(_19cf){
return _19cd=_19cd.concat(_19cf);
}).otherwise(function(e){
console.error("dojo/parser::parse() error",e);
throw e;
});
dlang.mixin(_19cd,p);
return _19cd;
}};
if(1){
dojo.parser=_1986;
}
if(_197a.parseOnLoad){
ready(100,_1986,"parse");
}
return _1986;
});
},"curam/widget/TransferList":function(){
define(["dijit/_Widget","dojo/_base/declare","dojo/dom-class","dojo/dom-attr","dojo/dom-construct","dojo/dom","dojo/query","curam/debug"],function(_19d0,_19d1,_19d2,_19d3,_19d4,dom,query,debug){
var _19d5=_19d1("curam.widget.TransferList",dijit._Widget,{btnNames:["allRight","toRight","toLeft","allLeft"],btnValues:[" "," "," "," "],bntClasses:["allRight","toRight","toLeft","allLeft"],rightEmptyText:"",widgetType:"TransferList",postCreate:function(){
var _19d6=this.domNode.parentNode;
_19d2.add(_19d6,"transferlistparent");
var _19d7=query(this.domNode).next()[0];
this.leftList=this.domNode;
var _19d8=_19d4.create("table",{"class":"transfer-list",role:"presentation"});
var _19d9=_19d4.create("tbody",{},_19d8);
var _19da=_19d4.create("tr",{},_19d9);
var _19db=_19d4.create("td");
var _19dc=_19d4.create("td",{"class":"controls"});
var self=this;
function _19dd(name){
return function(){
self.setSelection(name);
return false;
};
};
function _19de(id){
return function(){
_19d2.add(dom.byId(id),"active");
return false;
};
};
function _19df(id){
return function(){
_19d2.remove(dom.byId(id),"active");
return false;
};
};
for(j=0;j<4;j++){
var _19e0=_19d4.create("div",{},_19dc);
var _19e1=new Array(LOCALISED_TRANSFER_LIST_RA,LOCALISED_TRANSFER_LIST_R,LOCALISED_TRANSFER_LIST_L,LOCALISED_TRANSFER_LIST_LA);
var btn=_19d4.create("input",{type:"button",id:this.btnNames[j]+this.domNode.name,value:this.btnValues[j],"class":this.bntClasses[j],"title":_19e1[j]},_19e0);
btn.listtwins=this;
dojo.connect(btn,"onclick",_19dd(btn.id));
dojo.connect(btn,"onmousedown",_19de(btn.id));
dojo.connect(btn,"onmouseup",_19df(btn.id));
dojo.connect(btn,"onmouseout",_19df(btn.id));
}
var _19e2=document.createElement("td");
var rList=_19d4.create("select",{id:this.domNode.name,name:this.domNode.name,title:LOCALISED_TRANSFER_LIST_SELECTED_ITEMS,multiple:"multiple","class":"selected",size:5},_19e2);
_19d3.set(this.domNode,{name:"__o3ign."+rList.name,id:"__o3ign."+rList.name,"class":"selected",size:5});
this.rightList=rList;
dojo.connect(this.leftList,"ondblclick",_19dd("toRight"));
dojo.connect(this.rightList,"ondblclick",_19dd("toLeft"));
function _19e3(name){
return function(evt){
if(evt.keyCode==evt.KEY_ENTER){
self.setSelection(name);
}
return false;
};
};
dojo.connect(this.leftList,"onkeydown",_19e3("toRight"));
dojo.connect(this.rightList,"onkeydown",_19e3("toLeft"));
_19db.appendChild(this.domNode);
_19da.appendChild(_19db);
_19da.appendChild(_19dc);
_19da.appendChild(_19e2);
if(_19d7){
_19d6.insertBefore(_19d8,_19d7);
}else{
_19d6.appendChild(_19d8);
}
this.setInitialSelection();
this.adjustEmpties(this.leftList,this.rightList);
var form=query(this.domNode).closest("form")[0];
if(!form){
debug.log("curam.widget.TransferList "+debug.getProperty("curam.widget.TransferList.msg"));
return;
}
dojo.connect(form,"onsubmit",function(){
var _19e4=self.rightList;
var _19e5=new Array();
for(k1=0;k1<_19e4.options.length;k1++){
_19e5[_19e5.length]=_19e4.options[k1];
}
_19e4.options.length=0;
for(k2=0;k2<_19e5.length;k2++){
_19e5[k2].selected=true;
_19e4.appendChild(_19e5[k2]);
}
});
dojo.connect(window,"onresize",this.selectWidthSetting);
dojo.addOnLoad(this.selectWidthSetting);
var _19e6=function(list){
for(var i=0;i<list.options.length;i++){
if(list.options[i].text){
list.options[i].title=list.options[i].text;
}
}
};
_19e6(self.leftList);
_19e6(self.rightList);
},setSelection:function(id){
var _19e7=(id.indexOf("all")>-1);
var _19e8=(id.indexOf("Right")>-1)?this.leftList:this.rightList;
var _19e9=(id.indexOf("Left")>-1)?this.leftList:this.rightList;
if(_19e8.options[0]!=null&&_19e8.options[0].text!=this.rightEmptyText){
if(_19e9.options[0]!=null&&(_19e9.options[0].text==this.rightEmptyText||_19e9.options[0].text=="")){
_19e9.options[0]=null;
}
this.transferOptions(_19e8,_19e9,_19e7);
this.adjustEmpties(this.leftList,this.rightList);
}
},setInitialSelection:function(){
this.transferOptions(this.leftList,this.rightList,false);
},adjustEmpties:function(_19ea,_19eb){
if(_19eb.options.length==0){
_19eb.options[0]=new Option(this.rightEmptyText,"",false,false);
}
},transferOptions:function(_19ec,_19ed,_19ee){
if(_19ec&&_19ed){
var _19ef=new Array();
dojo.forEach(_19ec.options,function(opt){
if(_19ee||opt.selected){
_19ef[_19ef.length]=opt;
}
});
this.appendAll(_19ed,_19ef);
}
},appendAll:function(aList,_19f0){
for(var i=0;i<_19f0.length;i++){
_19f0[i].selected=true;
aList.appendChild(_19f0[i]);
}
},selectWidthSetting:function(){
if(dojo.query(".transfer-list select.selected")){
dojo.query(".transfer-list select.selected").forEach(function(_19f1){
var width=_19f1.parentNode.clientWidth;
_19f1.style.width=width+"px";
});
}
}});
return _19d5;
});
},"dojo/promise/all":function(){
define(["../_base/array","../Deferred","../when"],function(array,_19f2,when){
"use strict";
var some=array.some;
return function all(_19f3){
var _19f4,array;
if(_19f3 instanceof Array){
array=_19f3;
}else{
if(_19f3&&typeof _19f3==="object"){
_19f4=_19f3;
}
}
var _19f5;
var _19f6=[];
if(_19f4){
array=[];
for(var key in _19f4){
if(Object.hasOwnProperty.call(_19f4,key)){
_19f6.push(key);
array.push(_19f4[key]);
}
}
_19f5={};
}else{
if(array){
_19f5=[];
}
}
if(!array||!array.length){
return new _19f2().resolve(_19f5);
}
var _19f7=new _19f2();
_19f7.promise.always(function(){
_19f5=_19f6=null;
});
var _19f8=array.length;
some(array,function(_19f9,index){
if(!_19f4){
_19f6.push(index);
}
when(_19f9,function(value){
if(!_19f7.isFulfilled()){
_19f5[_19f6[index]]=value;
if(--_19f8===0){
_19f7.resolve(_19f5);
}
}
},_19f7.reject);
return _19f7.isFulfilled();
});
return _19f7.promise;
};
});
},"curam/widget/ComboBoxMixin":function(){
define(["dojo/_base/declare","curam/widget/_ComboBoxMenu","dijit/form/ComboBoxMixin"],function(_19fa,_19fb){
var _19fc=_19fa("curam.widget.ComboBoxMixin",dijit.form.ComboBoxMixin,{dropDownClass:_19fb});
return _19fc;
});
},"curam/cdsl/types/codetable/CodeTable":function(){
define(["dojo/_base/declare","./CodeTableItem"],function(_19fd,_19fe){
var _19ff=_19fd(null,{_name:null,_defaultCode:null,_codes:null,_items:null,constructor:function(name,_1a00,codes){
this._name=name;
this._defaultCode=_1a00;
this._codes=this._parseCodesIntoObject(codes);
},listItems:function(){
this._initItems(this._codes,this._defaultCode);
var ret=[];
for(code in this._items){
ret.push(this._items[code]);
}
return ret;
},_parseCodesIntoObject:function(_1a01){
var ret={};
if(_1a01){
for(var i=0;i<_1a01.length;i++){
var raw=_1a01[i];
var code=raw.split(":")[0];
var desc=raw.slice(code.length+1);
ret[code]=desc;
}
}
return ret;
},_initItems:function(codes,_1a02){
if(!this._items){
this._items={};
for(code in codes){
var cti=new _19fe(code,codes[code]);
cti.isDefault(code===_1a02);
this._items[code]=cti;
}
}
},getItem:function(code){
this._initItems(this._codes,this._defaultCode);
return this._items[code];
}});
return _19ff;
});
},"curam/debug":function(){
define(["curam/define","curam/util/LocalConfig","dojo/ready","dojo/_base/lang","curam/util/ResourceBundle"],function(_1a03,_1a04,ready,lang,_1a05){
var _1a06=new _1a05("curam.application.Debug");
_1a03.singleton("curam.debug",{log:function(){
if(curam.debug.enabled()){
try{
var a=arguments;
if(!dojo.isIE){
console.log.apply(console,a);
}else{
var _1a07=a.length;
var sa=curam.debug._serializeArgument;
switch(_1a07){
case 1:
console.log(arguments[0]);
break;
case 2:
console.log(a[0],sa(a[1]));
break;
case 3:
console.log(a[0],sa(a[1]),sa(a[2]));
break;
case 4:
console.log(a[0],sa(a[1]),sa(a[2]),sa(a[3]));
break;
case 5:
console.log(a[0],sa(a[1]),sa(a[2]),sa(a[3]),sa(a[4]));
break;
case 6:
console.log(a[0],sa(a[1]),sa(a[2]),sa(a[3]),sa(a[4]),sa(a[5]));
break;
default:
console.log("[Incomplete message - "+(_1a07-5)+" message a truncated] "+a[0],sa(a[1]),sa(a[2]),sa(a[3]),sa(a[4]),sa(a[5]));
}
}
}
catch(e){
console.log(e);
}
}
},getProperty:function(key,_1a08){
return _1a06.getProperty(key,_1a08);
},_serializeArgument:function(arg){
if(typeof arg!="undefined"&&typeof arg.nodeType!="undefined"&&typeof arg.cloneNode!="undefined"){
return ""+arg;
}else{
if(curam.debug._isWindow(arg)){
return arg.location.href;
}else{
if(curam.debug._isArray(arg)&&curam.debug._isWindow(arg[0])){
return "[array of window objects, length "+arg.length+"]";
}else{
return dojo.toJson(arg);
}
}
}
},_isArray:function(arg){
return typeof arg!="undefined"&&(dojo.isArray(arg)||typeof arg.length!="undefined");
},_isWindow:function(arg){
var _1a09=typeof arg!="undefined"&&typeof arg.closed!="undefined"&&arg.closed;
if(_1a09){
return true;
}else{
return typeof arg!="undefined"&&typeof arg.location!="undefined"&&typeof arg.navigator!="undefined"&&typeof arg.document!="undefined"&&typeof arg.closed!="undefined";
}
},enabled:function(){
return _1a04.readOption("jsTraceLog","false")=="true";
},_setup:function(_1a0a){
_1a04.seedOption("jsTraceLog",_1a0a.trace,"false");
_1a04.seedOption("ajaxDebugMode",_1a0a.ajaxDebug,"false");
_1a04.seedOption("asyncProgressMonitor",_1a0a.asyncProgressMonitor,"false");
}});
return curam.debug;
});
},"dijit/TooltipDialog":function(){
define(["dojo/_base/declare","dojo/dom-class","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","./focus","./layout/ContentPane","./_DialogMixin","./form/_FormMixin","./_TemplatedMixin","dojo/text!./templates/TooltipDialog.html","./main"],function(_1a0b,_1a0c,has,keys,lang,on,focus,_1a0d,_1a0e,_1a0f,_1a10,_1a11,dijit){
var _1a12=_1a0b("dijit.TooltipDialog",[_1a0d,_1a10,_1a0f,_1a0e],{title:"",doLayout:false,autofocus:true,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:_1a11,_setTitleAttr:"containerNode",postCreate:function(){
this.inherited(arguments);
this.own(on(this.domNode,"keydown",lang.hitch(this,"_onKey")));
},orient:function(node,_1a13,_1a14){
var newC={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft","BR-TL":"dijitTooltipBelow dijitTooltipABLeft","BL-TR":"dijitTooltipBelow dijitTooltipABRight","TL-BR":"dijitTooltipAbove dijitTooltipABRight","TR-BL":"dijitTooltipAbove dijitTooltipABLeft"}[_1a13+"-"+_1a14];
_1a0c.replace(this.domNode,newC,this._currentOrientClass||"");
this._currentOrientClass=newC;
},focus:function(){
this._getFocusItems();
focus.focus(this._firstFocusItem);
},onOpen:function(pos){
this.orient(this.domNode,pos.aroundCorner,pos.corner);
var _1a15=pos.aroundNodePos;
if(pos.corner.charAt(0)=="M"&&pos.aroundCorner.charAt(0)=="M"){
this.connectorNode.style.top=_1a15.y+((_1a15.h-this.connectorNode.offsetHeight)>>1)-pos.y+"px";
this.connectorNode.style.left="";
}else{
if(pos.corner.charAt(1)=="M"&&pos.aroundCorner.charAt(1)=="M"){
this.connectorNode.style.left=_1a15.x+((_1a15.w-this.connectorNode.offsetWidth)>>1)-pos.x+"px";
}
}
this._onShow();
},onClose:function(){
this.onHide();
},_onKey:function(evt){
if(evt.keyCode==keys.ESCAPE){
this.defer("onCancel");
evt.stopPropagation();
evt.preventDefault();
}else{
if(evt.keyCode==keys.TAB){
var node=evt.target;
this._getFocusItems();
if(this._firstFocusItem==this._lastFocusItem){
evt.stopPropagation();
evt.preventDefault();
}else{
if(node==this._firstFocusItem&&evt.shiftKey){
focus.focus(this._lastFocusItem);
evt.stopPropagation();
evt.preventDefault();
}else{
if(node==this._lastFocusItem&&!evt.shiftKey){
focus.focus(this._firstFocusItem);
evt.stopPropagation();
evt.preventDefault();
}else{
evt.stopPropagation();
}
}
}
}
}
}});
if(has("dojo-bidi")){
_1a12.extend({_setTitleAttr:function(title){
this.containerNode.title=(this.textDir&&this.enforceTextDirWithUcc)?this.enforceTextDirWithUcc(null,title):title;
this._set("title",title);
},_setTextDirAttr:function(_1a16){
if(!this._created||this.textDir!=_1a16){
this._set("textDir",_1a16);
if(this.textDir&&this.title){
this.containerNode.title=this.enforceTextDirWithUcc(null,this.title);
}
}
}});
}
return _1a12;
});
},"url:curam/widget/templates/AppBannerDropDownBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft appBannerComboBox\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\taria-haspopup=\"true\"\n\tdata-dojo-attach-point=\"_popupStateNode\"\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner appBannerComboBoxInput' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdata-dojo-attach-point=\"textbox,focusNode\" role=\"textbox\"\n\t/></div\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdata-dojo-attach-point=\"_buttonNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner appBannerComboBoxArrow\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"button presentation\" aria-hidden=\"true\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n></div>\n","url:curam/layout/resources/UIMController.html":"<div id=\"uimcontroller_${uid}\" class=\"uimcontroller_${uid} uimController ${classList}\" data-dojo-attach-point=\"uimController\">\n  <div style=\"display:none;\" \n       id=\"uimcontroller_tc_${uid}\" \n       class=\"ipnTabController in-page-nav-tabContainer\"\n       data-dojo-attach-point=\"tabController\" \n       data-dojo-type=\"curam/layout/TabContainer\">\n  </div>\n  <div class=\"contentPanelFrameWrapper\"  \n        data-dojo-attach-point=\"frameWrapper\">\n    <iframe frameborder=\"0\" marginwidth=\"0\" marginheight=\"0\"\n             allowTransparency=\"true\" \n             id=\"${iframeId}\" \n             data-dojo-attach-point=\"frame\"                 \n             class=\"${iframeId} ${iframeClassList}\"\n             iscpiframe=\"${iscpiframe}\"\n             title=\"${title}\" >\n    </iframe>\n  </div> \n</div>","url:curam/widget/templates/OptimalBrowserMessage.html":"<div>\n  <div class=\"hidden\"\n       data-dojo-type=\"dojox/layout/ContentPane\"\n       data-dojo-attach-point=\"_optimalMessage\">\n  </div>\n</div>\n","url:curam/layout/resources/ExpandoPane.html":"<div class=\"dojoxExpandoPane dojoxExpando${orient} ${startupCls}\">\n\t<div dojoAttachPoint=\"titleWrapper\" class=\"dojoxExpandoTitle\">\n\t\t<div class=\"dojoxExpandoIcon dojoxExpandoIcon${orient}\" role=\"application\" aria-label=\"${expandIconAlt}\" dojoAttachPoint=\"iconNode\" dojoAttachEvent=\"ondijitclick:toggle,onkeypress: enterCheck\" tabindex=\"0\">\n\t\t\t<a role=\"button\" tabIndex=\"-1\" dojoAttachPoint=\"iconNodeLink\"></a>\n\t\t</div>\n\t\t<span class=\"dojoxExpandoTitleNode\" dojoAttachPoint=\"titleNode\" title=\"${title}\">${title}</span>\n\t</div>\n\t<div class=\"dojoxExpandoWrapper\" dojoAttachPoint=\"cwrapper\" dojoAttachEvent=\"ondblclick:_trap\">\n\t\t<div class=\"dojoxExpandoContent\" dojoAttachPoint=\"containerNode\"></div>\n\t</div>\n</div>\n","url:curam/widget/templates/DropDownButton.html":"<span class=\"dijit dijitReset dijitInline\"\n\t><span class='dijitReset dijitInline dijitButtonNode'\n\t\tdata-dojo-attach-event=\"ondijitclick:__onClick\" data-dojo-attach-point=\"_buttonNode\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"focusNode,titleNode,_arrowWrapperNode\"\n\t\t\trole=\"button\" aria-haspopup=\"true\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\"\n\t\t\t\tdata-dojo-attach-point=\"iconNode\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode,_popupStateNode\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonInner\"></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonChar\">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\" tabIndex=\"-1\"\n\t\tdata-dojo-attach-event=\"onclick:_onClick\"\n\t\tdata-dojo-attach-point=\"valueNode\" role=\"presentation\" aria-hidden=\"true\"\n/></span>\n","url:dijit/form/templates/Select.html":"<table class=\"dijit dijitReset dijitInline dijitLeft\"\n\tdata-dojo-attach-point=\"_buttonNode,tableNode,focusNode,_popupStateNode\" cellspacing='0' cellpadding='0'\n\trole=\"listbox\" aria-haspopup=\"true\"\n\t><tbody role=\"presentation\"><tr role=\"presentation\"\n\t\t><td class=\"dijitReset dijitStretch dijitButtonContents\" role=\"presentation\"\n\t\t\t><div class=\"dijitReset dijitInputField dijitButtonText\"  data-dojo-attach-point=\"containerNode,textDirNode\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitValidationContainer\"\n\t\t\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t/></div\n\t\t\t><input type=\"hidden\" ${!nameAttrSetting} data-dojo-attach-point=\"valueNode\" value=\"${value}\" aria-hidden=\"true\"\n\t\t/></td\n\t\t><td class=\"dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\"\n\t\t\tdata-dojo-attach-point=\"titleNode\" role=\"presentation\"\n\t\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t${_buttonInputDisabled}\n\t\t/></td\n\t></tr></tbody\n></table>\n","url:dijit/form/templates/TextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\" id=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n","url:dijit/layout/templates/AccordionButton.html":"<div data-dojo-attach-event='ondijitclick:_onTitleClick' class='dijitAccordionTitle' role=\"presentation\">\n\t<div data-dojo-attach-point='titleNode,focusNode' data-dojo-attach-event='onkeydown:_onTitleKeyDown'\n\t\t\tclass='dijitAccordionTitleFocus' role=\"tab\" aria-expanded=\"false\"\n\t\t><span class='dijitInline dijitAccordionArrow' role=\"presentation\"></span\n\t\t><span class='arrowTextUp' role=\"presentation\">+</span\n\t\t><span class='arrowTextDown' role=\"presentation\">-</span\n\t\t><span role=\"presentation\" class=\"dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span>\n\t\t<span role=\"presentation\" data-dojo-attach-point='titleTextNode, textDirNode' class='dijitAccordionText'></span>\n\t</div>\n</div>\n","url:dijit/templates/MenuSeparator.html":"<tr class=\"dijitMenuSeparator\" role=\"separator\">\n\t<td class=\"dijitMenuSeparatorIconCell\">\n\t\t<div class=\"dijitMenuSeparatorTop\"></div>\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\n\t</td>\n\t<td colspan=\"3\" class=\"dijitMenuSeparatorLabelCell\">\n\t\t<div class=\"dijitMenuSeparatorTop dijitMenuSeparatorLabel\"></div>\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\n\t</td>\n</tr>\n","url:curam/widget/templates/SearchMultipleTextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\" id=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner searchTextBox input-placeholder-closed\" data-dojo-attach-point='textbox,focusNode'\n\t\t\tdata-dojo-attach-event=\"onFocus:_givenFocus,onblur:_onBlur, onpaste:_onPaste\" autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}' \n\t/></div\n></div>\n","url:dijit/templates/TitlePane.html":"<div>\n\t<div data-dojo-attach-event=\"ondijitclick:_onTitleClick, onkeydown:_onTitleKey\"\n\t\t\tclass=\"dijitTitlePaneTitle\" data-dojo-attach-point=\"titleBarNode\" id=\"${id}_titleBarNode\">\n\t\t<div class=\"dijitTitlePaneTitleFocus\" data-dojo-attach-point=\"focusNode\">\n\t\t\t<span data-dojo-attach-point=\"arrowNode\" class=\"dijitInline dijitArrowNode\" role=\"presentation\"></span\n\t\t\t><span data-dojo-attach-point=\"arrowNodeInner\" class=\"dijitArrowNodeInner\"></span\n\t\t\t><span data-dojo-attach-point=\"titleNode\" class=\"dijitTitlePaneTextNode\"></span>\n\t\t</div>\n\t</div>\n\t<div class=\"dijitTitlePaneContentOuter\" data-dojo-attach-point=\"hideNode\" role=\"presentation\">\n\t\t<div class=\"dijitReset\" data-dojo-attach-point=\"wipeNode\" role=\"presentation\">\n\t\t\t<div class=\"dijitTitlePaneContentInner\" data-dojo-attach-point=\"containerNode\" role=\"region\" id=\"${id}_pane\" aria-labelledby=\"${id}_titleBarNode\">\n\t\t\t\t<!-- nested divs because wipeIn()/wipeOut() doesn't work right on node w/padding etc.  Put padding on inner div. -->\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n","url:dijit/templates/Tooltip.html":"<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\" data-dojo-attach-event=\"mouseenter:onMouseEnter,mouseleave:onMouseLeave\"\n\t><div class=\"dijitTooltipConnector\" data-dojo-attach-point=\"connectorNode\"></div\n\t><div class=\"dijitTooltipContainer dijitTooltipContents\" data-dojo-attach-point=\"containerNode\" role='alert'></div\n></div>\n","url:curam/layout/resources/CuramBaseModal.html":"<div class=\"dijitDialog\" role=\"dialog\" aria-labelledby=\"${id}_title\" aria-live=\"assertive\">\n\t<div data-dojo-attach-point=\"titleBar\" class=\"dijitDialogTitleBar\">\n\t\t<span data-dojo-attach-point=\"titleNode\" class=\"dijitDialogTitle\" id=\"${id}_title\"\n\t\t\t\trole=\"heading\" level=\"2\"></span>\n\t\t<button data-dojo-attach-point=\"closeButtonNode\" class=\"dijitDialogCloseIcon\"\n          data-dojo-attach-event=\"ondijitclick: onCancel\" title=\"${buttonCancel}\"\n          role=\"button\" tabindex=\"0\" aria-label=\"${closeModalText}\" \n          onKeyDown=\"require(['curam/ModalDialog'], function(md) {md.handleTitlebarIconKeydown(event)});\"\n          style=\"visibility: hidden;\">\n      \t\t<img src=\"${buttonCloseIcon}\" alt=\"${closeModalText}\" class=\"button-close-icon-default\"/>\n      \t\t<img src=\"${buttonCloseIconHover}\" alt=\"${closeModalText}\" class=\"button-close-icon-hover\"/>\n\t\t\t<span data-dojo-attach-point=\"closeText\" class=\"closeText\" title=\"${buttonCancel}\">${closeModalText}</span>\n\t    </button>\n\t</div>\n\t<div data-dojo-attach-point=\"containerNode\" class=\"dijitDialogPaneContent\"></div>\n\t${!actionBarTemplate}\n</div>\n","url:dijit/form/templates/ComboButton.html":"<table class=\"dijit dijitReset dijitInline dijitLeft\"\n\tcellspacing='0' cellpadding='0' role=\"presentation\"\n\t><tbody role=\"presentation\"><tr role=\"presentation\"\n\t\t><td class=\"dijitReset dijitStretch dijitButtonNode\" data-dojo-attach-point=\"buttonNode\" data-dojo-attach-event=\"ondijitclick:__onClick,onkeydown:_onButtonKeyDown\"\n\t\t><div id=\"${id}_button\" class=\"dijitReset dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"titleNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><div class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitInline dijitButtonText\" id=\"${id}_label\" data-dojo-attach-point=\"containerNode\" role=\"presentation\"></div\n\t\t></div\n\t\t></td\n\t\t><td id=\"${id}_arrow\" class='dijitReset dijitRight dijitButtonNode dijitArrowButton'\n\t\t\tdata-dojo-attach-point=\"_popupStateNode,focusNode,_buttonNode\"\n\t\t\tdata-dojo-attach-event=\"onkeydown:_onArrowKeyDown\"\n\t\t\ttitle=\"${optionsTitle}\"\n\t\t\trole=\"button\" aria-haspopup=\"true\"\n\t\t\t><div class=\"dijitReset dijitArrowButtonInner\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitArrowButtonChar\" role=\"presentation\">&#9660;</div\n\t\t></td\n\t\t><td style=\"display:none !important;\"\n\t\t\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" data-dojo-attach-point=\"valueNode\"\n\t\t\t\tclass=\"dijitOffScreen\" aria-hidden=\"true\" data-dojo-attach-event=\"onclick:_onClick\"\n\t\t/></td></tr></tbody\n></table>\n","url:curam/widget/templates/_TabButton.html":"<div role=\"presentation\" data-dojo-attach-point=\"titleNode,innerDiv,tabContent\" class=\"dijitTab\" id=\"${id}_tabButtonContainer\">\n  <div role=\"presentation\" class='dijitTabInnerDiv'>\n    <div role=\"presentation\" class='dijitTabContent'>\n\t    <span role=\"presentation\" class=\"dijitInline dijitIcon dijitTabButtonIcon\" data-dojo-attach-point=\"iconNode\"></span>\n\t    <div role=\"presentation\" aria-labelledby='${id}'>\n\t\t    <span data-dojo-attach-point='containerNode,focusNode' class='tabLabel' id='${id}'></span>\n\t\t    <button class=\"dijitInline dijitTabCloseButton dijitTabCloseIcon\" data-dojo-attach-point='closeNode'\n\t\t\t        tabindex=\"-1\">\n\t\t\t    <span data-dojo-attach-point='closeText' class='dijitTabCloseText'>Close Tab</span>\n        \t</button>\n      </div>\n    </div>\n  </div>\n</div>\n","url:dijit/templates/MenuBarItem.html":"<div class=\"dijitReset dijitInline dijitMenuItem dijitMenuItemLabel\" data-dojo-attach-point=\"focusNode\"\n\t \trole=\"menuitem\" tabIndex=\"-1\">\n\t<span data-dojo-attach-point=\"containerNode,textDirNode\"></span>\n</div>\n","url:curam/layout/resources/CuramCarbonModal.html":"<div class=\"spm-component\">  \n   <div id=\"${id}_modal-root\" data-testid=\"${id}_modal-root\" data-dojo-attach-point=\"carbonModalNode\" class=\"bx--modal\" role=\"presentation\">\n        <div data-dojo-attach-point=\"modalContainer\" aria-modal=\"true\" aria-labelledby=\"${id}_modal-heading\" aria-live=\"assertive\" class=\"bx--modal-container\" data-testid=\"${id}_modal-container\" id=\"${id}_modal-container\" role=\"dialog\" tabindex=\"-1\">\n          <div class=\"bx--modal-header bx--modal-header--with-pair-icons\">\n            <h3 class=\"bx--modal-header__heading bx--type-beta\" data-dojo-attach-point=\"titleNode\" id=\"${id}_modal-heading\" data-testid=\"${id}_modal-heading\">\n              ${_title}\n            </h3>\n            <button data-dojo-attach-point=\"helpIcon\" aria-label=\"${helpTitle}\" class=\"bx--modal-help\" data-dojo-attach-event=\"onclick:displayHelp, onkeypress:displayHelp,onkeydown:escapeOnClose,onkeydown:preventBackwardsTabEscFromModal\" data-testid=\"button_modal.help.button.icon\" id=\"${id}_modal-help\" type=\"button\">\n              <svg focusable=\"false\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\">\n               <defs><style>.cls-1{fill:none;}</style></defs>\n               <title>${helpTitle}</title>\n               <path d=\"M16,2A14,14,0,1,0,30,16,14,14,0,0,0,16,2Zm0,26A12,12,0,1,1,28,16,12,12,0,0,1,16,28Z\"/>\n               <circle cx=\"16\" cy=\"23.5\" r=\"1.5\"/>\n               <path d=\"M17,8H15.5A4.49,4.49,0,0,0,11,12.5V13h2v-.5A2.5,2.5,0,0,1,15.5,10H17a2.5,2.5,0,0,1,0,5H15v4.5h2V17a4.5,4.5,0,0,0,0-9Z\"/>\n               <rect class=\"cls-1\" width=\"32\" height=\"32\"/>\n             </svg>\n            </button> \n            <button data-dojo-attach-point=\"closeButton\" aria-label=\"${closeTitle}\" class=\"bx--modal-close\" data-dojo-attach-event=\"onclick:hideAndClose,onkeydown:escapeOnClose,onkeydown:preventBackwardsTabEscFromModal\" data-testid=\"button_modal.close.button.icon\" id=\"${id}_modal-button-close\" type=\"button\">\n              <svg aria-hidden=\"true\" class=\"bx--modal-close__icon\" focusable=\"false\" preserveAspectRatio=\"xMidYMid meet\" style=\"will-change: transform;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\">\n                <title>${closeTitle}</title>\n                <path d=\"M12 4.7l-.7-.7L8 7.3 4.7 4l-.7.7L7.3 8 4 11.3l.7.7L8 8.7l3.3 3.3.7-.7L8.7 8z\"></path>\n              </svg>\n            </button>\n          </div>\n\n          <div class=\"bx--modal-content bx--modal-scroll-content bx--modal-content--with-iframe\" data-dojo-attach-point=\"containerNode\" data-testid=\"${id}_modal-content\" id=\"${id}_modal-content\">\n          </div>\n          <div class=\"bx--modal-content--overflow-indicator\"></div>\n          <div data-dojo-attach-point=\"modalFooter\" class=\"bx--modal-footer\" data-testid=\"${id}_modal-footer\" id=\"${id}_modal-footer\"></div>\n          <span data-dojo-attach-event=\"onkeydown:escapeOnClose,onfocus:preventForwardsTabEscFromModal\" id=\"modal-end_${id}\" tabindex=\"0\"></span>\n        </div>\n    </div>\n</div>","url:curam/layout/resources/ModalUIMController.html":"<div id=\"uimcontroller_${uid}\" \n  class=\"uimcontroller_${uid} uimController ${classList}\" \n  data-dojo-attach-point=\"uimController\">\n  <div style=\"display:none;\" \n       id=\"uimcontroller_tc_${uid}\" \n       class=\"ipnTabController in-page-nav-tabContainer\"\n       data-dojo-attach-point=\"tabController\" \n       data-dojo-type=\"curam.layout.TabContainer\">\n  </div>\n  <div class=\"contentPanelFrameWrapper\"\n       data-dojo-attach-point=\"frameWrapper\">\n    <iframe frameborder=\"0\" marginwidth=\"0\" marginheight=\"0\"\n            allowTransparency=\"true\" \n            id=\"${iframeId}\" \n            data-dojo-attach-point=\"frame\"                 \n            class=\"${iframeId} ${iframeClassList}\"\n            iscpiframe=\"${iscpiframe}\"\n            title=\"${title}\" >\n    </iframe>\n    <span onFocus=\"require(['curam/ModalDialog'], function(md) {md.handleFocusAtEnd(event)});\"\n          tabIndex=\"0\" class=\"hidden\" id=\"end-${uid}\" style=\"visibility: hidden;\">${endModalUIMController}</span>\n  </div>\n</div>","url:dojox/layout/resources/ExpandoPane.html":"<div class=\"dojoxExpandoPane\">\n\t<div dojoAttachPoint=\"titleWrapper\" class=\"dojoxExpandoTitle\">\n\t\t<div class=\"dojoxExpandoIcon\" dojoAttachPoint=\"iconNode\" dojoAttachEvent=\"ondijitclick:toggle\"><span class=\"a11yNode\">X</span></div>\n\t\t<span class=\"dojoxExpandoTitleNode\" dojoAttachPoint=\"titleNode\">${title}</span>\n\t</div>\n\t<div class=\"dojoxExpandoWrapper\" dojoAttachPoint=\"cwrapper\" dojoAttachEvent=\"ondblclick:_trap\">\n\t\t<div class=\"dojoxExpandoContent\" dojoAttachPoint=\"containerNode\"></div>\n\t</div>\n</div>\n","url:dijit/templates/Menu.html":"<table class=\"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable\" role=\"menu\" tabIndex=\"${tabIndex}\"\n\t   cellspacing=\"0\">\n\t<tbody class=\"dijitReset\" data-dojo-attach-point=\"containerNode\"></tbody>\n</table>\n","url:curam/layout/resources/TabContainer.html":"<div class=\"dijitTabContainer\">\n\t<div class=\"dijitTabListWrapper\" data-dojo-attach-point=\"tablistNode\"></div>\n\t<div data-dojo-attach-point=\"tablistSpacer\" class=\"dijitTabSpacer ${baseClass}-spacer dijitAlignTop\"></div>\n\t<div class=\"dijitTabPaneWrapper ${baseClass}-container dijitAlignClient\" data-dojo-attach-point=\"containerNode\"></div>\n</div>\n","url:dijit/form/templates/DropDownBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\taria-haspopup=\"true\"\n\tdata-dojo-attach-point=\"_popupStateNode\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdata-dojo-attach-point=\"_buttonNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"button presentation\" aria-hidden=\"true\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdata-dojo-attach-point=\"textbox,focusNode\" role=\"textbox\"\n\t/></div\n></div>\n","url:dijit/form/templates/ValidationTextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n","url:dijit/templates/TreeNode.html":"<div class=\"dijitTreeNode\" role=\"presentation\"\n\t><div data-dojo-attach-point=\"rowNode\" class=\"dijitTreeRow\" role=\"presentation\"\n\t\t><span data-dojo-attach-point=\"expandoNode\" class=\"dijitInline dijitTreeExpando\" role=\"presentation\"></span\n\t\t><span data-dojo-attach-point=\"expandoNodeText\" class=\"dijitExpandoText\" role=\"presentation\"></span\n\t\t><span data-dojo-attach-point=\"contentNode\"\n\t\t\tclass=\"dijitTreeContent\" role=\"presentation\">\n\t\t\t<span role=\"presentation\" class=\"dijitInline dijitIcon dijitTreeIcon\" data-dojo-attach-point=\"iconNode\"></span\n\t\t\t><span data-dojo-attach-point=\"labelNode,focusNode\" class=\"dijitTreeLabel\" role=\"treeitem\"\n\t\t\t\t   tabindex=\"-1\" aria-selected=\"false\" id=\"${id}_label\"></span>\n\t\t</span\n\t></div>\n\t<div data-dojo-attach-point=\"containerNode\" class=\"dijitTreeNodeContainer\" role=\"presentation\"\n\t\t style=\"display: none;\" aria-labelledby=\"${id}_label\"></div>\n</div>\n","url:dijit/templates/MenuBar.html":"<div class=\"dijitMenuBar dijitMenuPassive\" data-dojo-attach-point=\"containerNode\" role=\"menubar\" tabIndex=\"${tabIndex}\"\n\t ></div>\n","url:curam/widget/templates/SearchTextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\" id=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner searchTextBox input-placeholder-closed\" data-dojo-attach-point='textbox,focusNode' data-dojo-attach-event=\"onclick:__onClick,onFocus:__onClick,onblur:__onBlur,onkeyup:__onKeyUp,onpaste:__onPaste\" autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n","url:curam/layout/resources/CuramStackButton.html":"<span class=\"dijit dijitReset dijitInline\" role=\"presentation\">\n  <span class=\"dijitReset dijitInline dijitButtonNode\"\n  data-dojo-attach-event=\"ondijitclick:__onClick\" role=\"presentation\">\n    <span class=\"dijitReset dijitStretch dijitButtonContents\" data-dojo-attach-point=\"titleNode,focusNode\"\n    role=\"button\" aria-labelledby=\"${id}_label\">\n      <span class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span>\n      <span class=\"dijitReset dijitInline curamButtonText\" id=\"${id}_label\" data-dojo-attach-point=\"containerNode\"></span>\n      <img alt=\"${imageAltText}\" src=\"${imageDefaultSrc}\" class=\"defaultIcon\">\n      <img alt=\"${imageAltText}\" src=\"${imageHoverSrc}\" class=\"hoverIcon\">\n    </span>\n  </span>\n  <input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\" data-dojo-attach-event=\"onclick:_onClick\"\n  tabIndex=\"-1\" aria-hidden=\"true\" data-dojo-attach-point=\"valueNode\"/>\n</span>","url:dijit/templates/TooltipDialog.html":"<div role=\"alertdialog\" tabIndex=\"-1\">\n\t<div class=\"dijitTooltipContainer\" role=\"presentation\">\n\t\t<div data-dojo-attach-point=\"contentsNode\" class=\"dijitTooltipContents dijitTooltipFocusNode\">\n\t\t\t<div data-dojo-attach-point=\"containerNode\"></div>\n\t\t\t${!actionBarTemplate}\n\t\t</div>\n\t</div>\n\t<div class=\"dijitTooltipConnector\" role=\"presentation\" data-dojo-attach-point=\"connectorNode\"></div>\n</div>\n","url:dijit/layout/templates/_TabButton.html":"<div role=\"presentation\" data-dojo-attach-point=\"titleNode,innerDiv,tabContent\" class=\"dijitTabInner dijitTabContent\">\n\t<span role=\"presentation\" class=\"dijitInline dijitIcon dijitTabButtonIcon\" data-dojo-attach-point=\"iconNode\"></span>\n\t<span data-dojo-attach-point='containerNode,focusNode' class='tabLabel'></span>\n\t<span class=\"dijitInline dijitTabCloseButton dijitTabCloseIcon\" data-dojo-attach-point='closeNode'\n\t\t  role=\"presentation\">\n\t\t<span data-dojo-attach-point='closeText' class='dijitTabCloseText'>[x]</span\n\t\t\t\t></span>\n</div>\n","url:dijit/form/templates/Button.html":"<span class=\"dijit dijitReset dijitInline\" role=\"presentation\"\n\t><span class=\"dijitReset dijitInline dijitButtonNode\"\n\t\tdata-dojo-attach-event=\"ondijitclick:__onClick\" role=\"presentation\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"titleNode,focusNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span\n\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#x25CF;</span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode\"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\"\n\t\tdata-dojo-attach-event=\"onclick:_onClick\"\n\t\ttabIndex=\"-1\" aria-hidden=\"true\" data-dojo-attach-point=\"valueNode\"\n/></span>\n","url:curam/layout/resources/ScrollingTabController.html":"<div class=\"dijitTabListContainer-${tabPosition} tabStrip-disabled dijitLayoutContainer\"><!-- CURAM-FIX: removed style=\"visibility:hidden, dd the tabStrip-disabled class by default.\" -->\n\t<div data-dojo-type=\"curam.layout._ScrollingTabControllerMenuButton\"\n\t\t class=\"tabStripButton-${tabPosition}\"\n\t\t id=\"${id}_menuBtn\"\n\t\t data-dojo-props=\"containerId: '${containerId}', iconClass: 'dijitTabStripMenuIcon',\n\t\t\t\t\tdropDownPosition: ['below-alt', 'above-alt']\"\n\t\t data-dojo-attach-point=\"_menuBtn\" showLabel=\"false\" title=\"Navigation menu\">&#9660;</div>\n\t<div data-dojo-type=\"dijit.layout._ScrollingTabControllerButton\"\n\t\t class=\"tabStripButton-${tabPosition}\"\n\t\t id=\"${id}_leftBtn\"\n\t\t data-dojo-props=\"iconClass:'dijitTabStripSlideLeftIcon', showLabel:false, title:'Navigation left'\"\n\t\t data-dojo-attach-point=\"_leftBtn\" data-dojo-attach-event=\"onClick: doSlideLeft\">&#9664;</div>\n\t<div data-dojo-type=\"dijit.layout._ScrollingTabControllerButton\"\n\t\t class=\"tabStripButton-${tabPosition}\"\n\t\t id=\"${id}_rightBtn\"\n\t\t data-dojo-props=\"iconClass:'dijitTabStripSlideRightIcon', showLabel:false, title:'Navigation right'\"\n\t\t data-dojo-attach-point=\"_rightBtn\" data-dojo-attach-event=\"onClick: doSlideRight\">&#9654;</div>\n\t<div class='dijitTabListWrapper dijitTabContainerTopNone dijitAlignClient' data-dojo-attach-point='tablistWrapper'>\n\t\t<div role='tablist' data-dojo-attach-event='onkeydown:onkeydown'\n\t\t\t\tdata-dojo-attach-point='containerNode' class='nowrapTabStrip dijitTabContainerTop-tabs'></div>\n\t</div>\n</div>","url:dijit/templates/Tree.html":"<div role=\"tree\">\n\t<div class=\"dijitInline dijitTreeIndent\" style=\"position: absolute; top: -9999px\" data-dojo-attach-point=\"indentDetector\"></div>\n\t<div class=\"dijitTreeExpando dijitTreeExpandoLoading\" data-dojo-attach-point=\"rootLoadingIndicator\"></div>\n\t<div data-dojo-attach-point=\"containerNode\" class=\"dijitTreeContainer\" role=\"presentation\">\n\t</div>\n</div>\n","url:dijit/layout/templates/ScrollingTabController.html":"<div class=\"dijitTabListContainer-${tabPosition} tabStrip-disabled dijitLayoutContainer\"><!-- CURAM-FIX: removed style=\"visibility:hidden, dd the tabStrip-disabled class by default.\" -->\n\t<div data-dojo-type=\"dijit.layout._ScrollingTabControllerMenuButton\"\n\t\t class=\"tabStripButton-${tabPosition}\"\n\t\t id=\"${id}_menuBtn\"\n\t\t data-dojo-props=\"containerId: '${containerId}', iconClass: 'dijitTabStripMenuIcon',\n\t\t\t\t\tdropDownPosition: ['below-alt', 'above-alt']\"\n\t\t data-dojo-attach-point=\"_menuBtn\" showLabel=\"false\" title=\"Navigation menu\">&#9660;</div>\n\t<div data-dojo-type=\"dijit.layout._ScrollingTabControllerButton\"\n\t\t class=\"tabStripButton-${tabPosition}\"\n\t\t id=\"${id}_leftBtn\"\n\t\t data-dojo-props=\"iconClass:'dijitTabStripSlideLeftIcon', showLabel:false, title:'Navigation left'\"\n\t\t data-dojo-attach-point=\"_leftBtn\" data-dojo-attach-event=\"onClick: doSlideLeft\">&#9664;</div>\n\t<div data-dojo-type=\"dijit.layout._ScrollingTabControllerButton\"\n\t\t class=\"tabStripButton-${tabPosition}\"\n\t\t id=\"${id}_rightBtn\"\n\t\t data-dojo-props=\"iconClass:'dijitTabStripSlideRightIcon', showLabel:false, title:'Navigation right'\"\n\t\t data-dojo-attach-point=\"_rightBtn\" data-dojo-attach-event=\"onClick: doSlideRight\">&#9654;</div>\n\t<div class='dijitTabListWrapper dijitTabContainerTopNone dijitAlignClient' data-dojo-attach-point='tablistWrapper'>\n\t\t<div role='tablist' data-dojo-attach-event='onkeydown:onkeydown'\n\t\t\t\tdata-dojo-attach-point='containerNode' class='nowrapTabStrip dijitTabContainerTop-tabs'></div>\n\t</div>\n</div>","url:dijit/templates/Dialog.html":"<div class=\"dijitDialog\" role=\"dialog\" aria-labelledby=\"${id}_title\">\n\t<div data-dojo-attach-point=\"titleBar\" class=\"dijitDialogTitleBar\">\n\t\t<span data-dojo-attach-point=\"titleNode\" class=\"dijitDialogTitle\" id=\"${id}_title\"\n\t\t\t\trole=\"heading\" level=\"1\"></span>\n\t\t<span data-dojo-attach-point=\"closeButtonNode\" class=\"dijitDialogCloseIcon\" data-dojo-attach-event=\"ondijitclick: onCancel\" title=\"${buttonCancel}\" role=\"button\" tabindex=\"-1\">\n\t\t\t<span data-dojo-attach-point=\"closeText\" class=\"closeText\" title=\"${buttonCancel}\">x</span>\n\t\t</span>\n\t</div>\n\t<div data-dojo-attach-point=\"containerNode\" class=\"dijitDialogPaneContent\"></div>\n\t${!actionBarTemplate}\n</div>\n\n","url:dijit/templates/MenuItem.html":"<tr class=\"dijitReset\" data-dojo-attach-point=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<span role=\"presentation\" class=\"dijitInline dijitIcon dijitMenuItemIcon\" data-dojo-attach-point=\"iconNode\"></span>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode,textDirNode\"\n\t\trole=\"presentation\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">\n\t\t<span data-dojo-attach-point=\"arrowWrapper\" style=\"visibility: hidden\">\n\t\t\t<span class=\"dijitInline dijitIcon dijitMenuExpand\"></span>\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\n\t\t</span>\n\t</td>\n</tr>\n","url:curam/layout/resources/CuramAccordionButton.html":"<div data-dojo-attach-event='ondijitclick:_onTitleClick' class='dijitAccordionTitle dijitTestingTest' role=\"presentation\">\n  <div data-dojo-attach-point='titleNode,focusNode' data-dojo-attach-event='onkeydown:_onTitleKeyDown'\n      class='dijitAccordionTitleFocus' role=\"tab\" aria-expanded=\"false\"\n    ><span class='dijitInline dijitAccordionArrow' role=\"presentation\"></span\n    ><span class='arrowTextUp' role=\"presentation\">+</span\n    ><span class='arrowTextDown' role=\"presentation\">-</span\n    ><span role=\"presentation\" class=\"dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span>\n    <span role=\"presentation\" data-dojo-attach-point='titleTextNode, textDirNode' class='dijitAccordionText'></span\n    >\n    <div class=\"accordionButtonWrapper\"><img src=\"${buttonImageSrc}\" alt=\"\" data-dojo-attach-point='accordionButtonIcon' class=\"accordionButtonIcon\">\n    </div>\n  </div> \n</div>\n","url:curam/widget/templates/ComboBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\"\n    role=\"listbox\"\n\taria-haspopup=\"true\"\n\tdata-dojo-attach-point=\"_popupStateNode\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdata-dojo-attach-point=\"_buttonNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"button presentation\" aria-hidden=\"true\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n    ><div class=\"dijitReset dijitInputField dijitInputContainer\" role=\"listbox\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdata-dojo-attach-point=\"textbox,focusNode\" role=\"textbox\"\n\t/></div\n></div>\n","url:dijit/layout/templates/_ScrollingTabControllerButton.html":"<div data-dojo-attach-event=\"ondijitclick:_onClick\" data-dojo-attach-point=\"focusNode\" role=\"button\">\n  <div role=\"presentation\" class=\"dijitTabInnerDiv\">\n    <div role=\"presentation\" class=\"dijitTabContent dijitButtonContents\">\n\t<span role=\"presentation\" class=\"dijitInline dijitTabStripIcon\" data-dojo-attach-point=\"iconNode\"></span>\n\t<span data-dojo-attach-point=\"containerNode,titleNode\" class=\"dijitButtonText\"></span>\n</div>  </div>\n</div>","url:dijit/layout/templates/TabContainer.html":"<div class=\"dijitTabContainer\">\n\t<div class=\"dijitTabListWrapper\" data-dojo-attach-point=\"tablistNode\"></div>\n\t<div data-dojo-attach-point=\"tablistSpacer\" class=\"dijitTabSpacer ${baseClass}-spacer\"></div>\n\t<div class=\"dijitTabPaneWrapper ${baseClass}-container\" data-dojo-attach-point=\"containerNode\"></div>\n</div>\n","url:dijit/templates/CheckedMenuItem.html":"<tr class=\"dijitReset\" data-dojo-attach-point=\"focusNode\" role=\"${role}\" tabIndex=\"-1\" aria-checked=\"${checked}\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<span class=\"dijitInline dijitIcon dijitMenuItemIcon dijitCheckedMenuItemIcon\" data-dojo-attach-point=\"iconNode\"></span>\n\t\t<span class=\"dijitMenuItemIconChar dijitCheckedMenuItemIconChar\">${!checkedChar}</span>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode,labelNode,textDirNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">&#160;</td>\n</tr>\n","url:dijit/form/templates/DropDownButton.html":"<span class=\"dijit dijitReset dijitInline\"\n\t><span class='dijitReset dijitInline dijitButtonNode'\n\t\tdata-dojo-attach-event=\"ondijitclick:__onClick\" data-dojo-attach-point=\"_buttonNode\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"focusNode,titleNode,_arrowWrapperNode,_popupStateNode\"\n\t\t\trole=\"button\" aria-haspopup=\"true\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\"\n\t\t\t\tdata-dojo-attach-point=\"iconNode\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonInner\"></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonChar\">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\" tabIndex=\"-1\"\n\t\tdata-dojo-attach-event=\"onclick:_onClick\" data-dojo-attach-point=\"valueNode\" aria-hidden=\"true\"\n/></span>\n","*now":function(r){
r(["dojo/i18n!*preload*dojo/nls/cdej-main*[\"ar\",\"ca\",\"cs\",\"da\",\"de\",\"el\",\"en-gb\",\"en-us\",\"es-es\",\"fi-fi\",\"fr-fr\",\"he-il\",\"hu\",\"it-it\",\"ja-jp\",\"ko-kr\",\"nl-nl\",\"nb\",\"pl\",\"pt-br\",\"pt-pt\",\"ru\",\"sk\",\"sl\",\"sv\",\"th\",\"tr\",\"zh-tw\",\"zh-cn\",\"ROOT\"]"]);
},"*noref":1}});
define("dojo/cdej-main",[],1);
require(["curam/define","curam/debug","curam/inspection/Layer","curam/util","curam/GlobalVars","curam/date","curam/dcl","curam/dialog","curam/date/locale","curam/validation","curam/html","curam/i18n","curam/lnf","curam/tab","curam/charting","curam/UIMController","curam/FastUIMController","curam/contentPanel","curam/inPageNavigation","curam/codetable-hierarchy","curam/omega3-util","curam/widgets","curam/ajax","curam/modal/CuramBaseModal","curam/modal/CuramCarbonModal","curam/ModalDialog","curam/layout/EmptyContentPane","curam/layout/CuramTabContainer","curam/layout/TabContainer","curam/layout/CuramStackController","curam/pagination","curam/pagination/ControlPanel","curam/pagination/StateController","curam/pagination/ExpandableListModel","curam/pagination/DefaultListModel","curam/validation/calendar","curam/tab/util","curam/tab/TabSessionManager","curam/tab/TabDescriptor","curam/ui/PageRequest","curam/ui/OpenTabEvent","curam/ui/ClientDataAccessor","curam/ui/UIMPageAdaptor","curam/ui/SectionShortcutsPanel","curam/util/AutoRecoveryAPI","curam/util/ui/form/CuramFormsAPI","curam/util/ui/form/renderer/GenericRendererFormEventsAdapter","curam/util/ui/form/renderer/TextEditRendererFormEventsAdapter","curam/util/ui/form/renderer/CTListEditRendererFormEventsAdapter","curam/util/ui/form/renderer/CheckboxEditRendererFormEventsAdapter","curam/util/ui/form/renderer/DateEditRendererFormEventsAdapter","curam/util/ScreenContext","curam/util/WordFileEdit","curam/util/TabActionsMenu","curam/util/ExpandableLists","curam/util/ListSort","curam/util/TabNavigation","curam/util/onLoad","curam/util/UimDialog","curam/util/Request","curam/util/LocalConfig","curam/util/Request","curam/util/LocalConfig","curam/util/Refresh","curam/util/external","curam/util/RuntimeContext","curam/util/FrequencyEditor","curam/util/Navigation","curam/util/DatePicker","curam/util/Dialog","curam/util/Dropdown","curam/util/EditableList","curam/util/SessionTimeout","curam/ModalUIMController","curam/widget/SearchTextBox","curam/widget/SearchMultipleTextBox","curam/widget/AppBannerFilteringSelect","curam/widget/AppBannerComboBoxMixin","curam/widget/_TabButton","curam/widget/ComboBox","curam/widget/DropDownButton","curam/widget/DeferredDropDownButton","curam/widget/FilteringSelect","curam/widget/Menu","curam/widget/OptimalBrowserMessage","curam/widget/TransferList","curam/widget/ProgressSpinner","dojo/require","dojo/parser","dojo/html","dojo/aspect","dojo/data/ItemFileReadStore","dojo/data/util/sorter","dojo/data/util/simpleFetch","dojo/data/util/filter","dojo/dnd/common","dojo/dnd/autoscroll","dojo/dnd/Mover","dojo/dnd/Moveable","dojo/dnd/TimedMoveable","dojo/dnd/move","dojo/i18n","dojo/regexp","dojo/cookie","dojo/DeferredList","dijit/main","dijit/MenuItem","dijit/_KeyNavContainer","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator","dijit/Menu","dijit/_HasDropDown","dijit/_DialogMixin","dijit/form/Select","dijit/form/FilteringSelect","dijit/form/ComboBox","dijit/form/ComboButton","dijit/form/_FormMixin","dijit/form/Button","dijit/form/ToggleButton","dijit/form/_FormSelectWidget","dijit/form/TextBox","dijit/layout/StackController","dijit/layout/AccordionPane","dijit/TitlePane","dijit/layout/BorderContainer","dijit/layout/TabController","dijit/layout/StackContainer","dijit/layout/_TabContainerBase","dijit/layout/TabContainer","dijit/MenuBar","dijit/MenuBarItem","dijit/PopupMenuBarItem","dijit/tree/TreeStoreModel","dijit/tree/ForestStoreModel","dijit/Tree","dijit/TooltipDialog","dijit/DialogUnderlay","dijit/Dialog","dijit/_BidiSupport","curam/ui/UIController","dijit/layout/ScrollingTabController","dojox/encoding/digests/_base","dojox/encoding/digests/SHA1","dojox/html/_base","dojox/layout/ExpandoPane","dojox/layout/ContentPane","curam/layout/ExpandoPane","curam/layout/AccordionContainer"]);
