<?xml version="1.0" encoding="UTF-8"?>
<project default="runInprogressPurgeBatch"  name="BDMBankAccountIntegrityBatch">

    <property name="chunker" value="curam.ca.gc.bdm.batch.bdmpurgeinprogressapplication.impl.BDMPurgeInProgressApplicationDataProcess.process"/>
	<property name="stream" value="curam.ca.gc.bdm.batch.bdmpurgeinprogressapplication.impl.BDMPurgeInProgressApplicationDataProcessStream"/>
	
	<property name="batch" value="BDMPurgeInprogressApplicationBatch"/>
  
	<import file="BDMBatchBase.xml"/>
	
	<target name="runInprogressPurgeBatch">
		<parallel failonany="true" timeout="5400000">
			<antcall target="BDMBatchBase.runStream">
				<param name="batch.program" value="${stream}"/>
				<param name="batch.parameters" value="${batch.parameters}"/>
				<param name="streamNo" value="1"/>
				<param name="batch" value="${batch}"/>
			</antcall>
			<sequential>
				<sleep seconds="5"/>
				<antcall target="BDMBatchBase.runStream">
					<param name="batch.program" value="${stream}"/>
					<param name="batch.parameters" value="${batch.parameters}"/>
					<param name="streamNo" value="2"/>
					<param name="batch" value="${batch}"/>
				</antcall>
			</sequential>
			<sequential>
				<sleep seconds="20"/>
				<antcall target="BDMBatchBase.runChunker">
					<param name="batch.program" value="${chunker}"/>
					<param name="batch.parameters" value="${batch.parameters}"/>
					<param name="batch" value="${batch}"/>
				</antcall>
			</sequential>
		</parallel>
	</target>
</project>
